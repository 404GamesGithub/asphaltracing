"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[5676],{29850:(e,t,a)=>{a.d(t,{Z:()=>i});var r,n,s=a(87363);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},o.apply(this,arguments)}const i=e=>s.createElement("svg",o({fill:"none",viewBox:"0 0 18 18",xmlns:"http://www.w3.org/2000/svg"},e),r||(r=s.createElement("rect",{width:"100%",height:"100%",rx:4})),n||(n=s.createElement("path",{fill:"currentColor",d:"M5.456 7.846 3.95 9.353l4.02 4.02 1.507-1.507L14.5 6.84l-1.507-1.507-5.025 5.025z"})))},30182:(e,t,a)=>{a.d(t,{N:()=>r});var r=function(){return"undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement}},99815:(e,t,a)=>{a.d(t,{H:()=>r});a(87363);const r=(0,a(86976).Z)({resolved:{},chunkName:()=>"HorizontalAccentThumbGameInfo.component.async",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!a.m[t]},importAsync:()=>a.e(5123).then(a.bind(a,57112)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return a(t)},resolve:()=>57112},{resolveComponent:e=>e.HorizontalAccentThumbGameInfo})},82521:(e,t,a)=>{a.d(t,{P:()=>r});a(87363);const r=(0,a(86976).Z)({resolved:{},chunkName:()=>"VerticalAccentThumbGameInfo.component.async",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!a.m[t]},importAsync:()=>a.e(8414).then(a.bind(a,36465)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return a(t)},resolve:()=>36465},{resolveComponent:e=>e.VerticalAccentThumbGameInfo})},73832:(e,t,a)=>{a.d(t,{Z:()=>r});a(87363);const r=(0,a(86976).Z)({resolved:{},chunkName:()=>"AuthDialog.component.async",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!a.m[t]},importAsync:()=>Promise.all([a.e(6122),a.e(6729),a.e(8946)]).then(a.bind(a,31387)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return a(t)},resolve:()=>31387},{ssr:!1})},37797:(e,t,a)=>{a.d(t,{V:()=>r});a(87363);const r=(0,a(86976).Z)({resolved:{},chunkName:()=>"ContinuePlayingBadge.component.async",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!a.m[t]},importAsync:()=>a.e(7292).then(a.bind(a,30625)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return a(t)},resolve:()=>30625},{resolveComponent:e=>e.ContinuePlayingBadge})},24415:(e,t,a)=>{a.d(t,{L:()=>r});a(87363);const r=(0,a(86976).Z)({resolved:{},chunkName:()=>"ContinuePlayingOverlay.component.async",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!a.m[t]},importAsync:()=>a.e(3509).then(a.bind(a,4492)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return a(t)},resolve:()=>4492},{resolveComponent:e=>e.ContinuePlayingOverlay})},89193:(e,t,a)=>{a.d(t,{Z:()=>r});a(87363);const r=(0,a(86976).Z)({resolved:{},chunkName:()=>"DebugPanel.component.async",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!a.m[t]},importAsync:()=>Promise.all([a.e(6122),a.e(5839),a.e(7671)]).then(a.bind(a,34402)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return a(t)},resolve:()=>34402},{ssr:!1})},86551:(e,t,a)=>{a.d(t,{i:()=>r});a(87363);const r=(0,a(86976).Z)({resolved:{},chunkName:()=>"ExpandingThumb.component.async",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!a.m[t]},importAsync:()=>a.e(9154).then(a.bind(a,94694)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return a(t)},resolve:()=>94694},{resolveComponent:e=>e.ExpandingThumb})},83919:(e,t,a)=>{a.d(t,{Z:()=>r});a(87363);const r=(0,a(86976).Z)({resolved:{},chunkName:()=>"Gallery.component.async",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!a.m[t]},importAsync:()=>Promise.all([a.e(6122),a.e(9427)]).then(a.bind(a,49257)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return a(t)},resolve:()=>49257},{ssr:!1})},39010:(e,t,a)=>{a.d(t,{Z:()=>r});a(87363);const r=(0,a(86976).Z)({resolved:{},chunkName:()=>"PassportRegistrationChecker.component.async",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!a.m[t]},importAsync:()=>a.e(6952).then(a.bind(a,94642)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return a(t)},resolve:()=>94642},{ssr:!1})},48225:(e,t,a)=>{a.d(t,{Z:()=>r});a(87363);const r=(0,a(86976).Z)({resolved:{},chunkName:()=>"BalanceRefilled.component.async",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!a.m[t]},importAsync:()=>a.e(4521).then(a.bind(a,41004)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return a(t)},resolve:()=>41004},{ssr:!1})},92999:(e,t,a)=>{a.d(t,{Z:()=>r});a(87363);const r=(0,a(86976).Z)({resolved:{},chunkName:()=>"Feedback.component.async",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!a.m[t]},importAsync:()=>Promise.all([a.e(6122),a.e(7110)]).then(a.bind(a,14643)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return a(t)},resolve:()=>14643},{ssr:!1})},55191:(e,t,a)=>{a.d(t,{Z:()=>r});a(87363);const r=(0,a(86976).Z)({resolved:{},chunkName:()=>"ShowMore.component.async",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!a.m[t]},importAsync:()=>a.e(3670).then(a.bind(a,74968)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return a(t)},resolve:()=>74968},{})},59389:(e,t,a)=>{a.d(t,{Z:()=>r});a(87363);const r=(0,a(86976).Z)({resolved:{},chunkName:()=>"MergeConflictsDialog.component.async",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!a.m[t]},importAsync:()=>a.e(3925).then(a.bind(a,85274)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return a(t)},resolve:()=>85274},{})},11775:(e,t,a)=>{a.d(t,{Z:()=>r});a(87363);const r=(0,a(86976).Z)({resolved:{},chunkName:()=>"PlayGameHeaderMenu.component.async",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!a.m[t]},importAsync:()=>Promise.all([a.e(5839),a.e(4932)]).then(a.bind(a,60788)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return a(t)},resolve:()=>60788},{})},69833:(e,t,a)=>{a.d(t,{Z:()=>r});a(87363);const r=(0,a(86976).Z)({resolved:{},chunkName:()=>"PlayPurchaseDialog.component.async",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!a.m[t]},importAsync:()=>Promise.all([a.e(6122),a.e(5839),a.e(6729),a.e(8726)]).then(a.bind(a,24903)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return a(t)},resolve:()=>24903},{ssr:!1})},43633:(e,t,a)=>{a.d(t,{Z:()=>r});a(87363);const r=(0,a(86976).Z)({resolved:{},chunkName:()=>"PlaySimilarGamesManager.component.async",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!a.m[t]},importAsync:()=>a.e(9359).then(a.bind(a,79837)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return a(t)},resolve:()=>79837},{})},33196:(e,t,a)=>{a.d(t,{Z:()=>s});a(87363);var r=a(86976),n=a(1481);const s=(0,r.Z)({resolved:{},chunkName:()=>"Promo.component.async",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!a.m[t]},importAsync:()=>Promise.all([a.e(6122),a.e(6729),a.e(3660)]).then(a.bind(a,30422)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return a(t)},resolve:()=>30422},{ssr:!1,error:n.Z})},65084:(e,t,a)=>{a.d(t,{K:()=>r});a(87363);const r=(0,a(86976).Z)({resolved:{},chunkName:()=>"Promocodes.component.async",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!a.m[t]},importAsync:()=>Promise.all([a.e(6122),a.e(3675)]).then(a.bind(a,81904)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return a(t)},resolve:()=>81904},{resolveComponent:e=>e.Promocodes})},33381:(e,t,a)=>{a.d(t,{Z:()=>r});a(87363);const r=(0,a(86976).Z)({resolved:{},chunkName:()=>"ShortcutPopup.component.async",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!a.m[t]},importAsync:()=>a.e(6587).then(a.bind(a,71742)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return a(t)},resolve:()=>71742},{})},41103:(e,t,a)=>{a.d(t,{Z:()=>r});a(87363);const r=(0,a(86976).Z)({resolved:{},chunkName:()=>"ShortcutManager.component.async",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!a.m[t]},importAsync:()=>a.e(18).then(a.bind(a,38330)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return a(t)},resolve:()=>38330},{ssr:!1})},89775:(e,t,a)=>{a.d(t,{Z:()=>r});a(87363);const r=(0,a(86976).Z)({resolved:{},chunkName:()=>"UserActivityPopup.component.async",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!a.m[t]},importAsync:()=>a.e(987).then(a.bind(a,11059)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return a(t)},resolve:()=>11059},{})},81839:(e,t,a)=>{a.d(t,{Z:()=>s});a(87363);var r=a(86976),n=a(77976);const s=(0,r.Z)({resolved:{},chunkName:()=>"GameInfo.component.async",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!a.m[t]},importAsync:()=>Promise.all([a.e(6122),a.e(5839),a.e(6013),a.e(805)]).then(a.bind(a,39466)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return a(t)},resolve:()=>39466},{error:n.Z})},17780:(e,t,a)=>{a.d(t,{E:()=>n});var r=a(95765);const n=({baseUrl:e,path:t,lang:a,languages:n,tld:s="ru"})=>{let o="";void 0!==a&&(o=(({lang:e,languages:t,tld:a})=>"com"===a&&"en"!==e&&t.includes(e))({languages:n,lang:a,tld:s})?`${a}/`:"");let i=`${e}${o?`/${o.replace(/\/*$/,"")}`:""}${t}`;return o&&(i=(0,r.D)(i)),i}},33509:(e,t,a)=>{a.d(t,{X:()=>b});var r=a(87363),n=a.n(r),s=a(72853),o=a(29850),i=a(9579),l=a(40006);const d={"sz-18":"checkbox-critical-module__sz-18--bkrJI","align-top":"checkbox-critical-module__align-top--LZGTh","align-center":"checkbox-critical-module__align-center--P6SxJ","align-bottom":"checkbox-critical-module__align-bottom--YTlvt",checkbox:"checkbox-critical-module__checkbox--QSq4A",checked:"checkbox-critical-module__checked--iGuDb",disabled:"checkbox-critical-module__disabled--BAmph",part:"checkbox-critical-module__part--XjCPu",control:"checkbox-critical-module__control--gdlIp",tick:"checkbox-critical-module__tick--Csl14",wrapper:"checkbox-critical-module__wrapper--XCy8g"};let c;var u=Object.defineProperty,h=Object.defineProperties,p=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,v=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,y=(e,t,a)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;const f={...(c=a(56213))&&c.default||{}},w=(0,r.forwardRef)(((e,t)=>{const a=e,{align:c="center",className:u="",size:w,checked:b=!1,disabled:E=!1,onChange:k,onKeyDown:S,onKeyUp:A,label:I}=a,P=((e,t)=>{var a={};for(var r in e)v.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&m)for(var r of m(e))t.indexOf(r)<0&&g.call(e,r)&&(a[r]=e[r]);return a})(a,["align","className","size","checked","disabled","onChange","onKeyDown","onKeyUp","label"]),T=`input-${(0,r.useId)()}`,C=(0,r.useCallback)((e=>{!E&&(null==k||k(e))}),[E,k]),R=(0,l.c)({variant:"checkbox-label"});return n().createElement("div",{className:(0,i.y)(d.checkbox,E&&d.disabled,b&&d.checked,d[`align-${c}`],d[`sz-${w}`])},I&&n().createElement("label",{className:(0,i.y)(d.part,f.label,R),htmlFor:T},I),n().createElement("div",{className:(0,i.y)(d.wrapper,d.part)},n().createElement("div",{className:(0,i.y)(d.tick)},b&&n().createElement(s.Z,{size:18},n().createElement(o.Z,null))),n().createElement("input",(D=((e,t)=>{for(var a in t||(t={}))v.call(t,a)&&y(e,a,t[a]);if(m)for(var a of m(t))g.call(t,a)&&y(e,a,t[a]);return e})({type:"checkbox"},P),L={autoComplete:"off",checked:b,className:(0,i.y)(u,d.control),disabled:E,id:T,ref:t,onChange:C},h(D,p(L))))));var D,L}));w.displayName="Checkbox";const b=(0,r.memo)(w)},11286:(e,t,a)=>{a.r(t),a.d(t,{default:()=>qa});var r=a(38096),n=a(85383),s=a(94199),o=a(84819),i=a(63904),l=a.n(i),d=a(87363),c=a.n(d),u=a(91294),h=a(53726),p=a(10719),m=a(31320),v=a(28250),g=a(97808),y=a(43876),f=a(33252),w=a(40656),b=a(93298);const E=class{};E.achvPropsNamesMapping={slug:"id",status:"type",target:"cost",title:"name"},E.achvPropsValuesMapping={target:({goal:e})=>e},E.achvStatusMapping={allGlobal:"all_global",allLocal:"all_local",completed:"completed",inProgress:"in_progress",expired:"expired"},E.mapAcvToAchvEntity=e=>Object.entries(e).reduce(((e,[t,a])=>{const r=E.achvPropsValuesMapping[t];let n=a;return r&&(n=r(a)),e[E.achvPropsNamesMapping[t]||t]=n,e}),{}),E.mapAchvStatus=e=>E.achvStatusMapping[e];let k=E;var S=Object.defineProperty,A=Object.getOwnPropertySymbols,I=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable,T=(e,t,a)=>t in e?S(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,C=(e,t)=>{for(var a in t||(t={}))I.call(t,a)&&T(e,a,t[a]);if(A)for(var a of A(t))P.call(t,a)&&T(e,a,t[a]);return e},R=(e,t,a)=>new Promise(((r,n)=>{var s=e=>{try{i(a.next(e))}catch(e){n(e)}},o=e=>{try{i(a.throw(e))}catch(e){n(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(s,o);i((a=a.apply(e,t)).next())}));const D=class{};D.setProgressErrMsg="Achievements | setProgress: cannot set achievement progress",D.getProgressErrMsg="Achievements | getProgress: cannot get achievement progress",D.getListErrMsg="Achievements | getList: cannot load achievements list",D.incorrectActionTypeErrMsg="Incorrect action type",D.logPrefix="Achievements | Parent frame",D.logColor={background:"#355c7d",text:"#ffffff"},D.debugLog=(0,b.M$)(D.logPrefix,b.XG.Dev,D.logColor),D.path="/achievements",D.timeout=5*w.WT*(0,m.n)(),D.lang=v.I.RU,D.isInitialized=!1,D.init=e=>{D.lang=e,D.isInitialized||(g.Z.onExternalMessage(p.y0,D.onMessage),D.isInitialized=!0)},D.onMessage=({data:{type:e,action:t,data:a}},r)=>{const n=e=>r({data:{success:!0,result:e}}),s=e=>r({data:{success:!1,error:e}});switch(D.debugLog(`received ${p.y0} messages event: `,e,t,a),t){case"setProgress":D.setProgress(a).then(n).catch((()=>s(D.setProgressErrMsg)));break;case"getProgress":D.getList(null,null==a?void 0:a.id).then((e=>{if(!e.length)return Promise.reject();n(e[0].progress)})).catch((()=>s(D.getProgressErrMsg)));break;case"getList":D.getList((null==a?void 0:a.status)||null).then(n).catch((()=>s(D.getListErrMsg)));break;default:D.log(new Error(`${D.incorrectActionTypeErrMsg}: ${t}`))}},D.setProgress=(...e)=>R(D,[...e],(function*(e={}){const{id:t,progress:a}=e;return t&&void 0!==a?D.fetch([],{method:"PATCH",body:JSON.stringify({slug:t,progress:{score:a}}),headers:new Headers({"content-type":"application/json"})}).then((({data:e})=>k.mapAcvToAchvEntity(e))):Promise.reject()})),D.getList=(e,t="")=>R(D,null,(function*(){if(Boolean(e&&e.length)===Boolean(t))return Promise.reject();const a=[["lang",D.lang]];return e&&e.length&&a.push(["status",k.mapAchvStatus(e[0])]),t&&a.push(["slug",t]),D.fetch(a).then((({data:e})=>e.map((e=>k.mapAcvToAchvEntity(e)))))})),D.fetch=(...e)=>R(D,[...e],(function*(e=[],t={}){const a=new URLSearchParams(e).toString();return(0,y.rQ)({apiPath:`${D.path}${a?"?"+a:""}`,options:C(C({},{credentials:"include",method:"GET"}),t),timeout:D.timeout}).catch((e=>{throw D.log(e),e}))})),D.log=({name:e="Error",message:t="Unknown achievements error"},a="")=>{const r=`${e}: ${t}`;D.debugLog(r),(0,f.H)({block:D.logPrefix,message:r,source:D.logPrefix,sourceMethod:a})};let L=D;const O=(0,d.memo)((({lang:e})=>((0,d.useEffect)((()=>L.init(e)),[e]),c().createElement(c().Fragment,null))));var _=a(89034),x=a(87936),N=a(23678),B=a(4824),M=a(24674),H=a(59303),F=a(19146);const $=a(73832).Z;var W=a(33119),Z=a(68279),G=a(21466),j=a(32062),U=a(42126),q=a(58432),V=a(83242),z=a(76488),K=a(23617),Y=a(34967),X=a(77901),J=a(49659),Q=(e,t,a)=>new Promise(((r,n)=>{var s=e=>{try{i(a.next(e))}catch(e){n(e)}},o=e=>{try{i(a.throw(e))}catch(e){n(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(s,o);i((a=a.apply(e,t)).next())}));const ee=(0,b.M$)("auth-dialog-manager",b.XG.Dev);class te extends d.Component{constructor(e){var t;super(e),this.state={requestId:"",visible:!1},this.checkLogin=()=>{const e=(0,V.e)(this.authCookieName);this.login&&e&&this.login!==e&&(ee("AuthDialogManager: change_account"),(0,Y.U4)({},{backgroundAuthChange:"change_account"})),this.login=e},this.onInternalMessage=(e,t)=>{const{action:a,data:r}=e.data;if(this.isDisabled)return t({error:new Error("auth disabled")});"open"!==a&&"open-auth-window"!==a||(this.close(),this.setState({requestId:r.requestId},(()=>{this.createAuthPromise(e,t)})))},this.onAuthChanged=e=>{const{action:t,data:a}=e.data;["changed","auth-dialog-success"].includes(t)&&a.hasAuth!==this.props.hasAuth&&this.props.getUserPassport()},this.onDialogApply=()=>{this.sendParams("ok");const e=this._openAuthWindow();e?this.resolvePromise(e):this.rejectPromise(new Z.Z({code:"AUTH_WINDOW_REJECTED",message:"Can not open auth window."})),this.close()},this.onDialogClose=()=>{this.sendParams("cancel"),this.close()};const a=(null==(t=(0,r.getDomainConfig)().auth)?void 0:t.provider)===H.Xi.XSOLLA;this.authCookieName=a?"xsolla_login":"yandex_login",this.login=(0,V.e)(this.authCookieName)}componentDidMount(){g.Z.onInternalMessage("auth-dialog",this.onInternalMessage),g.Z.onInternalMessage("auth",this.onAuthChanged,{withHistory:!0}),document.addEventListener("visibilitychange",this.checkLogin)}componentWillUnmount(){g.Z.offInternalMessage("auth-dialog",this.onInternalMessage),g.Z.offInternalMessage("auth",this.onAuthChanged),document.removeEventListener("visibilitychange",this.checkLogin)}componentDidUpdate(e){e.hasAuth!==this.props.hasAuth&&(this.login=(0,V.e)(this.authCookieName),this.props.hasAuth?this.props.fetchPlatformSubscriptions():this.props.clearPlatformSubscriptions())}createAuthPromise(e,t){const{action:a,data:r}=e.data;let n;switch(a){case"open-auth-window":n=this.openAuthWindow(!1,r.origin);break;case"open":n=this.open();break;default:return}n.then((e=>t({data:{authWindow:e}}))).catch((e=>{ee(`${a} auth dialog error`,e),t({error:e})}))}sendParams(e){(0,Y.U4)({},{borrowParams:{sdk:{auth:{dialog:e,appId:this.context.playPageData.gameInfo.appId}}}})}open(){return Q(this,null,(function*(){if(this.props.hasAuth)return;if(!this.props.inCurrentTab){const e=yield this._tryOpenAuthWindowOnStart();if(e)return Promise.resolve(e)}const e=this.setPromise();return this.showDialog(),e.promise}))}openAuthWindow(e=!1,t){return Q(this,null,(function*(){if(e)return Promise.resolve(this._openAuthWindow(t)||void 0);const{data:a}=yield g.Z.post({type:"auth",action:"has-auth"}),{hasAuth:r}=a;return!r&&this._openAuthWindow(t)||void 0}))}_tryOpenAuthWindowOnStart(){return function(){const{userAgent:e}=window.navigator;return!/^((?!chrome|android).)*safari/i.test(e)&&!/\sFirefox\//.test(e)&&!!/\sChrome\//.test(e)}()&&this.openAuthWindow()||Promise.resolve(void 0)}showDialog(){this.setState({visible:!0})}setPromise(){if(this.openPromise)return this.openPromise;let e=()=>{},t=()=>{};const a={promise:new Promise(((a,r)=>{e=a,t=r})),resolve:e,reject:t};return this.openPromise=a,a}resolvePromise(e){this.openPromise&&(this.openPromise.resolve(e),this.openPromise=null)}rejectPromise(e){this.openPromise&&(this.openPromise.reject(e),this.openPromise=null)}close(){this.setState({requestId:"",visible:!1}),this.rejectPromise(new Z.Z({code:"AUTH_DIALOG_CANCEL",message:"User canceled auth dialog."}))}_openAuthWindow(e="games_sdk_auth"){const t=(0,X.zd)(),a=(0,q.KT)(),n=(0,M.Me)(a,M.QQ.ByteApp),s=this.props.inCurrentTab||t||n||this.context.isTranssion,{provider:o}=(0,r.getDomainConfig)().auth||{};let i="";s?(i=(0,J.e)().href,n&&(i=(0,U.Z)({url:i,params:{clid:a}}))):i=(0,G.EP)(`${(0,J.e)().origin}${this.context.baseUrl}/sdk/static/auth-retpath.html?req-id=${encodeURIComponent(this.state.requestId)}&origin=${encodeURIComponent(window.origin)}&version=${encodeURIComponent(this.context.version)}`);const l=(0,K.x)()?z.tu:"";let d=`https://${(0,z.GH)()}/auth${l}?from=game&origin=${encodeURIComponent(e)}&retpath=${encodeURIComponent(i)}`;const{requestId:c}=this.state;if(this.props.isOauth){if(!c)return void(0,f.H)({},new Error("No requestId for OAuthURL"));d=j.Z.getOauthUrl(c)}else if(o===H.Xi.XSOLLA){if(!c)return void(0,f.H)({},new Error("No requestId for XSollaUrl"));d=j.Z.getXsollaAuthUrl(c)}if(!s)return window.open(d,"_blank");window.location.href=d}get isDisabled(){const e=(0,q.KT)();return(0,M.Me)(e,M.QQ.PlayGames)}render(){return this.state.visible?c().createElement($,{onApply:this.onDialogApply,onClose:this.onDialogClose}):null}}te.contextType=B.Z;const ae=(0,h.$j)((function(e){return{isOauth:e.userData.isOauth,hasAuth:Boolean(e.userData.login)}}),(function(e){return(0,F.DE)({getUserPassport:W.Ps,fetchPlatformSubscriptions:W.VR,clearPlatformSubscriptions:W.cp},e)}))(te);var re=a(68797),ne=a(24029),se=a(88372),oe=a(26108),ie=a(92999),le=a(11324),de=a(79409),ce=a(35090),ue=a(41811);class he extends B.P{constructor(){super(...arguments),this.state={dialogIsRequested:!1,dialogWasRequested:!1,isCanShow:!1,reason:"UNKNOWN",wasTriggered:!1},this.onInternalMessage=e=>{var t,a;if("request-review"===e.data.action){this.setState({dialogIsRequested:!0});const{gameInfo:e}=this.context.playPageData,r=null==(a=null==(t=this.context.playPageData)?void 0:t.gameData)?void 0:a.media;this.props.dispatch((0,W.N3)({appID:parseInt(e.appId,10),gameID:e.appId,pictureUrl:r?(0,le.Jn)(r,{size:ue.xY.YOUR_GAMES}):"",game:e,gameName:e.title}))}},this.onExternalMessage=(e,t)=>{switch(e.data.action){case"request-review":this.setPromise(),this.openPopupDialog().then((e=>{this.setState({dialogIsRequested:!1},(()=>{t({data:e})}))})).catch((e=>{t({data:{feedbackSent:!1,reason:e}})}));break;case"can-review":this.releasePromise(),this.canShowPopup().then((({hasAuth:e,rated:a,isCanShow:r,reason:n})=>{r?this.setState({isCanShow:r},(()=>{t({data:{value:r}})})):this.state.wasTriggered&&n?t({data:{reason:n,value:r}}):a?this.setState({reason:"GAME_RATED",wasTriggered:!0},(()=>{t({data:{reason:"GAME_RATED",value:!1}})})):e?this.setState({isCanShow:!0,wasTriggered:!0},(()=>{t({data:{value:!0}})})):this.setState({reason:"NO_AUTH",wasTriggered:!0},(()=>{t({data:{reason:"NO_AUTH",value:!1}})}))})).catch((()=>{this.setState({reason:"UNKNOWN",wasTriggered:!0},(()=>{t({data:{reason:"UNKNOWN",value:this.state.isCanShow}})}))}))}}}componentDidMount(){var e;const{gameInfo:t}=this.context.playPageData,a=null==(e=this.context.playPageData.gameData)?void 0:e.media;this.props.dispatch((0,W.N3)({appID:parseInt(t.appId,10),gameID:t.appId,pictureUrl:a?(0,le.Jn)(a,{size:ue.xY.YOUR_GAMES}):"",game:t,gameName:t.title})),g.Z.onExternalMessage("feedback",this.onExternalMessage),g.Z.onInternalMessage("feedback",this.onInternalMessage)}componentWillUnmount(){g.Z.offExternalMessage("feedback",this.onExternalMessage),g.Z.offInternalMessage("feedback",this.onInternalMessage),this.props.dispatch((0,W.N3)({appID:null,gameID:null,rating:0,text:""}))}componentDidUpdate(e){if(this.promiseWrapper&&e.appID&&!this.props.appID&&["ready","success","error"].includes(e.state)){const{result:t,state:a}=e;"success"===a?this.promiseWrapper.resolve(t):this.promiseWrapper.reject(new Error("Unknown")),this.promiseWrapper=void 0}}releasePromise(){this.promiseWrapper&&(this.promiseWrapper.reject(new Error("Reject")),this.promiseWrapper=void 0)}setPromise(){this.releasePromise(),this.promiseWrapper=new oe.Z}canShowPopup(){return new Promise(((e,t)=>{if((0,K.x)())return e({isCanShow:!1,reason:"REQUESTED_FROM_TV"});const{feedbackSettings:a}=(0,r.getDomainConfig)();if(!(0,de.w)(this.context.tld,null==a?void 0:a.allowedTlds))return e({isCanShow:!1,reason:"UNKNOWN"});g.Z.post({type:"auth",action:"has-auth"}).then((({data:a})=>{const{hasAuth:r}=a;if(r&&z.XK&&"NO_AUTH"===this.state.reason)return void e({isCanShow:!0});if(this.state.wasTriggered&&this.state.isCanShow)return void e({isCanShow:this.state.isCanShow});if(this.state.wasTriggered&&!this.state.dialogIsRequested&&!this.state.dialogWasRequested)return void e({isCanShow:this.state.isCanShow,reason:this.state.reason});if(!r&&z.XK)return void e({isCanShow:!1,reason:"NO_AUTH"});if(this.state.dialogIsRequested)return void e({isCanShow:!1,reason:"REVIEW_ALREADY_REQUESTED"});if(this.state.dialogWasRequested)return void e({isCanShow:!1,reason:"REVIEW_WAS_REQUESTED"});const{appId:n}=this.context.playPageData.gameInfo;this.props.dispatch((0,W.bq)(parseInt(n,10))).then(e).catch(t)}))}))}openPopupDialog(){var e;return this.state.wasTriggered&&this.state.isCanShow&&!this.state.dialogIsRequested&&!this.state.dialogWasRequested||(0,ce._G)()?(this.setState({dialogIsRequested:!0,dialogWasRequested:!0,isCanShow:!1}),(null==(e=this.promiseWrapper)?void 0:e.promise)||Promise.reject(new Error("Unexpected error"))):Promise.reject(new Error("Unexpected usage (use canReview before requestReview)"))}render(){return this.state.dialogIsRequested?c().createElement(ie.Z,null):null}}const pe=(0,h.$j)((function(e){return{appID:e.feedback.appID,rating:e.feedback.rating,result:e.feedback.result,state:e.feedback.state}}))(he);var me=a(75007),ve=a(93961),ge=a(15408),ye=a(37341);const fe=(0,d.memo)((()=>{const{gameplaySwitch:e}=(0,ye.jT)(),t=(0,d.useCallback)((({data:t})=>e(t.action)),[e]);return(0,d.useEffect)((()=>(g.Z.onExternalMessage(p.Tn,t,{withHistory:!1}),()=>g.Z.offExternalMessage(p.Tn,t))),[t]),c().createElement(c().Fragment,null)}));var we=a(25873),be=a(17431);const Ee=()=>{const[e,t]=(0,d.useState)(""),a=(0,d.useCallback)((e=>{"show"===e.data.action&&t(e.data.data.message)}),[]);return(0,d.useEffect)((()=>(g.Z.onInternalMessage("message-box",a),()=>{g.Z.offInternalMessage("message-box",a)})),[a]),e?c().createElement(be.Z,{autohide:!0},e):null},ke=a(5422).Z,Se=a(39010).Z;var Ae=a(53533),Ie=a(58613),Pe=a(46211);const Te=(0,b.M$)("PlatformSubscriptions",b.XG.Dev);class Ce extends d.PureComponent{componentDidMount(){Te("componentDidMount"),this.removeExpiredSubscriptions(),Boolean(this.props.userData.login)&&Math.abs(Date.now()-this.props.subscriptions.time)>w.dV&&this.props.fetchPlatformSubscriptions()}componentWillUnmount(){this.removeExpiredSubscriptionsTimeout&&window.clearTimeout(this.removeExpiredSubscriptionsTimeout)}componentDidUpdate(e){const t=e.subscriptions,a=this.props.subscriptions;JSON.stringify(t)!==JSON.stringify(a)&&Te("Subscriptions was updated",this.props.subscriptions)}removeExpiredSubscriptions(){Te("removeExpiredSubscriptions");const{subscriptions:e,time:t,ver:a}=this.props.subscriptions;if("object"!=typeof e||"number"!=typeof t||a!==Ie.iY||Math.abs(Date.now()-t)>w.s2)this.props.setPlatformSubscriptions(Ie.$F.platformSubscriptions);else{let r=!1;Object.keys(e).forEach((t=>{const a=e[t],n=a.time?a.time+a.duration:a.expired;(function(e){return"object"==typeof e&&"number"==typeof e.duration&&"number"==typeof e.expired})(a)&&Date.now()<n||(Te(`remove "${t}" subscription`),delete e[t],r=!0)})),r&&this.props.setPlatformSubscriptions({subscriptions:e,time:t,ver:a})}this.removeExpiredSubscriptionsTimeout=window.setTimeout((()=>this.removeExpiredSubscriptions()),w.dV)}render(){return null}}const Re=(0,h.$j)((function(e){const{value:t,error:a}=(0,Pe.c)(e);return{subscriptions:t,error:a,userData:e.userData}}),(function(e){return(0,F.DE)({fetchPlatformSubscriptions:W.VR,setPlatformSubscriptions:W.Cg},e)}))(Ce);var De=a(31327),Le=a(40532),Oe=a(37197);const _e=a(75612).Z;var xe=a(96349),Ne=a(65044),Be=a(17780),Me=a(27522),He=a(96763),Fe=a(5718),$e=a(35543),We=a(93569),Ze=a(14943),Ge=a(18455),je=a(3462),Ue=a(8804),qe=a(40184),Ve=a(11510);const ze=l().with("play-guard-dialog"),Ke=({onAuthButtonClick:e})=>{var t;const a=(0,Ve.T)(),{playPageData:{gameSettings:n}}=(0,qe.b)(),s=(0,h.v9)((e=>Boolean(e.userData.login))),{disableLogin:o}=(0,r.getDomainConfig)().auth||{};return o?null:!s&&Boolean(null==(t=n.features)?void 0:t.user_data_required)?c().createElement("div",{className:ze("authorize")},c().createElement("div",{className:ze("authorize-description")},a("guard.player.auth.description")),c().createElement(Ue.z,{"data-guard-auth":"true","data-testid":"PlayGuardAuthorize-Button",size:32,type:"submit",view:"secondary",onClick:e},a("common.login"))):null};var Ye=a(74795),Xe=a(15771);const Je=()=>c().createElement(We.Z,{type:"play"}),Qe=({className:e,onClick:t})=>{const a=(0,Ve.T)()("common.play.notable");return c().createElement(Ye.Z,{className:e,"data-guard-accept":"play_button",iconLeft:Je,size:"l",type:"submit",view:"play",onClick:t},a)},et=({children:e,className:t,onClick:a})=>{var n,s;const o=(0,d.useContext)(B.Z),{componentsSettings:i}=(0,r.getDomainConfig)(),l=(null==(n=i.buttons)?void 0:n.playGuardApplySize)||"l",u=(null==(s=i.buttons)?void 0:s.playGuardApplyView)||"action";return(0,Xe.Nt)(o.abt.flags)?c().createElement(Qe,{className:t,onClick:a}):c().createElement(Ye.Z,{className:t,"data-guard-accept":"play_button",size:l,type:"submit",view:u,onClick:a},e)};var tt=a(4230),at=a(36172),rt=a(92901),nt=a(28705),st=a(98343),ot=a(73285);function it(e){const t=function(e){let t=1;for(let a=1e3;a>1;a/=10)if(e>=a){t=a;break}return t}(e);return Math.floor(e/t)*t}function lt(e){const t=it(e);let a="";try{a=new Intl.NumberFormat("ru-RU").format(t)}catch(e){a=function(e){let t=`${e}`,a="0";for(;t.length>0;){const e=t.slice(-3);t=t.slice(0,-3),a=a?`${e} ${a}`:e}return a}(t)}return t>10&&(a+="+"),a}var dt=a(82027),ct=a(68108),ut=a(68199),ht=a(69838),pt=a(57681),mt=a(29008),vt=Object.defineProperty,gt=Object.defineProperties,yt=Object.getOwnPropertyDescriptors,ft=Object.getOwnPropertySymbols,wt=Object.prototype.hasOwnProperty,bt=Object.prototype.propertyIsEnumerable,Et=(e,t,a)=>t in e?vt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;a(75801);const kt=l().with("play-guard-dialog");kt("header-cancel-link"),kt("permission-checkbox"),kt("apply-button");class St extends B.P{constructor(){super(...arguments),this.hasMounted=!1,this.aboutGameConversionDataEvents={isClicked:!1,isRendered:!1},this.state={isSimilarGamesEnables:this.isSimilarGamesEnabled()},this.handleEarlyEvents=()=>{var e;null==(e=window.earlyEvents)||e.messages.forEach((e=>{const{type:t,action:a,data:r}=e;if("guard"===t)switch(a){case"auth":this.auth();break;case"close":this.cancel();break;case"accept":this.apply(r.actionSource)}}))},this.handleFocusOutEvent=e=>{requestAnimationFrame((()=>{if(document.activeElement===(0,rt.n)()){window.focus();const t=e.target;t&&"focus"in t&&"function"==typeof t.focus&&t.focus()}}))},this.onAuthButtonClick=()=>{this.auth()},this.onApplyButtonClick=()=>{this.apply(H.EO.PlayButton)},this.onExternalClick=e=>{this.props.handleEvent(new CustomEvent("apply",{detail:{actionSource:H.EO.Background}}))},this.onContentClick=e=>{e.stopPropagation()},this.onOpenInfoClick=e=>{e.stopPropagation(),this.logOnceAboutGameConversionDataEventsIsClicked(),this.props.handleEvent(new CustomEvent("info")),g.Z.post({type:"promo-bar",action:"hide"})},this.apply=e=>{this.props.handleEvent(new CustomEvent("apply",{detail:{actionSource:e}}))},this.auth=()=>{this.props.handleEvent(new CustomEvent("auth"))},this.cancel=()=>{this.props.handleEvent(new CustomEvent("cancel"))}}componentDidMount(){var e,t;this.hasMounted=!0,window.focus(),window.addEventListener("focusout",this.handleFocusOutEvent),this.setState((e=((e,t)=>{for(var a in t||(t={}))wt.call(t,a)&&Et(e,a,t[a]);if(ft)for(var a of ft(t))bt.call(t,a)&&Et(e,a,t[a]);return e})({},this.state),t={isSimilarGamesEnables:this.isSimilarGamesEnabled()},gt(e,yt(t)))),this.handleEarlyEvents()}componentWillUnmount(){window.removeEventListener("focusout",this.handleFocusOutEvent)}isSimilarGamesEnabled(){const{abt:{flags:e},playPageData:t,isDistGame:a}=this.context,{location:r}=this.props;return(0,tt._Z)({appId:t.gameInfo.appId,hasMounted:this.hasMounted,isDistGame:a,locationHash:r.hash,locationSearch:r.search,showExceptNavigationFromPlayedGames:(0,Xe.tQ)(e),showOnRedirectFromCatalog:(0,Xe.Fe)(e)})}isAdvStickyBannerEnabled(){const{settings:e}=this.context.playPageData.gameData||{},{adv:t}=(0,nt.Lf)(e);return this.context.playPageData.isAdvStickyBannerEnabled&&Boolean(t)}get texts(){const{getText:e}=this.props,{gamesLogoUrlText:t,gamesLogoUrlYandexName:a,verticalName:r}=this.props.vertical;return{aboutGameText:e(`guard.about-game.vertical-${r}`),commonPlayButtonText:e(`common.play.vertical-${r}`),gamesLogoUrlText:t===ht.CF.WEBAPPS_CATEGORY_SERVICE_NAME?e("common.service.app_name"):e("common.service.short_name"),gamesLogoUrlYandexName:a,legalText:e(`guard.legal.text.vertical-${r}`),serviceLogoIconType:`logo-${r}`}}get gameData(){var e,t;const{getText:a}=this.props,{gameInfo:r,gameSettings:n,gameData:s}=this.context.playPageData,o=r.hasWebAppsCategory?"guard.users.count.text":"guard.players.count.text",i=r.playersCount?a(o,{number:it(r.playersCount)}):void 0,l=r.hasWebAppsCategory?a("game.rating.users.new"):a("game.rating.new"),d=(0,ut.R)(this.context.isSlowCountry)?this.context.cdnUrl:void 0;return{ageRating:null==(e=n.features)?void 0:e.age_rating,hasWebAppsCategory:r.hasWebAppsCategory,icon:(0,le.kM)(r.iconUrl,d),playersCount:r.playersCount?lt(r.playersCount):void 0,playersCountText:i,gameQualityScore:r.gameQualityScore,publisher:(0,ot.T)(r.publisher.name),rating:r.rating,ratingText:l,title:(0,ot.T)(r.title),userDataRequired:Boolean(null==(t=n.features)?void 0:t.user_data_required),categories:r.categoryNames,categoriesIDs:(null==s?void 0:s.categoryIDs)||[]}}renderCancelButton(){const{oneTabPWA:e}=this.context;return c().createElement("a",{className:`${kt("header-cancel-link")} games-link`,"data-guard-close":"true",target:(0,dt.AO)({oneTabPWA:e}),onClick:this.cancel},this.props.getText("common.cancel"))}renderHeader(){const{baseUrl:e,referrer:t,tld:a,isPWA:n,oneTabPWA:s}=this.context,{getText:o,vertical:{verticalCategory:i,verticalName:l}}=this.props,d=i?(0,pt.QG)(this.context,{name:i}):"/",u=(0,ce.Px)({search:"utm_source=game_guard_logo",params:{[ue.cB]:n?"1":"",[ue.Vw]:(0,ct.sD)(t)?t:""}}),h=(0,Be.E)({baseUrl:e,path:`${d}${u?`${u}`:""}`,lang:this.context.pathLang,languages:(0,r.getDomainConfig)().languages,tld:a});return c().createElement("div",{className:kt("header")},c().createElement("span",{className:kt("header-logo")},c().createElement(Ge.Kk,{className:kt("header-logo-link"),href:h,tabIndex:-1,target:(0,dt.AO)({oneTabPWA:s}),title:o(`common.service.name.vertical-${l}`)},c().createElement(je.Z,{type:ht.q7.GUARD}))),this.renderCancelButton())}renderRating(){return c().createElement("div",{className:kt("description-players")},this.gameData.gameQualityScore&&c().createElement(Fe.Z,{value:this.gameData.gameQualityScore}),c().createElement($e.Z,{hasWebAppsCategory:this.gameData.hasWebAppsCategory,rating:this.gameData.rating,useNewText:!0}))}renderDescription(){const{isSlowCountry:e}=this.context,{ageRating:t}=this.gameData;return c().createElement("div",{className:kt("description")},c().createElement(Ze.Z,{alt:this.gameData.title,className:kt("description-icon",{low:e}),crossOrigin:"anonymous",size:38,src:this.gameData.icon}),c().createElement("div",{className:kt("description-details")},c().createElement("div",{className:kt("description-details-header")},c().createElement("div",{className:kt("description-title-wrapper")},c().createElement("h1",{className:kt("description-title"),itemScope:!0,itemType:"http://schema.org/WebPage"},this.gameData.title),t&&c().createElement(Me.Wd,{className:kt("description-ageRating"),"data-testid":"PlayGuard-AgeTag",variant:mt.Ft[t]},t)),c().createElement("div",{className:kt("description-publisher")},this.gameData.publisher),c().createElement(He.Z,{categoriesNames:this.gameData.categories,categoryIDs:this.gameData.categoriesIDs,mix:kt("categories")}))))}logOnceAboutGameConversionDataEventsIsRendered(){this.aboutGameConversionDataEvents.isRendered||(this.aboutGameConversionDataEvents.isRendered=!0,window.clickdaemonLog(st.zx.CONVERSION,{item:"game_page_guard_learn_more_render",app_id:this.context.playPageData.gameInfo.appId}))}logOnceAboutGameConversionDataEventsIsClicked(){this.aboutGameConversionDataEvents.isClicked||(this.aboutGameConversionDataEvents.isClicked=!0,window.clickdaemonLog(st.zx.CONVERSION,{item:"game_page_guard_learn_more_click",app_id:this.context.playPageData.gameInfo.appId}))}renderApply(){return c().createElement("div",{className:kt("apply"),title:this.texts.commonPlayButtonText},c().createElement(et,{className:kt("apply-button"),onClick:this.onApplyButtonClick},this.texts.commonPlayButtonText))}renderOpenInfo(){return"undefined"!=typeof window&&this.logOnceAboutGameConversionDataEventsIsRendered(),c().createElement("div",{className:`${kt("open-info")} games-link`,onClick:this.onOpenInfoClick},c().createElement(We.Z,{type:"info"}),this.texts.aboutGameText)}render(){const e=this.state.isSimilarGamesEnables&&!this.props.isFullscreenActive;return c().createElement("div",{className:kt({"with-blur":!0,"with-adv":this.isAdvStickyBannerEnabled(),"with-similar":e,hidden:this.props.hidden}),onClick:this.onExternalClick},c().createElement("div",{className:kt("content"),onClick:this.onContentClick},this.renderHeader(),this.renderDescription(),this.renderRating(),c().createElement(Ke,{onAuthButtonClick:this.onAuthButtonClick}),this.renderApply()),this.renderOpenInfo())}}const At=(0,n.E)((0,h.$j)((function(e){return{darkTheme:(0,at.Up)(e),getText:e.getText,hasAuth:Boolean(e.userData.login),isFullscreenActive:e.ui.isFullscreenActive,isSimilarGamesLoading:e.similarGamesLoading,lang:e.lang,vertical:e.vertical}}))(St));function It(){return c().createElement(Ne.u.Consumer,null,(e=>e.isNeedToShow?c().createElement(At,{handleEvent:e.handleEvent,hidden:e.isHidden}):null))}var Pt=a(97975),Tt=a(43633),Ct=a(73673);const Rt=a(65084).K;var Dt=a(95486),Lt=a(45112),Ot=a(5825),_t=a(33448);const xt=(0,b.M$)("GamePromocodeNotifier",b.XG.Dev),Nt=()=>{const e=(0,Ot.C)((e=>{var t,a,r,n;return null==(n=null==(r=null==(a=null==(t=e.promocode)?void 0:t.coupon)?void 0:a.benefit)?void 0:r.in_app_bonus)?void 0:n.app_id})),t=(0,Ot.C)((e=>{var t;return null==(t=e.promocode)?void 0:t.reserved})),a=(0,d.useMemo)((()=>(0,_t.p)(window.appData,window.appData.baseUrl)),[]);(0,Lt.qR)((()=>{xt("mounted")})),(0,d.useEffect)((()=>{e&&t&&e===Number(a)&&r()}),[e,a,t]);const r=()=>{xt("sendMessageInGame"),g.Z.postToChild((0,Dt.TI)(p.q1.BONUS_AWARDED))};return null};var Bt=a(35864),Mt=Object.defineProperty,Ht=Object.defineProperties,Ft=Object.getOwnPropertyDescriptors,$t=Object.getOwnPropertySymbols,Wt=Object.prototype.hasOwnProperty,Zt=Object.prototype.propertyIsEnumerable,Gt=(e,t,a)=>t in e?Mt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;const jt=(0,b.M$)("Scopes",b.XG.Popup),Ut={method:"POST",credentials:"include",referrerPolicy:"no-referrer-when-downgrade",headers:{Accept:"application/json","Content-Type":"application/json"}};class qt extends B.P{constructor(e,t){super(e,t),this.onInternalMessage=(e,t)=>{const{action:a,data:r}=e.data;"apply-guard"===a&&this.handleApplyGuard(r,t)}}componentDidMount(){jt("componentDidMount"),g.Z.onInternalMessage("scopes",this.onInternalMessage)}componentWillUnmount(){jt("componentWillUnmount"),g.Z.offInternalMessage("scopes",this.onInternalMessage)}handleApplyGuard(e,t){!e.isGuardEnabled&&this.props.hasAuth||this.postData({guardConfirm:!0}).then((e=>t({data:{result:e}}))).catch((()=>t({data:{result:null}})))}postData(e){return t=this,a=arguments,r=function*({guardConfirm:e}){const t={};if(void 0!==e&&(t.guard=e),0===Object.keys(t).length)return Promise.reject(new Error("Wrong param value for private-info"));const a=(0,Bt.H)("/player/private-info/"),r=((e,t)=>Ht(e,Ft(t)))(((e,t)=>{for(var a in t||(t={}))Wt.call(t,a)&&Gt(e,a,t[a]);if($t)for(var a of $t(t))Zt.call(t,a)&&Gt(e,a,t[a]);return e})({},Ut),{body:JSON.stringify(t)});return yield(0,y.rQ)({apiPath:a,options:r})},new Promise(((e,n)=>{var s=e=>{try{i(r.next(e))}catch(e){n(e)}},o=e=>{try{i(r.throw(e))}catch(e){n(e)}},i=t=>t.done?e(t.value):Promise.resolve(t.value).then(s,o);i((r=r.apply(t,a)).next())}));var t,a,r}render(){return null}}const Vt=(0,h.$j)((e=>({hasAuth:Boolean(e.userData.login)})))(qt);var zt=a(34972),Kt=Object.defineProperty,Yt=Object.getOwnPropertySymbols,Xt=Object.prototype.hasOwnProperty,Jt=Object.prototype.propertyIsEnumerable,Qt=(e,t,a)=>t in e?Kt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;const ea=l().with("screen-manager-rotate-banner"),ta=()=>{g.Z.post({type:"screen-manager",action:"request-fullscreen"})},aa=e=>{const t=(0,Ve.T)()("rotate.banner.button.text.short"),a=s.default.isLockable,r=(0,d.useCallback)((e=>{window.blur(),setTimeout((()=>{null==e||e.focus(),window.focus(),window.dispatchEvent(new Event("focus"))}),1)}),[]);return c().createElement(zt.Z,((e,t)=>{for(var a in t||(t={}))Xt.call(t,a)&&Qt(e,a,t[a]);if(Yt)for(var a of Yt(t))Jt.call(t,a)&&Qt(e,a,t[a]);return e})({},e),a&&c().createElement("button",{className:ea("force-rotate-button"),ref:r,onClick:ta},t))};var ra=a(33381),na=a(80024),sa=a(70602),oa=a(48810),ia=a(30448),la=a(39449),da=a(13377),ca=a(89592);const ua="yandexGames_shortcut_installation_dates",ha=(0,b.M$)("ShortcutManagerCommonApi",b.XG.Popup);function pa(e,t){(0,Y.U4)({},{shortcutApi:{action:e,params:t}})}class ma{constructor(e,t,a){this.context=t,this.beforeInstallEventCallbacks=[],this.wasBeforeInstallPrompt=()=>Boolean(this.shouldCallBeforeInstallEventCallbackImmediataly),this.showBeforeInstallprompt=!1,this.appId=e,this.dispatch=a,window.addEventListener("beforeinstallprompt",(e=>{e.preventDefault(),this.shortcutEventPrompt=e,this.callBeforeInstallEventCallbacks()}))}addListenerOnSuccessInit(e){this.shouldCallBeforeInstallEventCallbackImmediataly?e():this.beforeInstallEventCallbacks.push(e)}safeCallBeforeInstallEventCallbacks(){this.beforeInstallEventCallbacks.forEach((e=>e())),this.shouldCallBeforeInstallEventCallbackImmediataly=!0}callBeforeInstallEventCallbacks(){this.shouldCallBeforeInstallEventCallbackImmediataly||this.safeCallBeforeInstallEventCallbacks(),this.waitShowPromptAsync&&(this.waitShowPromptAsync=!1,this.showPromptByUserGesture("beforeinstallprompt")),pa("beforeinstallprompt",{show:this.showBeforeInstallprompt})}addListenerOnExpiration(e){this.expirationCallback=e}getSupportStatus(){return Boolean(this.shortcutEventPrompt)}showPromptByUserGesture(e){const t=(0,ia.c)((()=>(t(),this.showPrompt(e,na.v.PAGE_OPEN))))}showPromptAsync(e){return t=this,a=function*(){const{source:t}=e;if(pa("showPromptStart",e),this.shortcutEventPrompt)return ha(`ShortcutManagerCommonApi showPromptAsync: showPrompt exists and is called, source: ${e.source}`),t===na.v.PAGE_OPEN?this.showPromptByUserGesture("userGesture"):this.showPrompt("showPrompt",t);this.waitShowPromptAsync=!0;const a=`ShortcutManagerCommonApi showPromptAsync: showPrompt doesn't exist and is called, source: ${e.source}`;if(ha(a),t===na.v.GAME_API)throw new Error(a);console.info(a)},new Promise(((e,r)=>{var n=e=>{try{o(a.next(e))}catch(e){r(e)}},s=e=>{try{o(a.throw(e))}catch(e){r(e)}},o=t=>t.done?e(t.value):Promise.resolve(t.value).then(n,s);o((a=a.apply(t,null)).next())}));var t,a}readInstallationDates(){const{value:e,wasError:t}=(0,oa.dq)(ua);if(!t)try{const t=JSON.parse(e||"{}");if(t&&"object"==typeof t)return t}catch(e){(0,f.H)({block:da.W.SHORTCUTS_POPUP_MANAGER,prefix:"Error in readInstallationDates",source:"sdk"},e)}}shouldInstallAgain(){if(!this.appId)return!1;const e=this.readInstallationDates();if(!e)return!1;const t=new Date(e[this.appId]).getTime();return!!isNaN(t)||Math.abs(Date.now()-t)>=la.E$}setInstallationDate(){if(!this.appId)return;const e=this.readInstallationDates()||{};e[this.appId]=(new Date).toISOString(),(0,oa.Ur)(ua,JSON.stringify(e))}showPrompt(e,t){var a,r,n,s;if(ha("showPrompt"),this.shortcutEventPrompt){if("showPrompt"===e||this.shouldInstallAgain())return pa("showPrompt",{showPromptReason:e}),(0,Y.NF)({},ca.Ji.SHORTCUT_PROMPT_SHOW,{showPromptSource:e}),sa.Fj.show((0,sa.oU)({context:this.context,popupType:"system",source:(0,sa.N7)(t)})),null==(a=this.shortcutEventPrompt)||a.prompt().catch((e=>{pa("showPromptError",{err:e.message}),console.warn("ShortcutManagerCommonApi error: ",e)})),null==(r=this.shortcutEventPrompt)||r.userChoice.then((a=>(sa.Fj.click((0,sa.oU)({context:this.context,popupType:"system",source:(0,sa.N7)(t),result:"accepted"===a.outcome?"accepted":"rejected"})),"accepted"===a.outcome?(0,Y.NF)({},ca.Ji.SHORTCUT_USER_CHOICE_ACCEPTED,{showPromptSource:e}):(this.dispatch((0,W.yf)(!0)),(0,Y.NF)({},ca.Ji.SHORTCUT_USER_CHOICE_DISMISSED,{showPromptSource:e})),this.shortcutEventPrompt=void 0,a))),null==(n=this.expirationCallback)||n.call(this),this.setInstallationDate(),null==(s=this.shortcutEventPrompt)?void 0:s.userChoice;pa("showPromptError",{err:`You can call showPrompt on reason ${e} only once a day`})}}}var va=a(15987),ga=a(62847),ya=a(32595),fa=a(4915),wa=a(31085);const ba=(0,b.M$)("ShortcutPopupManager",b.XG.Popup),Ea=w.WT;class ka extends d.PureComponent{constructor(e){super(e),this.onExternalMessage=(e,t)=>{return a=this,r=function*(){const{appId:a}=this.context.playPageData.gameInfo,{action:r}=e.data;switch(r){case"can-show-prompt":{const e=this.canShowApiPrompt(a);ba(`onExternalMessage: action: "${r}", canShow: ${e}`),t({data:{canShow:e}}),this.setState({canShowCalled:!0});break}case"show-prompt":{const e=this.canShowApiPrompt(a);if(ba(`onExternalMessage: action: "${r}", canShow: ${e}`),e){const e=this.installationChecker.catalogPromptHasShown(a)?"game":"catalog";(0,Y.NF)({},ca.Ji.SHORTCUT_API_SHOW,{shortcutApi:{appId:a,manifestType:e}}),window.setTimeout((()=>{this.showApiPrompt({source:na.v.GAME_API},a).then((e=>{t({data:{outcome:null==e?void 0:e.outcome}})}))}),Ea)}else this.state.canShowCalled?t({data:{canShow:e,reason:"cannot show prompt"}}):t({data:{canShow:e,reason:"use canShowPrompt before showPrompt"}});break}}},new Promise(((e,t)=>{var n=e=>{try{o(r.next(e))}catch(e){t(e)}},s=e=>{try{o(r.throw(e))}catch(e){t(e)}},o=t=>t.done?e(t.value):Promise.resolve(t.value).then(n,s);o((r=r.apply(a,null)).next())}));var a,r},this.onInternalMessage=e=>{var t,a,r;const{action:n,data:s}=e.data;switch(n){case"show-api-prompt":ba('onInternalMessage "show-api-prompt"'),this.showApiPrompt({source:s.source});break;case"show-shortcut-popup":ba('onInternalMessage "show-shortcut-popup"'),this.showShortcutPopup();break;case"show-standalone-api-prompt":ba('onInternalMessage "show-standalone-api-prompt"'),null==(r=null==(a=null==(t=window.yandex)?void 0:t.app)?void 0:a.installShortcut)||r.call(a);break;case"activate":{ba('onInternalMessage "activate"');const e=new Event("beforeinstallprompt");e.userChoice=this.createExternalShortcutPromise("user-choice"),e.prompt=()=>this.createExternalShortcutPromise("prompt"),window.dispatchEvent(e);break}}},this.createExternalShortcutPromise=e=>new Promise(((t,a)=>{const r=`${e}-resolve`,n=`${e}-reject`,s=e=>{const{action:o}=e.data;o!==r&&o!==n||(g.Z.offInternalMessage("shortcut-manager",s),o===r?t(e.data.result):o===n&&a(e.data.result))};g.Z.onInternalMessage("shortcut-manager",s,{withHistory:!0}),"prompt"===e&&g.Z.post({type:"shortcut-manager",action:"prompt"})})),this.handleCloseShortcutPopup=()=>{const e=(window.YandexGamesSDK&&"function"==typeof window.YandexGamesSDK.getStack?window.YandexGamesSDK.getStack("game"):document.body).querySelector("iframe");e&&(0,ga.Z)(e),this.setState({forcefullyShowShortcutPopup:!1})},this.state={canShowCalled:!1,forcefullyShowShortcutPopup:!1}}componentDidMount(){const{appId:e}=this.context.playPageData.gameInfo;this.shortcutManagerApi=new ma(e,this.context,this.props.dispatch),this.installationChecker=new fa.Z,this.initMessaging()}initMessaging(){g.Z.onExternalMessage("shortcut-manager",this.onExternalMessage),g.Z.onInternalMessage("shortcut-manager",this.onInternalMessage,{withHistory:!0}),g.Z.post({type:"shortcut-manager",action:"request"})}canShowApiPrompt(e){var t;if((0,o.v_)({on:"disable_pwa_promo"}))return!1;const a=(0,ya.N)(this.context.uatraits);return this.installationChecker.checkShowCapability(wa.Wp.GameApi,{waitingPeriod:w.dV,maxShowCount:3,isMiniInfobarEnabled:a},e)&&(null==(t=this.shortcutManagerApi)?void 0:t.getSupportStatus())}showApiPrompt(e,t){const{source:a}=e;if(t&&!this.canShowApiPrompt(t))return Promise.resolve(void 0);const r=new Promise((e=>this.addListenerOnSuccessInit((()=>e(!0))))).then((()=>(a===na.v.GAME_API&&this.installationChecker.updateShowData(wa.Wp.GameApi,t),this.shortcutManagerApi.showPromptAsync(e))));return r.then((e=>{void 0!==e&&(this.props.dispatch((0,W.FJ)(void 0)),a===na.v.GAME_API&&t&&("accepted"===e.outcome?(this.installationChecker.updateInstallationData(wa.Wp.GameApi,t),this.installationChecker.setLastPromptAccepted(!0,t)):(this.props.dispatch((0,W.yf)(!0)),this.installationChecker.setLastPromptAccepted(!1,t))))})).catch((()=>{})),r}wasBeforeInstallPrompt(){return this.shortcutManagerApi.wasBeforeInstallPrompt()}addListenerOnSuccessInit(e){this.shortcutManagerApi.addListenerOnSuccessInit(e)}addListenerOnExpiration(e){this.shortcutManagerApi.addListenerOnExpiration(e)}showShortcutPopup(){this.setState({forcefullyShowShortcutPopup:!0})}render(){return this.state.forcefullyShowShortcutPopup||this.props.shouldShowShortcutPopup?c().createElement(ra.Z,{trigger:this.state.forcefullyShowShortcutPopup?va.w.MENU:va.w.TIMER,type:this.props.type,onClose:this.handleCloseShortcutPopup}):null}}ka.contextType=B.Z;const Sa=(0,h.$j)((function(e){return{shouldShowShortcutPopup:e.shouldShowShortcutPopup}}))(ka);var Aa=a(41103),Ia=a(29810),Pa=a(68316);const Ta=()=>{const e=(0,Ot.C)((({ui:e})=>e.isGuardOpened)),{gamePause:t,gameResume:a}=(0,ye.ff)({reason:"visibility_change"});return(0,d.useEffect)((()=>{if(e)return;const r=()=>{document.hidden?t():a()};return document.addEventListener("visibilitychange",r),()=>document.removeEventListener("visibilitychange",r)}),[t,a,e]),c().createElement(c().Fragment,null)};var Ca=a(53603);const Ra=()=>{const{playPageData:e}=(0,qe.b)(),t=(0,Ot.C)((e=>e.user.payCurrency)),a=(0,d.useRef)(!1);return(0,d.useEffect)((()=>{var r,n;if(a.current)return;const{gameInfo:s}=e;s&&((0,Y._H)({currencyCode:t,detail:[{id:s.appId,name:s.title,brand:null==(r=s.publisher)?void 0:r.name,category:null==(n=s.categoryNames)?void 0:n[0]}]}),a.current=!0)}),[t,e,a]),null};var Da=a(65751),La=(e=>(e.FULL="full",e.HIDDEN="hidden",e.MOVING="moving",e.SMALL="small",e))(La||{});l().with("app-drawer");var Oa=a(32054),_a=a(26213),xa=a(65562);const Na=a(81839).Z,Ba=(0,b.M$)("gamePage",b.XG.Dev);a(523);const Ma=["document-events","guard"];class Ha extends B.P{constructor(){super(...arguments),this.pageStartRef=c().createRef(),this.withInfo=-1!==this.props.location.search.indexOf("info=true"),this.needToShowLeaderboard=(()=>{const{search:e,hash:t}=this.props.location;return`${e}#${t}`.includes("leaderboard")})(),this.shouldRenderContent=Boolean(this.context.isSearchCrawler),this.state={showInfo:this.getInitGuardState(),showGuard:this.getInitGuardState(),drawerStatus:this.shouldRenderContent?La.FULL:La.SMALL,hiddenControls:this.getInitHiddenControls(),hiddenImages:!0,hiddenLazyElements:!0,hiddenVideo:!0,playerError:!1,scrollTop:0,scrollToLeaderboard:!1},this.handleClose=()=>{const{hiddenControls:e,showInfo:t}=this.state;!this.withInfo||e?(e?t&&!(0,dt.PK)()&&"#info"===(0,J.e)().hash&&history.back():g.Z.post({type:"guard",action:"show"}),this.setState({hiddenVideo:!0,scrollToLeaderboard:!1,showInfo:!1})):this.handleBack()},this.handleBackgroundClick=()=>{this.handleApply(H.EO.Background)},this.handleCloseButton=()=>{this.handleApply(H.EO.CloseButton)},this.handleDrawerClose=()=>{this.handleApply(H.EO.DrawerSwipe)},this.handleAuth=()=>{g.Z.post({type:"auth",action:"auth-dialog-open",data:{initializer:"app-page"}}),(0,Y.U4)({},{action:"auth"})},this.handleBack=()=>{const{hiddenControls:e,showInfo:t}=this.state,{baseUrlWithLangPath:a,hidePaymentsAndCurrency:r,isGamesLiteApp:n,isPWA:s,oneTabPWA:i,pfid:l,referrer:d,uatraits:c}=this.context;if(t&&(e||i))return i||this.setState({showInfo:!1}),history.back(),void(0,Y.U4)({},{action:"close-info"});if((0,Y.U4)({},{action:"back-to-catalog"}),document.documentElement.classList.remove("with-player"),this.exitFullscreen(),!window.opener&&!(0,o.v_)({on:"open_game_inp.link_click"})||n||i&&(0,xa.g)(c)){const e=Da.parse((0,J.e)().search.slice(1));d&&(0,ct.sD)(d)&&(e[ue.Vw]=d),n&&(e.utm_source="close_button"),r&&(e[ue.o1]="1"),s&&(e[ue.cB]="1"),l&&(e[ue.om]=l);const t=Da.stringify(e),{href:o,origin:c}=(0,J.e)();let u=`${c}${a}${t.length?`/?${t}`:""}`;u=(0,Ge.ky)(u,{currentLocation:o}),window.open(u,i?"_parent":"_self")}else window.close()},this.handlePlayButton=()=>{this.handleApply(H.EO.PlayButton)},this.handleUpdateScrollTop=e=>{this.setState({scrollTop:e})},this.feedbackRef=e=>{this.feedbackTitleElement=e},this.gameInstructionRef=e=>{this.gameInstructionElement=e},this.handleBackButton=e=>{const{hiddenControls:t}=this.state;!e.state&&t&&this.hideInfo()},this.handleEarlyEvents=()=>{var e;null==(e=window.earlyEvents)||e.messages.forEach((e=>{const{type:t,action:a,data:r}=e;if("guard"===t)switch(a){case"auth":this.handleAuth();break;case"close":this.handleBack();break;case"accept":this.handleApply(r.actionSource)}})),document.documentElement.classList.remove("without-guard")},this.changeDrawerStatus=e=>{this.setState({drawerStatus:e}),e===La.FULL&&(this.setState({hiddenLazyElements:!1,hiddenVideo:!1}),g.Z.post({type:"promo-bar",action:"remove"}))},this.handleVisibilityChange=()=>{"visible"===document.visibilityState&&this.requestFullscreen()},this.requestFullscreen=()=>{var e;const{game:t}=this.props,a=(0,q.KT)();(0,M.Me)(a,M.QQ.ByteApp)||s.default.requestFullscreenAndLockOrientation(null==(e=t.features)?void 0:e.orientation)},this.onAllMessages=e=>{const{type:t,action:a,data:r}=e.data,{platform:n}=this.context,{isIOS:s}=(0,mt.AK)(n),{hiddenControls:o}=this.state;switch(t){case"document-events":switch(a){case"redirect":window.location.href=r.href;break;case"back":this.handleBack();break;case"show-info":case"show-review":case"show-instruction":case"show-leaderboard":this.setState({hiddenImages:!1,showInfo:!0}),this.setRenderTriggered(),this.sendNotificationToSelfWindow(),!(0,dt.PK)()&&o&&window.parent.history.pushState("info","","#info"),requestAnimationFrame((()=>{this.changeDrawerStatus(La.FULL),setTimeout((()=>{var e,t,r;switch(a){case"show-review":this.scrollAfterLeaderboardFetching("review");break;case"show-instruction":null==(e=this.gameInstructionElement)||e.scrollIntoView({behavior:"smooth"});break;case"show-leaderboard":this.scrollAfterLeaderboardFetching("leaderboard");break;case"show-info":null==(r=null==(t=this.pageStartRef.current)?void 0:t.parentElement)||r.scrollTo({behavior:"smooth",top:0})}s&&setTimeout((()=>{window.scrollTo(0,0)}),500)}),200)})),(0,Y.U4)({},{action:a})}break;case"guard":switch(a){case"cancel":this.handleBack();break;case"info":this.setState({showInfo:!0,hiddenControls:!1,hiddenImages:!1,hiddenLazyElements:!1,hiddenVideo:!1}),this.setRenderTriggered(),this.sendNotificationToSelfWindow();break;case"apply":this.setState({hiddenControls:!0});break;case"init":this.setState({hiddenControls:!1})}}},this.setRenderTriggered=()=>{this.shouldRenderContent=!0}}handleApply(e){const{showInfo:t,hiddenControls:a,playerError:r}=this.state;r||(this.props.isMiddleLayerInGame&&e===H.EO.Background?this.hideInfo():(a||g.Z.post({type:"guard",action:"apply",data:{actionSource:e}}),this.hideInfo(),this.setState({showGuard:!1}),t&&a&&((0,dt.PK)()||"#info"===(0,J.e)().hash&&history.back(),(0,Y.U4)({},{action:"hide-info"})),requestAnimationFrame((()=>{window.scrollTo(0,0),this.passFocusToFrame()}))))}passFocusToFrame(){g.Z.hasChild()&&g.Z.postToChild((0,Dt.$m)())}componentDidMount(){g.Z.onAllMessages(Ma,this.onAllMessages,{withHistory:!0}),this.handleEarlyEvents(),this.context.isAdvSplashScreenEnabled||this.initInfoWindow()}componentDidUpdate(e,t){t.showInfo===this.state.showInfo||this.state.showInfo||g.Z.post({type:"document-events",action:"hide-info"})}componentWillUnmount(){this.exitFullscreen(),g.Z.offAllMessages(Ma,this.onAllMessages),document.removeEventListener("visibilitychange",this.handleVisibilityChange),window.removeEventListener("popstate",this.handleBackButton)}exitFullscreen(){}sendNotificationToSelfWindow(){g.Z.post({action:"open",type:"app-info"})}hideInfo(){this.changeDrawerStatus(La.HIDDEN),setTimeout((()=>{this.setState({showInfo:!1,hiddenControls:!0,scrollToLeaderboard:!1,hiddenVideo:!0})}),200)}isGuardEnabled(){const{abt:{flags:e},platform:t,playPageData:{gameData:a},referrerClid:r}=this.context;return!(({flags:e,isConfirmedGuard:t,platform:a,referrerClid:r,search:n})=>{if(t||(0,M.Me)(r,M.QQ.YangoGo)||(0,Xe.bM)(e))return!0;if(Da.parse("?"===n.charAt(0)?n.slice(1):n)[_a.U])return!0;const s=(0,mt.AK)(a);return!!(s.isStandalone&&s.isAndroidStandalone&&(0,Xe.Iv)(e))})({flags:e,isConfirmedGuard:(0,Oa.p)(a),platform:t,referrerClid:r,search:this.props.location.search})}getInitHiddenControls(){return!this.isGuardEnabled()||this.props.isMiddleLayerInGame}getInitGuardState(){return!(this.props.isMiddleLayerInGame&&!this.shouldRenderContent||!(this.shouldRenderContent||this.withInfo||this.props.location.search.includes("leaderboard"))&&(this.context.isAdvSplashScreenEnabled,1))}initInfoWindow(){var e,t;const a=this.isGuardEnabled();this.shouldRenderContent&&(requestAnimationFrame((()=>{this.changeDrawerStatus(La.FULL)})),this.setState({hiddenImages:!1,showInfo:!0,showGuard:!0,hiddenControls:!a})),this.withInfo||this.needToShowLeaderboard?(this.setState({hiddenControls:!1,hiddenImages:!1,showGuard:!0,showInfo:!0}),this.shouldRenderContent||requestAnimationFrame((()=>{this.changeDrawerStatus(this.withInfo?La.FULL:La.SMALL)}))):this.shouldRenderContent||(this.changeDrawerStatus(La.HIDDEN),this.setState({showInfo:!1,showGuard:!1,hiddenControls:!a})),this.props.isMiddleLayerInGame&&!this.shouldRenderContent&&this.setState({showInfo:!1,hiddenControls:!0}),window.addEventListener("popstate",this.handleBackButton,!1),g.Z.post({type:"guard",action:"load",data:{startTime:null==(t=null==(e=window.performance)?void 0:e.timing)?void 0:t.navigationStart}})}scrollAfterLeaderboardFetching(e){const{leaderboardsLoaded:t}=this.props;t?requestAnimationFrame((()=>{var t;switch(e){case"leaderboard":this.setState({scrollToLeaderboard:!0});break;case"review":null==(t=this.feedbackTitleElement)||t.scrollIntoView({behavior:"smooth"})}})):setTimeout((()=>{this.scrollAfterLeaderboardFetching(e)}),100)}render(){return Ba("game-page render"),this.shouldRenderContent?(Ba("game-page render desktop"),c().createElement(Na,{game:this.props.game,handlers:{handleBack:this.handleBack,handleClose:this.handleClose,handlePlayButton:this.handlePlayButton,handleAuth:this.handleAuth,handleBackgroundClick:this.handleBackgroundClick},refs:{pageStartRef:this.pageStartRef,feedbackRef:this.feedbackRef,gameInstructionRef:this.gameInstructionRef},state:this.state})):null}}const Fa=(0,n.E)((0,h.$j)((function(e){var t,a,r;return{leaderboardsLoaded:(null==(t=e.leaderboards)?void 0:t.main.loaded)&&(null==(a=e.leaderboards)?void 0:a.friends.loaded),isMiddleLayerInGame:Boolean(null==(r=e.middleLayerInGameData)?void 0:r.show)}}))(Ha));var $a=a(90380),Wa=Object.defineProperty,Za=(e,t,a)=>(((e,t,a)=>{t in e?Wa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a})(e,"symbol"!=typeof t?t+"":t,a),a);const Ga=(0,b.M$)("AppPageBody",b.XG.Dev),ja=l().with("game");class Ua extends B.P{constructor(e,t){var a,r;super(e),Za(this,"stackRef"),Za(this,"limitedFsCheckerRef"),Za(this,"limitedFsVpCheckerRef"),Za(this,"isIOSLimitedFsAvailable"),Za(this,"isFixedIOSLimitedFs"),Za(this,"isIOSLimitedFsDisableOnScale"),Za(this,"limitedFsUpdateIntervalId"),Za(this,"state",{hasMounted:!1,isLimitedFullscreenActive:!1,showDragOverlay:!1,drawerVisible:!1}),Za(this,"onDrawerVisibleChange",(e=>{this.setState({drawerVisible:e})})),Za(this,"initLimitedIOSFs",(()=>{window.addEventListener("touchmove",this.handleTouchMove,{passive:!1});const{isLandscape:e}=s.default;e&&(this.limitedFsUpdateIntervalId=window.setInterval((()=>{this.updateLimitedFsState()}),300)),s.default.addChangeListener(this.handleOrientationChange)})),Za(this,"handleOrientationChange",(()=>{var e;const{isPortrait:t}=s.default;t?(clearInterval(this.limitedFsUpdateIntervalId),this.state.isLimitedFullscreenActive&&(null==(e=window.clickdaemonLog)||e.call(window,st.zx.SWIPE_TO_FULLSCREEN,{item:"rotationInFullscreen"})),this.setState({isLimitedFullscreenActive:!1,showDragOverlay:!1})):this.limitedFsUpdateIntervalId=window.setInterval((()=>{this.updateLimitedFsState()}),300)})),Za(this,"setLimitedFullsreenActive",(()=>{this.setState({isLimitedFullscreenActive:!0,showDragOverlay:!1})})),Za(this,"handleTouchMove",(e=>{this.state.isLimitedFullscreenActive&&e.preventDefault()})),this.stackRef=c().createRef(),this.limitedFsCheckerRef=c().createRef(),this.limitedFsVpCheckerRef=c().createRef();const{abt:{flags:n}}=t;this.isIOSLimitedFsAvailable=Boolean(t.isSafari)&&(0,Xe.Xv)(n)&&"portrait"!==(null==(r=null==(a=t.playPageData.gameData)?void 0:a.features)?void 0:r.orientation),this.isFixedIOSLimitedFs=this.isIOSLimitedFsAvailable&&(0,Xe.r6)(n),this.isIOSLimitedFsDisableOnScale=(0,Xe.PH)(n)}componentDidMount(){this.setState({hasMounted:!0}),this.isIOSLimitedFsAvailable&&this.initLimitedIOSFs()}updateLimitedFsState(){var e;if(this.isIOSLimitedFsDisableOnScale&&(null==(e=this.limitedFsCheckerRef.current)?void 0:e.clientHeight)!==window.screen.availWidth)return void this.setState({isLimitedFullscreenActive:!1,showDragOverlay:!1});const{isLandscape:t}=s.default;if(t){const e=this.isLimitedFsReady(),t=(0,Xe.mD)(this.context.abt.flags)&&this.props.isSwipe2FullscreenOverlayLocked;this.setState({isLimitedFullscreenActive:e,showDragOverlay:!e&&!t})}}componentDidUpdate(e,t){var a,r,n;!t.showDragOverlay&&this.state.showDragOverlay&&(null==(a=window.clickdaemonLog)||a.call(window,st.zx.SWIPE_TO_FULLSCREEN,{item:"renderOverlay"}),g.Z.post({type:"document-events",action:"show-swipe-to-fullscreen-overlay"})),t.showDragOverlay&&!this.state.showDragOverlay&&(null==(r=window.clickdaemonLog)||r.call(window,st.zx.SWIPE_TO_FULLSCREEN,{item:"closeOverlay"}),g.Z.post({type:"document-events",action:"hide-swipe-to-fullscreen-overlay"})),!t.isLimitedFullscreenActive&&this.state.isLimitedFullscreenActive&&(null==(n=window.clickdaemonLog)||n.call(window,st.zx.SWIPE_TO_FULLSCREEN,{item:"enterFullscreen"}))}componentWillUnmount(){this.isIOSLimitedFsAvailable&&(s.default.removeChangeListener(this.handleOrientationChange),window.removeEventListener("touchmove",this.handleTouchMove),clearInterval(this.limitedFsUpdateIntervalId))}isLimitedFsReady(){return!(!this.stackRef.current||!this.limitedFsCheckerRef.current)&&this.stackRef.current.clientHeight>=this.limitedFsCheckerRef.current.clientHeight}render(){Ga("render");const{appData:e,isAccountCompletionAvailable:t,middleLayerInGameShow:a}=this.props,{abt:{flags:n},hidePaymentsAndCurrency:s,isAdvSplashScreenEnabled:i,isGamesApp:l,isStickyEnabled:d,playPageData:h,middleLayerInGameData:p}=this.context,{hasMounted:m}=this.state,{gameData:v,gameSettings:{features:g}}=h,y=(0,r.getDomainConfig)().promocodesEnabled,f=null==g?void 0:g.orientation,{isSearchCrawler:w,lang:b,hasHeader:E}=e;let k="stack";if("undefined"!=typeof window){const e=document.querySelector(".stack"),t=`${k}_type_ios-limited-fs`;this.isIOSLimitedFsAvailable&&e&&!e.classList.contains(t)&&e.classList.add(t),k=(null==e?void 0:e.className)||k}const S=m&&(0,Xe.RM)(n,$a.Z.userActivityPopup),A=h.isGameLoaderEnabled&&!a,I=i?c().createElement(ve.Z,null):c().createElement(ge.Z,null),P="portrait"!==f&&!this.state.drawerVisible&&(!!this.isFixedIOSLimitedFs||this.state.showDragOverlay);return c().createElement(Ca.I,null,P&&c().createElement("div",{className:ja("fs-spacer")}),!l&&c().createElement(se.Z,{type:"game"}),c().createElement(o.hW,{off:"ssr_platform_subscriptions",onComponent:c().createElement(Re,null)}),c().createElement(Ia.Z,null),c().createElement(Ct.q,null),c().createElement(O,{lang:b}),c().createElement(N.Z,null),c().createElement(fe,null),c().createElement(Ta,null),c().createElement(_e,{isFixedIOSLimitedFs:this.isFixedIOSLimitedFs,isIOSLimitedFsAvailable:this.isIOSLimitedFsAvailable,isLimitedFullscreenActive:this.state.isLimitedFullscreenActive,isVisible:E&&!0,onMenuVisibleChange:this.onDrawerVisibleChange}),c().createElement("div",{className:k,ref:this.stackRef},d&&c().createElement(_.Z,{hideAdvCloseButton:s,wrapperRef:this.stackRef}),c().createElement(re.Z,{page:"app"}),c().createElement(Oe.Z,{showDragOverlay:this.state.showDragOverlay,onDragOverlayCloseByButton:this.setLimitedFullsreenActive}),c().createElement(aa,null),!a&&c().createElement(Tt.Z,{isBlackFadeout:!0}),c().createElement(ae,null),c().createElement(o.hW,{offComponent:c().createElement(De.Z,null),on:"adv_ingame_new",onComponent:c().createElement(x.Z,null)}),c().createElement("div",{className:"rotate-banner"}),c().createElement(xe.Z,null,!p&&c().createElement(It,null),a&&c().createElement(ke,null)),!1,A&&I,c().createElement("div",{className:"shortcut"},m&&c().createElement(Sa,{type:"game"})),c().createElement(o.hW,{on:"payments_improvements.inapp",onComponent:c().createElement(Ae.H,null)}),c().createElement(Pt.Z,{onDialogChange:this.onDrawerVisibleChange}),c().createElement(Vt,null),c().createElement(pe,null),c().createElement(we.Z,null),c().createElement(Ee,null),Boolean((0,Xe.xO)(n))&&c().createElement(Aa.Z,null)),(null==v?void 0:v.appID)?c().createElement(Fa,{game:v}):null,S&&c().createElement(Pa.Z,null),c().createElement(Le.Z,null),m&&c().createElement(ne.H,null),c().createElement("div",{className:"gdpr-overlay"}),m&&!w&&t&&c().createElement(Se,null),this.isIOSLimitedFsAvailable&&c().createElement(c().Fragment,null,c().createElement(u.ql,null,c().createElement("html",{"data-limited-fs-available":"yes"})),c().createElement("div",{className:"limited-fs-checker",ref:this.limitedFsCheckerRef})),(0,Xe.Hp)()&&c().createElement(me.Z,{placement:"app"}),m&&c().createElement(Ra,null),y&&c().createElement(Rt,null),m&&y&&c().createElement(Nt,null))}}Za(Ua,"contextType",B.Z);const qa=(0,n.E)((0,h.$j)((function(e){var t;return{isAccountCompletionAvailable:e.userData.isAccountCompletionAvailable,middleLayerInGameShow:null==(t=e.middleLayerInGameData)?void 0:t.show,shouldShowAndroidShortcutDrawer:e.shouldShowAndroidShortcutDrawer,isSwipe2FullscreenOverlayLocked:e.isSwipe2FullscreenOverlayLocked}}))(Ua))},79098:(e,t,a)=>{a.d(t,{L:()=>r});const r="/21857590943,22960671442/playhop.com/fallback"},23678:(e,t,a)=>{a.d(t,{Z:()=>i});var r=a(45112),n=a(33119),s=a(5825),o=a(61224);const i=()=>{const e=(0,s.T)(),t=(0,s.C)((e=>e.advEnabledByPartner));return(0,r.qR)((()=>{if(null!==t)return;const a=Date.now(),r=window.setInterval((()=>{const t=(0,o.kH)();(void 0!==t||(0,o.$g)(a))&&(window.clearInterval(r),e((0,n.ju)(!t)))}),100);return()=>{window.clearInterval(r)}})),null}},68797:(e,t,a)=>{a.d(t,{Z:()=>P});var r=a(38096),n=a(87363),s=a.n(n),o=a(42126),i=a(83242),l=a(97777),d=Object.defineProperty,c=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,p=(e,t,a)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,m=(e,t)=>{for(var a in t||(t={}))u.call(t,a)&&p(e,a,t[a]);if(c)for(var a of c(t))h.call(t,a)&&p(e,a,t[a]);return e};class v{constructor(e){this.REPORT_URL=`https://csp.yandex.net/csp?from=${encodeURIComponent(e)}-game-html&project=${encodeURIComponent(e)}`}getReportURL(e){return(0,o.Z)({url:this.REPORT_URL,params:m({yandexuid:(0,i.e)("yandexuid")||""},e)})}report(e,t){const a=this.getReportURL(t);return(0,l.Z)(a,e,{credentials:"omit"})}}var g=a(40184),y=a(97808),f=a(71522),w=a(33252);function b(){const e="production";switch(e){case"production":case"prestable":case"testing":return e;default:return"development"}}var E=a(76958);function k(e){return e===E.n.desktop?"desktop":"touch"}var S=a(47484),A=a(15771),I=a(49659);const P=s().memo((e=>{const{page:t}=e,{deviceType:a,playPageData:s,abt:o,version:i}=(0,g.b)(),l=(0,n.useMemo)((()=>{const e={environment:b(),page:t,platform:k(a),version:String(i)};if("app"===t&&s){const t=String(s.gameInfo.appId);t&&(e.appId=t)}return e}),[a,t,s,i]),d=(0,n.useMemo)((()=>new v((0,r.getDomainConfig)().analytics.rumProject||"games")),[]),c=(0,n.useCallback)(((e,t)=>{if("violation"===e.data.action){const a=function(e){try{const{data:t}=e.data;if(function({blockedURI:e,originalPolicy:t}){return!!/^https?:\/\/log\.strm\.yandex\.ru/.test(e)||"child-src 'self' blob: mc.yandex.ru; connect-src 'self' localhost.msup.yandex.ru mc.yandex.ru amc.yandex.ru an.yandex.ru jstracer.yandex.ru verify.yandex.ru *.verify.yandex.ru csp.yandex.net strm.yandex.ru strm.yandex.net *.strm.yandex.net favicon.yandex.net avatars.mds.yandex.net yandexmetrica.com www.google-analytics.com www.googletagmanager.com games-sdk.yandex.az games-sdk.yandex.by games-sdk.yandex.co.il games-sdk.yandex.com games-sdk.yandex.com.am games-sdk.yandex.com.ge games-sdk.yandex.com.tr games-sdk.yandex.ee games-sdk.yandex.fr games-sdk.yandex.kg games-sdk.yandex.kz games-sdk.yandex.lt games-sdk.yandex.lv games-sdk.yandex.md games-sdk.yandex.ru games-sdk.yandex.tj games-sdk.yandex.tm games-sdk.yandex.ua games-sdk.yandex.uz; default-src 'self'; font-src 'self' yastatic.net yastat.net an.yandex.ru fonts.gstatic.com; frame-src 'self' localhost yastatic.net; img-src 'self' data: blob: mc.yandex.ru amc.yandex.ru an.yandex.ru verify.yandex.ru *.verify.yandex.ru favicon.yandex.net avatars.mds.yandex.net games.games-test.yandex.ru games-sdk.yandex.az games-sdk.yandex.by games-sdk.yandex.co.il games-sdk.yandex.com games-sdk.yandex.com.am games-sdk.yandex.com.ge games-sdk.yandex.com.tr games-sdk.yandex.ee games-sdk.yandex.fr games-sdk.yandex.kg games-sdk.yandex.kz games-sdk.yandex.lt games-sdk.yandex.lv games-sdk.yandex.md games-sdk.yandex.ru games-sdk.yandex.tj games-sdk.yandex.tm games-sdk.yandex.ua games-sdk.yandex.uz; media-src 'self' data: blob: strm.yandex.ru *.strm.yandex.net; script-src 'self' 'unsafe-eval' 'unsafe-inline' blob: yandex.ru *.yandex.ru yastatic.net; style-src 'self' 'unsafe-eval' 'unsafe-inline' fonts.googleapis.com; report-uri https://csp.yandex.net/csp?from=games-game&project=games&yandex_login=&yandexuid=;"===t}(t))return null;const{blockedURI:a,columnNumber:r,disposition:n,documentURI:s,effectiveDirective:o,lineNumber:i,originalPolicy:l,referrer:d,sample:c,sourceFile:u,statusCode:h,violatedDirective:p}=t;return JSON.stringify({"csp-report":{"document-uri":s,referrer:d,"violated-directive":p,"effective-directive":o,"original-policy":l,disposition:n,"blocked-uri":a,"line-number":i,"column-number":r,"source-file":u,"status-code":h,"script-sample":c}})}catch(e){(0,w.H)({message:"[CSP] Failed to create violation report"},e)}return null}(e);((0,A.jP)(o.flags)?S.EE:S.Bu)((()=>{a?d.report(a,l).then((e=>t({data:e}))):t({data:null})}))}}),[d,l,o]);return(0,n.useEffect)((()=>{const e=new URLSearchParams((0,I.e)().search);if(Boolean(e.get("debug-mode"))||(0,f.m)()||Math.random()<.05)return y.Z.onExternalMessage("csp",c),function(){y.Z.offExternalMessage("csp",c)}}),[c]),null}))},24029:(e,t,a)=>{a.d(t,{H:()=>i});var r=a(87363),n=a.n(r),s=a(89193),o=a(85375);const i=()=>(0,o.mv)()?n().createElement(s.Z,null):null},85375:(e,t,a)=>{a.d(t,{A:()=>l,Sy:()=>s,hw:()=>i,mv:()=>d,q:()=>o});var r=a(45254),n=a(93298);const s=()=>r.v.HasFlag(n.AV,n.aR.AdvertisementPanel),o=()=>r.v.HasFlag(n.AV,n.aR.LogPanel),i=()=>r.v.HasFlag(n.AV,n.aR.GameDeveloperPanel),l=()=>r.v.HasFlag(n.AV,n.aR.RecordPanel),d=()=>i()||o()||s()||l()},75007:(e,t,a)=>{a.d(t,{Z:()=>l});var r=a(87363),n=a(45112),s=a(93013),o=a(40656),i=a(74878);a(57647);const l=(0,r.memo)((()=>{const e=(0,s.D)((()=>(0,i.W_)()),o.WT);return(0,n.qR)((()=>(e(),window.addEventListener("resize",e,{passive:!0}),window.addEventListener("unload",i.W_),()=>{window.removeEventListener("resize",e),window.removeEventListener("unload",i.W_)}))),null}))},35543:(e,t,a)=>{a.d(t,{Z:()=>p});var r=a(63904),n=a.n(r),s=a(87363),o=a.n(s),i=a(93569),l=a(11510),d=a(5825),c=a(36172),u=a(94671);const h=n().with("game-rating-description"),p=o().memo((({mix:e="",useNewText:t,hasWebAppsCategory:a,rating:r,withoutText:n,dataTestId:s})=>{const p=(0,l.T)();let m=p("game.rating").toLowerCase();const v=(0,d.C)(c.Up);return t&&(m=p(a?"game.rating.users.new":"game.rating.new")),0===r?null:o().createElement("div",{className:(0,u.E)(h(),e),"data-testid":s&&`${s}-GameRatingDescription`,title:p("game.rating")},o().createElement("div",{className:h("star-wrapper")},o().createElement(i.Z,{className:h("rating-star",{dark:v}),type:"rating-star"}),o().createElement("span",{className:h("rating")},function(e){if(e<=0)return"0";try{return new Intl.NumberFormat("ru-RU",{minimumFractionDigits:1,maximumFractionDigits:1}).format(e)}catch(e){}return String(e.toPrecision(2)).replace(".",",")}(r))),!n&&o().createElement("div",{className:h("text",{new:t})},m))}))},25873:(e,t,a)=>{a.d(t,{Z:()=>m});var r=a(87363),n=a.n(r),s=a(59389),o=a(40184),i=a(11510),l=a(48194),d=a(97808),c=a(34967),u=a(33252),h=a(90295),p=a(89592);const m=()=>{const[e,t]=(0,r.useState)(void 0),a=(0,i.T)(),m=(0,o.b)();(0,r.useEffect)((()=>{function e(){var e,r,n;(null==(r=null==(e=window.YandexGamesSDK)?void 0:e.conflicts)?void 0:r.data.conflictInfo)&&(d.Z.offAllMessages("merge-conflicts",a),t(null==(n=window.YandexGamesSDK)?void 0:n.conflicts))}function a(t,a){"processing"===t.data.action&&e()}return d.Z.onAllMessages("merge-conflicts",a),e(),()=>{d.Z.offAllMessages("merge-conflicts",a)}}),[]);const v=null==e?void 0:e.data;return v?n().createElement(s.Z,{conflicts:v,onResolve:r=>{(0,c.NF)({},p.Ji.MERGE_CONFLICTS_RESOLVE),t(void 0),new l.Z(window.YandexGamesSDK.apiData).setResolveConflict({appID:m.playPageData.gameInfo.appId,authPriority:"account"===r,iGames:"account"===r?void 0:r}).then((()=>{null==e||e.callback(!0),d.Z.post({type:"message-box",action:"show",data:{message:a("merge-conflicts.success")}})})).catch((t=>{(0,u.H)({message:`SDK Api request error from ${h.Wv}`,type:"fetch"},t),null==e||e.callback(!1),d.Z.post({type:"message-box",action:"show",data:{message:a("merge-conflicts.error"),type:"error"}}),console.warn("Data not applied")}))}}):null}},5422:(e,t,a)=>{a.d(t,{Z:()=>ie});var r=a(87363),n=a.n(r),s=a(4824),o=a(8037),i=a(96665),l=a(8804),d=a(93569),c=a(11510),u=a(94671);const h=()=>n().createElement(d.Z,{modifiers:{middleLayerBack:!0},type:"arrow-short-back"});function p({className:e,onBack:t}){const a=(0,c.T)();return n().createElement(l.z,{className:(0,u.E)("MiddleLayerBack-critical-module__container--Cn0o1",e),"data-testid":"middle-layer-back",iconLeft:h,size:40,view:"empty",onClick:t},a("common.back"))}var m=a(27522),v=a(68712),g=a(77203),y=a(74378),f=a(5718),w=a(35543),b=a(59303),E=a(65044),k=a(72122),S=a(5825),A=a(99226);const I=(0,A.U)("middle_layer_in_game_gallery_item_active",((e,t)=>({app_id:e,elemIndex:t}))),P=(0,A.U)("middle_layer_in_game_gallery_item_click",((e,t)=>({app_id:e,elemIndex:t}))),T=((0,A.U)("middle_layer_in_game_gallery_scroll",(e=>({app_id:e}))),(0,A.U)("middle_layer_in_game_category_click",((e,t)=>({app_id:e,category:t})))),C=((0,A.U)("middle_layer_in_game_logo_click",(e=>({app_id:e}))),(0,A.U)("middle_layer_in_game_play",((e,t)=>({app_id:e,target:t}))));var R=a(33124),D=a(72167),L=a(97808);function O(e){const{handleEvent:t}=(0,r.useContext)(E.u),a=(0,S.T)(),n=(0,S.C)(D.Ec);return(0,r.useCallback)((()=>{t(new CustomEvent("apply",{detail:{actionSource:b.EO.PlayButton}})),a((0,k.eI)(!1)),L.Z.post({type:"middle-layer",action:"close"}),n&&R.H.dispatch(C(n,e))}),[t,a,n,e])}var _=a(40184);const x=[];var N=a(73285);function B(){const{playPageData:e}=(0,_.b)();return(0,N.T)(e.gameInfo.title)}var M=a(37557),H=a(41811),F=a(29008);const $="MiddleLayerInfo-critical-module__divider--heZOo",W={};function Z({className:e,onCategoryClick:t}){const a=function(){const{playPageData:e}=(0,_.b)(),{gameData:t}=e;return null==t?void 0:t.media}(),r=B(),s=O("icon");return n().createElement("div",{className:(0,u.E)("MiddleLayerInfo-critical-module__container--SLA_6",e),"data-testid":"middle-layer-info"},n().createElement(y.Z,{alt:r,dataGuardAccept:!0,media:null!=a?a:W,mix:"MiddleLayerInfo-critical-module__icon--UV9lF",size:H.xY.S,onClick:s}),n().createElement("div",{className:"MiddleLayerInfo-critical-module__description--hz1Gq"},n().createElement(G,null),n().createElement(j,null),n().createElement(U,{onCategoryClick:t}),n().createElement(q,null)))}function G(){const e=B(),t=(0,c.T)(),a=O("title"),{handleEvent:s}=(0,r.useContext)(E.u),o=(0,r.useCallback)((()=>{s(new CustomEvent("info"))}),[s]),i=(0,r.useMemo)((()=>n().createElement(V,null)),[]);return n().createElement("div",{className:"MiddleLayerInfo-critical-module__titleAndAbout--L03_R"},n().createElement("h1",{className:"MiddleLayerInfo-critical-module__title--a6AEJ","data-guard-accept":!0,itemScope:!0,itemType:"http://schema.org/WebPage",onClick:a},e),n().createElement(l.z,{className:"MiddleLayerInfo-critical-module__about--hwcEP",iconLeft:i,size:32,view:"empty",onClick:o},t("game.description.title")))}function j(){var e;const{playPageData:t}=(0,_.b)(),{gameSettings:a}=t,r=function(){const{playPageData:e}=(0,_.b)(),{gameInfo:t}=e;return t.gameQualityScore}(),s=function(){const{playPageData:e}=(0,_.b)(),{gameInfo:t}=e;return t.rating}(),o=null==(e=a.features)?void 0:e.age_rating;return r||s?n().createElement("div",{className:"MiddleLayerInfo-critical-module__ratings--QfUsq"},r&&n().createElement(f.Z,{value:r}),n().createElement(w.Z,{hasWebAppsCategory:!1,rating:s}),o&&n().createElement(m.Wd,{variant:F.Ft[o]},o)):null}function U({onCategoryClick:e}){const{playPageData:t}=(0,_.b)(),{gameInfo:a}=t,s=function(){const{playPageData:e,categoryDataMappedByID:t}=(0,_.b)(),{gameData:a}=e,n=null==a?void 0:a.categoryIDs;return(0,r.useMemo)((()=>n?n.map((e=>t[e])).filter(Boolean):x),[n,t])}(),o=function(){var e;const{playPageData:t}=(0,_.b)();return null==(e=t.gameData)?void 0:e.developer}(),i=!a.gameQualityScore&&!a.rating,l=function(){var e;const{playPageData:t}=(0,_.b)(),{gameSettings:a}=t;return null==(e=a.features)?void 0:e.age_rating}();if(s.length||o)return n().createElement("div",{className:"MiddleLayerInfo-critical-module__categoriesAndDeveloper--CExvL"},s.length&&n().createElement("div",{className:"MiddleLayerInfo-critical-module__categories--ejQas"},s.map((t=>n().createElement(v.Z,{key:t.name,name:t.name,title:t.title,type:g.q.CLEAR,withIcon:!0,withLink:!0,onClick:e})))),o&&n().createElement(n().Fragment,null,n().createElement("div",{className:$},"·"),n().createElement("div",{className:"MiddleLayerInfo-critical-module__developer--D9qY4"},o.name)),i&&l&&n().createElement(n().Fragment,null,n().createElement("div",{className:$},"·"),n().createElement(m.Wd,{variant:F.Ft[l]},l)))}function q(){const{verticalName:e}=(0,M.C)((e=>e.vertical)),t=(0,c.T)(),a=O("play_button");return n().createElement("div",{className:"MiddleLayerInfo-critical-module__playAndLegal--UTfFN"},n().createElement(l.z,{className:"MiddleLayerInfo-critical-module__apply--ZTEka","data-guard-accept":!0,size:40,view:"primary",onClick:a},t(`common.play.vertical-${e}`)))}function V(){return n().createElement("svg",{height:"16",width:"16"},n().createElement("g",{fill:"currentColor"},n().createElement("path",{d:"M7 8a1 1 0 0 1 2 0v3a1 1 0 1 1-2 0V8ZM8 4a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"}),n().createElement("path",{d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16Zm0-2A6 6 0 1 0 8 2a6 6 0 0 0 0 12Z",fillRule:"evenodd"})))}var z=a(37377);function K(e,t){return(e-e%t)/t}function Y(e,t){return e%t}var X=a(82027),J=Object.defineProperty,Q=Object.defineProperties,ee=Object.getOwnPropertyDescriptors,te=Object.getOwnPropertySymbols,ae=Object.prototype.hasOwnProperty,re=Object.prototype.propertyIsEnumerable,ne=(e,t,a)=>t in e?J(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;const se=()=>{const e=(0,c.T)(),t=(0,S.C)(D.Ec),a=(0,S.C)((e=>{var a;return t?null==(a=e.similarGames)?void 0:a[t]:void 0}));return(null==a?void 0:a.length)?n().createElement("div",{className:"MiddleLayerSimilarGames-critical-module__wrapper--KDSi1"},n().createElement("h3",{className:"MiddleLayerSimilarGames-critical-module__title--fyqiF"},e("similar.middle-layer-game-page.title")),n().createElement("div",{className:"MiddleLayerSimilarGames-critical-module__gridContainer--frj1s"},a.map(((e,t)=>{const a=(r=((e,t)=>{for(var a in t||(t={}))ae.call(t,a)&&ne(e,a,t[a]);if(te)for(var a of te(t))re.call(t,a)&&ne(e,a,t[a]);return e})({},e),s={column:Y(t,4),guard:!1,row:K(t,4)},Q(r,ee(s)));var r,s;return n().createElement(z.Z,{game:a,hasInfo:!1,isCaption:!0,key:e.appID,line:4,listType:H.co.SIMILAR,mix:"MiddleLayerSimilarGames-critical-module__gridItem--U51qj",redirParams:{column:Y(t,4),game:a,line:4,listType:H.co.SIMILAR,size:H.xY.ADAPTIVE_RECOMMENDED_NEW,wrapperName:H.NK.GAME_PAGE},row:K(t,4),scrollMode:X.NH.VERTICAL,size:H.xY.ADAPTIVE_RECOMMENDED_NEW})})))):null};var oe=a(83919);const ie=()=>{const e=(0,S.C)(D.IE),t=O("gallery"),a=O("early"),l=O("game_info"),d=function(){const{handleEvent:e}=(0,r.useContext)(E.u);return(0,r.useCallback)((()=>{e(new CustomEvent("cancel"))}),[e])}();!function({onPlay:e}){(0,r.useEffect)((()=>{var t;null==(t=window.earlyEvents)||t.messages.forEach((t=>{const{type:a,action:r}=t;"guard"===a&&"accept"===r&&e()}))}),[e])}({onPlay:a}),function({onPlay:e}){(0,r.useEffect)((()=>{function t(t){"apply"===t.data.action&&e()}return L.Z.onInternalMessage("guard",t,{withHistory:!0}),()=>{L.Z.offInternalMessage("guard",t)}}),[e])}({onPlay:l});const{onGalleryItemActive:c,onGalleryItemClick:h,onCategoryClick:m}=function(){var e;const{playPageData:t}=(0,r.useContext)(s.Z),a=null==(e=t.gameData)?void 0:e.appID,n=(0,r.useCallback)((e=>{a&&R.H.dispatch(I(a,e))}),[a]),o=(0,r.useCallback)((e=>{a&&R.H.dispatch(P(a,e))}),[a]),i=(0,r.useCallback)((e=>{a&&R.H.dispatch(T(a,e))}),[a]);return{onGalleryItemActive:n,onGalleryItemClick:o,onCategoryClick:i}}();return n().createElement("article",{className:(0,u.E)("MiddleLayerInGame-critical-module__container--tzav3",i.P,e&&"MiddleLayerInGame-critical-module__withSimilar--ud1zP")},n().createElement(p,{className:"MiddleLayerInGame-critical-module__back--Qzqo9",onBack:d}),n().createElement("div",{className:"MiddleLayerInGame-critical-module__content--P6BuC"},n().createElement(Z,{onCategoryClick:m}),n().createElement("section",{className:"MiddleLayerInGame-critical-module__gallery--oo1jj"},n().createElement(oe.Z,{className:"MiddleLayerInGame-critical-module__galleryComponent--hQp8t",onItemActive:c,onItemClick:h,onPreviewClick:t})),e&&n().createElement(n().Fragment,null,n().createElement(se,null),n().createElement("section",{className:"MiddleLayerInGame-critical-module__footer--NSyLM"},n().createElement(o.Z,{withPartners:!1})))))}},30809:(e,t,a)=>{a.d(t,{Z:()=>u});var r=a(84819),n=a(87363),s=a.n(n),o=a(70579),i=a(87761),l=a(11510),d=a(94671),c=a(10592);const u=({onClosePaymentModal:e,renderSpin:t,renderPurchaseIframe:a,skipEmail:n,isVisibleIframe:u,children:h,isSpinVisible:p,purchaseInfo:m,onPaymentCancel:v})=>{const g=(0,l.T)(),y=(0,r.v_)({on:"payments_iframe_gdpr_improvements"});return s().createElement(i.Z,{centeredVertically:!1,cls:(0,d.E)("PaymentsModalDesktop-module__modal--n9yJJ","inAppForm"),isAdaptive:!0,testId:"inAppForm",onClose:e},s().createElement("div",{className:(0,d.E)("PaymentsModalDesktop-module__modalInner--xPuSv",u?"PaymentsModalDesktop-module__modalIframeVisible--ianzL":"",n?"PaymentsModalDesktop-module__skipEmail--kEHK1":"",y?"PaymentsModalDesktop-module__wideIframe--xKXNE":"",(null==m?void 0:m.paymentService)===c.ob.XSOLLA?"PaymentsModalDesktop-module__xsollaPaymentIframe--HyHAR":"")},s().createElement("div",{className:"PaymentsModalDesktop-module__modalInnerLeft--WcA7L"},p?t():s().createElement("div",{className:"PaymentsModalDesktop-module__modalInnerLeftContent--Vf7oY"},h)),s().createElement("div",{className:"PaymentsModalDesktop-module__modalInnerRight--sZ4pG"},y?s().createElement("div",{className:"PaymentsModalDesktop-module__wideIframeHeader--QeBoA"},s().createElement(o.Z,{className:"PaymentsModalDesktop-module__purchaseBackIcon--G22eq","data-testid":"payments-iframe-container-back-button",type:"arrow-left-long",onClick:v}),s().createElement("span",{className:"PaymentsModalDesktop-module__purchaseIframeTitle--TtZf0"},g("payments.common.title"))):null,s().createElement("div",{className:"PaymentsModalDesktop-module__purchaseIframeContainer--EZ000"},a()))))}},66880:(e,t,a)=>{a.d(t,{d:()=>m});var r=a(87363),n=a.n(r),s=a(84819),o=a(21363),i=a(11510),l=a(5825),d=a(70579),c=a(29008),u=a(40184);const h="SecuredPaymentsFooter-module__payments-system-icon--OyMf9",p=()=>{const e=(0,i.T)(),{platform:t,isSafari:a}=(0,u.b)(),{isIOS:r}=(0,c.AK)(t);return n().createElement("div",{className:"SecuredPaymentsFooter-module__secured-payments-footer--Xvm5e"},n().createElement("div",{className:"SecuredPaymentsFooter-module__secured-label--k34QC"},n().createElement(d.Z,{className:"SecuredPaymentsFooter-module__lock-icon--pOqEE",type:"lock"}),n().createElement("span",null,e("payments.secured_by",{params:{operator:"XSolla"}}))),n().createElement("div",{className:"SecuredPaymentsFooter-module__payments-system-list--EYc0J"},n().createElement(d.Z,{className:h,type:"visa"}),n().createElement(d.Z,{className:h,type:"master-card"}),n().createElement(d.Z,{className:h,type:r||a?"apple-pay":"google-pay"})))},m=()=>{const e=(0,i.T)();return 0===(0,l.C)((e=>{var t;return null!=(t=e.user.balance.value)?t:0}))&&(0,s.v_)({on:"payments_trusted_user_interface"})?n().createElement(p,null):n().createElement("div",{className:"PaymentsFooter-critical-module__payments-footer--J9ZSd"},n().createElement(o.ZP,{ContainerTag:"span",className:"PaymentsFooter-critical-module__copyright--VdpT3",isShortDescription:!0}),n().createElement("a",{className:"PaymentsFooter-critical-module__support-link--APVJt",href:e("common.support.link"),rel:"noopener",target:"_blank"},e("in-app-payments.support-link.text")))}},53533:(e,t,a)=>{a.d(t,{H:()=>He});var r=a(38096),n=a(87363),s=a.n(n),o=a(45112);const i="payments-popup";var l=a(71784),d=a(83388),c=a(40893),u=a(40184),h=a(97808),p=a(11744),m=a(47496),v=a(84819),g=a(33509),y=a(73694),f=a(93298);const w=(0,f.M$)("Payments",f.XG.Payments);var b=a(37643),E=a(82346),k=a(33252);var S=a(55400),A=a(87227),I=a(46986),P=a(5825);var T=a(19280),C=a(71522),R=Object.defineProperty,D=Object.defineProperties,L=Object.getOwnPropertyDescriptors,O=Object.getOwnPropertySymbols,_=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,N=(e,t,a)=>t in e?R(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var B=a(93569);const M={productSection:"ProductCard-module__productSection--seMKP",productInfo:"ProductCard-module__productInfo--_nBxq",productImage:"ProductCard-module__productImage--skc0M",purchase:"ProductCard-module__purchase--GGzJ4",collapsed:"ProductCard-module__collapsed--zXqDt",hiddenOnCollapsed:"ProductCard-module__hiddenOnCollapsed--o9KnO",section:"ProductCard-module__section--hZBrg",toggle:"ProductCard-module__toggle--anMI8",stub:"ProductCard-module__stub--PRuil","stub-pulsate":"ProductCard-module__stub-pulsate--_hFCB",loadingPurchase:"ProductCard-module__loadingPurchase--fIJRH"};var H=a(14943),F=a(94671);const $=({image:e,title:t,description:a,isGift:r=!1,dataTestId:n="Payments-ProductPreview"})=>s().createElement("section",{className:(0,F.E)("ProductPreview-module__productSection--R9yHT","ProductPreview-module__section--BMv0Y",r?"ProductPreview-module__giftSection--uw7hs":""),"data-testid":n},s().createElement(H.Z,{className:"ProductPreview-module__productImage--Qb_3n",src:e}),s().createElement("div",{className:"ProductPreview-module__productInfo--I6Awp"},s().createElement("h5",{title:t},t),s().createElement("p",{title:a},a)));var W=a(89662),Z=a(70556),G=a(11510);const j=e=>{const[t,a]=(0,n.useState)(e),r=(0,n.useRef)(),s=(0,n.useRef)(!0),o=(0,n.useCallback)(((e,t)=>{r.current=t,a(e)}),[]);return(0,n.useEffect)((()=>{var e;s.current?s.current=!1:null==(e=r.current)||e.call(r,t)}),[t]),[t,o]},U=({title:e,imageURL:t})=>{const a=(0,G.T)();return s().createElement($,{dataTestId:"Payments-GiftCard",description:a("payments.gift-description"),image:`${t}/default192x192`,isGift:!0,title:e})},q={collapsed:{icon:"arrow-down"},expanded:{icon:"arrow-pointer"}},V=({product:e,purchase:t,onCollapseInfo:a,specialOffer:r})=>{const n=(0,G.T)(),{lang:o}=(0,u.b)(),[i,l]=j(!0),{icon:d}=q[i?"collapsed":"expanded"];return e&&t?(w("ProductCard product",e),w("ProductCard purchase",t),s().createElement("div",{"data-testid":"Payments-ProductCard"},s().createElement($,{description:e.description,image:e.image,title:e.title}),(()=>{if(!(0,v.v_)({off:"payments_improvements_inline_gifts"})&&r)return r.products.map((({icon:e,id:t,title:a})=>s().createElement(U,{imageURL:e.urlPrefix,key:t,title:a})))})(),s().createElement("section",{className:(0,F.E)(M.section,M.purchase,i?M.collapsed:""),onClick:()=>l(!i,(e=>"boolean"==typeof e&&(null==a?void 0:a(e))))},(({getText:e,purchase:t})=>"balance"!==(null==t?void 0:t.type)?null:s().createElement("div",{className:`${M.balanceType} balanceType`},s().createElement(W.Z,{amount:t.balanceDebited,iconPosition:"start",iconSize:Z.T.SMALL}),s().createElement("p",null,e("payments.currency-will-be-debited-from-balance")),s().createElement("p",{className:M.hiddenOnCollapsed},e("payments.currency-will-remain",{params:{currency:e("payments.currency",{number:t.balanceRemain}).toLowerCase(),number:t.balanceRemain}}))))({getText:n,purchase:t}),(({getText:e,lang:t,purchase:a})=>{if("refill"!==(null==a?void 0:a.type))return null;const{amount:r,minAmount:n,currency:o,balanceNotEnough:i}=a;return s().createElement("div",{className:M.refillType},s().createElement("h5",null,(0,S.T4)(r,o,t)),s().createElement("p",null,e("payments.total-to-be-paid")),s().createElement("p",{className:M.hiddenOnCollapsed},i<n?e("payments.refill-min-amount",{params:{currency:e("payments.currency",{number:n}).toLowerCase(),number:n}}):e("payments.currency-not-enough-on-balance",{params:{currency:e("payments.currency",{number:i}).toLowerCase(),number:i}})))})({getText:n,lang:o,purchase:t}),s().createElement(B.Z,{className:M.toggle,size:"xs",type:d})))):s().createElement("div",{className:M.stub,"data-testid":"Payments-ProductCard"},s().createElement("section",{className:(0,F.E)(M.section,M.productSection)},s().createElement("div",{className:M.productImage}," "),s().createElement("div",{className:M.productInfo},s().createElement("h5",null," "),s().createElement("p",null," "))),s().createElement("section",{className:(0,F.E)(M.section,M.purchase)},s().createElement("div",{className:M.loadingPurchase})))};var z=a(8804),K=a(73107),Y=a(21234),X=a(41811);const J=e=>X.CU.test(e),Q=({amount:e,currency:t,initialEmail:a,onConfirmClick:r,isFormDisabled:o,isTestPurchaseCheckboxChecked:i})=>{const l=(0,G.T)(),{lang:d}=(0,u.b)(),c=(0,n.useRef)(null),h=(0,P.C)((e=>Boolean(e.userData.login))),p=(0,P.C)((e=>e.ui.isFullscreenActive)),m=(0,P.C)((e=>{var t;return null!=(t=e.user.balance.value)?t:0})),[g,y]=(0,n.useState)(null!=a?a:""),[f,w]=(0,n.useState)(void 0),[b,E]=j(!1),[k,A]=(0,n.useState)(),I=(0,n.useMemo)((()=>!h&&e>0),[h,e]);(0,n.useEffect)((()=>{g.length?J(g)?w("correct"):w("warning"):w(void 0)}),[g]),(0,n.useEffect)((()=>{a&&y(a)}),[a]);const T=(0,n.useCallback)((e=>{p&&J(g)&&E(!0),A(void 0)}),[p,E,g]),C=(0,n.useCallback)((e=>y(e.target.value)),[]),R=(0,n.useCallback)((()=>{var e;!I||g.length&&"warning"!==f?((0,Y.i)(),A(void 0),null==(e=c.current)||e.blur(),r(g)):A(l("payments.invalid-email-warning"))}),[g,l,f,I,r]),D=(0,n.useCallback)((e=>{e.preventDefault(),R()}),[R]),L=(0,n.useCallback)((()=>{E(!1,(()=>{var e;return null==(e=c.current)?void 0:e.focus()}))}),[E]),O=(0,n.useMemo)((()=>0===m&&(0,v.v_)({on:"payments_trusted_user_interface"})?l("payments.continue-to-payment"):o?l("in-app-payments.payment.method"):0===e||i?l("payments.buy"):l("payments.pay",{params:{price:(0,S.T4)(e,t,d)}})),[o,l,e,t,d,i,m]);return s().createElement("div",{"data-testid":"PaymentConfirmForm"},s().createElement("form",{onSubmit:D},I&&s().createElement(s().Fragment,null,p&&b&&s().createElement("div",{className:"PaymentConfirmForm-module__editButtonWrapper--xbhND"},s().createElement(z.z,{size:24,type:"button",view:"empty",onClick:L},l("payments.edit"))),s().createElement(K.I,{"data-testid":"payment-form-email-input",disabled:b||o,errorMessage:k,errorMessageClassName:"PaymentConfirmForm-module__emailLabel--mMY1A",hasIcon:Boolean(f),maxLength:X.bV,placeholder:l("payments.email-input-placeholder"),ref:c,size:40,state:f,type:"email",value:g,onBlur:T,onChange:C})),s().createElement("div",{className:I?"PaymentConfirmForm-module__confirmButtonWrapper--SivgC":""},s().createElement(z.z,{"data-testid":"payment-form-pay-button",disabled:o,size:40,view:"primary",width:"max"},O))))};var ee=a(66880),te=a(3462),ae=a(69838),re=a(74378),ne=a(35543),se=a(70579),oe=a(11324);const ie=()=>{const{playPageData:{gameData:e}}=(0,u.b)(),t=(0,G.T)();if(e)return s().createElement("div",{className:"PaymentsHeaderGameInfo-module__payments-game-info-header--fOQL4"},s().createElement(re.Z,{alt:e.title,media:e.media,size:oe.KL.size144}),s().createElement("div",{className:"PaymentsHeaderGameInfo-module__game-info-container--c8L3z"},s().createElement("span",{className:"PaymentsHeaderGameInfo-module__game-title--JM6ra"},e.title),s().createElement("div",{className:"PaymentsHeaderGameInfo-module__game-developer-container--y7uHU"},s().createElement("span",{className:"PaymentsHeaderGameInfo-module__game-developer--_3Abg"},t("payments.developed-by",{params:{developer:e.developer.name}})),s().createElement("div",null,s().createElement(se.Z,{className:"PaymentsHeaderGameInfo-module__rating-star--DoA47",type:"multiple-rating-star"}),s().createElement("span",null,t("game.rating-position"))),s().createElement(ne.Z,{hasWebAppsCategory:!1,rating:e.rating,withoutText:!0}))))},le="PaymentsHeader-module__secondary-text--dAxIj",de=()=>{const e=(0,G.T)(),t=(0,P.C)((e=>{var t;return null!=(t=e.user.balance.value)?t:0}));return 0===t&&(0,v.v_)({on:"payments_trusted_user_interface"})?s().createElement(ie,null):s().createElement("div",{className:"PaymentsHeader-module__payments-header--NjXGA"},s().createElement("div",{className:"PaymentsHeader-module__logo-with-button--gUEYe"},s().createElement(te.Z,{type:ae.q7.PAYMENTS})),s().createElement("div",{className:"PaymentsHeader-module__yans-amount--ge_eY yans-amount","data-testid":"payment-form-yans-amount"},s().createElement("span",{className:le},e("payments.you_have")),s().createElement(W.Z,{amount:t,iconPosition:"start",iconSize:Z.T.SMALL}),s().createElement("span",{className:le},e("payments.currency",{number:t}).toLowerCase())))},ce=({children:e})=>s().createElement(s().Fragment,null,s().createElement(de,null),e,s().createElement(ee.d,null)),ue=({email:e,onCancel:t,onApprove:a})=>{const r=(0,G.T)(),o=(0,n.useCallback)((()=>{a(e)}),[a,e]);return s().createElement("div",{"data-testid":"PaymentApproveState"},s().createElement("div",{className:"PaymentApproveState-module__main--Ex8PS"},s().createElement("div",{className:"PaymentApproveState-module__content--yUqPP"},s().createElement("div",{className:"PaymentApproveState-module__icon--KnDg4"},s().createElement("div",{className:"PaymentApproveState-module__iconImage--rQ6yL"})),s().createElement("div",{className:"PaymentApproveState-module__text--eU0km"},r("payments.approve.question")))),s().createElement("div",null,s().createElement("div",{className:"PaymentApproveState-module__buttonApprove--H9wfA"},s().createElement(z.z,{size:40,type:"submit",view:"primary",width:"max",onClick:o},r("payments.approve.confirm"))),s().createElement("div",null,s().createElement(z.z,{size:40,type:"submit",view:"secondary",width:"max",onClick:t},r("payments.approve.cancel")))))};var he=(e=>(e.COMMON="common",e))(he||{});const pe=({onActionClick:e,reason:t})=>{const a=(0,G.T)(),{title:r,description:n}=function(e){return{title:e("payments.purchase-failed-title"),description:e("payments.purchase-failed-description")}}(a);return s().createElement("div",{className:"PaymentFailedState-module__container--iT2u3","data-testid":"PaymentFailedState"},s().createElement(B.Z,{type:"failed"}),s().createElement("span",{className:"PaymentFailedState-module__title--i6Igg"},r),s().createElement("span",{className:"PaymentFailedState-module__description--CAe52"},n),s().createElement(z.z,{size:40,view:"primary",width:"max",onClick:e},a("payments.try-again")))},me="PaymentSuccessState-module__description--ljNHv",ve=e=>{if(!e)return"";const t=e.toLowerCase();return`${t.slice(0,10)}\n${t.slice(10)}\n`},ge=({email:e,recoveryCode:t,offerId:a,onActionClick:r})=>{const n=(0,G.T)(),o=(0,P.C)((e=>e.userData.login)),i=e?n("payments.purchase-complete-description",{params:{email:e,recoveryCode:ve(t)}}):n("payments.purchase-complete-description-without-email",{params:{recoveryCode:ve(t)}});return s().createElement("div",{className:"PaymentSuccessState-module__container--aZQzo","data-testid":"PaymentsSuccessState"},s().createElement(B.Z,{type:"done"}),s().createElement("div",{className:"PaymentSuccessState-module__infoContainer--txIBj"},s().createElement("span",{className:"PaymentSuccessState-module__title--pbbjs"},n(a?"payments.succeed-with-offer-title":"payments.purchase-complete-title")),a?s().createElement("span",{className:me},n("payments.succeed-with-offer-description")):!o&&s().createElement("span",{className:me},i)),s().createElement(z.z,{className:"PaymentSuccessState-module__button--rzAYv",size:40,type:"submit",view:"primary",width:"max",onClick:r},n("payments.return-to-game")))};var ye=a(68153),fe=a(29067),we=a(37341),be=a(48136),Ee=a(40656),ke=a(13377),Se=a(10592);var Ae=Object.defineProperty,Ie=Object.defineProperties,Pe=Object.getOwnPropertyDescriptors,Te=Object.getOwnPropertySymbols,Ce=Object.prototype.hasOwnProperty,Re=Object.prototype.propertyIsEnumerable,De=(e,t,a)=>t in e?Ae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;let Le;Le=a(30809).Z;const Oe=(0,n.memo)((({hasInitialLoader:e,paymentsConfig:t,purchaseConfig:a,onPurchaseFailed:i,onConfirmSuccessPurchase:c,onPurchaseSuccess:f,onClosePaymentModal:R})=>{const{lang:B,playPageData:{gameInfo:M},abt:{flags:H},tld:F}=(0,u.b)(),$=(0,G.T)(),W=(0,P.T)(),Z=(0,we.ff)(),{playPageData:j}=(0,u.b)(),{value:U=0,fetching:q,fetchedTimestamp:z}=(0,P.C)((e=>e.user.balance)),K=(0,P.C)((e=>e.user.payCurrency)),Y=(0,P.C)((e=>e.userData)),X=z>0,{loadProduct:J,product:ee,isLoading:te,isProductMockable:ae}=(()=>{const e=(0,A.z)(),[t,a]=(0,n.useState)(!1),[r,s]=(0,n.useState)(!1),[o,i]=(0,n.useState)(null),l=(0,n.useCallback)((t=>{return r=function*(){s(!0);try{const{product:s,mockable:o}=yield e.getGameProductById((r=((e,t)=>{for(var a in t||(t={}))_.call(t,a)&&N(e,a,t[a]);if(O)for(var a of O(t))x.call(t,a)&&N(e,a,t[a]);return e})({},t),n={draft:(0,C.m)()},D(r,L(n))));return w("Fetched product",s),i((()=>{const e=new T.Z(s);return w("is shown with productData:",e),e})),a(Boolean(o)),{product:s}}catch(e){throw e}finally{s(!1)}var r,n},new Promise(((e,t)=>{var a=e=>{try{s(r.next(e))}catch(e){t(e)}},n=e=>{try{s(r.throw(e))}catch(e){t(e)}},s=t=>t.done?e(t.value):Promise.resolve(t.value).then(a,n);s((r=r.apply(void 0,null)).next())}));var r}),[e]);return(0,n.useMemo)((()=>({loadProduct:l,isLoading:r,product:o,isProductMockable:t})),[l,r,o,t])})(),{loadSpecialOffers:re,isLoading:ne,specialOffer:se}=(()=>{const e=(0,A.z)(),{lang:t,playPageData:{gameInfo:{appId:a}}}=(0,u.b)(),[r,s]=(0,n.useState)(!1),[o,i]=(0,n.useState)(null),l=(0,n.useCallback)((()=>{return r=function*(){s(!0);try{const r=yield e.getGameSpecialOffers(Number(a),t);return w("Fetched special offer",r),i(r),{specialOffer:r}}catch(e){throw e}finally{s(!1)}},new Promise(((e,t)=>{var a=e=>{try{s(r.next(e))}catch(e){t(e)}},n=e=>{try{s(r.throw(e))}catch(e){t(e)}},s=t=>t.done?e(t.value):Promise.resolve(t.value).then(a,n);s((r=r.apply(void 0,null)).next())}));var r}),[e,a,t]);return(0,n.useMemo)((()=>({loadSpecialOffers:l,isLoading:r,specialOffer:o})),[l,r,o])})(),{buyGameProduct:oe,isLoading:ie}=(()=>{const[e,t]=(0,n.useState)(!1),a=(0,n.useCallback)((e=>{return a=function*(){const{productId:a,purchaseConfig:r,paymentsConfig:n,isTestPurchase:s,offerId:o}=e;if(!r)throw new Error("No purchase config");if(!a)throw new Error("No current product");t(!0);try{const e=yield(0,E.qj)({developer_payload:r.developerPayload,id:a,mock:Boolean(s),signed:null==n?void 0:n.signed,offerId:o});t(!1),w("buy response",e);const{data:i,signature:l}=(0,b.c)(e,k.H);return w("data",i),w("signature",l),{data:i,signature:l}}catch(e){throw t(!1),e}},new Promise(((e,t)=>{var r=e=>{try{s(a.next(e))}catch(e){t(e)}},n=e=>{try{s(a.throw(e))}catch(e){t(e)}},s=t=>t.done?e(t.value):Promise.resolve(t.value).then(r,n);s((a=a.apply(void 0,null)).next())}));var a}),[]);return(0,n.useMemo)((()=>({buyGameProduct:a,isLoading:e})),[a,e])})(),{getProductCurrency:le,realAmount:de,productCurrencyPack:me,currencyPrice:ve,isLoadingProductCurrency:Ae}=(()=>{const e=(0,A.z)(),[t,a]=(0,n.useState)(null),[r,s]=(0,n.useState)(0),o=(0,P.T)(),{lang:i}=(0,u.b)(),[l,d]=(0,n.useState)(!1),c=(0,n.useCallback)((t=>{return r=function*(){try{w("Load product pack"),d(!0);const{data:r}=yield e.fetchCurrencyProducts({amount:t,lang:i}),n=r[0].extraInfo.currency;return a(r[0]),s((0,S.OO)(r[0].extraInfo.price[n])),o((0,I.NW)(n||"RUB")),r[0]}catch(e){w("Error loading product pack",e)}finally{d(!1)}},new Promise(((e,t)=>{var a=e=>{try{s(r.next(e))}catch(e){t(e)}},n=e=>{try{s(r.throw(e))}catch(e){t(e)}},s=t=>t.done?e(t.value):Promise.resolve(t.value).then(a,n);s((r=r.apply(void 0,null)).next())}));var r}),[e,o,i]);return(0,n.useMemo)((()=>{var e;return{getProductCurrency:c,productCurrencyPack:t,currencyPrice:r,isLoadingProductCurrency:l,realAmount:null!=(e=null==t?void 0:t.extraInfo.amount.real)?e:0}}),[c,t,l,r])})(),[Oe,_e]=(0,n.useState)(!1),[xe,Ne]=(0,n.useState)(!1),[Be,Me]=(0,n.useState)(!1),[He,Fe]=(0,n.useState)(null),[$e,We]=(0,n.useState)(""),[Ze,Ge]=(0,n.useState)(!1),[je,Ue]=(0,n.useState)(!1),[qe,Ve]=(0,n.useState)(null),ze=null==me?void 0:me.extraInfo.minAmount,Ke=(0,n.useMemo)((()=>function({amount:e,balance:t,currency:a,currentProduct:r,minAmount:n}){if(!a||!r)return null;const s=Number(r.priceValue);return t&&t>=s?{balanceDebited:s,balanceRemain:t-s,type:"balance"}:{amount:e,minAmount:n,balanceDebited:s,balanceNotEnough:s-(null!=t?t:0),currency:a,type:"refill"}}({amount:ve,minAmount:null!=ze?ze:0,balance:U,currency:K,currentProduct:ee})),[K,U,ve,ee,ze]),Ye=(0,n.useMemo)(p.Z,[]),[Xe,Je]=(0,n.useState)((0,v.v_)({on:"payments_improvements_downgrade.fake_timeout"})),[Qe,et]=(0,n.useState)(0),[tt,at]=(0,n.useState)(e),rt=(0,n.useMemo)((()=>tt||te||q||ie||Ae||Ze||ne),[tt,te,ie,Ae,q,Ze,ne]),nt=(0,n.useMemo)((()=>(0,v.v_)({on:"payments_enable_psp_for_all_domains"})&&"RUB"===K?Se.ob.PSP:(0,be.V)(H,F,K,(0,r.getDomainConfig)().payments.xsollaEnabled)?Se.ob.XSOLLA:Se.ob.PSP),[H,F,K]),st=(0,n.useRef)(new l.Z({appId:M.appId,productStatData:{id:a.id},basicSupportPaymentRequest:Ye,supportPaymentRequest:!1,dialogType:d.Z.PURCHASE})),ot=(0,n.useCallback)((e=>{!ie&&ee&&ve&&Ve({amount:de,balanceDiff:de,email:$e||e||void 0,payCurrency:K,paymentService:nt,price:ve,reason:Se.YC.PURCHASE,value:de})}),[$e,K,ve,ee,ie,de,nt]);(0,n.useEffect)((()=>{ae&&Me(!0)}),[ae]),(0,n.useEffect)((()=>{ot()}),[ot]),(0,o.qR)((()=>{if(!(0,v.v_)({on:"payments_improvements_downgrade.fake_timeout"}))return;const e=window.setInterval((()=>{et((t=>{const a=t+1;return a>=2&&(window.clearInterval(e),Je(!1)),a}))}),5*Ee.WT);return()=>{window.clearInterval(e)}})),(0,n.useEffect)((()=>{if(!ee||!X||!tt||Xe)return;const e=U-Number(ee.priceValue)>=0;(ve||e)&&at(!1)}),[ve,Xe,X,U,Y.uid,qe,tt,ee,q,me]),(0,o.qR)((()=>(Z.gamePause("play_purchase_dialog"),(0,v.v_)({on:"payments_improvements_inline_gifts"})&&re(),w("Load products"),J({appId:String(M.appId),id:a.id,lang:(null==t?void 0:t.lang)||B}).catch((e=>{st.current.error(e,{errorPlace:"purchase",preventDestroy:!0})})),()=>{te&&st.current.error(new Error("InApp payment popup was closed."),{errorPlace:"purchase-show"}),Z.gameResume("play_purchase_dialog")}))),(0,n.useEffect)((()=>{!ee||q||me||U-Number(ee.priceValue)>=0||le(Number(ee.priceValue)-U).then((()=>{st.current.log("show",{basicSupportPaymentRequest:Ye}),st.current.addProductInCart({gameInfo:M})}))}),[ee,U,q,le,Ye,me,M]);const it=(0,n.useCallback)((e=>{null==f||f(e),Fe({name:"success",recoveryCode:e.recoveryCode,offerId:e.offerId,data:e})}),[f,Fe]),lt=(0,n.useCallback)((()=>{"success"===(null==He?void 0:He.name)&&He.data&&c(He.data)}),[c,He]),dt=(0,n.useCallback)((()=>{xe||(Ve(null),Ue(!1),Oe&&R())}),[R,Oe,xe]),ct=(0,n.useCallback)((e=>{"RETRY_WITH"!==e.code&&(st.current.error(e,{errorPlace:"purchase",preventDestroy:!0}),i(e),Fe({name:"failure"})),Ve(null),Ue(!1),Ne(!1)}),[i,Fe]),ut=(0,n.useCallback)((()=>{return e=function*(){if(ee){Ue(!1),Ne(!1);try{const{data:e,signature:r}=yield oe({paymentsConfig:t,productId:ee.id,purchaseConfig:a,isTestPurchase:Be,offerId:null==se?void 0:se.offerID});if("success"===e.status){W((0,I.uV)({forceFetch:!0}));const t=yield((e,t,a)=>new Promise(((r,n)=>{var s=e=>{try{i(a.next(e))}catch(e){n(e)}},o=e=>{try{i(a.throw(e))}catch(e){n(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(s,o);i((a=a.apply(e,t)).next())})))(void 0,null,(function*(){return h.Z.post({type:"auth",action:"has-auth"}).then((({data:e})=>e.hasAuth))}));if(st.current.buyProduct({gameInfo:M}),t)it({data:e,signature:r,offerId:null==se?void 0:se.offerID});else{Ge(!0);const t=yield(0,E.WM)();Ge(!1),it({data:e,signature:r,recoveryCode:t})}}else"failure"===e.status?ct(new m.Z({code:"PAYMENT_FAILURE",message:"Failure payment status."})):ct(new m.Z({code:"PAYMENT_FAILURE",message:"Unknown error"}))}catch(e){(0,k.H)({block:ke.W.PAYMENT},e),Ge(!1),ct(new m.Z({code:"PAYMENT_FAILURE",message:"Unknown error"}))}}},new Promise(((t,a)=>{var r=t=>{try{s(e.next(t))}catch(e){a(e)}},n=t=>{try{s(e.throw(t))}catch(e){a(e)}},s=e=>e.done?t(e.value):Promise.resolve(e.value).then(r,n);s((e=e.apply(undefined,null)).next())}));var e}),[ee,oe,a,t,Be,W,M,se,it,ct]),ht=(0,n.useCallback)((e=>{st.current.log(e?"productInfoCollapsed":"productInfoExpanded")}),[]),pt=(0,n.useCallback)((e=>{w("confirmPayment"),Fe(null),!ve||Be?ut():(st.current.log("showPaymentIframe",{purchase:qe}),Ue(!0),ot(e))}),[ot,ut,ve,qe,Be]),mt=(0,n.useCallback)((e=>{w("onPaymentConfirm"),We(e),(0,v.v_)({on:"payments_improvements_downgrade.approve_question"})?Fe({name:"approve"}):pt(e)}),[pt]),vt=(0,n.useCallback)((()=>{Fe(null),Ue(Oe),Oe&&ot(),st.current.log("retry",{basicSupportPaymentRequest:Ye})}),[Fe,ot,Ye,Oe]),gt=(0,n.useCallback)((()=>{Me(!Be)}),[Be]),yt=(0,n.useCallback)((()=>{Ne(!0)}),[]),ft=(0,n.useCallback)(((e,t)=>{ct(t)}),[ct]),wt=(0,n.useCallback)((()=>$(Xe?0===Qe?"spin.connection":"spin.initialization":"spin.wait")),[$,Xe,Qe]),bt=(0,n.useCallback)((()=>s().createElement(y.y,{fullWidth:!0,position:"center",size:38,spinning:!0,text:wt(),thickness:"bold",view:"default"})),[wt]),Et=(0,n.useCallback)((()=>{if(!(null==qe?void 0:qe.price))return null;const e=qe.paymentService===Se.ob.PSP?ye.Z:fe.Z;return s().createElement(e,(t=((e,t)=>{for(var a in t||(t={}))Ce.call(t,a)&&De(e,a,t[a]);if(Te)for(var a of Te(t))Re.call(t,a)&&De(e,a,t[a]);return e})({},qe),a={dialogType:d.Z.PURCHASE,fullScreen:!0,hasSmallSpinWithText:!0,isInvisible:!1,shouldWaitIframeButtonClick:!1,onCreateIFrame:We,onReject:ft,onResolve:ut,onStarted:yt},Ie(t,Pe(a))));var t,a}),[qe,We,ft,ut,yt]),kt=rt&&!He;return s().createElement(Le,{isSpinVisible:kt,isVisibleIframe:je,purchaseInfo:qe,renderPurchaseIframe:Et,renderSpin:bt,skipEmail:Oe&&!He,onClosePaymentModal:R,onPaymentCancel:dt},!kt&&("approve"===(null==He?void 0:He.name)?s().createElement(ce,null,s().createElement(ue,{email:$e,onApprove:pt,onCancel:R})):"success"===(null==He?void 0:He.name)?s().createElement(ce,null,s().createElement(ge,{email:$e,offerId:He.offerId,recoveryCode:He.recoveryCode,onActionClick:lt})):"failure"===(null==He?void 0:He.name)?s().createElement(ce,null,s().createElement(pe,{reason:he.COMMON,onActionClick:vt})):s().createElement(ce,null,ee&&s().createElement(V,{product:{description:ee.description,title:ee.title,image:ee.imageURI},purchase:Ke,specialOffer:se,onCollapseInfo:ht}),ae&&!je&&s().createElement("div",{className:"InAppPayments-module__testPurchaseCheckbox--zMouK"},s().createElement(g.X,{checked:Be,label:$("payments.test-purchase"),size:18,onChange:gt})),s().createElement(Q,{amount:ve,currency:K,initialEmail:$e,isFormDisabled:je,isTestPurchaseCheckboxChecked:Be,onConfirmClick:mt}))))}));var _e=a(58e3),xe=a(89592);const Ne=(0,n.memo)((({hasInitialLoader:e,paymentsConfig:t,purchaseConfig:a,onClose:r,onOpen:i,onPaymentFailed:l,onPaymentSuccess:d})=>{const[c,u]=(0,n.useState)(null),h=(0,P.T)();(0,o.qR)((()=>{h((0,I.Zc)({forceFetch:!0})),null==i||i()}));const p=(0,n.useCallback)((e=>{l({error:(0,_e.E)(e)})}),[l]),v=(0,n.useCallback)((()=>{if(c)return d(c),void r(!0);const e=new m.Z({code:"PAYMENT_USER_CANCELED",message:"User canceled the order."});(0,k.H)({prefix:xe.EW,block:ke.W.PAYMENT},e),l({error:e}),r()}),[l,d,r,c]),g=(0,n.useCallback)((e=>{d(e)}),[d]),y=(0,n.useCallback)((e=>{u(e)}),[]);return s().createElement(Oe,{hasInitialLoader:e,paymentsConfig:t,purchaseConfig:a,onClosePaymentModal:v,onConfirmSuccessPurchase:g,onPurchaseFailed:p,onPurchaseSuccess:y})}));var Be=a(62950),Me=a(34967);const He=()=>{const{abt:e,tld:t,playPageData:a}=(0,u.b)(),m=(0,P.C)((e=>e.user)),v=(0,P.C)((e=>e.userData.login)),{registerPopup:g,isShown:y,hidePopup:f}=(0,n.useContext)(c.O),w=a.gameInfo.appId;(0,o.qR)((()=>{g({name:i,weight:50,showCondition:()=>!1})}));const{sendCallback:b,purchaseConfig:E,paymentsConfig:k,metrikaLogger:S}=(()=>{const{showPopup:e}=(0,n.useContext)(c.O),{playPageData:{gameInfo:t}}=(0,u.b)(),a=(0,n.useRef)(),r=(0,n.useRef)(null),[s,o]=(0,n.useState)(null),[m,v]=(0,n.useState)(null),g=(0,n.useCallback)(((n,s)=>{const{action:c,data:u}=n.data;"purchase-start"===c&&(e({name:i,weight:50,showCondition:()=>!0}),o(u.purchaseConfig),v(u.paymentConfig),v(u.paymentsConfig),a.current=s,r.current=new l.Z({appId:t.appId,productStatData:{id:u.purchaseConfig.id},basicSupportPaymentRequest:(0,p.Z)(),supportPaymentRequest:!1,dialogType:d.Z.PURCHASE}))}),[e,t.appId]);return(0,n.useEffect)((()=>(h.Z.onExternalMessage("payments",g),()=>h.Z.offExternalMessage("payments",g))),[g]),{sendCallback:a.current,purchaseConfig:s,paymentsConfig:m,metrikaLogger:r.current}})(),A=(0,n.useCallback)((e=>{(0,Me.NF)({withClickDaemon:!0},xe.Ji.PURCHASES_PURCHASE_CLOSE,{auth:v,dialog_type:d.Z.PURCHASE,appId:w,success_payment:Boolean(e)}),f(i)}),[f,v,w]),I=(0,n.useCallback)((a=>{null==S||S.log("success",{basicSupportPaymentRequest:(0,p.Z)(),supportPaymentRequest:!1,purchaseToken:a.data.token,preventDestroy:!0}),null==S||S.reachGoals({provider:m.payCurrencyFetched?(0,Be.Y)(e.flags,t,m.payCurrency,(0,r.getDomainConfig)().payments.xsollaEnabled):void 0}),null==b||b({data:a}),A(!0)}),[b,A,S,e.flags,t,m]),T=(0,n.useCallback)((e=>{null==S||S.error(e.error,{errorPlace:"purchase",continuePaymentProcess:!0}),null==b||b(e)}),[b,S]),C=(0,n.useCallback)((()=>{null==S||S.log("open"),(0,Me.NF)({withClickDaemon:!0},xe.Ji.PURCHASES_PURCHASE_OPEN,{auth:v,dialog_type:d.Z.PURCHASE,appId:w})}),[S,v,w]);return y(i)&&E?s().createElement(Ne,{hasInitialLoader:!0,paymentsConfig:k,purchaseConfig:E,onClose:A,onOpen:C,onPaymentFailed:T,onPaymentSuccess:I}):null}},73673:(e,t,a)=>{a.d(t,{q:()=>o});var r=a(87363),n=a(40893);const s=[],o=()=>{const e=(0,r.useContext)(n.O),t=(0,r.useRef)(!1);return(0,r.useEffect)((()=>{e&&!t.current&&(t.current=!0,s.forEach((t=>{e.registerPopup(t)})))})),null}},34972:(e,t,a)=>{a.d(t,{Z:()=>g});var r=a(87363),n=a.n(r),s=a(40184),o=a(37557),i=a(63904),l=a.n(i),d=a(4824),c=a(11510),u=a(59303),h=a(15771);const p=({className:e=""})=>{const{abt:t,themeColor:a}=(0,r.useContext)(d.Z),s=a===u.aN.DARK,o=(0,h.$o)(t.flags);return s&&o?n().createElement("svg",{className:e,fill:"none",height:"163",viewBox:"0 0 153 163",width:"153",xmlns:"http://www.w3.org/2000/svg"},n().createElement("path",{clipRule:"evenodd",d:"m135.778 4h-41.5558c-7.3024 0-13.2222 6.0674-13.2222 13.552v93.896c0 7.485 5.9198 13.552 13.2222 13.552h41.5558c7.302 0 13.222-6.067 13.222-13.552v-93.896c0-7.4846-5.92-13.552-13.222-13.552zm-5.178 4h-1.635c.023.16331.035.33025.035.50001 0 1.93299-1.567 3.49999-3.5 3.49999h-21c-1.933 0-3.5-1.567-3.5-3.49999 0-.16976.012-.3367.035-.50001h-1.635c-5.0405 0-7.5607 0-9.4859.98094-1.6935.86286-3.0703 2.23966-3.9332 3.93316-.9809 1.9252-.9809 4.4454-.9809 9.4859v84.2c0 5.04 0 7.561.9809 9.486.8629 1.693 2.2397 3.07 3.9332 3.933 1.9252.981 4.4454.981 9.4859.981h31.2c5.04 0 7.561 0 9.486-.981 1.693-.863 3.07-2.24 3.933-3.933.981-1.925.981-4.446.981-9.486v-84.2c0-5.0405 0-7.5607-.981-9.4859-.863-1.6935-2.24-3.0703-3.933-3.93316-1.925-.98094-4.446-.98094-9.486-.98094z",fill:"#fff",fillRule:"evenodd",opacity:".2"}),n().createElement("rect",{fill:"#454545",height:"68",rx:"14",width:"121",x:"4",y:"91"}),n().createElement("path",{clipRule:"evenodd",d:"m4 145.778v-41.556c0-7.3022 6.0674-13.222 13.552-13.222h93.896c7.485 0 13.552 5.9198 13.552 13.222v41.556c0 7.302-6.067 13.222-13.552 13.222h-93.896c-7.4846 0-13.552-5.92-13.552-13.222zm4-5.178v-1.635c.1633.023.33024.035.50001.035 1.93299 0 3.49999-1.567 3.49999-3.5v-21c0-1.933-1.567-3.5-3.49999-3.5-.16977 0-.33671.012-.50001.035v-1.635c0-5.04 0-7.561.98094-9.4859.86286-1.6935 2.23966-3.0703 3.93316-3.9332 1.9252-.9809 4.4454-.9809 9.4859-.9809h84.2c5.04 0 7.561 0 9.486.9809 1.693.8629 3.07 2.2397 3.933 3.9332.981 1.9249.981 4.4459.981 9.4859v31.2c0 5.04 0 7.561-.981 9.486-.863 1.693-2.24 3.07-3.933 3.933-1.925.981-4.446.981-9.486.981h-84.2c-5.0405 0-7.5607 0-9.4859-.981-1.6935-.863-3.0703-2.24-3.93316-3.933-.98094-1.925-.98094-4.446-.98094-9.486z",fill:"#fff",fillRule:"evenodd"}),n().createElement("path",{d:"m35.9999 69.6001c3.3485 3.3485 5.2259 5.2259 8.5745 8.5744",stroke:"#5641ff",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"6"}),n().createElement("path",{d:"m52.8525 70.0005-8.1524 8.1526",stroke:"#5641ff",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"6"}),n().createElement("path",{d:"m41.7002 76c0 1.6569 1.3431 3 3 3 1.6568 0 3-1.3431 3-3zm27-22c1.6568 0 3-1.3431 3-3s-1.3432-3-3-3zm-21 22v-13h-6v13zm9-22h12v-6h-12zm-9 9c0-4.9706 4.0294-9 9-9v-6c-8.2843 0-15 6.7157-15 15z",fill:"#5641ff"})):n().createElement("svg",{className:e,fill:"none",height:"163",viewBox:"0 0 153 163",width:"153",xmlns:"http://www.w3.org/2000/svg"},n().createElement("g",{opacity:"0.5"},n().createElement("rect",{fill:"#CFCFDC",height:"125",rx:"14",stroke:"white",strokeWidth:"4",transform:"matrix(-1 0 0 1 153 4)",width:"72",x:"2",y:"-2"}),n().createElement("path",{clipRule:"evenodd",d:"M128.965 8H130.6C135.64 8 138.161 8 140.086 8.98094C141.779 9.8438 143.156 11.2206 144.019 12.9141C145 14.8393 145 17.3595 145 22.4V106.6C145 111.64 145 114.161 144.019 116.086C143.156 117.779 141.779 119.156 140.086 120.019C138.161 121 135.64 121 130.6 121H99.4C94.3595 121 91.8393 121 89.9141 120.019C88.2206 119.156 86.8438 117.779 85.9809 116.086C85 114.161 85 111.64 85 106.6L85 22.4C85 17.3595 85 14.8393 85.9809 12.9141C86.8438 11.2206 88.2206 9.8438 89.9141 8.98094C91.8393 8 94.3595 8 99.4 8H101.035C101.012 8.16331 101 8.33025 101 8.50001C101 10.433 102.567 12 104.5 12L125.5 12C127.433 12 129 10.433 129 8.50001C129 8.33025 128.988 8.16331 128.965 8Z",fill:"#F4F4F6",fillRule:"evenodd"})),n().createElement("rect",{fill:"#90919D",height:"125",rx:"14",stroke:"white",strokeWidth:"4",transform:"rotate(-90 2 161)",width:"72",x:"2",y:"161"}),n().createElement("path",{clipRule:"evenodd",d:"M7.99999 138.965V140.6C7.99999 145.64 7.99999 148.161 8.98093 150.086C9.84379 151.779 11.2206 153.156 12.9141 154.019C14.8393 155 17.3595 155 22.4 155H106.6C111.64 155 114.161 155 116.086 154.019C117.779 153.156 119.156 151.779 120.019 150.086C121 148.161 121 145.64 121 140.6V109.4C121 104.36 121 101.839 120.019 99.9141C119.156 98.2206 117.779 96.8438 116.086 95.9809C114.161 95 111.64 95 106.6 95H22.4C17.3595 95 14.8393 95 12.9141 95.9809C11.2206 96.8438 9.84379 98.2206 8.98093 99.9141C7.99999 101.839 7.99999 104.36 7.99999 109.4V111.035C8.16329 111.012 8.33023 111 8.5 111C10.433 111 12 112.567 12 114.5L12 135.5C12 137.433 10.433 139 8.5 139C8.33023 139 8.16329 138.988 7.99999 138.965Z",fill:"#F4F4F6",fillRule:"evenodd"}),n().createElement("path",{d:"M35.9999 69.6001C39.3484 72.9486 41.2258 74.826 44.5744 78.1745",stroke:"#5641FF",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"6"}),n().createElement("path",{d:"M52.8525 70.0004L44.7001 78.153",stroke:"#5641FF",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"6"}),n().createElement("path",{d:"M41.7002 76C41.7002 77.6569 43.0433 79 44.7002 79C46.357 79 47.7002 77.6569 47.7002 76H41.7002ZM68.7002 54C70.357 54 71.7002 52.6569 71.7002 51C71.7002 49.3431 70.357 48 68.7002 48V54ZM47.7002 76V63H41.7002V76H47.7002ZM56.7002 54H68.7002V48H56.7002V54ZM47.7002 63C47.7002 58.0294 51.7296 54 56.7002 54V48C48.4159 48 41.7002 54.7157 41.7002 63H47.7002Z",fill:"#5641FF"}))},m=l().with("screen-manager-rotate-banner"),v=({orientation:e,children:t})=>{const a=(0,c.T)(),s=(0,r.useMemo)((()=>a("rotate.banner.description",{params:{orientation:a("landscape"===e?"rotate.banner.description.orientation.landscape":"rotate.banner.description.orientation.portrait")}}).split("\\n").flatMap(((e,t)=>t?[n().createElement("br",{key:t}),e]:e))),[e,a]),{abt:o,themeColor:i}=(0,r.useContext)(d.Z),l=i===u.aN.DARK,v=(0,h.$o)(o.flags),g=l&&v?u.aN.DARK:u.aN.LIGHT;return n().createElement("div",{className:`${m({orientation:e,theme:g})} with-play-game-header-fix`},n().createElement(p,{className:m("image")}),n().createElement("div",{className:m("title")},a("rotate.banner.action.text")),n().createElement("div",{className:m("description")},s),t)},g=({children:e})=>{const t=(0,o.C)((e=>e.ui.screenOrientationBannerVisible)),{playPageData:a}=(0,s.b)(),{orientation:r}=a.gameSettings.features||{},i=(e=>{if("landscape"===e||"portrait"===e)return e})(r);return t&&i?n().createElement(v,{orientation:i},e):null}},89034:(e,t,a)=>{a.d(t,{Z:()=>Or});var r=a(87363),n=a.n(r),s=a(65751),o=a(98816),i=a(85383),l=a(94199),d=a(90366),c=a(61533),u=a(53726),h=a(24674);function p(e){const t=(0,r.useRef)();return(0,r.useEffect)((()=>{t.current=e}),[e]),t.current}var m=a(45112),v=a(63904),g=a.n(v),y=a(93298);const f=(g().with("google-sticky-adv-banner"),(0,y.M$)("AdsenseStickyBanner",y.XG.Adv));var w=a(73694),b=a(5e4),E=a(28705),k=a(49095);const S=g().with("google-sticky-adv-banner"),A=E.P5.COLUMN,I=({advLogger:e,block:t,blockType:a,hidden:s,location:i=k.rq.RIGHT,withSpinner:l,width:d,provider:c,refreshCounter:u,onAdvShowed:h,onClose:p})=>{const m="google-adv-sticky-banner-"+a,v=(0,r.useRef)(void 0),g=(0,r.useMemo)((()=>null==e?void 0:e.copy({advBlockId:t.slotId})),[e,t.slotId]),[y,I]=(0,r.useState)(l),{maxHeight:P,minHeight:T}=(0,r.useMemo)((()=>a===o.kq.DESKTOP?{minHeight:600}:{maxHeight:250}),[a]),C=(0,r.useMemo)((()=>{const e={maxWidth:d,width:d};return T&&(e.minHeight=T),(0,E.oi)(e)}),[T,d]);(0,r.useEffect)((()=>()=>{v.current&&c&&c.destroySlot(v.current)}),[c]);const R=(0,r.useCallback)((()=>{return e=function*(){if(c&&g)try{v.current&&(yield c.destroySlot(v.current)),f(`Create slot for ${m}`),g.demand({advBlockId:t.slotId,depth:0,provider:b.e.Adsense}),v.current=yield c.createSlot({adFormat:P?"fluid":"auto",blockId:t.slotId,clientId:t.clientId,divId:m,height:T||250,maxHeight:P,width:d}),g.request();const{isEmpty:e,slot:a}=yield c.preloadSlot({slot:v.current});if(e)return g.responseEmpty(),f(`#${m} empty.`),void p(E.JK.Desktop);g.response(),yield c.showSlot(a),g.show(),c.setClickEventListener(a,(()=>{null==g||g.click()})),I(!1),h(),f(`Creative showed for ${m}`)}catch(e){f(`Failed to refresh ${m}`,e),p(E.JK.Desktop)}},new Promise(((t,a)=>{var r=t=>{try{s(e.next(t))}catch(e){a(e)}},n=t=>{try{s(e.throw(t))}catch(e){a(e)}},s=e=>e.done?t(e.value):Promise.resolve(e.value).then(r,n);s((e=e.apply(undefined,null)).next())}));var e}),[g,t,m,T,P,c,d,h,p]);return(0,r.useEffect)((()=>{!c||!g||u<0||R()}),[c,g,R,u]),n().createElement("div",{className:S({desktop:!0,[`desktop_${i}`]:!0,direction:A,hidden:s,"with-disable-ad-button":!0}),id:m,key:m,style:C},y&&n().createElement(w.y,{className:S("spinner"),key:`${m}-spinner`,position:"center",size:28,spinning:!0,view:"default"}))};var P=a(8804),T=a(11510),C=a(5825),R=a(36172),D=a(34967),L=a(909);const O=g().with("disable-ad-button"),_=()=>{const e=(0,T.T)(),t=(0,r.useRef)(null),a=(0,r.useRef)(null),s=(0,u.v9)((e=>e.middleLayerInGameData)),o=(0,C.C)(R.Up),i=(0,r.useCallback)((()=>{(0,L.Z)(),(0,D.U4)({},{borrowParams:{adv:{sticky:{disableAdButtonClick:{size:"long"}}}}})}),[]),l=(0,r.useMemo)((()=>e("no-ads.disable.text")),[e]);return n().createElement("div",{className:O({}),ref:t},n().createElement(P.z,{className:O("button",{"middle-layer-light":(null==s?void 0:s.show)&&!o}),"data-testid":"DisableAd-Button",ref:a,size:24,view:"primary",onClick:i},l))};var x=a(10739),N=a(97808),B=a(65087),M=Object.defineProperty,H=Object.defineProperties,F=Object.getOwnPropertyDescriptors,$=Object.getOwnPropertySymbols,W=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable,G=(e,t,a)=>t in e?M(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,j=(e,t)=>{for(var a in t||(t={}))W.call(t,a)&&G(e,a,t[a]);if($)for(var a of $(t))Z.call(t,a)&&G(e,a,t[a]);return e},U=(e,t)=>H(e,F(t));const q=g().with("google-sticky-adv-banner"),V=({advHidden:e,advLogger:t,blocks:a,canShowDesktopAdv:s,desktopAdvWidth:i,hideAdvCloseButton:l,innerHeight:d,provider:u,refreshCounter:h,stickyBannerLocation:{desktop:p},onAdvShowed:m,onClose:v,wrapperRef:g})=>{const[y,f]=(0,r.useState)(!(0,x.Ij)()),w=d>=700;(0,r.useEffect)((()=>{const e=e=>{f("enabled"===e.data.action)};return N.Z.onInternalMessage("header",e),()=>{N.Z.offInternalMessage("header",e)}}),[]);const b=(0,r.useMemo)((()=>(0,B.C)()),[]),E=(0,r.useMemo)((()=>({marginTop:y&&!l?-b:0,paddingTop:l?0:b,width:i})),[b,i,y,l]),k=(0,r.useMemo)((()=>({marginTop:y?-b:0,width:i})),[b,i,y]),S={advLogger:t,hidden:e||!s,location:p,provider:u,refreshCounter:h,width:i,onAdvShowed:m,onClose:v};return n().createElement("div",{className:q("desktop-wrapper",{hidden:e||!s,"with-disable-ad-button":!0}),style:E},!l&&(null==g?void 0:g.current)&&(0,c.createPortal)(n().createElement("div",{className:q("desktop-disable-ad-button-wrapper"),style:k},n().createElement(_,null)),g.current),d>=500&&n().createElement(I,U(j({},S),{block:a.desktop.main,blockType:o.kq.DESKTOP,withSpinner:!0})),w&&n().createElement(I,U(j({},S),{block:a.desktop.small,blockType:o.kq.DESKTOP_ADDITIONAL,withSpinner:!1})))};Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable,E.P5.ROW,Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;var z=a(26667),K=a(88757),Y=a(62011),X=a(35742),J=a(4824);const Q=(e,t)=>{const a=(0,r.useRef)(!1);(0,r.useEffect)((()=>{!a.current&&t&&(a.current=!0,e())}),[t,e])};var ee=a(58432),te=a(93013),ae=a(51290),re=a(97553),ne=a(33252),se=a(13377),oe=Object.defineProperty,ie=Object.defineProperties,le=Object.getOwnPropertyDescriptors,de=Object.getOwnPropertySymbols,ce=Object.prototype.hasOwnProperty,ue=Object.prototype.propertyIsEnumerable,he=(e,t,a)=>t in e?oe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;const pe=(0,Y.Z)((({advHidden:e,appId:t,blocks:a,canShowDesktopAdv:s,canShowLandscapeAdv:i,canShowPortraitAdv:l,desktopAdvWidth:d,mobileAdvLandscapeHeight:c,mobileAdvSideLandscapeWidth:u,mobileAdvPortraitHeight:v,onClose:g,onAdvShowed:y,hideAdvCloseButton:w,stickyBannerLocation:k,intervalBetweenRefreshAd:S,isLandscapeSide:A,wrapperRef:I,isAdvSplashScreenEnabled:P})=>{const T=(0,C.C)((e=>e.advGameCanBeLoaded)),[R,D]=(0,r.useState)(),[L,O]=(0,r.useState)("object"==typeof window?window.innerHeight:0),_=(0,r.useRef)(null),x=p(e),[N,B]=(0,r.useState)(-1),M=(0,r.useRef)(N),H=(0,r.useRef)(!1),F=(0,r.useRef)(!1),$=(0,r.useMemo)((()=>{const e=(0,ee.KT)();return(0,h.Me)(e,h.QQ.SnailTech)?(0,z.WF)():a}),[a]);(0,r.useEffect)((()=>{M.current=N}),[N]),(0,r.useEffect)((()=>{const e=(0,te.D)((()=>{O(window.innerHeight)}),200);return window.addEventListener("resize",e,!0),()=>{window.removeEventListener("resize",e,!0)}}),[]);const W=(0,r.useCallback)((()=>{return e=function*(){try{D(yield(0,K.l)(X.oO.AdsenseResponsive)),f("Adsense script loaded.")}catch(e){(0,ne.H)({block:se.W.GOOGLE_ADS,prefix:"AdvStickyBanner error [adsense]:",message:"script failed to load"}),g(),y()}},new Promise(((t,a)=>{var r=t=>{try{s(e.next(t))}catch(e){a(e)}},n=t=>{try{s(e.throw(t))}catch(e){a(e)}},s=e=>e.done?t(e.value):Promise.resolve(e.value).then(r,n);s((e=e.apply(undefined,null)).next())}));var e}),[g,y]);(0,r.useEffect)((()=>{T&&!R&&W()}),[T,R,W]);const Z=(0,r.useCallback)((()=>{_.current=new ae.U({app_id:t,tag:o.$H.STICKY});const a=-1===M.current;!!P&&H.current&&a||_.current.tryOpen({provider:b.e.Adsense,reason:a?re.p_.ONSPOT:re.p_.REFRESH}),H.current=!0,F.current=!1,P&&e||B((e=>e+1))}),[e,t,P]),G=(0,r.useCallback)((()=>{F.current=!0,y()}),[y]),j=(0,r.useCallback)((e=>{if(F.current)return;let t;switch(e){case E.JK.Landscape:t={onlyLandscape:!0};break;case E.JK.Portrait:t={onlyPortrait:!0}}g(t)}),[g]);if(Q(Z,Boolean(R)),(0,r.useEffect)((()=>{H.current&&x&&!e&&Z()}),[e,x,Z]),(0,r.useEffect)((()=>{}),[R,e,k,Z]),(0,m.Yz)(Z,!R||e?null:S),!$)return;const U={advHidden:e,advLogger:_.current,blocks:$,provider:R,refreshCounter:N,stickyBannerLocation:k,onAdvShowed:G,onClose:j};return n().createElement(V,(q=((e,t)=>{for(var a in t||(t={}))ce.call(t,a)&&he(e,a,t[a]);if(de)for(var a of de(t))ue.call(t,a)&&he(e,a,t[a]);return e})({},U),ie(q,le({canShowDesktopAdv:s,desktopAdvWidth:d,hideAdvCloseButton:w,innerHeight:L,wrapperRef:I}))));var q}),J.Z,{blocks:e=>{var t;return null==(t=e.allAdvBlocks.adsense)?void 0:t.sticky},isAdvSplashScreenEnabled:e=>e.isAdvSplashScreenEnabled}),me=(g().with("google-sticky-adv-banner"),(0,y.M$)("PubliftStickyBanner",y.XG.Adv));var ve=a(94671);var ge=Object.defineProperty,ye=Object.getOwnPropertySymbols,fe=Object.prototype.hasOwnProperty,we=Object.prototype.propertyIsEnumerable,be=(e,t,a)=>t in e?ge(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;const Ee=g().with("google-sticky-adv-banner"),ke=E.P5.COLUMN,Se=({advLogger:e,block:t,blockType:a,hidden:s,location:i=k.rq.RIGHT,withSpinner:l,width:d,provider:c,refreshCounter:u,onAdvShowed:h,onClose:p})=>{const m="sticky_banner_"+a+"_"+n().useId(),v=(0,r.useRef)(void 0),g=(0,r.useMemo)((()=>null==e?void 0:e.copy({advBlockId:t.blockId,zoneId:t.zoneId})),[e,t.blockId,t.zoneId]),[y,f]=(0,r.useState)(l),{minHeight:S}=(0,r.useMemo)((()=>a===o.kq.DESKTOP?{minHeight:600}:{maxHeight:250}),[a]),A=(0,r.useMemo)((()=>{const e={maxWidth:d,width:d};return S&&(e.minHeight=S),(0,E.oi)(e)}),[S,d]);(0,r.useEffect)((()=>()=>{v.current&&c&&(me(`Destroy slot ${v.current.divId}`),c.destroySlot(v.current))}),[c]);const I=(0,r.useCallback)((()=>{return e=function*(){if(c&&g)try{me(`Create slot for ${m}`),g.demand({advBlockId:t.blockId,depth:0,provider:b.e.PubliftZone}),v.current=yield c.createSlot({blockId:t.blockId,zoneId:t.zoneId,divId:m,usePrevious:!0}),g.request();const{isEmpty:e,slot:a}=yield c.preloadSlot({slot:v.current});if(e)return g.responseEmpty(),me(`#${m} empty.`),void p(E.JK.Desktop);g.response(),yield c.showSlot(a),g.show(),f(!1),h(),me(`Creative showed for ${m}`)}catch(e){me(`Failed to refresh ${m}`,e),p(E.JK.Desktop)}},new Promise(((t,a)=>{var r=t=>{try{s(e.next(t))}catch(e){a(e)}},n=t=>{try{s(e.throw(t))}catch(e){a(e)}},s=e=>e.done?t(e.value):Promise.resolve(e.value).then(r,n);s((e=e.apply(undefined,null)).next())}));var e}),[g,t,m,c,h,p]);(0,r.useEffect)((()=>{!c||!g||u<0||I()}),[c,g,I,u]);const P=t.zoneId&&(null==c?void 0:c.loaded)?{"data-fuse":t.zoneId}:null;return n().createElement("div",((e,t)=>{for(var a in t||(t={}))fe.call(t,a)&&be(e,a,t[a]);if(ye)for(var a of ye(t))we.call(t,a)&&be(e,a,t[a]);return e})({className:(0,ve.E)(Ee({desktop:!0,[`desktop_${i}`]:!0,direction:ke,hidden:s,"with-disable-ad-button":!0,publift:!0}),"AdvPubliftStickyBanner-module__banner--OL2_a"),id:m,key:m,style:A},P),y&&n().createElement("div",{className:(0,ve.E)(Ee("spinner"),"AdvPubliftStickyBanner-module__spinner--indYY")},n().createElement(w.y,{key:`${m}-spinner`,position:"center",size:28,spinning:!0,view:"default"})))};var Ae=Object.defineProperty,Ie=Object.defineProperties,Pe=Object.getOwnPropertyDescriptors,Te=Object.getOwnPropertySymbols,Ce=Object.prototype.hasOwnProperty,Re=Object.prototype.propertyIsEnumerable,De=(e,t,a)=>t in e?Ae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Le=(e,t)=>{for(var a in t||(t={}))Ce.call(t,a)&&De(e,a,t[a]);if(Te)for(var a of Te(t))Re.call(t,a)&&De(e,a,t[a]);return e},Oe=(e,t)=>Ie(e,Pe(t));const _e=g().with("google-sticky-adv-banner"),xe=({advHidden:e,advLogger:t,blocks:a,canShowDesktopAdv:s,desktopAdvWidth:i,hideAdvCloseButton:l,innerHeight:d,provider:u,refreshCounter:h,stickyBannerLocation:{desktop:p},onAdvShowed:m,onClose:v,wrapperRef:g})=>{const[y,f]=(0,r.useState)(!(0,x.Ij)()),w=d>=700;(0,r.useEffect)((()=>{const e=e=>{f("enabled"===e.data.action)};return N.Z.onInternalMessage("header",e),()=>{N.Z.offInternalMessage("header",e)}}),[]);const b=(0,r.useMemo)((()=>(0,B.C)()),[]),E=(0,r.useMemo)((()=>({marginTop:y&&!l?-b:0,paddingTop:l?0:b,width:i})),[b,i,y,l]),k=(0,r.useMemo)((()=>({marginTop:y?-b:0,width:i})),[b,i,y]),S={advLogger:t,hidden:e||!s,location:p,provider:u,refreshCounter:h,width:i,onAdvShowed:m,onClose:v};return n().createElement("div",{className:_e("desktop-wrapper",{hidden:e||!s,"with-disable-ad-button":!0}),style:E},!l&&(null==g?void 0:g.current)&&(0,c.createPortal)(n().createElement("div",{className:_e("desktop-disable-ad-button-wrapper"),style:k},n().createElement(_,null)),g.current),d>=500&&n().createElement(Se,Oe(Le({},S),{block:a.desktop.main,blockType:o.kq.DESKTOP,withSpinner:!0})),w&&n().createElement(Se,Oe(Le({},S),{block:a.desktop.small,blockType:o.kq.DESKTOP_ADDITIONAL,withSpinner:!1})))};Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable,E.P5.ROW,Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;var Ne=a(85623),Be=Object.defineProperty,Me=Object.defineProperties,He=Object.getOwnPropertyDescriptors,Fe=Object.getOwnPropertySymbols,$e=Object.prototype.hasOwnProperty,We=Object.prototype.propertyIsEnumerable,Ze=(e,t,a)=>t in e?Be(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;const Ge=(0,Y.Z)((({advHidden:e,appId:t,blocks:a,canShowDesktopAdv:s,canShowLandscapeAdv:i,canShowPortraitAdv:l,desktopAdvWidth:d,mobileAdvLandscapeHeight:c,mobileAdvSideLandscapeWidth:u,mobileAdvPortraitHeight:h,onClose:v,onAdvShowed:g,hideAdvCloseButton:y,stickyBannerLocation:f,intervalBetweenRefreshAd:w,isLandscapeSide:k,wrapperRef:S,isAdvSplashScreenEnabled:A})=>{const I=(0,C.C)((e=>e.advGameCanBeLoaded)),[P,T]=(0,r.useState)(),[R,D]=(0,r.useState)("object"==typeof window?window.innerHeight:0),L=(0,r.useRef)(null),O=p(e),[_,x]=(0,r.useState)(-1),N=(0,r.useRef)(_),B=(0,r.useRef)(!1),M=(0,r.useRef)(!1);(0,r.useEffect)((()=>{N.current=_}),[_]),(0,r.useEffect)((()=>{const e=(0,te.D)((()=>{D(window.innerHeight)}),200);return window.addEventListener("resize",e,!0),()=>{window.removeEventListener("resize",e,!0)}}),[]);const H=(0,r.useCallback)((()=>{return e=function*(){try{const e=yield(0,K.l)(X.oO.PubliftZone,Ne.CX);T(e),me("Publift script loaded.")}catch(e){(0,ne.H)({block:se.W.GOOGLE_ADS,prefix:"AdvStickyBanner error [publift]:",message:"script failed to load"},e),v(),g()}},new Promise(((t,a)=>{var r=t=>{try{s(e.next(t))}catch(e){a(e)}},n=t=>{try{s(e.throw(t))}catch(e){a(e)}},s=e=>e.done?t(e.value):Promise.resolve(e.value).then(r,n);s((e=e.apply(undefined,null)).next())}));var e}),[v,g]);(0,r.useEffect)((()=>{I&&!P&&H()}),[I,P,H]);const F=(0,r.useCallback)((()=>{L.current=new ae.U({app_id:t,tag:o.$H.STICKY});const a=-1===N.current;!!A&&B.current&&a||L.current.tryOpen({provider:b.e.PubliftZone,reason:a?re.p_.ONSPOT:re.p_.REFRESH}),B.current=!0,M.current=!1,A&&e||x((e=>e+1))}),[e,t,A]),$=(0,r.useCallback)((()=>{M.current=!0,g()}),[g]),W=(0,r.useCallback)((e=>{var t;if(M.current)return;let a;switch(e){case E.JK.Landscape:a={onlyLandscape:!0};break;case E.JK.Portrait:a={onlyPortrait:!0}}null==(t=L.current)||t.close(),v(a)}),[v]);if(Q(F,Boolean(P)),(0,r.useEffect)((()=>{B.current&&O&&!e&&F()}),[e,O,F]),(0,r.useEffect)((()=>{}),[P,e,f,F]),(0,m.Yz)(F,!P||e?null:w),!a)return;const Z={advHidden:e,advLogger:L.current,blocks:a,provider:P,refreshCounter:_,stickyBannerLocation:f,onAdvShowed:$,onClose:W};return n().createElement(xe,(G=((e,t)=>{for(var a in t||(t={}))$e.call(t,a)&&Ze(e,a,t[a]);if(Fe)for(var a of Fe(t))We.call(t,a)&&Ze(e,a,t[a]);return e})({},Z),Me(G,He({canShowDesktopAdv:s,desktopAdvWidth:d,hideAdvCloseButton:y,innerHeight:R,wrapperRef:S}))));var G}),J.Z,{blocks:e=>{var t;return null==(t=e.allAdvBlocks.publift)?void 0:t.sticky},isAdvSplashScreenEnabled:e=>e.isAdvSplashScreenEnabled}),je={container:"StickyAdvContainer-critical-module__container--AeFEa",containerHidden:"StickyAdvContainer-critical-module__containerHidden--VBb0S",containerWhiteBg:"StickyAdvContainer-critical-module__containerWhiteBg--UKGhL",locationRight:"StickyAdvContainer-critical-module__locationRight--VoIlR",locationBottom:"StickyAdvContainer-critical-module__locationBottom--oThSu",headerEnabled:"StickyAdvContainer-critical-module__headerEnabled--Rcyam",banner:"StickyAdvContainer-critical-module__banner--mOURl",placementVertical:"StickyAdvContainer-critical-module__placementVertical--w5Bsm"},Ue=({advLogger:e,onResponsePost:t,onFailed:a,refreshCounter:n})=>{const s=(0,r.useMemo)((()=>({})),[e]),o=(0,r.useCallback)((t=>{let a=s[t];return a||(a=e.copy({blockType:t}),s[t]=a),a}),[e,s]),i=(0,r.useCallback)(((e,t,{payloadBlockType:a})=>{t?o(a).waterfall({advBlockId:(0,X.Qq)(e)?e.blockId:"",provider:e.provider,depth:0,reason:re.p_.WATERFALL}):(o(a).tryOpen({provider:e.provider,reason:n>0?re.p_.REFRESH:re.p_.ONSPOT}),o(a).demand({advBlockId:(0,X.Qq)(e)?e.blockId:"unknown"}))}),[o,n]),l=(0,r.useCallback)(((e,{payloadBlockType:t})=>{o(t).request()}),[o]),d=(0,r.useCallback)((({isEmpty:e},a)=>{const{payloadBlockType:r}=a;e?o(r).responseEmpty():o(r).response(),null==t||t({isEmpty:e},a)}),[o,t]),c=(0,r.useCallback)(((e,{payloadBlockType:t})=>{o(t).show()}),[o]),u=(0,r.useCallback)(((e,{payloadBlockType:t})=>{o(t).click()}),[o]);return{onError:(0,r.useCallback)((({error:e},{payloadBlockType:t})=>{e instanceof x.lu&&e.params.isEmpty||o(t).error(e.message)}),[o]),onRequest:l,onResponse:d,onShow:c,onClick:u,onSkip:(0,r.useCallback)((({reason:e},{payloadBlockType:t})=>{o(t).skip(e)}),[o]),onWaterfallNext:i,onWaterfallFailed:(0,r.useCallback)(((e,{payloadBlockType:t,payloadPlacement:r})=>{null==a||a(r,t),(0,z._y)(`StickyAdv | ${t} | WaterfallFailed`,e)}),[a])}};var qe=a(57745);const Ve=()=>(0,qe.HX)().stickyAdv;var ze=a(51962),Ke=a(55231),Ye=a(25562),Xe=a(31136),Je=a(15771),Qe=Object.defineProperty,et=Object.getOwnPropertySymbols,tt=Object.prototype.hasOwnProperty,at=Object.prototype.propertyIsEnumerable,rt=(e,t,a)=>t in e?Qe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;const nt=[X.oO.GoogleBlock],st=(0,r.forwardRef)((({appId:e,blockType:t,flags:a,location:s,maxHeight:i,withSpinner:l=!1,provider:d,stickyLocation:c,waterfallItem:u,onClick:h,onError:p,onRequest:m,onResponse:v,onShow:g,onSkip:y,onFailed:f},b)=>{const E="sticky_banner_"+t+"_"+n().useId(),k=(0,r.useRef)(null),S=(0,r.useRef)(null),[A,I]=(0,r.useState)(!1),[P,T]=(0,r.useState)(l),C=(0,r.useMemo)((()=>(0,Je.ff)(a)),[a]);return(0,r.useEffect)((()=>{let r=null;var n;return n=function*(){var n,i,l,w,b,A;if(u&&(0,X.Qq)(u)&&d&&k.current&&S.current)try{if((0,qe.y)(u)&&t===o.kq.DESKTOP_ADDITIONAL&&(null!=(n=S.current.clientHeight)?n:0)<50)return void(null==y||y({reason:o.Jm.NOT_ENOUGH_CONTAINER_SIZE,slot:r}));(0,z._y)("Sticky | Actualy create slot",E,u,S,k.current.clientHeight,k.current.clientWidth),I(!1);const p=((e,t)=>{for(var a in t||(t={}))tt.call(t,a)&&rt(e,a,t[a]);if(et)for(var a of et(t))at.call(t,a)&&rt(e,a,t[a]);return e})({appId:e,blockId:u.blockId,divId:E,disableRefresh:!0,location:s,withPageNumber:!1},(0,qe.hP)(u)?{size:(0,Ye.TG)({sizes:u.sizes,maxAdvWidth:null!=(l=null==(i=k.current.parentElement)?void 0:i.clientWidth)?l:window.innerWidth,maxAdvHeight:null!=(b=null==(w=k.current.parentElement)?void 0:w.clientHeight)?b:window.innerHeight}),usePrevious:!0,testId:`sticky-banner_${t}_${c}_${d.providerLoaderName}`}:{size:[]});r=yield d.createSlot(p);let f=0,P=!0;const R=nt.includes(d.providerName)?C:0;do{null==m||m({slot:r});const e=yield d.preloadSlot({slot:r,flags:a}),{isEmpty:t}=e;if(null==v||v({slot:r,isEmpty:t},{payloadProductType:"productType"in e?null!=(A=e.productType)?A:"none":"unknown"}),!1===t){P=!1;break}if(!R)break;yield(0,Xe.D)(Ke.TE),f+=1}while(P&&f<=R);if(P)throw new x.lu("Slot is empty",{isEmpty:!0});T((()=>!1)),I(!0),yield d.showSlot(r),null==g||g({slot:r}),d.setClickEventListener(r,(()=>null==h?void 0:h({slot:r})))}catch(e){null==p||p({error:e,slot:r}),null==f||f({error:e})}},new Promise(((e,t)=>{var a=e=>{try{s(n.next(e))}catch(e){t(e)}},r=e=>{try{s(n.throw(e))}catch(e){t(e)}},s=t=>t.done?e(t.value):Promise.resolve(t.value).then(a,r);s((n=n.apply(undefined,null)).next())})),()=>{(0,z._y)("Sticky | Renderer clear",E),r&&d&&d.destroySlot(r)}}),[e,h,t,E,a,C,p,m,v,g,y,f,s,d,c,u]),n().createElement("div",{className:(0,ve.E)(je.banner),"data-testid":"sticky-banner-"+t,ref:S,style:{maxHeight:!A&&i?i+"px":void 0}},P&&n().createElement(w.y,{position:"center",size:28,spinning:!0,view:"default"}),n().createElement("div",{id:E,ref:k}))})),ot=(0,Y.Z)(st,J.Z,{appId:e=>e.playPageData.gameInfo.appId,flags:e=>e.abt.flags,location:e=>e.location});function it(e,t){return e.some((e=>e.provider===t))}var lt=a(13547),dt=a(67471),ct=a(90380),ut=Object.defineProperty,ht=Object.getOwnPropertySymbols,pt=Object.prototype.hasOwnProperty,mt=Object.prototype.propertyIsEnumerable,vt=(e,t,a)=>t in e?ut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,gt=(e,t)=>{for(var a in t||(t={}))pt.call(t,a)&&vt(e,a,t[a]);if(ht)for(var a of ht(t))mt.call(t,a)&&vt(e,a,t[a]);return e};const yt=(0,r.memo)((0,Y.Z)((({advLogger:e,flags:t,isVisible:a,refreshCounter:s,showDisableAdButton:i,onFailed:l})=>{var d;const c=Ve(),[h,p]=(0,r.useState)(!(0,x.Ij)()),[m,v]=(0,r.useState)("object"==typeof window?window.innerHeight:0),[g,y]=(0,r.useState)(!1),f=(0,r.useRef)(-1),w=(0,r.useMemo)((()=>{var e,t,a,r;return s<0||!c?{[o.kq.DESKTOP]:[],[o.kq.DESKTOP_ADDITIONAL]:[]}:{[o.kq.DESKTOP]:[...null!=(t=null==(e=c.blocks[o.kq.DESKTOP])?void 0:e.waterfall)?t:[]],[o.kq.DESKTOP_ADDITIONAL]:[...null!=(r=null==(a=c.blocks[o.kq.DESKTOP_ADDITIONAL])?void 0:a.waterfall)?r:[]]}}),[s,c]),b=(0,u.v9)((e=>e.middleLayerInGameData)),S=(0,C.C)(R.Up);(0,r.useEffect)((()=>(y(!1),()=>{clearTimeout(f.current)})),[w]);const A=(0,r.useCallback)(((e,{payloadProductType:t})=>{(0,z._y)(`Sticky | Received ${t} pcode banner.`),E.U_.includes(t)||(f.current=window.setTimeout((()=>y(!0)),50))}),[]),I=(0,r.useMemo)((()=>{let e=300;if(!it(w.desktop,X.oO.GoogleBlock)){const{innerWidth:t}=(0,dt.bY)();e=Math.max(t*(E.PV/100),240),e=Math.min(e,300),it(w.desktop,X.oO.AdsenseResponsive)&&(e=Math.max(e,ze.K))}const a=(0,Je.$9)(t,ct.Z.advStickyBannerDesktopWidth);return a&&(e=a),e}),[t,w.desktop]);(0,r.useEffect)((()=>{const e=e=>{p("enabled"===e.data.action)},t=(0,te.D)((()=>{v(window.innerHeight)}),200);return N.Z.onInternalMessage("header",e),window.addEventListener("resize",t,!0),()=>{N.Z.offInternalMessage("header",e),window.removeEventListener("resize",t,!0)}}),[]);const P=Ue({advLogger:e,refreshCounter:s,onResponsePost:A,onFailed:l}),T=!it(w[o.kq.DESKTOP_ADDITIONAL],X.oO.GoogleBlock)||m>=700;return n().createElement("div",{className:(0,ve.E)(je.container,je.locationRight,a?"":je.containerHidden,h&&i?je.headerEnabled:"",(null==b?void 0:b.show)&&!S?je.containerWhiteBg:""),style:{width:I}},i&&n().createElement(_,null),m>=500&&(null==c?void 0:c.blocks[o.kq.DESKTOP])&&n().createElement(lt.Z,gt({alwaysRender:!0,payloadBlockType:o.kq.DESKTOP,payloadPlacement:E.JK.Desktop,waterfallList:w[o.kq.DESKTOP]},P),n().createElement(ot,{blockType:o.kq.DESKTOP,maxHeight:(null==(d=w[o.kq.DESKTOP][0])?void 0:d.provider)!==X.oO.YandexBlock?600:void 0,stickyLocation:k.Xn.RIGHT,withSpinner:!0})),T&&g&&(null==c?void 0:c.blocks[o.kq.DESKTOP_ADDITIONAL])&&n().createElement(lt.Z,gt({alwaysRender:!0,payloadBlockType:o.kq.DESKTOP_ADDITIONAL,payloadPlacement:E.JK.Desktop,waterfallList:w[o.kq.DESKTOP_ADDITIONAL]},P),n().createElement(ot,{blockType:o.kq.DESKTOP_ADDITIONAL,stickyLocation:k.Xn.RIGHT})))}),J.Z,{flags:e=>e.abt.flags,showDisableAdButton:e=>!e.isDistGame&&!e.hidePaymentsAndCurrency}));var ft=Object.defineProperty,wt=Object.getOwnPropertySymbols,bt=Object.prototype.hasOwnProperty,Et=Object.prototype.propertyIsEnumerable,kt=(e,t,a)=>t in e?ft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;const St=(0,r.memo)((0,Y.Z)((({advLogger:e,refreshCounter:t,flags:a,isVisible:s,onFailed:i})=>{const d=Ve(),c=(0,r.useMemo)((()=>{var e,a;return t<0||!s?[]:l.default.type.includes(E.JK.Landscape)?[...null!=(a=null==(e=null==d?void 0:d.blocks.landscape_side)?void 0:e.waterfall)?a:[]]:[]}),[s,d,t]),u=(0,r.useMemo)((()=>(0,Je.$9)(a,ct.Z.advStickyBannerLandscapeWidth)||E.HZ),[a]),h=Ue({advLogger:e,refreshCounter:t,onFailed:i});return n().createElement("div",{className:(0,ve.E)(je.container,je.placementSide,je.locationRight,s?"":je.containerHidden),style:{width:u}},n().createElement(lt.Z,((e,t)=>{for(var a in t||(t={}))bt.call(t,a)&&kt(e,a,t[a]);if(wt)for(var a of wt(t))Et.call(t,a)&&kt(e,a,t[a]);return e})({alwaysRender:!0,payloadBlockType:o.kq.LANDSCAPE_SIDE,payloadPlacement:E.JK.Landscape,waterfallList:c},h),n().createElement(ot,{blockType:o.kq.LANDSCAPE_SIDE,stickyLocation:k.Xn.RIGHT,withSpinner:!0})))}),J.Z,{flags:e=>e.abt.flags}));var At=Object.defineProperty,It=Object.getOwnPropertySymbols,Pt=Object.prototype.hasOwnProperty,Tt=Object.prototype.propertyIsEnumerable,Ct=(e,t,a)=>t in e?At(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Rt=(e,t)=>{for(var a in t||(t={}))Pt.call(t,a)&&Ct(e,a,t[a]);if(It)for(var a of It(t))Tt.call(t,a)&&Ct(e,a,t[a]);return e};const Dt={landscape:[],landscape_additional:[],landscape_tablet_additional:[]},Lt=(0,r.memo)((0,Y.Z)((({advLogger:e,refreshCounter:t,flags:a,isVisible:s,onFailed:i})=>{const d=Ve(),[c,u]=(0,r.useState)(!0),[h,p]=(0,r.useState)(!1),m=(0,r.useRef)(-1),v="undefined"!=typeof window&&Math.max(window.innerWidth,window.innerHeight)>=E.kO,g=(0,r.useMemo)((()=>{var e,a,r,n,o,i;return t<0||!s||!d?Dt:l.default.type.includes(E.JK.Landscape)?{landscape:[...null!=(a=null==(e=d.blocks.landscape)?void 0:e.waterfall)?a:[]],landscape_additional:[...null!=(n=null==(r=d.blocks.landscape_additional)?void 0:r.waterfall)?n:[]],landscape_tablet_additional:[...null!=(i=null==(o=d.blocks.landscape_tablet_additional)?void 0:o.waterfall)?i:[]]}:Dt}),[s,t,d]),y=(0,r.useMemo)((()=>(0,B.C)()),[]),f=(0,r.useMemo)((()=>(0,Je.$9)(a,ct.Z.advStickyBannerLandscapeHeight)||E.qi),[a]),b=(0,r.useCallback)(((e,{payloadProductType:t})=>{if(u(!1),(0,z._y)(`Sticky | Received ${t} pcode banner.`),t){if(E.iv.includes(t))return;m.current=window.setTimeout((()=>p(!0)),E.fE)}}),[]);(0,r.useEffect)((()=>()=>{clearTimeout(m.current)}),[]);const S=Ue({advLogger:e,refreshCounter:t,onResponsePost:b,onFailed:i}),A=null==d?void 0:d.placements.mobileLandscape.includes(k.Xn.UPPER);return n().createElement("div",{className:(0,ve.E)(je.container,je.placementVertical,(null==d?void 0:d.placements.mobileLandscape.includes(k.Xn.UPPER))?je.locationUpper:je.locationBottom,s?"":je.containerHidden),style:{height:f,left:-y,minWidth:`calc(100% + ${y}px)`}},c&&n().createElement(w.y,{key:"landscape-spinner",position:"center",size:28,spinning:!0,view:"default"}),n().createElement(lt.Z,Rt({alwaysRender:!0,payloadBlockType:o.kq.LANDSCAPE,payloadPlacement:E.JK.Landscape,waterfallList:g[o.kq.LANDSCAPE]},S),n().createElement(ot,{blockType:o.kq.LANDSCAPE,stickyLocation:A?k.Xn.UPPER:k.Xn.BOTTOM,withSpinner:!0})),(null==d?void 0:d.blocks.landscape_additional)&&h&&n().createElement(n().Fragment,null,v&&n().createElement(lt.Z,Rt({alwaysRender:!0,payloadBlockType:o.kq.LANDSCAPE_TABLET_ADDITIONAL,payloadPlacement:E.JK.Landscape,waterfallList:g[o.kq.LANDSCAPE_TABLET_ADDITIONAL]},S),n().createElement(ot,{blockType:o.kq.LANDSCAPE_TABLET_ADDITIONAL,stickyLocation:A?k.Xn.UPPER:k.Xn.BOTTOM,withSpinner:!0})),n().createElement(lt.Z,Rt({alwaysRender:!0,payloadBlockType:o.kq.LANDSCAPE_ADDITIONAL,payloadPlacement:E.JK.Landscape,waterfallList:g[o.kq.LANDSCAPE_ADDITIONAL]},S),n().createElement(ot,{blockType:o.kq.LANDSCAPE_ADDITIONAL,stickyLocation:A?k.Xn.UPPER:k.Xn.BOTTOM,withSpinner:!0}))))}),J.Z,{flags:e=>e.abt.flags}));var Ot=a(22355),_t=Object.defineProperty,xt=Object.getOwnPropertySymbols,Nt=Object.prototype.hasOwnProperty,Bt=Object.prototype.propertyIsEnumerable,Mt=(e,t,a)=>t in e?_t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;const Ht=(0,r.memo)((0,Y.Z)((({advLogger:e,refreshCounter:t,flags:a,isVisible:s,onFailed:i})=>{const d=Ve(),c=(0,C.C)(Ot.y),u=(0,r.useMemo)((()=>{var e;const t=(0,Je.$9)(a,ct.Z.advStickyBannerPortraitHeight);if(t)return t;const{innerWidth:r,innerHeight:n}=(0,dt.bY)(),s=null!=(e=(0,Je.$9)(a,ct.Z.advStickyBannerMinHeightForHigherAd))?e:E.Gh,o=c?Math.max(window.screen.height,window.screen.width):Math.max(n,r);let i=E.qi;return o>=s&&(i=E.RH),i}),[a,c]),h=u===E.RH?o.kq.PORTRAIT_HIGH:o.kq.PORTRAIT,p=(0,r.useMemo)((()=>{var e,a;return t<0||!s?[]:l.default.type.includes(E.JK.Portrait)?[...null!=(a=null==(e=null==d?void 0:d.blocks[h])?void 0:e.waterfall)?a:[]]:[]}),[h,s,d,t]),m=Ue({advLogger:e,refreshCounter:t,onFailed:i}),v=null==d?void 0:d.placements.mobilePortrait.includes(k.Xn.UPPER);return n().createElement("div",{className:(0,ve.E)(je.container,je.placementPortrait,v?je.locationUpper:je.locationBottom,s?"":je.containerHidden),style:{height:u}},(null==d?void 0:d.blocks[h])&&n().createElement(lt.Z,((e,t)=>{for(var a in t||(t={}))Nt.call(t,a)&&Mt(e,a,t[a]);if(xt)for(var a of xt(t))Bt.call(t,a)&&Mt(e,a,t[a]);return e})({alwaysRender:!0,payloadBlockType:h,payloadPlacement:E.JK.Portrait,waterfallList:p},m),n().createElement(ot,{blockType:h,stickyLocation:v?k.Xn.UPPER:k.Xn.BOTTOM,withSpinner:!0})))}),J.Z,{flags:e=>e.abt.flags}));var Ft=Object.defineProperty,$t=Object.defineProperties,Wt=Object.getOwnPropertyDescriptors,Zt=Object.getOwnPropertySymbols,Gt=Object.prototype.hasOwnProperty,jt=Object.prototype.propertyIsEnumerable,Ut=(e,t,a)=>t in e?Ft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,qt=(e,t)=>{for(var a in t||(t={}))Gt.call(t,a)&&Ut(e,a,t[a]);if(Zt)for(var a of Zt(t))jt.call(t,a)&&Ut(e,a,t[a]);return e},Vt=(e,t)=>$t(e,Wt(t));const zt=(0,r.memo)((0,Y.Z)((({advHidden:e,appId:t,canShowDesktopAdv:a,canShowLandscapeAdv:s,canShowPortraitAdv:i,flags:l,onClose:d,onAdvShowed:c})=>{const u=(0,C.C)((e=>e.advGameCanBeLoaded)),h=Ve(),[v,g]=(0,r.useState)(-1),y=p(e),f=(0,r.useRef)(v),w=(0,r.useRef)(!1),b=(0,r.useRef)(!1),k=(0,r.useMemo)((()=>(0,Je.RM)(l,ct.Z.advHideEmptySticky)),[l]),S=(0,r.useMemo)((()=>new ae.U({app_id:t,tag:o.$H.STICKY,refresh_count:v})),[t,v]);(0,r.useEffect)((()=>{f.current=v}),[v]);const A=(0,r.useCallback)((()=>{g((e=>e+1)),w.current=!0}),[]),I=(0,r.useCallback)((()=>{b.current=!0,c()}),[c]),P=(0,r.useCallback)(((e,t)=>{if(b.current||!1===k)return;if(t===o.kq.DESKTOP_ADDITIONAL)return;let a;switch(e){case E.JK.Landscape:a={onlyLandscape:!0};break;case E.JK.Portrait:a={onlyPortrait:!0}}S.close(),d(a)}),[S,d,k]);if(Q(A,u&&!e),(0,r.useEffect)((()=>{w.current&&u&&y&&!e&&A()}),[u,e,y,A]),(0,r.useEffect)((()=>{}),[u,e,h,A]),(0,m.Yz)(A,u&&!e&&(null==h?void 0:h.refreshInterval)||null),!h)return null;const T={advHidden:e,advLogger:S,refreshCounter:v,onAdvShowed:I,onFailed:P};return n().createElement(n().Fragment,null,h.blocks.desktop&&n().createElement(yt,Vt(qt({},T),{isVisible:!e&&a})),h.blocks.portrait&&n().createElement(Ht,Vt(qt({},T),{isVisible:!e&&i})),h.blocks.landscape&&n().createElement(Lt,Vt(qt({},T),{isVisible:!e&&s})),h.blocks.landscape_side&&n().createElement(St,Vt(qt({},T),{isVisible:!e&&s})))}),J.Z,{appId:e=>e.playPageData.gameInfo.appId,flags:e=>e.abt.flags}));var Kt=a(14408),Yt=a(38096),Xt=a(26108),Jt=a(71487),Qt=a(36529),ea=a(84819),ta=a(21698),aa=a(58098),ra=a(59886),na=a(78569),sa=a(42873),oa=a(89592);const ia=(0,y.M$)("AdvStickyBanner",y.XG.Adv),la=(e,t,a)=>[{code:a.main.blockId,mediaTypes:{banner:{sizes:a.main.sizes}},bids:sa.U[e][t].sticky.desktop.sidebar_main},{code:a.small.blockId,mediaTypes:{banner:{sizes:a.small.sizes}},bids:sa.U[e][t].sticky.desktop.sidebar_small}];var da=a(60295),ca=a(40656),ua=a(49659),ha=Object.defineProperty,pa=Object.getOwnPropertySymbols,ma=Object.prototype.hasOwnProperty,va=Object.prototype.propertyIsEnumerable,ga=(e,t,a)=>t in e?ha(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,ya=(e,t,a)=>new Promise(((r,n)=>{var s=e=>{try{i(a.next(e))}catch(e){n(e)}},o=e=>{try{i(a.throw(e))}catch(e){n(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(s,o);i((a=a.apply(e,t)).next())}));const fa=g().with("google-sticky-adv-banner"),wa=(0,y.M$)("GoogleStickyAdvBanner",y.XG.Adv),ba="AdvStickyBanner error [google]:",Ea="google-adv-sticky-banner-",ka=500,Sa=700,Aa=2*ca.WT;function Ia(e,t){(0,D.U4)({},{borrowParams:{adv:{sticky:{[e]:t}}}})}class Pa extends J.P{constructor(){super(...arguments),this.isAdditionalTabletLandscapeBlockEnabled=!1,this.allStickyGoogleAdvBlocks=this.context.allAdvBlocks.google.sticky,this.usePrebid=(0,Je.AZ)(this.context.abt.flags),this.useMultipleAuction=(0,Je.Ml)(this.context.abt.flags),this.prebidAdUnits=(({flags:e,stickyBlocks:t})=>{let a=(0,Yt.getDomainConfig)().adv.bidsServiceName;const r=(0,Je.Ed)(e)?"dsail":"default",n={desktop:t.desktop,landscape:t.landscape,portrait:t.portrait,portrait_high:t.portrait_high};let s=la(a,r,n.desktop);return s=function(e,t){const a=(0,Je.QR)(t,ct.Z.prebidDisabledBids);return(0,oa.GI)(a)&&e.forEach((e=>{e.bids=e.bids.filter((({bidder:e})=>!a.includes(e)))})),e}(s,e),ia("getPrebidStickyAdUnits result",s),s})({stickyBlocks:this.allStickyGoogleAdvBlocks,flags:this.context.abt.flags}),this.previousAuctionStartTime=0,this.waitForAuction=null,this.retries=(0,Je.ff)(this.context.abt.flags),this.hasBeenShownAtLeastOnce=!1,this.slots={desktop:{},landscape:{},portrait:{}},this.timeToLoadAdv=(0,E.Qt)(this.context.abt.flags),this.headerHeight=(0,B.C)(),this.landscapeStyles=((e,t)=>{for(var a in t||(t={}))ma.call(t,a)&&ga(e,a,t[a]);if(pa)for(var a of pa(t))va.call(t,a)&&ga(e,a,t[a]);return e})({},this.props.isLandscapeSide?{width:this.props.mobileAdvSideLandscapeWidth}:{height:`${this.props.mobileAdvLandscapeHeight}px`,left:-this.headerHeight,minWidth:`calc(100% + ${this.headerHeight}px)`}),this.state={isHeaderEnabled:!(0,x.Ij)(),showLandscapeSpinner:!0,showSpinner:!0,windowInnerHeight:"object"==typeof window?window.innerHeight:0},this.isFirstTryOpen=!0,this.onShow=e=>{const{slot:t}=e,{stickyPlacement:a,clickDaemon:r}=t;a&&(null==r||r.show())},this.onSlotRenderEnded=e=>{const{slot:t}=e,{clickDaemon:a,stickyPlacement:r,stickyBlockType:n,stickyLocation:s}=t,o=this.getSlotObject(r,n);if(o){if(wa.spoiler(t.getAdUnitPath())("onSlotRenderEnded",n,`isEmpty = ${e.isEmpty}`,`isBackfill = ${e.isBackfill}`,"size :",e.size),clearTimeout(o.loadTimer),this.resetRefreshTimer(),e.isEmpty)return null==a||a.responseEmpty(),void this.onNoContent(t);null==a||a.response(),o.retries&&(o.retries=0),this.hasBeenShownAtLeastOnce=!0,(0,ta.o)(t,`sticky-banner_${r}_${s}_${b.e.Google}`)}},this.resetRefreshTimer=()=>{wa("Reset refresh timer",Date.now()),this.refreshTimer||Ia("startRefreshTimer",!0),clearTimeout(this.refreshTimer),this.refreshTimer=setTimeout((()=>{wa.spoiler("refresh timer executed"),Ia("refreshTimerEnded",!0),clearTimeout(this.refreshTimer),this.refreshTimer=void 0,this.displaySlotsBatched(!0)}),this.props.intervalBetweenRefreshAd)},this.onSlotLoaded=({slot:e})=>{const{stickyPlacement:t,stickyBlockType:a}=e,r=this.getSlotObject(t,a);if(r)switch(wa.spoiler(e.getAdUnitPath())("onSlotLoaded",a),r.loaded=!0,clearTimeout(r.loadTimer),t){case E.JK.Desktop:this.setState({showSpinner:!1});break;case E.JK.Landscape:this.setState({showLandscapeSpinner:!1});break;case E.JK.Portrait:this.setState({showSpinner:!1})}},this.onSlotRequested=({slot:e})=>{const{stickyPlacement:t,stickyBlockType:a,clickDaemon:r}=e,n=this.getSlotObject(t,a);n&&(wa.spoiler(e.getAdUnitPath())("onSlotRequested",a),clearTimeout(n.loadTimer),n.loadTimer=setTimeout((()=>{n.loaded||((0,ne.H)({block:se.W.GOOGLE_ADS,prefix:ba,message:`${t} timeout error`}),null==r||r.error(`${t} timeout error`),this.resetRefreshTimer(),!1!==(0,Je.RM)(this.context.abt.flags,ct.Z.advHideEmptySticky)&&this.onClose(e))}),this.timeToLoadAdv))},this.onSlotResponseReceived=({slot:e})=>{const{stickyPlacement:t,stickyBlockType:a}=e,r=this.getSlotObject(t,a);r&&(wa.spoiler(e.getAdUnitPath())("onSlotResponseReceived",a),clearTimeout(r.loadTimer))},this.prebidStartAuction=(0,Jt.P)((()=>ya(this,null,(function*(){if(null!==this.waitForAuction)return;const{flags:e}=this.context.abt;wa("[prebid_sticky] startAuction"),this.waitForAuction=new Xt.Z,yield(0,aa.BA)((t=>{this.previousAuctionStartTime=Date.now(),t.requestBids({adUnits:this.prebidAdUnits,bidsBackHandler:this.prebidAuctionHandler,timeout:(0,aa.cm)(e)})})),this.prebidAuctionTimeout=setTimeout((()=>{wa("[prebid_sticky] No auction handled, call empty function."),this.prebidAuctionHandler()}),E.kr)}))),ra.kw),this.prebidAuctionHandler=(e,t)=>ya(this,null,(function*(){clearTimeout(this.prebidAuctionTimeout),wa("[prebid_sticky] prebidAuctionHandler",e),t&&(0,ne.H)({block:se.W.ADV},new Error("[prebid_sticky] Auction finished with bidders timed out."));const a=(0,E.Dr)(this.prebidAdUnits);(0,na.H)({advTag:o.$H.STICKY,adUnitCodes:a,bids:e}),yield(0,aa.BA)((e=>{var t;e.setTargetingForGPTAsync(a),null==(t=this.waitForAuction)||t.resolve()}))})),this.onWindowResize=(0,te.D)((()=>{this.setState({windowInnerHeight:window.innerHeight})}),200),this.changeOrientationListener=()=>{if(this.props.advHidden)return;let e;if(l.default.isPortrait)e=E.JK.Portrait;else{if(!l.default.isLandscape)return;e=E.JK.Landscape}for(const{slot:t,isClosed:a}of Object.values(this.slots[e])){if(!t||a)return;if(t.stickyBlockType===o.kq.LANDSCAPE_TABLET_ADDITIONAL&&!this.isAdditionalTabletLandscapeBlockEnabled)return;this.tryShowAdv(t)}}}get slotsArray(){return Object.values(this.slots).map(Object.values).reduce(((e,t)=>e.concat(t)))}componentDidMount(){var e,t;this.setAdvBlocks(),this.setState({windowInnerHeight:window.innerHeight}),wa("blockIds = ",this.blockIds),window.addEventListener("resize",this.onWindowResize,!0);const{desktop:a}=this.props.stickyBannerLocation;a&&(this.desktopAdvMinHeight="number"==typeof(null==(t=null==(e=this.allStickyGoogleAdvBlocks.desktop.main.sizes)?void 0:e[0])?void 0:t[1])?this.allStickyGoogleAdvBlocks.desktop.main.sizes[0][1]:600),this.props.advGameCanBeLoaded&&this.loadScripts(),N.Z.onInternalMessage("header",(e=>{this.setState({isHeaderEnabled:"enabled"===e.data.action})}))}componentWillUnmount(){window.removeEventListener("resize",this.onWindowResize,!0),l.default.removeChangeListener(this.changeOrientationListener),clearTimeout(this.refreshTimer);const{googletag:e}=window;e&&(this.removeSlotsEventListeners(),this.slotsArray.forEach((t=>{clearTimeout(t.loadTimer),t.slot&&e.destroySlots([t.slot])})))}setAdvBlocks(){this.blockIds=this.allStickyGoogleAdvBlocks,this.props.useHighPortraitBlockIds&&this.allStickyGoogleAdvBlocks.portrait_high&&(this.blockIds.portrait=this.allStickyGoogleAdvBlocks.portrait_high)}addSlotsEventListeners(){var e;const t=null==(e=googletag.pubads)?void 0:e.call(googletag);t&&"function"==typeof t.addEventListener&&(t.addEventListener("slotRequested",this.onSlotRequested),t.addEventListener("slotResponseReceived",this.onSlotResponseReceived),t.addEventListener("slotOnload",this.onSlotLoaded),t.addEventListener("slotRenderEnded",this.onSlotRenderEnded),t.addEventListener("impressionViewable",this.onShow))}removeSlotsEventListeners(){var e;const t=null==(e=googletag.pubads)?void 0:e.call(googletag);t&&"function"==typeof t.removeEventListener&&(t.removeEventListener("slotRequested",this.onSlotRequested),t.removeEventListener("slotResponseReceived",this.onSlotResponseReceived),t.removeEventListener("slotOnload",this.onSlotLoaded),t.removeEventListener("slotRenderEnded",this.onSlotRenderEnded),t.removeEventListener("impressionViewable",this.onShow))}componentDidUpdate(e,t){var a,r;const{advGameCanBeLoaded:n,stickyBannerLocation:{desktop:s,mobilePortrait:i,mobileLandscape:l}}=this.props;if(e.advGameCanBeLoaded||!n||this.isScriptsLoaded||this.loadScripts(),s&&!e.isPageBlured&&this.props.isPageBlured)Object.values(this.slots.desktop).forEach((e=>{e.slot&&this.hideAdvSlot(e.slot)}));else if(s&&e.isPageBlured&&!this.props.isPageBlured)Object.values(this.slots.desktop).forEach((e=>{e.slot&&this.tryShowAdv(e.slot)}));else if(this.isScriptsLoaded&&s&&t.windowInnerHeight!==this.state.windowInnerHeight&&((null==(a=this.slots.desktop.desktop)?void 0:a.slot)&&t.windowInnerHeight<ka&&this.state.windowInnerHeight>=ka&&this.tryShowAdv(this.slots.desktop.desktop.slot),(null==(r=this.slots.desktop.desktop_additional)?void 0:r.slot)&&t.windowInnerHeight<Sa&&this.state.windowInnerHeight>=Sa&&this.tryShowAdv(this.slots.desktop.desktop_additional.slot)),this.isScriptsLoaded&&e.advHidden&&!this.props.advHidden||!e.canShowPortraitAdv&&this.props.canShowPortraitAdv||!e.canShowLandscapeAdv&&this.props.canShowLandscapeAdv){if(s&&Object.values(this.slots.desktop).forEach((e=>{e.slot&&this.tryShowAdv(e.slot)})),i){const e=this.slots.portrait.portrait;(null==e?void 0:e.slot)&&!e.loaded&&this.tryShowAdv(e.slot)}l&&Object.values(this.slots.landscape).forEach((e=>{e.slot&&(e.slot.stickyBlockType!==o.kq.LANDSCAPE_TABLET_ADDITIONAL||this.isAdditionalTabletLandscapeBlockEnabled)&&this.tryShowAdv(e.slot)}))}}getSlotObject(e,t){if(e&&t)return this.slots[e][t]}onClose(e){const{stickyPlacement:t,stickyBlockType:a}=null!=e?e:{},r=this.getSlotObject(t,a);switch(r&&(r.loaded=!1,r.isClosed=!0),this.clickDaemon.close(),t){case"desktop":return void this.props.onClose();case"portrait":return void this.props.onClose({onlyPortrait:!0});case"landscape":return void this.props.onClose({onlyLandscape:!0});default:this.props.onClose()}}onNoContent(e){var t;const{stickyPlacement:a,stickyBlockType:r}=e,n=this.getSlotObject(a,r);if(!n)return;const s=null!=(t=n.retries)?t:0;if(s<this.retries)return wa.spoiler(e.getAdUnitPath())(`${s+1} of ${this.retries} retry to refresh slot ${r}`),n.retries=s+1,clearTimeout(n.loadTimer),void setTimeout((()=>{this.tryShowAdv(e)}),Aa);n.retries&&(n.retries=0),!1===(0,Je.RM)(this.context.abt.flags,ct.Z.advHideEmptySticky)||this.hasBeenShownAtLeastOnce||(wa.spoiler(e.getAdUnitPath())(`Hide slot ${r} due no content`),this.onClose(e))}initGPT(){return ya(this,null,(function*(){wa("initGPT"),yield(0,Ne.Vg)();try{const{googletag:e}=window;this.addSlotsEventListeners(),this.defineSlots(),e.enableServices(),l.default.addChangeListener(this.changeOrientationListener)}catch(e){(0,ne.H)({message:"Trouble with getting google key values"},e)}}))}defineSlots(){const{stickyBannerLocation:{desktop:e,mobileLandscape:t,mobilePortrait:a},mobileAdvPortraitHeight:r,mobileAdvLandscapeHeight:n}=this.props;if(e)this.defineGPTSlot(this.blockIds.desktop.main.blockId,this.blockIds.desktop.main.sizes,E.JK.Desktop,o.kq.DESKTOP,k.Xn.RIGHT),this.defineGPTSlot(this.blockIds.desktop.small.blockId,this.blockIds.desktop.small.sizes,E.JK.Desktop,o.kq.DESKTOP_ADDITIONAL,k.Xn.RIGHT);else if(a&&this.defineGPTSlot(this.blockIds.portrait,[[320,r]],E.JK.Portrait,o.kq.PORTRAIT,k.Xn.BOTTOM),t)switch(t){case k.Xn.BOTTOM:case k.Xn.UPPER:this.defineGPTSlot(this.blockIds.landscape,[[320,n]],E.JK.Landscape,o.kq.LANDSCAPE,t),this.defineGPTSlot(this.blockIds.landscape,[[320,n]],E.JK.Landscape,o.kq.LANDSCAPE_ADDITIONAL,t),this.isAdditionalTabletLandscapeBlockEnabled&&this.defineGPTSlot(this.blockIds.landscape,[[320,n]],E.JK.Landscape,o.kq.LANDSCAPE_TABLET_ADDITIONAL,t);break;case k.Xn.RIGHT:case k.Xn.LEFT:this.defineGPTSlot(this.blockIds.landscape,["fluid"],E.JK.Landscape,o.kq.LANDSCAPE_SIDE,t)}}defineGPTSlot(e,t,a,r,n){var s;const{googletag:o}=window;wa.spoiler(e,a,r)("defineAndDisplayGPTSlot",`isErrorOnDisplaySlots = ${!o.pubads||!o.defineSlot}`);const i=null==(s=o.defineSlot(e,t,Ea+r))?void 0:s.addService(o.pubads());i?(i.stickyPlacement=a,i.stickyBlockType=r,i.stickyLocation=n,this.slots[a][r]={loaded:!1,isBatched:!1,isClosed:!1,retries:0,slot:i}):((0,ne.H)({block:se.W.GOOGLE_ADS,prefix:ba,message:"googletag couldn't create gptSlot"}),this.onClose())}displaySlotsBatched(e){return ya(this,null,(function*(){var t;const a=[];this.clickDaemon=new ae.U({app_id:this.props.appId,tag:o.$H.STICKY}),this.clickDaemon.tryOpen({provider:b.e.Google,reason:e?re.p_.REFRESH:re.p_.ONSPOT}),this.slotsArray.forEach((e=>{e.slot&&(this.tryShowAdv(e.slot,!0),e.isBatched&&(e.isBatched=!1,a.push(e.slot)))})),this.usePrebid&&(yield this.prebidStartAuction(),yield null==(t=this.waitForAuction)?void 0:t.promise),googletag.pubads().refresh(a),this.usePrebid&&this.useMultipleAuction&&(this.waitForAuction=null)}))}loadScripts(){var e;if(wa("loadScripts isLoaded=",this.isScriptsLoaded),this.isScriptsLoaded)return;this.clickDaemon=new ae.U({app_id:this.props.appId,tag:o.$H.STICKY});const t=(0,Qt.D)(Ne.CX).then((()=>{throw new Error(`Scripts load timeout (${Ne.CX}ms)`)})),a=(0,aa.cQ)({cdnUrl:this.context.cdnUrl,flags:this.context.abt.flags,fullUrl:(0,ua.e)().href,options:{isSlowCountry:this.context.isSlowCountry}}),r=(0,Ne.xq)({metrikaCounter:null==(e=(0,Yt.getDomainConfig)().analytics.counters)?void 0:e.metrika,parallel:(0,Je.RM)(this.context.abt.flags,ct.Z.prebidLoadAfterGpt)||!1,prebidScriptUrl:this.usePrebid?a:void 0});Promise.race([t,r]).then((e=>ya(this,null,(function*(){var t;if(wa("onScriptsLoaded: true"),e.prebid||(this.usePrebid=!1,null==(t=this.waitForAuction)||t.resolve()),e.gptError)throw e.gptError;this.isScriptsLoaded=!0,yield this.initGPT(),this.usePrebid&&(yield this.initPrebid()),yield this.displaySlotsBatched(!1)})))).catch((e=>{this.onScriptsLoadError(e)}))}onScriptsLoadError(e){wa("onScriptsLoadError",e),(0,ne.H)({block:se.W.GOOGLE_ADS,prefix:ba,message:"script failed to load"}),this.onClose(),this.props.onAdvShowed()}initPrebid(){return ya(this,null,(function*(){wa("[prebid_sticky] initPrebid"),yield(0,aa.OH)(),yield(0,aa.BA)((e=>ya(this,null,(function*(){return e.addAdUnits(this.prebidAdUnits)})))),(0,ea.v_)({on:"adv_prebid_timeout_debug"},(()=>{(0,aa.BA)((e=>{const t=e=>{e.adUnitCode===this.blockIds.desktop.main.blockId&&(0,da.s4)("play_prebid_sticky_bid_response_time",Date.now()-this.previousAuctionStartTime,!0,{"-additional":encodeURIComponent(JSON.stringify({bidder:e.bidder}))})};e.onEvent("bidResponse",t),e.onEvent("noBid",t)}))}))}))}showAdv(e,t=!1){const{googletag:a}=window,{stickyPlacement:r,stickyBlockType:n}=e,s=this.getSlotObject(r,n);s&&(wa("showAdv",n),s.retries||(this.clickDaemon.demand({advBlockId:e.getAdUnitPath(),depth:0,provider:b.e.Google,reason:s.loaded?re.p_.REFRESH:re.p_.ONSPOT}),this.isFirstTryOpen&&(Ia("isFirstTryOpen",!0),this.isFirstTryOpen=!1)),e.clickDaemon=this.clickDaemon.copy(),e.clickDaemon.request(),t?s.isBatched=!0:a.pubads().refresh([e]),this.props.onAdvShowed())}tryShowAdv(e,t=!1){const{advHidden:a,canShowDesktopAdv:r,canShowPortraitAdv:n,canShowLandscapeAdv:s}=this.props,{stickyPlacement:i,stickyBlockType:d}=e;if(i&&d)switch(wa("tryShowAdv",d),d){case o.kq.DESKTOP:r&&!a&&this.state.windowInnerHeight>=ka&&this.showAdv(e,t);break;case o.kq.DESKTOP_ADDITIONAL:r&&!a&&this.state.windowInnerHeight>=Sa&&this.showAdv(e,t);break;case o.kq.PORTRAIT:n&&!a&&l.default.isPortrait&&this.showAdv(e,t);break;case o.kq.LANDSCAPE_SIDE:case o.kq.LANDSCAPE:case o.kq.LANDSCAPE_ADDITIONAL:s&&!a&&l.default.isLandscape&&this.showAdv(e,t);break;case o.kq.LANDSCAPE_TABLET_ADDITIONAL:this.isAdditionalTabletLandscapeBlockEnabled&&s&&!a&&l.default.isLandscape&&this.showAdv(e,t)}}hideAdvSlot(e){wa("hideAdvSlot"),googletag.pubads().clear([e])}renderBanner(e,t,a,r,s){const{showSpinner:i}=this.state,l=Ea+t,d=e===E.JK.Desktop,c=e===E.JK.Landscape,u=d?E.P5.COLUMN:E.P5.ROW,h=(0,E.oi)(r,s),p=this.props.advHidden||t===o.kq.PORTRAIT&&!this.props.canShowPortraitAdv||c&&!this.props.canShowLandscapeAdv||d&&!this.props.canShowDesktopAdv;return n().createElement("div",{className:fa({[e]:!0,[`${e}_${a}`]:!0,direction:u,border_round:!d,hidden:p,"with-disable-ad-button":!0,"middle-layer-light":this.props.isMiddleLayerShownInGame&&!this.props.darkTheme}),id:l,key:l,style:h},!c&&t!==o.kq.DESKTOP_ADDITIONAL&&n().createElement(w.y,{className:fa("spinner",{hidden:!i}),key:`${l}-spinner`,position:"center",size:28,spinning:!0,view:"default"}))}render(){var e;const{advHidden:t,canShowDesktopAdv:a,hideAdvCloseButton:r,desktopAdvWidth:s,isLandscapeSide:i,mobileAdvLandscapeHeight:l,mobileAdvSideLandscapeWidth:d,mobileAdvPortraitHeight:u,stickyBannerLocation:{desktop:h,mobileLandscape:p,mobilePortrait:m}}=this.props,{isHeaderEnabled:v,showLandscapeSpinner:g,windowInnerHeight:y}=this.state;if(h){const i={marginTop:v&&!r?-this.headerHeight:0,paddingTop:r?0:this.headerHeight,width:s},l={width:s,marginTop:v?-this.headerHeight:0};return n().createElement("div",{className:fa("desktop-wrapper",{hidden:t||!a,"with-disable-ad-button":!0,"middle-layer-light":this.props.isMiddleLayerShownInGame&&!this.props.darkTheme}),style:i},!this.props.hideAdvCloseButton&&(null==(e=this.props.wrapperRef)?void 0:e.current)&&(0,c.createPortal)(n().createElement("div",{className:fa("desktop-disable-ad-button-wrapper"),style:l},n().createElement(_,null)),this.props.wrapperRef.current),y>=ka&&this.renderBanner(E.JK.Desktop,o.kq.DESKTOP,h,{maxWidth:s,width:s,minHeight:this.desktopAdvMinHeight}),y>=Sa&&this.renderBanner(E.JK.Desktop,o.kq.DESKTOP_ADDITIONAL,h,{maxWidth:s,width:s}))}const f=(0,E.Z4)("landscape",this.isAdditionalTabletLandscapeBlockEnabled);return n().createElement(n().Fragment,null,m&&this.renderBanner(E.JK.Portrait,o.kq.PORTRAIT,m,{height:u,maxHeight:u}),p&&n().createElement("div",{className:fa("landscape-wrapper",{[p]:!0,"with-disable-ad-button":!0}),style:this.landscapeStyles},n().createElement(w.y,{className:fa("spinner",{hidden:!g}),key:"landscape-spinner",position:"center",size:28,spinning:!0,view:"default"}),i&&this.renderBanner(E.JK.Landscape,o.kq.LANDSCAPE_SIDE,p,{width:d}),!i&&this.renderBanner(E.JK.Landscape,o.kq.LANDSCAPE,p,{height:l,maxHeight:l,minWidth:f}),!i&&this.isAdditionalTabletLandscapeBlockEnabled&&this.renderBanner(E.JK.Landscape,o.kq.LANDSCAPE_TABLET_ADDITIONAL,p,{height:l,maxHeight:l,minWidth:f}),!i&&this.renderBanner(E.JK.Landscape,o.kq.LANDSCAPE_ADDITIONAL,p,{height:l,maxHeight:l,minWidth:f})))}}const Ta=(0,u.$j)((function(e){var t;return{advGameCanBeLoaded:e.advGameCanBeLoaded,darkTheme:(0,R.Up)(e),isMiddleLayerShownInGame:null==(t=e.middleLayerInGameData)?void 0:t.show}}))(Pa);var Ca=a(96665);const Ra=new Set;function Da(e){!function(e,t){(0,ne.H)({block:se.W.ADV_STICKY,message:`NativeStickyApi error: ${t.message}`},t)}(0,e)}function La(e){var t,a;return"function"==typeof(null==(a=null==(t=window.yandex)?void 0:t.ads)?void 0:a[e])}function Oa(e){return function(...t){var a,r,n;return La(e)?null==(n=null==(r=null==(a=window.yandex)?void 0:a.ads)?void 0:r[e])?void 0:n.call(r,...t).catch((e=>{throw Da(e),e})):function(e){const t=new Error(`Action "${e}" is not available`);return Da(t),Promise.reject(t)}(e)}}const _a={isActionAvailable:La,hideStickyBanner:Oa("hideStickyBanner"),refreshStickyBanner:Oa("refreshStickyBanner"),showStickyBanner:e=>{const{blockId:t,mediation:a,position:r,orientation:n,dimension:s,revenueData:o}=e;return Oa("showStickyBanner")(t,a,r,n,s,o)},stickyBannerIsShowing:Oa("stickyBannerIsShowing")};var xa=a(34711),Na=a(7991),Ba=Object.defineProperty,Ma=Object.getOwnPropertySymbols,Ha=Object.prototype.hasOwnProperty,Fa=Object.prototype.propertyIsEnumerable,$a=(e,t,a)=>t in e?Ba(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Wa=(e,t)=>{for(var a in t||(t={}))Ha.call(t,a)&&$a(e,a,t[a]);if(Ma)for(var a of Ma(t))Fa.call(t,a)&&$a(e,a,t[a]);return e},Za=(e,t,a)=>new Promise(((r,n)=>{var s=e=>{try{i(a.next(e))}catch(e){n(e)}},o=e=>{try{i(a.throw(e))}catch(e){n(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(s,o);i((a=a.apply(e,t)).next())}));const Ga=(0,y.M$)("NativeStickyAdvBanner",y.XG.Adv);class ja extends J.P{constructor(e,t){var a;super(e),this.isAdvHidden=n().createRef(),this.refreshTimeoutIds={landscape:0,portrait:0},this.isAdNeedToRefresh={portrait:!1,landscape:!1},this.advHeight={portrait:E.qi,landscape:E.qi},this.revenueData={app_id:this.props.appId},this.revenueDataAsString="",this.changeOrientationListener=()=>Za(this,null,(function*(){const e=l.default.isPortrait?o.kq.PORTRAIT:o.kq.LANDSCAPE;if(Ga(`changeOrientationListener isAdNeedToRefresh${e}=${this.isAdNeedToRefresh[e]}`),this.isAdNeedToRefresh[e])return void this.updateAdv(e);if(!this.nativeStickyApi.isActionAvailable("stickyBannerIsShowing"))return;const t=yield this.nativeStickyApi.stickyBannerIsShowing();Ga(`changeOrientationListener isAdvShowing=${t} advHidden=${this.isAdvHidden.current}`),t||this.isAdvHidden.current||this.openNativeAdvBanner(e)})),this.blockIds=(0,E.AO)({advBlocks:t.playPageData.gameSettings.advBlocks,flags:t.abt.flags,residenceInfo:null==(a=t.playPageData.gameSettings.advInfo)?void 0:a.residence_info,withWorldWideAdv:t.withWorldWideAdv,locations:this.props.stickyBannerLocation,useHighPortraitBlockIds:this.props.useHighPortraitBlockIds}),this.nativeStickyApi=_a,this.library=(0,E.dF)(t.abt.flags);const r=(0,xa.X)(),s=(0,Na.W5)(),i=Wa(Wa({},r?{clid:r}:{}),s?{gclid:s}:{});Object.assign(this.revenueData,i),this.revenueDataAsString=JSON.stringify(this.revenueData),this.advHeight={portrait:e.mobileAdvPortraitHeight,landscape:e.isLandscapeSide?e.mobileAdvSideLandscapeWidth:e.mobileAdvLandscapeHeight}}componentDidUpdate(e){e.advHidden&&!this.props.advHidden&&this.tryShowAdv(),!e.advHidden&&this.props.advHidden&&this.hideAdv(),this.isAdvHidden.current=this.props.advHidden}componentWillUnmount(){l.default.removeChangeListener(this.changeOrientationListener),window.clearTimeout(this.refreshTimeoutIds.landscape),window.clearTimeout(this.refreshTimeoutIds.portrait),this.onClose(!1)}tryShowAdv(){return Za(this,null,(function*(){if(this.clickDaemon=new ae.U({tag:o.$H.STICKY,app_id:this.props.appId}),!this.nativeStickyApi.isActionAvailable("stickyBannerIsShowing"))return Ga("tryShowAdv","ads.stickyBannerIsShowing is not a function"),void this.onClose();const e=yield this.nativeStickyApi.stickyBannerIsShowing();if(this.props.onAdvShowed(),e)return void Ga("tryShowAdv","adv is showing");const{mobilePortrait:t,mobileLandscape:a}=this.props.stickyBannerLocation;this.clickDaemon.tryOpen({provider:b.e.Native,reason:re.p_.ONSPOT}),t&&l.default.isPortrait?(this.clickDaemon.demand({advBlockId:this.blockIds.portrait}),this.openNativeAdvBanner(o.kq.PORTRAIT)):a&&l.default.isLandscape&&(this.clickDaemon.demand({advBlockId:this.blockIds.landscape}),this.openNativeAdvBanner(o.kq.LANDSCAPE))}))}componentDidMount(){return Za(this,null,(function*(){Ga(`blockIds = ${JSON.stringify(this.blockIds)}\n\n            revenueData=${this.revenueDataAsString}\n        `),yield this.tryShowAdv(),l.default.addChangeListener(this.changeOrientationListener)}))}hideAdv(){this.nativeStickyApi.isActionAvailable("hideStickyBanner")?(this.nativeStickyApi.hideStickyBanner(),this.props.onAdvShowed()):Ga("hideAdv","ads.hideStickyBanner is undefined")}onClose(e=!0){e&&this.clickDaemon.close(),this.hideAdv(),this.props.onClose()}openNativeAdvBanner(e){if(!this.nativeStickyApi.isActionAvailable("showStickyBanner"))return Ga("openNativeAdvBanner","ads.showStickyBanner is undefined"),void this.onClose();const{stickyBannerLocation:{mobilePortrait:t,mobileLandscape:a}}=this.props,r="portrait"===e?t:a;if(!r)return void Ga("openNativeAdvBanner","ad position is a null");const n=function(e,t){return"upper"===t?t="bottom":"left"===t&&(t="right"),`${e}-${t}`}(e,r);if(Ra.has(n))return Ga("openNativeAdvBanner","The previous show ended with an error"),void this.onClose();this.clickDaemon.request({advBlockId:this.blockIds[e],reason:re.p_.ONSPOT}),this.nativeStickyApi.showStickyBanner({blockId:this.blockIds[e],mediation:this.library,position:r,orientation:e,dimension:this.advHeight[e],revenueData:{revenueData:this.revenueDataAsString}}).then((()=>{Ra.delete(n),this.clickDaemon.response(),this.clickDaemon.show(),this.isAdNeedToRefresh[e]=!1,this.runUpdateAdvTimeout(e)})).catch((e=>{var t;Ra.add(n),this.clickDaemon.error(null!=(t=e.message)?t:String(e)),Ga(e),this.onClose()}))}runUpdateAdvTimeout(e){const t=l.default.isPortrait?"portrait":"landscape";this.refreshTimeoutIds[e]=window.setTimeout((()=>{e===t?this.updateAdv(e):this.isAdNeedToRefresh[e]=!0}),this.props.intervalBetweenRefreshAd)}updateAdv(e){this.nativeStickyApi.isActionAvailable("refreshStickyBanner")?(this.clickDaemon=new ae.U({tag:o.$H.STICKY,app_id:this.props.appId}),this.clickDaemon.tryOpen({provider:b.e.Native,reason:re.p_.REFRESH}),this.clickDaemon.demand({advBlockId:this.blockIds[e]}),this.clickDaemon.request(),this.nativeStickyApi.refreshStickyBanner().then((()=>{this.clickDaemon.response(),this.clickDaemon.show(),window.clearTimeout(this.refreshTimeoutIds[e]),this.isAdNeedToRefresh[e]=!1,this.runUpdateAdvTimeout(e)})).catch((e=>{var t;this.clickDaemon.error(null!=(t=e.message)?t:String(e)),Ga(e),this.onClose()}))):Ga("updateAdv","ads.refreshAdvert is undefined")}render(){return null}}var Ua=a(78740),qa=a(95968),Va=a(40174),za=a(38508),Ka=a(17061),Ya=a(79049),Xa=a(41811),Ja=Object.defineProperty,Qa=Object.defineProperties,er=Object.getOwnPropertyDescriptors,tr=Object.getOwnPropertySymbols,ar=Object.prototype.hasOwnProperty,rr=Object.prototype.propertyIsEnumerable,nr=(e,t,a)=>t in e?Ja(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,sr=(e,t)=>{for(var a in t||(t={}))ar.call(t,a)&&nr(e,a,t[a]);if(tr)for(var a of tr(t))rr.call(t,a)&&nr(e,a,t[a]);return e};const or=g().with("yandex-sticky-adv-banner"),ir=(0,y.M$)("YandexStickyAdvBanner",y.XG.Adv);class lr extends J.P{constructor(){super(...arguments),this.gameBlockIds=(0,E.V0)({advBlocks:this.context.playPageData.gameSettings.advBlocks,appId:this.props.appId,flags:this.context.abt.flags,locations:this.props.stickyBannerLocation,useHighPortraitBlockIds:this.props.useHighPortraitBlockIds}),this.blockIds={desktop:"",desktop_additional:"",portrait:"",portrait_high:"",landscape:"",landscape_additional:""},this.containerIds={portrait:"yandex-adv-sticky-banner-portrait",portrait_high:"yandex-adv-sticky-banner-portrait",landscape:"yandex-adv-sticky-banner-landscape",landscape_additional:"yandex-adv-sticky-banner-landscape_additional",desktop:"yandex-adv-sticky-banner-desktop",desktop_additional:"yandex-adv-sticky-banner-desktop_additional"},this.useWhiteBackgroundOnDesktop=Boolean((0,Je.pJ)(this.context.abt.flags)&&this.props.stickyBannerLocation.desktop),this.additionalLandscapeBlockEnabled=(0,Je.Vr)(this.context.abt.flags)&&this.props.stickyBannerLocation.mobileLandscape!==k.Xn.RIGHT,this.timeToLoadAdv=(0,E.Qt)(this.context.abt.flags),this.clickDaemon=new ae.U({app_id:this.props.appId,tag:o.$H.STICKY}),this.loadedFlags={isDesktopAdvLoaded:!1,isLandscapeAdvLoaded:!1,isPortraitAdvLoaded:!1,isRefreshAdv:!1,isRefreshLandscapeAdv:!1},this.hasBeenShownAtLeastOnce=!1,this.scriptLoadPromiseWrapper=new Xt.Z,this.headerHeight=(0,B.C)(),this.landscapeWrapperStyles=this.props.isLandscapeSide?{}:{left:-this.headerHeight,width:`calc(100% + ${this.headerHeight}px)`},this.landscapeBlockStyles=this.props.isLandscapeSide?{width:this.props.mobileAdvSideLandscapeWidth}:{height:this.props.mobileAdvLandscapeHeight,maxHeight:this.props.mobileAdvLandscapeHeight},this.state={isAdditionalLandscapeMediaAdType:!1,isHeaderEnabled:!(0,x.Ij)(),isLandscapeMediaAdType:!1,isPortraitMediaAdType:!1,showDesktopAdditional:!1,showLandscapeAdditional:!1,showSpinner:!0},this.initAdvStickyBlocks=()=>{const{stickyBannerLocation:{desktop:e,mobileLandscape:t,mobilePortrait:a}}=this.props;if(e)return this.desktopAdvOptions=this.getAdvOptions(o.kq.DESKTOP,this.blockIds[o.kq.DESKTOP]),this.desktopAdditionalAdvOptions=this.getAdvOptions(o.kq.DESKTOP_ADDITIONAL,this.blockIds[o.kq.DESKTOP_ADDITIONAL]),void this.showAdv(o.kq.DESKTOP);a&&(this.portraitAdvOptions=this.getAdvOptions(o.kq.PORTRAIT,this.blockIds[o.kq.PORTRAIT]),this.showAdv(o.kq.PORTRAIT)),t&&(this.landscapeAdvOptions=this.getAdvOptions(o.kq.LANDSCAPE,this.blockIds[o.kq.LANDSCAPE]),this.additionalLandscapeBlockEnabled&&(this.landscapeAdditionalAdvOptions=this.getAdvOptions(o.kq.LANDSCAPE_ADDITIONAL,this.blockIds[o.kq.LANDSCAPE_ADDITIONAL])),this.showAdv(o.kq.LANDSCAPE)),l.default.addChangeListener(this.changeOrientationListener)},this.changeOrientationListener=()=>{l.default.isPortrait?this.showAdv(o.kq.PORTRAIT):l.default.isLandscape&&this.showAdv(o.kq.LANDSCAPE)},this.updateRefreshTimer=e=>{switch(e){case o.kq.DESKTOP:ir("update refresh timer"),window.clearTimeout(this.refreshTimeoutId),this.refreshTimeoutId=window.setTimeout(this.handleDesktopRefreshTimeout,this.props.intervalBetweenRefreshAd);break;case o.kq.PORTRAIT:ir("update refresh timer"),window.clearTimeout(this.refreshTimeoutId),this.refreshTimeoutId=window.setTimeout((()=>{this.setState({showSpinner:!0},(()=>{this.refreshPortrait()}))}),this.props.intervalBetweenRefreshAd);break;case o.kq.LANDSCAPE:ir("update refresh timer"),window.clearTimeout(this.refreshLandscapeTimeoutId),this.refreshLandscapeTimeoutId=window.setTimeout((()=>{this.refreshLandscape()}),this.props.intervalBetweenRefreshAd)}},this.handleDesktopRefreshTimeout=()=>{this.loadedFlags.isRefreshAdv=!0,this.loadedFlags.isDesktopAdvLoaded=!1,this.setShowState(o.kq.DESKTOP_ADDITIONAL,!1),this.destroyAdv(this.blockIds[o.kq.DESKTOP]),this.destroyAdv(this.blockIds[o.kq.DESKTOP_ADDITIONAL]),ir("refresh timer executed"),this.showAdv(o.kq.DESKTOP)},this.refreshLandscape=()=>{this.setShowState(o.kq.LANDSCAPE_ADDITIONAL,!1),this.destroyAdv(this.blockIds[o.kq.LANDSCAPE_ADDITIONAL]),this.destroyAdv(this.blockIds[o.kq.LANDSCAPE]),this.loadedFlags.isRefreshLandscapeAdv=!0,this.loadedFlags.isLandscapeAdvLoaded=!1,this.showAdv(o.kq.LANDSCAPE)},this.refreshPortrait=()=>{this.destroyAdv(this.blockIds[o.kq.PORTRAIT]),this.loadedFlags.isRefreshAdv=!0,this.loadedFlags.isPortraitAdvLoaded=!1,this.showAdv(o.kq.PORTRAIT)}}componentWillUnmount(){window.clearTimeout(this.refreshTimeoutId),window.clearTimeout(this.refreshLandscapeTimeoutId),window.clearTimeout(this.rejectTimeoutId),window.clearTimeout(this.additionalBlockTimeoutId),window.clearInterval(this.checkReadyIntervalId),l.default.removeChangeListener(this.changeOrientationListener)}handleAdvBlockIdError(e){(0,ne.H)({block:se.W.ADV_STICKY,message:`AdvStickyBanner error [yandex]: There is no blockId for ${e}`})}tryInitAdvBlockId(e,t){return!!t&&(this.blockIds[e]=t,!0)}componentDidMount(){const{desktop:e,mobileLandscape:t,mobilePortrait:a}=this.props.stickyBannerLocation;if(e){const e=this.tryInitAdvBlockId(o.kq.DESKTOP,this.gameBlockIds.desktop);this.tryInitAdvBlockId(o.kq.DESKTOP_ADDITIONAL,this.gameBlockIds.desktop_additional),e||(this.onClose({error:"desktop block not initialized"}),this.handleAdvBlockIdError(o.kq.DESKTOP))}if(a&&(this.tryInitAdvBlockId(o.kq.PORTRAIT,this.gameBlockIds.portrait)||(this.onClose({onlyPortrait:!0,error:"portrait block not initialized"}),this.handleAdvBlockIdError(o.kq.PORTRAIT))),t){const e=this.tryInitAdvBlockId(o.kq.LANDSCAPE,this.gameBlockIds.landscape);this.tryInitAdvBlockId(o.kq.LANDSCAPE_ADDITIONAL,this.gameBlockIds.landscape_additional),e||(this.onClose({onlyLandscape:!0,error:"landscape block not initialized"}),this.handleAdvBlockIdError(o.kq.LANDSCAPE))}this.props.advGameCanBeLoaded&&this.loadAdvScript(),N.Z.onInternalMessage("header",(e=>{this.setState({isHeaderEnabled:"enabled"===e.data.action})}))}componentDidUpdate(e){const{advGameCanBeLoaded:t,stickyBannerLocation:{desktop:a,mobilePortrait:r,mobileLandscape:n}}=this.props;this.loadedScript?(e.advHidden&&!this.props.advHidden||!e.canShowPortraitAdv&&this.props.canShowPortraitAdv||!e.canShowLandscapeAdv&&this.props.canShowLandscapeAdv)&&(a&&this.showAdv(o.kq.DESKTOP),r&&this.showAdv(o.kq.PORTRAIT),n&&this.showAdv(o.kq.LANDSCAPE)):!e.advGameCanBeLoaded&&t&&this.loadAdvScript()}isAdditionalBlock(e){return[o.kq.DESKTOP_ADDITIONAL,o.kq.LANDSCAPE_ADDITIONAL].includes(e)}onAdLoadFailed(e){if(ir("onAdLoadFailed",e),this.isAdditionalBlock(e))this.setShowState(e,!1);else if(!1===(0,Je.RM)(this.context.abt.flags,ct.Z.advHideEmptySticky))this.updateRefreshTimer(e);else{const t=e===o.kq.PORTRAIT,a=e===o.kq.LANDSCAPE;this.onClose({onlyLandscape:a,onlyPortrait:t})}}destroyAdv(e){var t,a;ir("Ya.Context.AdvManager.destroy",e),null==(a=null==(t=window.Ya)?void 0:t.Context)||a.AdvManager.destroy({blockId:e})}logAdvRequest(e,t){var a;this.clickDaemon=new ae.U({app_id:this.props.appId,tag:o.$H.STICKY});const r=this.hasBeenShownAtLeastOnce?re.p_.REFRESH:re.p_.ONSPOT;this.clickDaemon.tryOpen({provider:b.e.Yandex,reason:r});const n=this.clickDaemon.copy();t.clickDaemon=n,null==(a=t.setRequestClickDaemon)||a.call(t,n),n.demand({advBlockId:this.blockIds[e],reason:r,provider:b.e.Yandex,depth:0}),n.request()}onScriptError({onlyLandscape:e,onlyPortrait:t}){ir("window.Ya.Context.AdvManager.render is not defined"),this.onClose({onlyPortrait:t,onlyLandscape:e})}showAdv(e){return t=this,a=function*(){var t,a,r;if(this.props.advHidden)return void this.props.onAdvShowed();yield this.scriptLoadPromiseWrapper.promise;const{isDesktopAdvLoaded:n,isPortraitAdvLoaded:s,isLandscapeAdvLoaded:i}=this.loadedFlags,{canShowDesktopAdv:d,canShowPortraitAdv:c,canShowLandscapeAdv:u}=this.props;if(!(null==(r=null==(a=null==(t=window.Ya)?void 0:t.Context)?void 0:a.AdvManager)?void 0:r.render))return this.onScriptError({onlyLandscape:e===o.kq.LANDSCAPE,onlyPortrait:e===o.kq.PORTRAIT}),void this.props.onAdvShowed();let h;switch(e){case o.kq.DESKTOP:d&&!n&&(h=this.desktopAdvOptions);break;case o.kq.DESKTOP_ADDITIONAL:h=this.desktopAdditionalAdvOptions;break;case o.kq.PORTRAIT:c&&!s&&l.default.isPortrait&&(h=this.portraitAdvOptions);break;case o.kq.LANDSCAPE:u&&!i&&l.default.isLandscape&&(h=this.landscapeAdvOptions);break;case o.kq.LANDSCAPE_ADDITIONAL:h=this.landscapeAdditionalAdvOptions}h&&(this.logAdvRequest(e,h),ir(`Ya.Context.AdvManager.render ${e}`,h),(0,Va.Q$)({abtFlags:this.context.abt.flags,adOptions:h,methodName:Va.xn.RENDER,onAdLoadFailed:()=>{var t;null==(t=null==h?void 0:h.clickDaemon)||t.responseEmpty(),this.onAdLoadFailed(e)}})),this.props.onAdvShowed()},new Promise(((e,r)=>{var n=e=>{try{o(a.next(e))}catch(e){r(e)}},s=e=>{try{o(a.throw(e))}catch(e){r(e)}},o=t=>t.done?e(t.value):Promise.resolve(t.value).then(n,s);o((a=a.apply(t,null)).next())}));var t,a}loadAdvScript(){window.yaContextCb?this.onAdvScriptLoaded():(0,Ya.x)({id:"yandexads-context",src:this.context.yaAdsScript}).then((()=>{this.onAdvScriptLoaded()})).catch((()=>{this.onAdvScriptError()}))}onAdvScriptLoaded(){var e,t,a;this.loadedScript=!0,this.scriptLoadPromiseWrapper.resolve(void 0),(null==(a=null==(t=null==(e=window.Ya)?void 0:e.Context)?void 0:t.AdvManager)?void 0:a.render)?this.initAdvStickyBlocks():(this.rejectTimeoutId=window.setTimeout((()=>{(0,ne.H)({block:se.W.ADV_STICKY,message:"AdvStickyBanner error [yandex]: script failed to load"}),window.clearInterval(this.checkReadyIntervalId),this.onClose({error:"script failed to load"})}),this.timeToLoadAdv),this.checkReadyIntervalId=window.setInterval((()=>{var e,t,a;(null==(a=null==(t=null==(e=window.Ya)?void 0:e.Context)?void 0:t.AdvManager)?void 0:a.render)&&(window.clearInterval(this.checkReadyIntervalId),window.clearTimeout(this.rejectTimeoutId),this.initAdvStickyBlocks())}),200))}setShowState(e,t){switch(e){case o.kq.DESKTOP_ADDITIONAL:this.setState({showDesktopAdditional:t});break;case o.kq.LANDSCAPE_ADDITIONAL:this.setState({showLandscapeAdditional:t})}}getAdvOptions(e,t){const a=e===o.kq.LANDSCAPE,r=e===o.kq.PORTRAIT,n=this.isAdditionalBlock(e),s=n?2:1,i=this,l=(0,Ka.V)(Xa.Je,this.context.location);let d=this.clickDaemon;var c,u;return{async:!0,blockId:t,clickDaemon:this.clickDaemon,pageNumber:s,disableRefresh:!0,extParams:(c=sr({},l?{google_aid:l}:{}),u={utm_source_service:"games","distr-id":this.props.appId,"game-distrib-stat-id":(0,ee.Sn)()},Qa(c,er(u))),renderTo:`${this.containerIds[e]}`,statId:(0,ee.Sn)(),onError:function(o){ir(`onError code=${o.code}, text=${o.text}, type=${o.type}`);const l=(0,za.M)(o,{blockId:t,pageId:s});d.error(l),n?i.setShowState(e,!1):!1===(0,Je.RM)(i.context.abt.flags,ct.Z.advHideEmptySticky)?i.updateRefreshTimer(e):i.onClose({onlyPortrait:r,onlyLandscape:a,clickDaemon:d})},onRender:function(a){ir(`onRender ${t}`,a),d.response(),i.handleAdvRender(e,a.productType,d)},setRequestClickDaemon:e=>{d=e}}}handleAdvRender(e,t,a){this.hasBeenShownAtLeastOnce=!0;const r=()=>{a&&a.show()};switch(e){case o.kq.DESKTOP_ADDITIONAL:r();break;case o.kq.DESKTOP:{this.loadedFlags.isDesktopAdvLoaded=!0,r();let e=!1;E.U_.includes(t)||this.state.showDesktopAdditional||(this.additionalBlockTimeoutId=window.setTimeout((()=>this.showAdv(o.kq.DESKTOP_ADDITIONAL)),E.fE),e=!0),this.setState({showDesktopAdditional:e,showSpinner:!1});break}case o.kq.PORTRAIT:this.setState({showSpinner:!1,isPortraitMediaAdType:"direct"!==t}),this.loadedFlags.isPortraitAdvLoaded=!0,r();break;case o.kq.LANDSCAPE:let e=!1;const n="direct"!==t;!this.additionalLandscapeBlockEnabled||this.state.showLandscapeAdditional||E.iv.includes(t)||(this.additionalBlockTimeoutId=window.setTimeout((()=>this.showAdv(o.kq.LANDSCAPE_ADDITIONAL)),E.fE),e=!0),this.setState({showSpinner:!1,showLandscapeAdditional:e,isLandscapeMediaAdType:n}),this.loadedFlags.isLandscapeAdvLoaded=!0,a&&a.show();break;case o.kq.LANDSCAPE_ADDITIONAL:"direct"!==t&&this.setState({isAdditionalLandscapeMediaAdType:!0}),a&&a.show()}this.updateRefreshTimer(e)}onAdvScriptError(){this.scriptLoadPromiseWrapper.reject(void 0),(0,ne.H)({block:se.W.ADV_STICKY,message:"AdvStickyBanner error [yandex]: script failed to load"}),this.onClose({error:"script failed to load"}),this.props.onAdvShowed()}onClose(e){const t=null==e?void 0:e.clickDaemon;t&&!t.hadEvent(re.zL.REQUEST)&&t.error("Sticky banner close without any requests."),this.props.onClose(e),t?t.close():this.clickDaemon.close()}renderBanner(e,t,a,r){const{canShowPortraitAdv:s,canShowLandscapeAdv:i}=this.props,{isPortraitMediaAdType:l,isLandscapeMediaAdType:d,isAdditionalLandscapeMediaAdType:c,showDesktopAdditional:u,showLandscapeAdditional:h,showSpinner:p}=this.state,m=(0,E.oi)(a,r),v=e===o.kq.LANDSCAPE||e===o.kq.LANDSCAPE_ADDITIONAL,g=e===o.kq.PORTRAIT,y=l&&g||d&&e===o.kq.LANDSCAPE||c&&e===o.kq.LANDSCAPE_ADDITIONAL,f=!u&&e===o.kq.DESKTOP_ADDITIONAL||!h&&e===o.kq.LANDSCAPE_ADDITIONAL||this.props.advHidden||g&&!s||v&&!i;return n().createElement("div",{className:or({media:Boolean(y),[e]:t,border_round:Boolean(y),hidden:f,"white-bg":this.useWhiteBackgroundOnDesktop,"middle-layer-light":this.props.isMiddleLayerShownInGame&&!this.props.darkTheme}),id:this.containerIds[e],key:e,style:m},!v&&n().createElement(w.y,{className:or("spinner",{hidden:!p}),key:`${e}-spinner`,position:"center",size:28,spinning:!0,view:"default"}))}render(){var e;const{advHidden:t,canShowDesktopAdv:a,hideAdvCloseButton:r,desktopAdvWidth:s,isLandscapeSide:i,mobileAdvPortraitHeight:l,stickyBannerLocation:{desktop:d,mobileLandscape:u,mobilePortrait:h}}=this.props,{isHeaderEnabled:p}=this.state;if(d){const i={width:s,marginTop:p&&!r?-this.headerHeight:0,paddingTop:r?0:this.headerHeight},l={width:s,marginTop:p?-this.headerHeight:0};return n().createElement(n().Fragment,null,n().createElement("div",{className:or("desktop-wrapper",{hidden:t||!a,"with-disable-ad-button":!0,"middle-layer-light":this.props.isMiddleLayerShownInGame&&!this.props.darkTheme}),style:i},!r&&(null==(e=this.props.wrapperRef)?void 0:e.current)&&(0,c.createPortal)(n().createElement("div",{className:or("desktop-disable-ad-button-wrapper"),style:l},n().createElement(_,null)),this.props.wrapperRef.current),this.renderBanner(o.kq.DESKTOP,d,{}),this.renderBanner(o.kq.DESKTOP_ADDITIONAL,d,{})))}return n().createElement(n().Fragment,null,h&&this.renderBanner(o.kq.PORTRAIT,h,{height:l,maxHeight:l}),u&&n().createElement("div",{className:or("landscape-wrapper",{[u]:!0}),style:sr({},this.landscapeWrapperStyles)},this.renderBanner(o.kq.LANDSCAPE,u,this.landscapeBlockStyles),!i&&this.renderBanner(o.kq.LANDSCAPE_ADDITIONAL,u,this.landscapeBlockStyles)))}}const dr=(0,u.$j)((function(e){var t;return{advGameCanBeLoaded:e.advGameCanBeLoaded,darkTheme:(0,R.Up)(e),isMiddleLayerShownInGame:null==(t=e.middleLayerInGameData)?void 0:t.show}}))(lr);var cr=a(46211),ur=a(21466),hr=a(50042),pr=a(35090),mr=a(39732),vr=a(72538),gr=a(8393),yr=Object.defineProperty,fr=Object.defineProperties,wr=Object.getOwnPropertyDescriptors,br=Object.getOwnPropertySymbols,Er=Object.prototype.hasOwnProperty,kr=Object.prototype.propertyIsEnumerable,Sr=(e,t,a)=>t in e?yr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Ar=(e,t)=>{for(var a in t||(t={}))Er.call(t,a)&&Sr(e,a,t[a]);if(br)for(var a of br(t))kr.call(t,a)&&Sr(e,a,t[a]);return e},Ir=(e,t,a)=>new Promise(((r,n)=>{var s=e=>{try{i(a.next(e))}catch(e){n(e)}},o=e=>{try{i(a.throw(e))}catch(e){n(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(s,o);i((a=a.apply(e,t)).next())}));const Pr=(0,y.M$)("AdvStickyBannerManager",y.XG.Adv),Tr="adv-sticky-banner";class Cr extends J.P{constructor(e,t){super(e,t),this.desktopAdvWidth=E.q5,this.mobileAdvPortraitHeight=E.qi,this.mobileAdvLandscapeHeight=E.qi,this.mobileAdvSideLandscapeWidth=E.HZ,this.intervalBetweenRefreshAd=ca.yR,this.isAdvStickyBannerEnabled=!1,this.minScreenWidthForDesktopAdv=E.ie,this.isAdvStickyEnabledOnStartByExp=!1,this.forcedToHideRelatedAdv=!0===(0,Je.RM)(this.context.abt.flags,ct.Z.advStickyBannerForcedHideAd),this.adClosed=!1,this.useHighPortraitBlockIds=!1,this.isLandscapeSide=!1,this.stickyBannerLocation={desktop:null,mobileLandscape:null,mobilePortrait:null},this.services=[],this.isGoogleExp=(0,Kt.O_)(this.context.abt.flags),this.isYandexExp=(0,Kt.MH)(this.context.abt.flags),this.onStickyBannerMessage=e=>Ir(this,null,(function*(){const{action:t,data:a}=e.data;"blur"===(null==a?void 0:a.reason)&&this.setState({isPageBlured:"hide"===t})})),this.onExternalMessage=(e,t)=>Ir(this,null,(function*(){const{action:a}=e.data;switch(a){case"adv-show-sticky-banner":{if(Pr(`onExternalMessage: action: "${a}"`),this.adClosed=!1,!this.isAdvStickyBannerEnabled)return void t({data:{stickyAdvIsShowing:!1,reason:o.$R.ADV_IS_NOT_CONNECTED}});if(!this.canShowAdv())return void t({data:{stickyAdvIsShowing:!1,reason:o.$R.UNKNOWN}});this.initAdv();const e=this.state.canShowAdvStickyBanner?{}:{reason:o.$R.UNKNOWN};t({data:Ar({stickyAdvIsShowing:this.state.canShowAdvStickyBanner},e)});break}case"adv-hide-sticky-banner":Pr(`onExternalMessage: action: "${a}"`),this.adClosed=!0,this.hideAdv(),t({data:{stickyAdvIsShowing:!1}});break;case"adv-status-sticky-banner":{if(!this.isAdvStickyBannerEnabled)return void t({data:{stickyAdvIsShowing:!1,reason:o.$R.ADV_IS_NOT_CONNECTED}});const e=this.state.canShowAdvStickyBanner&&!this.state.advStickyBannerHidden;Pr(`onExternalMessage: action: "${a}", stickyAdvIsShowing: ${e}`),t({data:{stickyAdvIsShowing:e}});break}}})),this.handleVisibilityChange=()=>{"hidden"===(null==document?void 0:document.visibilityState)?this.setHideState(!0):this.initAdv()},this.handleFullscreenChange=()=>{this.props.isFullscreenActive?this.hideAdv():this.initAdv()},this.handleDesktopResize=()=>{(0,dt.bY)().innerWidth<=this.minScreenWidthForDesktopAdv?this.hideAdv():this.initAdv()},this.handleMobileResize=()=>{Pr("handleMobileResize",window.innerWidth,window.innerHeight,E.rv),this.state.advStickyBannerHidden||!(0,E.JY)({forcedToHideRelatedAdv:this.forcedToHideRelatedAdv,minLandscapeHeight:this.minHeightToHideLandscapeAdv,minLandscapeWidth:this.isLandscapeSide?E.rv:void 0,minPortraitHeight:this.minHeightToHidePortraitAdv})?this.state.advStickyBannerHidden&&this.initAdv():this.hideAdv()},this.hideAdv=()=>{this.removeDefaultClasses(),Pr("hideAdv"),this.setState({advStickyBannerHidden:!0,isGameFrameCanBeResizedInDesktop:!1,isGameFrameCanBeResizedInLandscape:!1,isGameFrameCanBeResizedInPortrait:!1}),vr.Z.removeResizeBlock(Tr),this.removeBodyStickyResize()},this.handleCloseAdv=e=>{this.removeDefaultClasses(),N.Z.post({type:"sticky-manager",action:"on-hide"}),(null==e?void 0:e.onlyPortrait)&&(this.setState({isGameFrameCanBeResizedInPortrait:!1}),l.default.isPortrait&&(vr.Z.removeResizeBlock(Tr),this.removeBodyStickyResize())),(null==e?void 0:e.onlyLandscape)&&(this.setState({isGameFrameCanBeResizedInLandscape:!1}),l.default.isLandscape&&(vr.Z.removeResizeBlock(Tr),this.removeBodyStickyResize())),this.state.isGameFrameCanBeResizedInLandscape&&(null==e?void 0:e.onlyPortrait)||this.state.isGameFrameCanBeResizedInPortrait&&(null==e?void 0:e.onlyLandscape)||((0,c.flushSync)((()=>this.setState({canShowAdvStickyBanner:!1,isGameFrameCanBeResizedInDesktop:!1,isGameFrameCanBeResizedInPortrait:!1,isGameFrameCanBeResizedInLandscape:!1}))),vr.Z.removeResizeBlock(Tr),this.removeBodyStickyResize(),this.adClosed=!0)};const{gameSettings:{features:a,settings:r},gameInfo:{appId:n},request:{flags:s}}=this.context.playPageData;this.headerSelector="minified"===e.headerType?".play-game-minified-header":".play-game-header",this.middleLayerInGameSelector=`.${Ca.P}`;const{adv:i,stickyAdvDisabledOnStart:d}=(0,E.Lf)(r);this.isAdvStickyEnabledOnStartByExp=(0,E.KV)({isDesktop:!0,flags:s}),this.isAdvStickyBannerEnabled=!this.isParentWindow&&(this.isAdvStickyEnabledOnStartByExp||(0,E.uk)({adv:i,appId:n,isDesktop:!0,flags:s,orientation:null==a?void 0:a.orientation}));const u=(0,Je.$9)(s,ct.Z.advStickyMinDesktopWidth);if(u&&(this.minScreenWidthForDesktopAdv=u),!i)return void(this.isAdvStickyBannerEnabled=!1);const h=(0,E.jx)({adv:i,flags:s,appId:n,orientation:null==a?void 0:a.orientation});this.state={advStickyBannerHidden:!this.canShowAdv(),canShowAdvStickyBanner:!1,isGameFrameCanBeResizedInDesktop:Boolean(h.desktop),isGameFrameCanBeResizedInLandscape:Boolean(h.mobileLandscape),isGameFrameCanBeResizedInPortrait:Boolean(h.mobilePortrait),isPageBlured:this.context.isAdvSplashScreenEnabled};{const e=this.isAdvStickyEnabledOnStartByExp?k.rq.RIGHT:h.desktop;this.stickyBannerLocation={desktop:e,mobilePortrait:null,mobileLandscape:null}}this.adClosed=d&&!this.isAdvStickyEnabledOnStartByExp}addBodyStickyReady(){document.body.classList.add(gr.S.ready)}addBodyStickyIsGoogle(){document.body.classList.add(gr.S.isGoogle)}addBodyStickyResize(){document.body.classList.add(gr.S.resize)}removeBodyStickyResize(){document.body.classList.remove(gr.S.resize)}isGoogleBottomStickySizesInWindowViewport(e){if(!e)return!1;const{innerWidth:t,innerHeight:a}=(0,dt.bY)();return(0,Ye.TG)({canReturnEmptyArray:!0,maxAdvHeight:a,maxAdvWidth:t,sizes:e.reduce(((e,t)=>[...t.sizes,...e]),[])}).length>0}canShowAdv(){var e,t;const{abt:a,playPageData:r}=this.context,{settings:n}=r.gameSettings,{adv:i}=(0,E.Lf)(n);if(!i)return!1;if((0,pr._G)())return!0;if((0,Je.Ww)(a.flags,o.By.STICKY))return!1;if(Pr(`services = ${this.services}`),0===this.services.length)return!1;const l=this.isDisabledBySubscription();if(Pr([`\nisAdDisabledBySubsciption = ${l}`,`\nadvDisabledByPartner = ${!this.props.advEnabledByPartner}`,`settings.adv = ${JSON.stringify(null==n?void 0:n.adv,null,2)}`].join("\n")),l||!this.props.advEnabledByPartner)return this.removeDefaultClasses(),!1;const d=s.parse(this.props.location.search.slice(1)),c=(0,mr.E)((0,Ka.V)("utm_medium")),u=(0,Ka.V)("clid")||(null==(e=window.YandexGamesSDK)?void 0:e.clid),h=(0,ur.k4)(c,u);return Pr(`isAdDisabledByUtm = ${h},\n\n            params.clid = ${d.clid},\n\n            window.YandexGamesSDK.clid = ${null==(t=window.YandexGamesSDK)?void 0:t.clid},\n\n            clid = ${u},\n\n            utmMedium = ${c}\n        `),!(h||(this.props.isFullscreenActive?(Pr("Desktop on fullscreen mode"),(0,ne.H)({block:se.W.ADV_STICKY,message:"AdvStickyBanner error: Desktop window on fullscreen mode",level:"info"}),1):(0,dt.bY)().innerWidth<=this.minScreenWidthForDesktopAdv?(Pr("Desktop width too narrow"),(0,ne.H)({block:se.W.ADV_STICKY,message:"AdvStickyBanner error: Desktop width too narrow",level:"info"}),1):this.adClosed))}componentDidMount(){var e,t,a,r,n;const{allAdvBlocks:s,playPageData:o,abt:{flags:i},isGamesApp:d,isGamesLiteApp:c,isIOSGamesLiteApp:u,withWorldWideAdv:h}=this.context,{gameSettings:{settings:p}}=o,{adv:m,stickyAdvDisabledOnStart:v}=(0,E.Lf)(p);if(!m||!this.isAdvStickyBannerEnabled)return void this.removeDefaultClasses();(null==(a=null==(t=null==(e=window.appData)?void 0:e.advDataStore)?void 0:t.stickyAdv)?void 0:a.refreshInterval)&&(this.intervalBetweenRefreshAd=window.appData.advDataStore.stickyAdv.refreshInterval);{const{innerWidth:e,innerHeight:t,zoom:a}=(0,dt.bY)();(0,E.Ne)("canShow",{height:t,minScreenWidthForDesktopAdv:this.minScreenWidthForDesktopAdv,width:e,zoom:a})}this.services=(0,E.g)({advBlocks:s,flags:i,isGamesApp:d,isGamesLiteApp:c,isIOSGamesLiteApp:u,withWorldWideAdv:h}),this.isPublift=this.services.includes(b.e.PubliftZone),this.isAdsense=this.services.includes(b.e.Adsense),this.isGoogle=this.services.includes(b.e.Google),this.isNative=this.services.includes(b.e.Native),this.isParentWindow=this.services.includes(b.e.ParentWindow),this.isYandex=this.services.includes(b.e.Yandex),this.isNative&&!(0,hr.zg)(E.XK)||this.initParamsByViewport(),this.initExperimentParams(),this.validateAdvSize();const{desktop:g,mobilePortrait:y,mobileLandscape:f}=this.stickyBannerLocation;if(document.body.classList.add("sticky-inited"),g){if(this.addBodyStickyReady(),!(null==(n=null==(r=m.sticky)?void 0:r.desktop)?void 0:n.right)&&!this.isAdvStickyEnabledOnStartByExp)return;return v&&!this.isAdvStickyEnabledOnStartByExp||this.initAdv(),this.initMessaging(),window.addEventListener("resize",this.handleDesktopResize),void(c||document.addEventListener("visibilitychange",this.handleVisibilityChange))}(y||f)&&(this.isLandscapeSide=f===k.Xn.LEFT||f===k.Xn.RIGHT,v||this.initAdv(),!this.isNative&&(this.minHeightToHidePortraitAdv||this.minHeightToHideLandscapeAdv||this.mobileAdvSideLandscapeWidth)&&window.addEventListener("resize",this.handleMobileResize),l.default.addChangeListener((()=>{(this.minHeightToHidePortraitAdv||this.minHeightToHideLandscapeAdv||this.isNative)&&this.handleMobileResize(),this.isNative||this.state.advStickyBannerHidden||!this.state.canShowAdvStickyBanner||this.resizeMobileGameBlock()})),this.initMessaging(),c||document.addEventListener("visibilitychange",this.handleVisibilityChange)),this.addBodyStickyReady()}componentDidUpdate(e,t){e.isFullscreenActive!==this.props.isFullscreenActive&&this.handleFullscreenChange(),t.advStickyBannerHidden!==this.state.advStickyBannerHidden&&N.Z.post({type:"sticky-manager",action:this.state.advStickyBannerHidden?"on-hide":"on-show"}),this.props.advEnabledByPartner&&!e.advEnabledByPartner&&this.initAdv(),e.isAdDisabledBySubscription!==this.props.isAdDisabledBySubscription&&this.isDisabledBySubscription()&&this.state.canShowAdvStickyBanner&&this.handleCloseAdv()}get isFullscreenEnabled(){return Boolean(this.props.isFullscreenEnabled||d.w.available||(null==document?void 0:document[qa.Z.fullscreenEnabled]))}addDesktopResize(){const e=-this.desktopAdvWidth,t={width:e};vr.Z.addResizeBlock(Tr,{game:t,[`.${Ua.Ek}`]:{width:e-Ua.UG},[this.headerSelector]:t,[this.middleLayerInGameSelector]:t}),this.addBodyStickyResize()}initContainerToDisplayAdv(){if(this.isNative)return;if(this.isParentWindow)return;const{desktop:e}=this.stickyBannerLocation;if(e)return this.addDesktopResize(),void this.removeDefaultClasses();this.resizeMobileGameBlock()}initMessaging(){N.Z.onAllMessages("adv-manager",this.onExternalMessage),((0,Je.bF)(this.context.abt.flags)||this.context.isAdvSplashScreenEnabled)&&N.Z.onInternalMessage("sticky-banner",this.onStickyBannerMessage)}initParamsByViewport(){const{flags:e}=this.context.abt,{innerWidth:t,innerHeight:a}=(0,dt.bY)();this.isGoogle||this.isPublift?(this.desktopAdvWidth=E.q5,this.addBodyStickyIsGoogle()):(this.desktopAdvWidth=t*E.PV/100,this.isAdsense&&(this.desktopAdvWidth=Math.max(this.desktopAdvWidth,ze.K)))}initExperimentParams(){const{flags:e}=this.context.abt,t=(0,Je.$9)(e,ct.Z.advStickyBannerDesktopWidth),a=(0,Je.$9)(e,ct.Z.advStickyBannerPortraitHeight),r=(0,Je.$9)(e,ct.Z.advStickyBannerLandscapeHeight),n=(0,Je.$9)(e,ct.Z.advStickyBannerLandscapeWidth),s=(0,Je.$9)(e,ct.Z.advStickyBannerMinPortraitViewportHeight),o=(0,Je.$9)(e,ct.Z.advStickyBannerMinLandscapeViewportHeight);t&&(this.desktopAdvWidth=t),a&&(this.mobileAdvPortraitHeight=a),r&&(this.mobileAdvLandscapeHeight=r),s&&(this.minHeightToHidePortraitAdv=s),o&&(this.minHeightToHideLandscapeAdv=o),n&&(this.mobileAdvSideLandscapeWidth=n)}validateAdvSize(){if(this.isParentWindow)return this.desktopAdvWidth=0,this.mobileAdvPortraitHeight=0,void(this.mobileAdvLandscapeHeight=0);this.desktopAdvWidth=Math.floor(Math.min(Math.max(this.desktopAdvWidth,E.Ic),E.q5)),E.RH<this.mobileAdvPortraitHeight&&(this.mobileAdvPortraitHeight=E.qi),E.VT<this.mobileAdvLandscapeHeight&&(this.mobileAdvLandscapeHeight=E.qi)}resizeMobileGameBlock(){const{mobilePortrait:e,mobileLandscape:t}=this.stickyBannerLocation,{isGameFrameCanBeResizedInPortrait:a,isGameFrameCanBeResizedInLandscape:r}=this.state;if(!a&&l.default.isPortrait||!r&&l.default.isLandscape)return vr.Z.removeResizeBlock(Tr),this.removeBodyStickyResize(),void this.removeDefaultClasses();const n=this.isLandscapeSide?this.mobileAdvSideLandscapeWidth:this.mobileAdvLandscapeHeight,s=l.default.isPortrait?this.mobileAdvPortraitHeight:n;if(this.isLandscapeSide&&l.default.isLandscape){const e=t===k.Xn.LEFT?-s-E.gG:-s-2*E.gG;return vr.Z.addResizeBlock(Tr,{game:Ar({width:e},t===k.Xn.LEFT?{left:s+E.gG}:{})}),this.removeDefaultClasses(),void this.addBodyStickyResize()}if(e===k.Xn.UPPER&&l.default.isPortrait||t===k.Xn.UPPER&&l.default.isLandscape){const e={top:s+E.gG,height:-s-E.gG};vr.Z.addResizeBlock(Tr,Ar({game:e},l.default.isLandscape&&{[this.headerSelector]:e})),this.removeDefaultClasses(),this.addBodyStickyResize()}if(e===k.Xn.BOTTOM&&l.default.isPortrait||t===k.Xn.BOTTOM&&l.default.isLandscape){const e={height:-s-2*E.gG};vr.Z.addResizeBlock(Tr,{game:e,[this.headerSelector]:e}),this.removeDefaultClasses(),this.addBodyStickyResize()}}isDisabledBySubscription(){return!!Boolean(this.props.userData.login)&&this.props.isAdDisabledBySubscription}initAdv(){const e=this.canShowAdv();if(Pr("initAdv"),e&&!this.adClosed){const{desktop:e,mobileLandscape:t,mobilePortrait:a}=this.stickyBannerLocation;this.setState({advStickyBannerHidden:!1,canShowAdvStickyBanner:!0,isGameFrameCanBeResizedInDesktop:Boolean(e),isGameFrameCanBeResizedInPortrait:Boolean(a),isGameFrameCanBeResizedInLandscape:Boolean(t)},(()=>{this.initContainerToDisplayAdv()}))}}setHideState(e){this.setState({advStickyBannerHidden:e})}removeDefaultClasses(){var e;"function"==typeof(null==(e=vr.Z)?void 0:e.removeDefaultClass)&&vr.Z.removeDefaultClass(["sticky-desktop","sticky-mobile"])}renderBanner(){if(!this.isAdvStickyBannerEnabled)return null;if(!this.state.canShowAdvStickyBanner)return null;if(this.isParentWindow)return null;if(!this.props.advEnabledByPartner)return null;const{appId:e}=this.context.playPageData.gameInfo,{advStickyBannerHidden:t,isGameFrameCanBeResizedInDesktop:a,isGameFrameCanBeResizedInLandscape:r,isGameFrameCanBeResizedInPortrait:s,isPageBlured:o}=this.state,i={advHidden:o||t,appId:e,intervalBetweenRefreshAd:this.intervalBetweenRefreshAd,isPageBlured:o,isLandscapeSide:this.isLandscapeSide,mobileAdvLandscapeHeight:this.mobileAdvLandscapeHeight,mobileAdvPortraitHeight:this.mobileAdvPortraitHeight,mobileAdvSideLandscapeWidth:this.mobileAdvSideLandscapeWidth,stickyBannerLocation:this.stickyBannerLocation,useHighPortraitBlockIds:this.useHighPortraitBlockIds,onAdvShowed:this.removeDefaultClasses,onClose:this.handleCloseAdv};if(this.isNative)return n().createElement(ja,Ar({},i));const l={canShowDesktopAdv:a,canShowLandscapeAdv:r,canShowPortraitAdv:s,desktopAdvWidth:this.desktopAdvWidth,hideAdvCloseButton:this.props.hideAdvCloseButton,wrapperRef:this.props.wrapperRef};return this.isPublift?n().createElement(Ge,Ar(Ar({},i),l)):this.isAdsense?n().createElement(pe,Ar(Ar({},i),l)):this.isGoogle?this.isGoogleExp?n().createElement(zt,Ar(Ar({},i),l)):n().createElement(Ta,(d=Ar(Ar({},i),l),fr(d,wr({isPageBlured:o})))):this.isYandex?this.isYandexExp?n().createElement(zt,Ar(Ar({},i),l)):n().createElement(dr,Ar(Ar({},i),l)):null;var d}render(){return n().createElement("div",{className:"sticky-banner-container"},this.renderBanner())}}const Rr=(0,i.E)((0,u.$j)((function(e){return{advEnabledByPartner:e.advEnabledByPartner,isAdDisabledBySubscription:(0,cr.Ak)(e),isFullscreenActive:e.ui.isFullscreenActive,isFullscreenEnabled:e.ui.isFullscreenEnabled,userData:e.userData}}))(Cr));var Dr=a(53603),Lr=a(75217);const Or=n().memo((({hideAdvCloseButton:e,headerType:t,wrapperRef:a})=>{const s=(0,r.useContext)(J.Z),{isReady:o}=(0,Dr.s)(),{abt:{flags:i}}=s;return(0,Je.V)(i)&&!o||(0,Lr.O)()?null:n().createElement(Rr,{headerType:t,hideAdvCloseButton:e,wrapperRef:a})}))},13547:(e,t,a)=>{a.d(t,{Z:()=>m});var r=a(87363),n=a(53726),s=a(88757),o=a(93298),i=Object.defineProperty,l=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,u=(e,t,a)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,h=(e,t)=>{for(var a in t||(t={}))d.call(t,a)&&u(e,a,t[a]);if(l)for(var a of l(t))c.call(t,a)&&u(e,a,t[a]);return e};const p=(0,o.M$)("Waterfall",o.XG.Adv,{background:"#1d9f16"}),m=(0,r.memo)((0,r.forwardRef)(((e,t)=>{var a=e,{onProviderLoaded:o,onWaterfallFailed:i,onWaterfallNext:u,onClick:m,onClose:v,onError:g=({error:e,waterfallItem:t})=>{p(`Renderer ${null==t?void 0:t.provider} error:`,e)},onRequest:y,onResponse:f,onShow:w,onSkip:b,children:E,providerTimeout:k,waterfallList:S,alwaysRender:A}=a,I=((e,t)=>{var a={};for(var r in e)d.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&l)for(var r of l(e))t.indexOf(r)<0&&c.call(e,r)&&(a[r]=e[r]);return a})(a,["onProviderLoaded","onWaterfallFailed","onWaterfallNext","onClick","onClose","onError","onRequest","onResponse","onShow","onSkip","children","providerTimeout","waterfallList","alwaysRender"]);const P=(0,r.useRef)(null),[T,C]=(0,r.useState)(null),R=(0,r.useRef)({onClickRef:()=>{},onCloseRef:()=>{},onRequestRef:()=>{},onResponseRef:()=>{},onShowRef:()=>{},onErrorRef:()=>{},onFailedRef:()=>{},onSkipRef:()=>{},onWaterfallFailed:()=>{},onWaterfallNext:()=>{}}),[D,L]=(0,r.useState)(I);(0,r.useEffect)((()=>{(0,n.wU)(D,I)||L(I)}),[I,D]),(0,r.useEffect)((()=>{R.current.onWaterfallNext=u,R.current.onWaterfallFailed=i}),[u,i]);const O=(0,r.useCallback)((()=>{var e,t;const a=null!=T?T:null,r=T?S.indexOf(T)+1:0,n=S[r];if(void 0===n)return p.spoiler(S)("No items left:",n),void R.current.onWaterfallFailed(new Error("No waterfall items left"),D);C(n),p.spoiler(S)("Next:",n),null==(t=(e=R.current).onWaterfallNext)||t.call(e,n,a,D)}),[T,S,D]);(0,r.useMemo)((()=>{R.current.onFailedRef=O,R.current.onSkipRef=O}),[O]),(0,r.useEffect)((()=>{0!==S.length&&C(null)}),[S]),(0,r.useEffect)((()=>{0===S.length||T||O()}),[O,S,T]);const _=(0,r.useCallback)((e=>{p(`Provider ${null==T?void 0:T.provider} failed:`,e),T&&(null==g||g({error:e,waterfallItem:T,provider:null,slot:null},D)),O()}),[g,O,T,D]);(0,r.useImperativeHandle)(t,(()=>({rendererRef:P.current})),[]);const x=(0,s.Z)(null==T?void 0:T.provider,_,k);(0,r.useMemo)((()=>{if(!T||!x)return;const e=e=>e?(t,a)=>{e(h({waterfallItem:T,provider:x},t),h(h({},D),a))}:()=>{};R.current.onClickRef=e(m),R.current.onCloseRef=e(v),R.current.onRequestRef=e(y),R.current.onResponseRef=e(f),R.current.onShowRef=e(w),R.current.onErrorRef=e(g),R.current.onSkipRef=e(b)}),[m,v,g,y,f,w,b,x,D,T]);const{onRendererClick:N,onRendererClose:B,onRendererResponse:M,onRendererRequest:H,onRendererShow:F,onRendererError:$,onRendererFailed:W,onRendererSkip:Z}=(0,r.useMemo)((()=>({onRendererClick:(...e)=>{var t,a;null==(a=(t=R.current).onClickRef)||a.call(t,...e)},onRendererClose:(...e)=>{var t,a;return null==(a=(t=R.current).onCloseRef)?void 0:a.call(t,...e)},onRendererResponse:(...e)=>{var t,a;return null==(a=(t=R.current).onResponseRef)?void 0:a.call(t,...e)},onRendererRequest:(...e)=>{var t,a;return null==(a=(t=R.current).onRequestRef)?void 0:a.call(t,...e)},onRendererShow:(...e)=>{var t,a;return null==(a=(t=R.current).onShowRef)?void 0:a.call(t,...e)},onRendererError:(...e)=>{var t,a;return null==(a=(t=R.current).onErrorRef)?void 0:a.call(t,...e)},onRendererFailed:(...e)=>{var t,a;return null==(a=(t=R.current).onFailedRef)?void 0:a.call(t,...e)},onRendererSkip:(...e)=>{var t,a;return null==(a=(t=R.current).onSkipRef)?void 0:a.call(t,...e)}})),[]);return(0,r.useEffect)((()=>{T&&x&&(null==o||o(T,x))}),[x,T,o]),T&&x||A?(0,r.cloneElement)(r.Children.only(E),{provider:x,ref:P,waterfallItem:T,onClick:N,onClose:B,onError:$,onFailed:W,onRequest:H,onResponse:M,onShow:F,onSkip:Z}):null})))},26667:(e,t,a)=>{a.d(t,{Ah:()=>s,HF:()=>i,WF:()=>o,_y:()=>n,jY:()=>l});var r=a(93298);const n=(0,r.M$)("Adv v2",r.XG.Adv,{background:"#1d9f16"}),s=(0,r.M$)("AnchorAdsManager",r.XG.Adv,{background:"#1d9f16"}),o=()=>{const e="ca-pub-8160201538288120";return{desktop:{main:{clientId:e,slotId:"9747988077"},small:{clientId:e,slotId:"4495661399"}},landscape:{clientId:e,slotId:"9284953643"},landscape_additional:{clientId:e,slotId:"4224198654"},portrait:{clientId:e,slotId:"7313396424"},portrait_additional:{clientId:e,slotId:"4480082044"}}},i=-1,l=["media-creative","media-creative-reach","media-image","media-image-reach"]},52888:(e,t,a)=>{a.d(t,{l:()=>r});class r extends Error{constructor(){super("Slot is empty.")}}},88757:(e,t,a)=>{a.d(t,{Z:()=>Xe,l:()=>Ye});var r=a(87363);class n extends Error{constructor(e){super(`Provider ${e} load timeout.`)}}var s=a(88561),o=a(69110),i=a(35742),l=a(52924),d=Object.defineProperty,c=Object.defineProperties,u=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,v=(e,t,a)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,g=(e,t,a)=>new Promise(((r,n)=>{var s=e=>{try{i(a.next(e))}catch(e){n(e)}},o=e=>{try{i(a.throw(e))}catch(e){n(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(s,o);i((a=a.apply(e,t)).next())}));class y extends o.Z{constructor(){super(...arguments),this.providerName=i.oO.AdsenseBlock,this.providerLoaderName=i.Po.Adsense}init(){return g(this,null,(function*(){try{yield(0,l.Z)(s.Z).load(),this._loadPromise.resolve()}catch(e){this._loadPromise.reject(e)}}))}createSlot(e){return g(this,arguments,(function*({blockId:e}){return{type:"preroll",name:"adsense_block_"+e}}))}preloadSlot({slot:e}){return new Promise(((t,a)=>{var r;adBreak((r=((e,t)=>{for(var a in t||(t={}))p.call(t,a)&&v(e,a,t[a]);if(h)for(var a of h(t))m.call(t,a)&&v(e,a,t[a]);return e})({},e),c(r,u({adBreakDone({breakStatus:r}){switch(r){case"notReady":a(new Error("Adsense provider not ready to display adv."));break;case"frequencyCapped":a(new Error("Adsense ad wasn't shown because the frequency cap."));break;case"invalid":a(new Error("Adsense placement was invalid and ignored for subsequent shows."));break;case"viewed":t({isEmpty:!1,slot:e});break;default:t({isEmpty:!0,slot:e})}}}))))}))}showSlot(e){return Promise.resolve()}destroySlot(e){return Promise.resolve()}}const f=y;var w=a(51962),b=a(26108),E=(e,t,a)=>new Promise(((r,n)=>{var s=e=>{try{i(a.next(e))}catch(e){n(e)}},o=e=>{try{i(a.throw(e))}catch(e){n(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(s,o);i((a=a.apply(e,t)).next())}));class k extends o.Z{constructor(){super(...arguments),this.providerName=i.oO.AdsenseRewarded,this.providerLoaderName=i.Po.Adsense}init(){return E(this,null,(function*(){try{yield(0,l.Z)(s.Z).load(),this._loadPromise.resolve()}catch(e){this._loadPromise.reject(e)}}))}createSlot(e){return E(this,arguments,(function*({blockId:e}){return{name:e,type:"reward"}}))}preloadSlot(e){return E(this,arguments,(function*({slot:e}){const{type:t,name:a}=e;e.preloadPromise=new b.Z,e.showPromise=new b.Z;const r=new b.Z;return adBreak({type:t,name:a,beforeReward:t=>{var a;e.show=t,null==(a=e.preloadPromise)||a.resolve({isEmpty:!1,slot:e})},beforeAd:()=>{var t;null==(t=e.showPromise)||t.resolve({slot:e,waitForView:r.promise})},adDismissed:()=>{r.resolve({isDismissed:!0})},adViewed:()=>{r.resolve({isDismissed:!1})},adBreakDone:t=>{var a,r,n,s;const{breakStatus:o}=t;switch(o){case"notReady":null==(a=e.preloadPromise)||a.reject(new Error("Adsense provider not ready to display adv."));break;case"frequencyCapped":null==(r=e.preloadPromise)||r.reject(new Error("Adsense ad wasn't shown because the frequency cap."));break;case"invalid":null==(n=e.preloadPromise)||n.reject(new Error("Adsense placement was invalid and ignored for subsequent shows."));break;default:null==(s=e.preloadPromise)||s.reject(new Error(`Adsense error with break status "${o}"`))}}}),e.preloadPromise.promise}))}showSlot(e){return E(this,null,(function*(){if(!e.showPromise||!e.show)throw new Error(`No preloadSlot called for slot ${e.name}.`);return e.show(),e.showPromise.promise}))}destroySlot(e){return E(this,null,(function*(){return Promise.resolve()}))}}const S=k;var A=a(47265),I=a(79098),P=a(26807),T=a(45692),C=a(85623),R=(e,t,a)=>new Promise(((r,n)=>{var s=e=>{try{i(a.next(e))}catch(e){n(e)}},o=e=>{try{i(a.throw(e))}catch(e){n(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(s,o);i((a=a.apply(e,t)).next())}));class D extends o.Z{constructor(){super(...arguments),this.providerName=i.oO.AnymindManual,this.providerLoaderName=i.Po.Anymind,this.googleSlotEvents={slotRenderEnded:new WeakMap,impressionViewable:new WeakMap,gameManualInterstitialSlotReady:new WeakMap,gameManualInterstitialSlotClosed:new WeakMap}}init(){return R(this,null,(function*(){try{yield Promise.all([(0,l.Z)(T.Z).load(),(0,l.Z)(P.Z).load()]),yield(0,C.bT)((e=>{const t=e.pubads(),a=e=>{t.addEventListener(e,(t=>{const a=this.googleSlotEvents[e].get(t.slot);null==a||a(t)}))};a("slotRenderEnded"),a("impressionViewable"),a("gameManualInterstitialSlotReady"),a("gameManualInterstitialSlotClosed")})),this._loadPromise.resolve()}catch(e){this._loadPromise.reject(e)}}))}createSlot(e){return R(this,arguments,(function*({blockId:e}){return yield(0,C.bT)((t=>R(this,null,(function*(){const a=t.pubads(),r=t.defineOutOfPageSlot(null!=e?e:I.L,t.enums.OutOfPageFormat.GAME_MANUAL_INTERSTITIAL);if(!r)throw new Error("Failed to create googletag.Slot.");return r.addService(a),{googleSlot:r,showFunction:()=>{throw new Error("Slot not preloaded yet")},showPromise:new b.Z}}))))}))}preloadSlot({slot:e}){return new Promise((t=>{this.onGoogleEvent(e.googleSlot,"slotRenderEnded",(a=>{a.isEmpty&&t({isEmpty:!0,slot:e})})),this.onGoogleEvent(e.googleSlot,"gameManualInterstitialSlotReady",(a=>{const{makeGameManualInterstitialVisible:r}=a;e.showFunction=r,t({isEmpty:!1,slot:e})})),this.onGoogleEvent(e.googleSlot,"gameManualInterstitialSlotClosed",(()=>{e.showPromise.resolve()})),googletag.pubads().refresh([e.googleSlot])}))}showSlot(e){return e.showFunction(),e.showPromise.promise}destroySlot(e){return null==googletag||googletag.destroySlots([e.googleSlot]),Promise.resolve()}onGoogleEvent(e,t,a){this.googleSlotEvents[t].set(e,a)}}const L=D;var O=a(83142);class _ extends o.Z{constructor(){super(...arguments),this.providerName=i.oO.AnymindRewarded,this.providerLoaderName=i.Po.Anymind,this.googleSlotEvents={slotRenderEnded:new WeakMap,impressionViewable:new WeakMap,rewardedSlotGranted:new WeakMap,rewardedSlotReady:new WeakMap,rewardedSlotClosed:new WeakMap}}init(){return e=this,t=function*(){try{yield Promise.all([(0,l.Z)(T.Z).load(),(0,l.Z)(P.Z).load()]),yield(0,C.bT)((e=>{const t=e.pubads(),a=e=>{t.addEventListener(e,(t=>{const a=this.googleSlotEvents[e].get(t.slot);null==a||a(t)}))};a("slotRenderEnded"),a("impressionViewable"),a("rewardedSlotGranted"),a("rewardedSlotReady"),a("rewardedSlotClosed")})),this._loadPromise.resolve()}catch(e){this._loadPromise.reject(e)}},new Promise(((a,r)=>{var n=e=>{try{o(t.next(e))}catch(e){r(e)}},s=e=>{try{o(t.throw(e))}catch(e){r(e)}},o=e=>e.done?a(e.value):Promise.resolve(e.value).then(n,s);o((t=t.apply(e,null)).next())}));var e,t}createSlot({blockId:e}){return(0,C.bT)((t=>{const a=t.pubads(),r=t.defineOutOfPageSlot(null!=e?e:I.L,t.enums.OutOfPageFormat.REWARDED);if(!r)throw new Error("Failed to create googletag.Slot.");return r.addService(a),{googleSlot:r,showFunc:null,showPromise:new b.Z,wasRewarded:!1}}))}preloadSlot({slot:e}){return new Promise((t=>{this.onGoogleEvent(e.googleSlot,"slotRenderEnded",(a=>{a.isEmpty&&t({isEmpty:!0,slot:e})})),this.onGoogleEvent(e.googleSlot,"rewardedSlotReady",(a=>{const{makeRewardedVisible:r}=a;e.showFunc=r,t({isEmpty:!1,slot:e})})),this.onGoogleEvent(e.googleSlot,"rewardedSlotGranted",(()=>{e.wasRewarded=!0})),this.onGoogleEvent(e.googleSlot,"rewardedSlotClosed",(()=>{e.showPromise.resolve({wasRewarded:e.wasRewarded})})),googletag.pubads().refresh([e.googleSlot])}))}showSlot(e){if(!e.showFunc)throw new Error("provider.showSlot() should be called after .preloadSlot()");return(0,O.M)(e.googleSlot),e.showFunc(),e.showPromise.promise}destroySlot(e){return null==googletag||googletag.destroySlots([e.googleSlot]),Promise.resolve()}onGoogleEvent(e,t,a){this.googleSlotEvents[t].set(e,a)}}const x=_;var N=(e,t,a)=>new Promise(((r,n)=>{var s=e=>{try{i(a.next(e))}catch(e){n(e)}},o=e=>{try{i(a.throw(e))}catch(e){n(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(s,o);i((a=a.apply(e,t)).next())}));class B extends o.Z{constructor(){super(...arguments),this.providerName=i.oO.DummyBlock,this.providerLoaderName=i.Po.Promo}init(){return N(this,null,(function*(){this._loadPromise.resolve()}))}createSlot(e){return N(this,arguments,(function*({divId:e}){return{divId:e}}))}preloadSlot(e){return N(this,null,(function*(){return{isEmpty:!1,slot:{divId:e.slot.divId}}}))}showSlot(e){return N(this,arguments,(function*({divId:e}){const t=document.getElementById(e);t&&(t.innerHTML='<div class="adv-feed-grid-dummy"></div>')}))}destroySlot(e){return Promise.resolve()}}const M=B;var H=a(26667),F=a(83950);class $ extends o.Z{constructor(){super(...arguments),this.providerName=i.oO.GoogleAnchor,this.providerLoaderName=i.Po.Google,this.googleSlotEvents={slotRenderEnded:new WeakMap,impressionViewable:new WeakMap},this.toggleAnchor=(e,t,a)=>{const r=new CustomEvent("toggleAnchor",{detail:{slot:e,open:t,creativeHeight:a}});this.dispatchEvent(r)}}init(){return e=this,t=function*(){var e,t;try{yield(0,l.Z)(T.Z).load(),yield(0,C.bT)((e=>{const t=e.pubads(),a=e=>{t.addEventListener(e,(t=>{const a=this.googleSlotEvents[e].get(t.slot);null==a||a(t)}))};a("slotRenderEnded"),a("impressionViewable")})),this.toggleObserver=(0,F.V)("anchor-toggle-observer",{threshold:[.1,1]}),this.addEventListener("toggleAnchor",this.onToggleAnchor),null==(e=this.loadPromise)||e.resolve()}catch(e){null==(t=this.loadPromise)||t.reject(e)}},new Promise(((a,r)=>{var n=e=>{try{o(t.next(e))}catch(e){r(e)}},s=e=>{try{o(t.throw(e))}catch(e){r(e)}},o=e=>e.done?a(e.value):Promise.resolve(e.value).then(n,s);o((t=t.apply(e,null)).next())}));var e,t}onToggleAnchor(e){const{slot:t,open:a,creativeHeight:r}=e.detail;H.Ah.spoiler(t)("Toggle Anchor",a,"height",r);let n=a?r+24:0;document.documentElement.style.setProperty("--anchor-bottom-height",`${n}px`)}createSlot({blockId:e}){return(0,C.bT)((()=>{const t=googletag.defineOutOfPageSlot(e,googletag.enums.OutOfPageFormat.BOTTOM_ANCHOR);if(!t)throw new Error("Failed to create googletag slot.");const a=googletag.pubads();return t.addService(a),t}))}preloadSlot({slot:e}){return new Promise((t=>{this.onGoogleEvent(e,"slotRenderEnded",(a=>{var r,n;if(a.isEmpty)return t({isEmpty:!0,slot:e});const s=document.getElementById(a.slot.getSlotElementId());if(!s)return;const o=null!=(n=null==(r=a.size)?void 0:r[1])?n:0,i="number"==typeof o?o:0;this.toggleObserver.unobserve(s);let l=0;a.slot.isAnchorOpened=!1,this.toggleObserver.observe(s,(e=>{!1===a.slot.isAnchorOpened&&l<=e.intersectionRatio?(this.toggleAnchor(a.slot,!0,i),a.slot.isAnchorOpened=!0):!0===a.slot.isAnchorOpened&&l>=e.intersectionRatio&&(this.toggleAnchor(a.slot,!1,i),a.slot.isAnchorOpened=!1),l=e.intersectionRatio})),t({isEmpty:!1,slot:e})})),googletag.pubads().refresh([e])}))}showSlot(e){return new Promise((t=>{this.onGoogleEvent(e,"impressionViewable",(a=>{var r;t();const n=a.slot.getSlotElementId(),s=document.getElementById(n),o=null==(r=null==s?void 0:s.getElementsByTagName("iframe"))?void 0:r.item(0);(null==o?void 0:o.contentWindow)&&o.contentWindow.addEventListener("click",this.getClickEventHandler(e),{capture:!0})}))}))}destroySlot(e){var t;const a=e.getSlotElementId(),r=document.getElementById(a),n=null==(t=null==r?void 0:r.getElementsByTagName("iframe"))?void 0:t.item(0);return(null==n?void 0:n.contentWindow)&&n.contentWindow.removeEventListener("click",this.getClickEventHandler(e),{capture:!0}),Promise.resolve()}onGoogleEvent(e,t,a){this.googleSlotEvents[t].set(e,a)}}const W=$;var Z=a(21698);class G extends o.Z{constructor(){super(...arguments),this.providerName=i.oO.GoogleBlock,this.providerLoaderName=i.Po.Google,this.isSlotRefreshable=!0,this.googleSlotEvents={slotRenderEnded:new WeakMap,impressionViewable:new WeakMap},this.existingSlots=new WeakMap}init(){return e=this,t=function*(){try{yield(0,l.Z)(T.Z).load(),yield(0,C.bT)((e=>{const t=e.pubads(),a=e=>{t.addEventListener(e,(t=>{const a=this.googleSlotEvents[e].get(t.slot);null==a||a(t)}))};a("slotRenderEnded"),a("impressionViewable")})),this._loadPromise.resolve()}catch(e){this._loadPromise.reject(e)}},new Promise(((a,r)=>{var n=e=>{try{o(t.next(e))}catch(e){r(e)}},s=e=>{try{o(t.throw(e))}catch(e){r(e)}},o=e=>e.done?a(e.value):Promise.resolve(e.value).then(n,s);o((t=t.apply(e,null)).next())}));var e,t}createSlot({blockId:e,divId:t,size:a,testId:r,usePrevious:n=!1}){return(0,C.bT)((()=>{var s;const o=googletag.pubads();let i=null;if(n&&(i=null!=(s=o.getSlots().find((e=>e.getSlotElementId()===t)))?s:null,i)){const e=this.existingSlots.get(i);if(e)return e}if(i=googletag.defineSlot(null!=e?e:I.L,a,t),!i)throw new Error("Failed to create googletag slot.");i.addService(o);const l={googleSlot:i,showPromise:new b.Z,testId:r};return this.existingSlots.set(i,l),l}))}preloadSlot({slot:e}){return new Promise((t=>{this.onGoogleEvent(e.googleSlot,"slotRenderEnded",(a=>{e.testId&&(0,Z.o)(e.googleSlot,e.testId),t({isEmpty:a.isEmpty,slot:e})})),this.onGoogleEvent(e.googleSlot,"impressionViewable",(t=>{var a;e.showPromise.resolve();const r=t.slot.getSlotElementId(),n=document.getElementById(r),s=null==(a=null==n?void 0:n.getElementsByTagName("iframe"))?void 0:a.item(0);(null==s?void 0:s.contentWindow)&&s.contentWindow.addEventListener("click",this.getClickEventHandler(e),{capture:!0})})),googletag.pubads().refresh([e.googleSlot])}))}showSlot(e){return e.showPromise.promise}destroySlot(e){var t;null==googletag||googletag.destroySlots([e.googleSlot]);const a=e.googleSlot.getSlotElementId(),r=document.getElementById(a),n=null==(t=null==r?void 0:r.getElementsByTagName("iframe"))?void 0:t.item(0);return(null==n?void 0:n.contentWindow)&&n.contentWindow.removeEventListener("click",this.getClickEventHandler(e),{capture:!0}),this.removeClickEventListener(e),Promise.resolve()}getClickEventKey(e){return super.getClickEventKey(e.googleSlot)}onGoogleEvent(e,t,a){this.googleSlotEvents[t].set(e,a)}}const j=G;var U=a(94199),q=(e,t,a)=>new Promise(((r,n)=>{var s=e=>{try{i(a.next(e))}catch(e){n(e)}},o=e=>{try{i(a.throw(e))}catch(e){n(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(s,o);i((a=a.apply(e,t)).next())}));class V extends o.Z{constructor(){super(...arguments),this.providerName=i.oO.GoogleManual,this.providerLoaderName=i.Po.Google,this.googleSlotEvents={slotRenderEnded:new WeakMap,impressionViewable:new WeakMap,gameManualInterstitialSlotReady:new WeakMap,gameManualInterstitialSlotClosed:new WeakMap}}init(){return q(this,null,(function*(){try{yield(0,l.Z)(T.Z).load(),yield(0,C.bT)((e=>{const t=e.pubads(),a=e=>{t.addEventListener(e,(t=>{const a=this.googleSlotEvents[e].get(t.slot);null==a||a(t)}))};a("slotRenderEnded"),a("impressionViewable"),a("gameManualInterstitialSlotReady"),a("gameManualInterstitialSlotClosed")})),this._loadPromise.resolve()}catch(e){this._loadPromise.reject(e)}}))}createSlot(e){return q(this,arguments,(function*({blockId:e}){return(0,C.bT)((t=>q(this,null,(function*(){const a=t.pubads(),r=t.defineOutOfPageSlot(null!=e?e:I.L,t.enums.OutOfPageFormat.GAME_MANUAL_INTERSTITIAL);if(!r)throw new Error("Failed to create googletag.Slot.");return r.addService(a),{googleSlot:r,showFunction:()=>{throw new Error("Slot not preloaded yet")},showPromise:new b.Z}}))))}))}preloadSlot({slot:e}){return new Promise((t=>{this.onGoogleEvent(e.googleSlot,"slotRenderEnded",(a=>{a.isEmpty&&t({isEmpty:!0,slot:e})})),this.onGoogleEvent(e.googleSlot,"gameManualInterstitialSlotReady",(a=>{const{makeGameManualInterstitialVisible:r}=a;e.showFunction=r,t({isEmpty:!1,slot:e})})),this.onGoogleEvent(e.googleSlot,"gameManualInterstitialSlotClosed",(()=>{e.showPromise.resolve()}));const a=()=>{U.default.type.includes("portrait")||(e.showPromise.resolve(),this.destroySlot(e))};U.default.addChangeListener(a),e.showPromise.promise.then((()=>{U.default.removeChangeListener(a)})),googletag.display(e.googleSlot),googletag.pubads().refresh([e.googleSlot])}))}showSlot(e){return(0,O.M)(e.googleSlot),e.showFunction(),e.showPromise.promise}destroySlot(e){return null==googletag||googletag.destroySlots([e.googleSlot]),Promise.resolve()}onGoogleEvent(e,t,a){this.googleSlotEvents[t].set(e,a)}}const z=V;var K=(e,t,a)=>new Promise(((r,n)=>{var s=e=>{try{i(a.next(e))}catch(e){n(e)}},o=e=>{try{i(a.throw(e))}catch(e){n(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(s,o);i((a=a.apply(e,t)).next())}));class Y extends o.Z{constructor(){super(...arguments),this.providerName=i.oO.PromoBlock,this.providerLoaderName=i.Po.Promo}init(){this._loadPromise.resolve()}createSlot(e){return K(this,arguments,(function*({blockId:e}){return{blockId:e}}))}preloadSlot(e){return K(this,arguments,(function*({slot:e}){return{isEmpty:!1,slot:e}}))}showSlot(e){return K(this,arguments,(function*({slot:e}){}))}destroySlot(e){return K(this,arguments,(function*({slot:e}){}))}}const X=Y;var J=a(73441),Q=a(80346),ee=a(99102),te=a(79049),ae=(e,t,a)=>new Promise(((r,n)=>{var s=e=>{try{i(a.next(e))}catch(e){n(e)}},o=e=>{try{i(a.throw(e))}catch(e){n(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(s,o);i((a=a.apply(e,t)).next())}));let re;const ne=e=>ae(void 0,null,(function*(){return new Promise(((t,a)=>{window.fusetag=window.fusetag||{que:[]};const r=window.fusetag;r.que||(r.que=[]),r.que.push((()=>ae(void 0,null,(function*(){try{t(yield e(r))}catch(e){a(e)}}))))}))}));class se extends J.G{init(){ae(void 0,null,(function*(){if(re)return yield re;yield ae(void 0,null,(function*(){window.fusetag=window.fusetag||{que:[]};const{fusetag:e}=window,t=yield(0,C.N5)();e.que.push((function(){e.pageInit({pageTargets:Object.entries(t).map((([e,t])=>({key:e,value:t})))})}))}));const e=(0,te.x)({id:"fuse-script",loadTest:()=>Boolean(window.fusetag.initialised),src:"https://cdn.fuseplatform.net/publift/tags/2/3840/fuse.js"});return re=e.then((()=>(0,Q.b)())).then((()=>ae(void 0,null,(function*(){window.googletag=window.googletag||{cmd:[]},googletag.cmd.push((function(){const e=googletag.pubads();return(0,ee.c)(e)}))})))).then((()=>e)),yield re})).then((()=>this.loadPromise.resolve(this))).catch((e=>this.loadPromise.reject(e)))}}const oe=se;var ie=(e,t,a)=>new Promise(((r,n)=>{var s=e=>{try{i(a.next(e))}catch(e){n(e)}},o=e=>{try{i(a.throw(e))}catch(e){n(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(s,o);i((a=a.apply(e,t)).next())}));class le extends o.Z{constructor(){super(...arguments),this.providerName=i.oO.PubliftRewarded,this.providerLoaderName=i.Po.Publift,this.supportsRetries=!1,this.googleSlotEvents={slotRenderEnded:new WeakMap,impressionViewable:new WeakMap}}init(){return ie(this,null,(function*(){try{yield(0,l.Z)(oe).load(),yield(0,C.bT)((e=>{const t=e.pubads(),a=e=>{t.addEventListener(e,(t=>{const a=this.googleSlotEvents[e].get(t.slot);null==a||a(t)}))};a("slotRenderEnded"),a("impressionViewable")})),this._loadPromise.resolve()}catch(e){this._loadPromise.reject(e)}}))}createSlot(e){return ie(this,arguments,(function*({blockId:e}){const t=yield(0,C.bT)((t=>{var a;const r=null==(a=t.defineOutOfPageSlot(e,t.enums.OutOfPageFormat.REWARDED))?void 0:a.addService(t.pubads());return r?(t.enableServices(),r):null}));if(!t)throw new Error("Cannot create slot");return Object.assign(t,{blockId:e})}))}preloadSlot(e){return ie(this,arguments,(function*({slot:e}){const t=e;t.preloadPromise=new b.Z,t.rewardedPromise=new b.Z,t.closePromise=new b.Z;let a=!1;return yield(0,C.bT)((e=>{this.onGoogleEvent(t,"slotRenderEnded",(e=>{e.isEmpty&&t.preloadPromise.resolve({isEmpty:!0,slot:t})})),e.pubads().addEventListener("rewardedSlotReady",(e=>{t.show=e.makeRewardedVisible,t.preloadPromise.resolve({isEmpty:!1,slot:t})})),e.pubads().addEventListener("rewardedSlotClosed",(()=>{e.destroySlots([t]),t.closePromise.resolve({isRewarded:a})})),e.pubads().addEventListener("rewardedSlotGranted",(()=>{a=!0,t.rewardedPromise.resolve({isRewarded:a})}))})),googletag.display(t),googletag.pubads().refresh([t]),{slot:t,isEmpty:!1}}))}showSlot(e){const{rewardedPromise:t,closePromise:a}=e;if(!t||!a||!e.show)throw new Error(`No preloadSlot called for slot ${e.blockId}.`);return e.show(),Promise.resolve({rewardedPromise:t.promise,closePromise:a.promise})}destroySlot(e){return Promise.resolve()}onGoogleEvent(e,t,a){this.googleSlotEvents[t].set(e,a)}}const de=le;var ce=a(93298),ue=(e,t,a)=>new Promise(((r,n)=>{var s=e=>{try{i(a.next(e))}catch(e){n(e)}},o=e=>{try{i(a.throw(e))}catch(e){n(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(s,o);i((a=a.apply(e,t)).next())}));const he=(0,ce.M$)("PubliftZoneProvider",ce.XG.Adv);class pe extends o.Z{constructor(){super(),this.providerName=i.oO.PubliftZone,this.providerLoaderName=i.Po.Publift,this.supportsRetries=!1,this.slots={},"undefined"!=typeof window&&(this.mutationObserver=new MutationObserver((e=>{for(const t of e){const e=t.target;"data-fuse-slot"===t.attributeName&&fusetag.activateZone(e.id)}})))}init(){return ue(this,null,(function*(){try{yield(0,l.Z)(oe).load(),yield(0,C.bT)((e=>{const t=e.pubads();t.addEventListener("slotRenderEnded",(e=>{const t=this.findSlotByElementId(e.slot.getSlotElementId());null==t||t.preloadPromise.resolve({isEmpty:e.isEmpty,slot:t})})),t.addEventListener("impressionViewable",(e=>{const t=this.findSlotByElementId(e.slot.getSlotElementId());null==t||t.showPromise.resolve()}))})),yield ne((()=>null)),this._loadPromise.resolve()}catch(e){this._loadPromise.reject(e)}}))}createSlot(e){return ue(this,arguments,(function*({blockId:e,divId:t,zoneId:a,usePrevious:r=!1}){if(r&&(yield ne((()=>Object.entries(fusetag.getFuseUnits()).find((([e,a])=>a.id===t))))))return this.slots[t]={isActivated:!0,blockId:e,divId:t,zoneId:a,usePrevious:r,preloadPromise:new b.Z,showPromise:new b.Z};he("[FUSE] creatingSlot",{blockId:e,divId:t,zoneId:a});const n=document.getElementById(t);this.mutationObserver.observe(n,{attributes:!0,attributeFilter:["data-fuse-slot"]});const s=yield ne((()=>fusetag.registerZone(t)));if(!s)throw he("[FUSE] No slot found for",a,s,e),new Error("Cannot create slot");return this.slots[t]={isActivated:!1,blockId:e,divId:t,zoneId:a,usePrevious:r,preloadPromise:new b.Z,showPromise:new b.Z}}))}preloadSlot(e){return ue(this,arguments,(function*({slot:e}){return he("[FUSE] preloadSlot",e.divId),yield ne((()=>{if(e.isActivated){const t=this.findZoneDivIdByElementId(e.divId);t&&fusetag.refreshSlotByCode(t)}fusetag.activateZone(e.divId)})),e.preloadPromise.promise}))}showSlot(e){return e.showPromise.promise}destroySlot(e){return ue(this,null,(function*(){he("[FUSE] destroying slot",{divId:e.divId}),delete this.slots[e.divId],yield ne((()=>fusetag.destroyZone(e.divId)))}))}findZoneDivIdByElementId(e){const t=document.getElementById(e);return t&&t.dataset.fuseSlot?t.dataset.fuseSlot:null}findSlotByElementId(e){var t,a;const r=document.getElementById(e);if(!r||!r.classList.contains("fuse-slot"))return null;const n=null==(t=r.parentElement)?void 0:t.id;return n&&null!=(a=this.slots[n])?a:null}}const me=pe,ve={current:0};class ge extends J.G{init(){return e=this,t=function*(){try{yield(0,te.x)({id:"yandexads-context",src:window.appData.yaAdsScript}),this.loadPromise.resolve(this)}catch(e){this.loadPromise.reject(e)}},new Promise(((a,r)=>{var n=e=>{try{o(t.next(e))}catch(e){r(e)}},s=e=>{try{o(t.throw(e))}catch(e){r(e)}},o=e=>e.done?a(e.value):Promise.resolve(e.value).then(n,s);o((t=t.apply(e,null)).next())}));var e,t}}const ye=ge;var fe=a(40174),we=a(58432),be=a(17061),Ee=a(41811),ke=Object.defineProperty,Se=Object.defineProperties,Ae=Object.getOwnPropertyDescriptors,Ie=Object.getOwnPropertySymbols,Pe=Object.prototype.hasOwnProperty,Te=Object.prototype.propertyIsEnumerable,Ce=(e,t,a)=>t in e?ke(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Re=(e,t)=>{for(var a in t||(t={}))Pe.call(t,a)&&Ce(e,a,t[a]);if(Ie)for(var a of Ie(t))Te.call(t,a)&&Ce(e,a,t[a]);return e},De=(e,t)=>Se(e,Ae(t)),Le=(e,t,a)=>new Promise(((r,n)=>{var s=e=>{try{i(a.next(e))}catch(e){n(e)}},o=e=>{try{i(a.throw(e))}catch(e){n(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(s,o);i((a=a.apply(e,t)).next())}));class Oe extends o.Z{constructor(){super(...arguments),this.providerName=i.oO.YandexBlock,this.providerLoaderName=i.Po.Yandex}init(){return Le(this,null,(function*(){try{yield(0,l.Z)(ye).load(),this._loadPromise.resolve()}catch(e){this._loadPromise.reject(e)}}))}getPCODEPlatform(){var e,t,a,r;const n=null==(r=null==(a=null==(t=null==(e=window.Ya)?void 0:e.Context)?void 0:t.AdvManager)?void 0:a.getPlatform)?void 0:r.call(a);return null!=n?n:"desktop"}createSlot(e){return Le(this,arguments,(function*({appId:e,blockId:t,darkTheme:a,disableRefresh:r=!1,divId:n,lazyLoad:s,location:o,withPageNumber:i=!0,withPlatform:l=!1}){const d=(0,be.V)(Ee.Je,o);return De(Re(Re({async:!0,blockId:t,darkTheme:a,disableRefresh:r,pageNumber:i?ve.current++:void 0,extParams:De(Re(Re({},e?{"distr-id":e}:{}),d?{google_aid:d}:{}),{utm_source_service:"games","game-distrib-stat-id":(0,we.Sn)()})},void 0!==s?{lazyLoad:s}:{}),!0===l?{platform:this.getPCODEPlatform()}:{}),{renderTo:n,statId:(0,we.Sn)()})}))}hasPlaceholder(){return!0}preloadSlot(e){return Le(this,arguments,(function*({flags:e,slot:t,onRenderCallback:a}){return new Promise(((r,n)=>{(0,fe.Q$)({abtFlags:e,adOptions:De(Re({},t),{onRender:e=>{const{productType:n}=e;null==a||a({hasPlaceholder:H.jY.includes(e.productType||"")}),r({isEmpty:!1,slot:t,productType:n});const s=document.getElementById(t.renderTo),o=null==s?void 0:s.firstElementChild;o&&o.addEventListener("click",this.getClickEventHandler(t),{capture:!0})},onError:e=>{n(new Error("Unexpected ad slot error: "+e.text))}}),methodName:fe.xn.RENDER,onAdLoadFailed:e=>{e.code!==fe.uy.TIMEOUT?r({isEmpty:!0,slot:t}):n(e)}})}))}))}showSlot(e){return Le(this,null,(function*(){}))}destroySlot(e){var t,a,r;null==(r=null==(a=null==(t=window.Ya)?void 0:t.Context)?void 0:a.AdvManager)||r.destroy({blockId:e.blockId,renderTo:e.renderTo});const n=document.getElementById(e.renderTo),s=null==n?void 0:n.firstElementChild;return s&&s.removeEventListener("click",this.getClickEventHandler(e),{capture:!0}),Promise.resolve()}}const _e=Oe;var xe=a(74878),Ne=Object.defineProperty,Be=Object.defineProperties,Me=Object.getOwnPropertyDescriptors,He=Object.getOwnPropertySymbols,Fe=Object.prototype.hasOwnProperty,$e=Object.prototype.propertyIsEnumerable,We=(e,t,a)=>t in e?Ne(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Ze=(e,t)=>{for(var a in t||(t={}))Fe.call(t,a)&&We(e,a,t[a]);if(He)for(var a of He(t))$e.call(t,a)&&We(e,a,t[a]);return e},Ge=(e,t)=>Be(e,Me(t)),je=(e,t,a)=>new Promise(((r,n)=>{var s=e=>{try{i(a.next(e))}catch(e){n(e)}},o=e=>{try{i(a.throw(e))}catch(e){n(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(s,o);i((a=a.apply(e,t)).next())}));class Ue extends o.Z{constructor(){super(...arguments),this.providerName=i.oO.YandexCombined,this.providerLoaderName=i.Po.Yandex}init(){return je(this,null,(function*(){try{yield(0,l.Z)(ye).load(),this._loadPromise.resolve()}catch(e){this._loadPromise.reject(e)}}))}createSlot(e){return je(this,arguments,(function*({blockId:e,darkTheme:t,disableRefresh:a=!1,divId:r,location:n,withPageNumber:s=!0}){const o=(0,be.V)(Ee.Je,n);return{async:!0,blockId:e+"-"+(0,xe.aC)(),darkTheme:t,disableRefresh:a,pageNumber:s?ve.current++:void 0,extParams:Ge(Ze({},o?{google_aid:o}:{}),{utm_source_service:"games","game-distrib-stat-id":(0,we.Sn)()}),renderTo:r,statId:(0,we.Sn)()}}))}preloadSlot(e){return je(this,arguments,(function*({flags:e,slot:t}){return new Promise(((a,r)=>{(0,fe.Q$)({abtFlags:e,adOptions:Ge(Ze({},t),{onRender:e=>{const{productType:r}=e;a({isEmpty:!1,slot:t,productType:r});const n=document.getElementById(t.renderTo),s=null==n?void 0:n.firstElementChild;s&&s.addEventListener("click",this.getClickEventHandler(t),{capture:!0})},onError:e=>{r(new Error("Unexpected ad slot error: "+e.text))}}),methodName:fe.xn.RENDER,onAdLoadFailed:()=>{a({isEmpty:!0,slot:t})}})}))}))}showSlot(e){return je(this,null,(function*(){}))}destroySlot(e){const t=document.getElementById(e.renderTo),a=null==t?void 0:t.firstElementChild;return a&&a.removeEventListener("click",this.getClickEventHandler(e),{capture:!0}),Promise.resolve()}}const qe=Ue,Ve={[i.oO.AdsenseBlock]:f,[i.oO.AdsenseResponsive]:w.Z,[i.oO.AdsenseRewarded]:S,[i.oO.AnymindBlock]:A.Z,[i.oO.AnymindManual]:L,[i.oO.AnymindRewarded]:x,[i.oO.DummyBlock]:M,[i.oO.GoogleAnchor]:W,[i.oO.GoogleBlock]:j,[i.oO.GoogleManual]:z,[i.oO.PromoBlock]:X,[i.oO.PubliftZone]:me,[i.oO.PubliftRewarded]:de,[i.oO.YandexBlock]:_e,[i.oO.YandexCombined]:qe},ze={},Ke=e=>{const t=ze[e];if(t)return t;const a=Ve[e];return ze[e]=new a,ze[e]},Ye=(e,t,a={current:!1})=>{const r=Ke(e);return r?new Promise(((e,s)=>{return o=function*(){let o;t&&(o=window.setTimeout((()=>{a.current=!0,s(new n(r.providerName))}),t)),r.load().then((()=>{a.current||(window.clearTimeout(o),e(r))})).catch((e=>{a.current||s(e)}))},new Promise(((e,t)=>{var a=e=>{try{n(o.next(e))}catch(e){t(e)}},r=e=>{try{n(o.throw(e))}catch(e){t(e)}},n=t=>t.done?e(t.value):Promise.resolve(t.value).then(a,r);n((o=o.apply(undefined,null)).next())}));var o})):Promise.reject(new Error(`Provider ${e} not found`))},Xe=(e,t,a)=>{const[n,s]=(0,r.useState)((e=>{if(!e)return null;const t=Ke(e);return(null==t?void 0:t.loaded)?t:null})(e)),o=(0,r.useMemo)((()=>e&&n?n.providerName!==e?null:n.loaded?n:null:null),[e,n]);return(0,r.useEffect)((()=>{let r={current:!1};return!o&&e&&Ye(e,a,r).then((e=>{s(e)})).catch((e=>{t(e)})),()=>{r.current=!0}}),[e,o,t,a]),o}},62011:(e,t,a)=>{a.d(t,{Z:()=>p});var r=a(87363),n=a.n(r),s=Object.defineProperty,o=Object.defineProperties,i=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,u=(e,t,a)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,h=(e,t)=>{for(var a in t||(t={}))d.call(t,a)&&u(e,a,t[a]);if(l)for(var a of l(t))c.call(t,a)&&u(e,a,t[a]);return e};const p=function(e,t,a){return(0,r.forwardRef)(((s,l)=>{var d;const c=(0,r.useContext)(t),u={};for(const e in a)u[e]=null==(d=a[e])?void 0:d.call(a,c);return(0,r.useMemo)((()=>{return n().createElement(e,(t=h(h({},s),u),o(t,i({ref:l}))));var t}),[s,...Object.values(u)])}))}},87936:(e,t,a)=>{a.d(t,{Z:()=>J});var r=a(98816),n=a(87363),s=a.n(n),o=a(26667),i=a(57745),l=a(90543),d=Object.defineProperty,c=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,p=(e,t,a)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;const m=(0,n.createContext)({dispatch:()=>{},state:{}}),v=()=>(0,i.HX)().ingameAdv;var g=a(8804),y=a(73694),f=a(52888),w=a(35742),b=a(33775),E=a(10739),k=a(40184),S=a(11510),A=a(55231),I=a(94671),P=a(909),T=a(31136),C=a(15771),R=a(90380);const D="IngameAdvBlockRenderer-critical-game-module__hidden--PEtgy";var L=Object.defineProperty,O=Object.defineProperties,_=Object.getOwnPropertyDescriptors,x=Object.getOwnPropertySymbols,N=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable,M=(e,t,a)=>t in e?L(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,H=(e,t)=>{for(var a in t||(t={}))N.call(t,a)&&M(e,a,t[a]);if(x)for(var a of x(t))B.call(t,a)&&M(e,a,t[a]);return e},F=(e,t)=>O(e,_(t));const $=[w.oO.GoogleBlock],W=(0,n.forwardRef)((({provider:e,waterfallItem:t,onClick:a,onClose:r,onError:i,onRequest:l,onResponse:d,onShow:c,onFailed:u},h)=>{const p="ingame_banner_"+s().useId(),m=(0,n.useRef)(null),v=(0,n.useRef)(null),{abt:{flags:L},location:O}=(0,k.b)(),_=(0,S.T)(),x=(0,n.useMemo)((()=>({retries:(0,b.Mi)(L),usePlaceholder:(0,C.Sf)(L),useLoader:(0,C.Z0)(L),controlsDelay:(0,C.sQ)(L),disableAdButtonEnabled:(0,C.RM)(L,R.Z.disableAdButton)||!1})),[L]),[N,B]=(0,n.useState)({isVisible:!1,showControls:!1}),M=(0,n.useCallback)((e=>{B((t=>F(H({},t),{isVisible:e})))}),[]);(0,n.useImperativeHandle)(h,(()=>({toggleTempRendererState:()=>{}})),[]),(0,n.useEffect)((()=>{var r;return r=function*(){var r;if(t&&(0,w.Qq)(t)&&e&&m.current)try{(0,o._y)("IngameAdv | Actually create slot",p,t),M(!0);let n=v.current=yield e.createSlot({blockId:t.blockId,divId:p,size:[],location:O,lazyLoad:!1}),s=0,i=!0;do{null==l||l({slot:n,retry:s});const t=yield e.preloadSlot({slot:n,flags:L});null==d||d({slot:n,isEmpty:t.isEmpty},{payloadProductType:"productType"in t?null!=(r=t.productType)?r:"none":"unknown"}),t.isEmpty?(yield(0,T.D)(A.TE),s+=1):i=!1}while(e.supportsRetries&&i&&$.includes(e.providerName)&&s<x.retries);if(i)throw new f.l;B((e=>F(H({},e),{showControls:!0}))),yield e.showSlot(n),null==c||c({slot:n}),e.setClickEventListener(n,(()=>null==a?void 0:a({slot:n})))}catch(e){M(!1),e instanceof E.lu&&e.params.isEmpty||null==i||i({error:e,slot:null}),null==u||u({error:e})}},new Promise(((e,t)=>{var a=e=>{try{s(r.next(e))}catch(e){t(e)}},n=e=>{try{s(r.throw(e))}catch(e){t(e)}},s=t=>t.done?e(t.value):Promise.resolve(t.value).then(a,n);s((r=r.apply(undefined,null)).next())})),()=>{(0,o._y)("IngameAdv | Renderer clear"),v.current&&e&&(e.destroySlot(v.current),v.current=null)}}),[a,p,L,O,i,u,l,d,c,x,e,M,t]);const W=(0,n.useCallback)((()=>{(0,o._y)("IngameAdv | onCloseButtonClick"),M(!1),v.current&&e&&e.destroySlot(v.current),null==r||r({wasShown:!0,slot:null})}),[e,M,r]),Z=(0,n.useCallback)((()=>{(0,P.Z)()}),[]),G=0===x.controlsDelay||N.showControls;return s().createElement("div",{className:(0,I.E)("IngameAdvBlockRenderer-critical-game-module__container--zVv8r",!1,N.isVisible?"visible":D),"data-testid":"adv-fullscreen-container"},s().createElement("div",null,s().createElement("div",{className:(0,I.E)("IngameAdvBlockRenderer-critical-game-module__desktopClose--yi6EC",G?void 0:D),"data-testid":"adv-fullscreen-closeButton",onClick:W}),x.useLoader&&s().createElement(y.y,{className:(0,I.E)("IngameAdvBlockRenderer-critical-game-module__spinner--IGlvT",G?D:void 0),key:"landscape-spinner",position:"center",size:32,spinning:!0,view:"default"}),s().createElement("div",{className:(0,I.E)("IngameAdvBlockRenderer-critical-game-module__block--_Crst")},s().createElement("div",{id:p,ref:m}))),x.disableAdButtonEnabled?s().createElement("div",{className:(0,I.E)("IngameAdvBlockRenderer-critical-game-module__touchControls--Pqpzr",G?void 0:D)},x.disableAdButtonEnabled&&s().createElement(g.z,{"data-testid":"adv-fullscreen-closeButton",size:40,view:"secondary",onClick:Z},_("header.popup.disable.ads")),s().createElement(g.z,{"data-testid":"adv-fullscreen-closeButton",size:40,view:"primary",onClick:W},_("adv.close"))):null)}));var Z=a(13547),G=a(51290),j=a(97553);const U=(0,n.forwardRef)(((e,t)=>{const a=v(),r=(0,n.useRef)(null),i=(0,n.useRef)(null),[l,d]=(0,n.useState)([]),c=(0,n.useCallback)((()=>{var e;null==(e=i.current)||e.click()}),[i]),u=(0,n.useCallback)((e=>{var t;const r=null==(t=null==a?void 0:a[e])?void 0:t.waterfall;i.current=new G.U({tag:e}),r&&0!==r.length?(i.current.tryOpen({reason:j.p_.ONSPOT,provider:r[0].provider}),d([...r])):i.current.fail(`No available waterfall item for tag ${e}`)}),[a]);(0,n.useImperativeHandle)(t,(()=>({startWaterfall:e=>{(0,o._y)("IngameAdv | Start waterfall"),u(e)}}))),(0,n.useEffect)((()=>{(0,o._y)("IngameAdv | Container created")}),[]);const h=(0,n.useCallback)((e=>{(0,o._y)("IngameAdv | onWaterfallNext",e)}),[]),p=(0,n.useCallback)(((e,t)=>{(0,o._y)("IngameAdv | WaterfallFailed",e,t)}),[]);return s().createElement(Z.Z,{alwaysRender:!0,ref:r,waterfallList:l,onClick:c,onWaterfallFailed:p,onWaterfallNext:h},s().createElement(W,null))}));U.displayName="IngameAdvContainer";const q=(0,n.memo)(U);var V=a(95486),z=a(97808),K=a(53603);const Y=()=>null,X=()=>null,J=(Q=()=>{const e=(0,n.useRef)(null),t=v(),a=(0,n.useRef)({[r.$H.INTERSTITIAL]:X,[r.$H.REWARDED]:X});(0,n.useEffect)((()=>{(0,o._y)("IngameAdv | Manager init",t)}),[t]);const{interstitial:i,rewarded:l}=(()=>{var e,t;const{isReady:a}=(0,K.s)(),[s,o]=(0,n.useState)(null),i=v(),l=(null==(e=null==i?void 0:i[r.$H.INTERSTITIAL])?void 0:e.firstShowDelay)||null,d=(null==(t=null==i?void 0:i[r.$H.INTERSTITIAL])?void 0:t.disabledReason)||null;return(0,n.useEffect)((()=>{var e;d&&[r.Jm.SUBSCRIPTION,r.Jm.UTM].includes(d)&&(e=d,z.Z.postToChild(V.fB.SetDisabledState({reason:e,value:null!==e})))}),[d]),(0,n.useMemo)((()=>{if("undefined"==typeof window)return;if(!l)return void o(null);o(`Warning: please, try to open advertising after ${l}ms`);const e=window.setTimeout((()=>{o(null)}),l);return()=>{window.clearTimeout(e)}}),[l]),{[r.$H.INTERSTITIAL]:s||!a&&"Warning: please, try to open advertising later"||!0,[r.$H.REWARDED]:!!a||"Warning: please, try to open advertising later"}})(),d=(0,n.useCallback)((()=>((0,o._y)("IngameAdv | onAdvDisabledStatus"),null)),[]),c=(0,n.useCallback)(((e,t)=>{a.current[e]({data:{error:t}}),a.current[e]=X}),[]);return(({onAdvDisabledStatus:e,onAdvShowRequest:t})=>{const a=(0,n.useRef)({onAdvDisabledStatus:Y,onAdvShow:()=>(0,o._y)("IngameAdv | Called not initialized onAdvShow")});(0,n.useMemo)((()=>{a.current.onAdvDisabledStatus=e,a.current.onAdvShow=t}),[e,t]),(0,n.useEffect)((()=>{const e=(e,t)=>{switch(e.data.action){case"adv-show-fullscreen":a.current.onAdvShow(r.$H.INTERSTITIAL,t);break;case"adv-show-rewarded-video":a.current.onAdvShow(r.$H.REWARDED,t);break;case"get-disabled-state":t({data:{value:Boolean(a.current.onAdvDisabledStatus())}})}};return z.Z.onExternalMessage("adv-manager",e,{withHistory:!0}),()=>{z.Z.offExternalMessage("adv-manager",e)}}),[])})({onAdvDisabledStatus:d,onAdvShowRequest:(0,n.useCallback)(((t,n)=>{var s;switch((0,o._y)("IngameAdv | onAdvShow",t),a.current[t]=n,!0){case t===r.$H.INTERSTITIAL&&!0!==i:c(t,new Error(i));break;case t===r.$H.REWARDED&&!0!==l:c(t,new Error(l));break;default:null==(s=e.current)||s.startWaterfall(t)}}),[i,l,c])}),(0,o._y)("IngameAdv | Render",i,l),s().createElement(q,{ref:e})},e=>{const[t,a]=(0,n.useReducer)(l.Z,{});return s().createElement(m.Provider,{value:{state:t,dispatch:a}},s().createElement(Q,((e,t)=>{for(var a in t||(t={}))u.call(t,a)&&p(e,a,t[a]);if(c)for(var a of c(t))h.call(t,a)&&p(e,a,t[a]);return e})({},e)))});var Q},88561:(e,t,a)=>{a.d(t,{Z:()=>g});var r=a(46210),n=a(26667),s=a(14408),o=a(73441),i=a(57745),l=a(95025),d=a(5e4),c=a(33252),u=a(79049),h=a(13377),p=a(49659);const m="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js";class v extends o.G{init(){return e=this,t=function*(){var e,t,a,o;window.adsbygoogle=window.adsbygoogle||[],window.adBreak=window.adConfig=function(e){var t;null==(t=window.adsbygoogle)||t.push(e)};try{null==(e=window.clickdaemonLog)||e.call(window,"adv_debug",{scope:"AdsenseProviderLoader",event:"load",step:"1"});const o=(0,r.hF)((0,p.e)().href);yield(0,u.x)({async:!0,src:o?(0,r.zR)(o):m,id:"adsense-script",crossOrigin:"anonymous",onScriptCreated:e=>{var t,a;const{dataset:r}=e,n=function(){var e,t,a,r,n,s,o;const c=null==(a=null==(t=null==(e=window.appData)?void 0:e.advDataStore)?void 0:t.feedAdv)?void 0:a.common.waterfall,u=null==c?void 0:c.find(i.UJ);if(u)return u.clientId;const h=(0,l.gK)({flags:window.appData.abt.flags,ingameAdvData:null==(r=window.appData.advDataStore)?void 0:r.ingameAdv,withWorldWideAdv:window.appData.withWorldWideAdv}),p=[...h.interstitial,...h.rewarded].find((e=>e.provider===d.e.AdsenseResponsive));return p&&"clientId"in p?p.clientId:null==(o=null==(s=null==(n=window.appData)?void 0:n.allAdvBlocks)?void 0:s.adsense)?void 0:o.interstitial.clientId}();n||(0,c.H)({block:h.W.GOOGLE_ADS,message:"No clientId passed in Adsense script."}),r.adClient=n,r.adFormat="auto",r.adFrequencyHint="30s";const o=(0,s.aO)(null==(a=null==(t=window.appData)?void 0:t.abt)?void 0:a.flags);o&&(r.adChannel=o)}}),null==(t=window.clickdaemonLog)||t.call(window,"adv_debug",{scope:"AdsenseProviderLoader",event:"load",step:"2"}),(0,n._y)("Adsense script loaded."),adConfig({preloadAdBreaks:"on",sound:"off",onReady:()=>{var e;null==(e=window.clickdaemonLog)||e.call(window,"adv_debug",{scope:"AdsenseProviderLoader",event:"load",step:"4"})}}),(0,n._y)("Adsense adBreak ready."),this.loadPromise.resolve(this),null==(a=window.clickdaemonLog)||a.call(window,"adv_debug",{scope:"AdsenseProviderLoader",event:"load",step:"3"})}catch(e){null==(o=window.clickdaemonLog)||o.call(window,"adv_debug",{scope:"AdsenseProviderLoader",event:"load",step:"error"}),this.loadPromise.reject(e),function(){const e={};fetch(m).then((t=>{e.headers={};for(let[a,r]of t.headers.entries())"expires"!==a&&(e.headers[a]=r.substring(0,1e3));return e.ok=t.ok,e.redirected=t.redirected,e.status=t.status,e.statusText=t.statusText.substring(0,1e3),e.url=t.url.substring(0,1e3),t})).then((e=>e.text())).then((t=>e.text=t.substring(0,1e3))).then((()=>{e.fetched=!0})).catch((()=>e.fetched=!1)).finally((()=>{(0,c.H)({additional:e,block:h.W.GOOGLE_ADS,message:"[adv] checkScriptAvailability [adsbygoogle.js]"})}))}()}},new Promise(((a,r)=>{var n=e=>{try{o(t.next(e))}catch(e){r(e)}},s=e=>{try{o(t.throw(e))}catch(e){r(e)}},o=e=>e.done?a(e.value):Promise.resolve(e.value).then(n,s);o((t=t.apply(e,null)).next())}));var e,t}}const g=v},26807:(e,t,a)=>{a.d(t,{Z:()=>o});var r=a(73441),n=a(79049);class s extends r.G{init(){return e=this,t=function*(){try{yield(0,n.x)({id:"anymind-script",src:"//anymind360.com/js/17039/ats.js"}),this.loadPromise.resolve(this)}catch(e){this.loadPromise.reject(e)}},new Promise(((a,r)=>{var n=e=>{try{o(t.next(e))}catch(e){r(e)}},s=e=>{try{o(t.throw(e))}catch(e){r(e)}},o=e=>e.done?a(e.value):Promise.resolve(e.value).then(n,s);o((t=t.apply(e,null)).next())}));var e,t}}const o=s},73441:(e,t,a)=>{a.d(t,{G:()=>s});var r=a(26108),n=a(3436);class s extends n.R{load(){return this.loadPromise||(this.loadPromise=new r.Z,this.init()),this.loadPromise.promise}}},45692:(e,t,a)=>{a.d(t,{Z:()=>o});var r=a(73441),n=a(85623);class s extends r.G{init(){(0,n.S$)().then((()=>(0,n.Vg)())).then((()=>(0,n.bT)((e=>{return t=this,a=function*(){e.enableServices()},new Promise(((e,r)=>{var n=e=>{try{o(a.next(e))}catch(e){r(e)}},s=e=>{try{o(a.throw(e))}catch(e){r(e)}},o=t=>t.done?e(t.value):Promise.resolve(t.value).then(n,s);o((a=a.apply(t,null)).next())}));var t,a})))).then((()=>this.loadPromise.resolve(this))).catch((e=>this.loadPromise.reject(e)))}}const o=s},51962:(e,t,a)=>{a.d(t,{K:()=>u,Z:()=>p});var r=a(26667),n=a(14408),s=a(88561),o=a(69110),i=a(35742),l=a(52924);class d{constructor(e){this.clickHandler=e,this.overElement=null,this.options={capture:!0}}handleEvent(e){var t,a;"mouseover"===e.type?this.overElement=null==(t=e.currentTarget.getElementsByTagName("iframe").item(0))?void 0:t.contentWindow:"mouseout"===e.type?this.overElement=null:"blur"===e.type&&this.overElement===(null==(a=e.target)?void 0:a[0])&&this.clickHandler.handleEvent(e)}listen(e){e.addEventListener("mouseover",this,this.options),e.addEventListener("mouseout",this,this.options),window.addEventListener("blur",this,this.options)}unListen(e){e.removeEventListener("mouseover",this,this.options),e.removeEventListener("mouseout",this,this.options),window.removeEventListener("blur",this,this.options)}}var c=(e,t,a)=>new Promise(((r,n)=>{var s=e=>{try{i(a.next(e))}catch(e){n(e)}},o=e=>{try{i(a.throw(e))}catch(e){n(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(s,o);i((a=a.apply(e,t)).next())}));const u=250;class h extends o.Z{constructor(){super(...arguments),this.providerName=i.oO.AdsenseResponsive,this.providerLoaderName=i.Po.Adsense,this.clickHandlerRegister=new WeakMap}init(){return c(this,null,(function*(){var e,t,a,r,o,i,d,c;null==(e=window.clickdaemonLog)||e.call(window,"adv_debug",{scope:"AdsenseResponsiveProvider",event:"init",step:"1"});try{(0,n.rA)(null!=(r=null==(a=null==(t=window.appData)?void 0:t.abt)?void 0:a.flags)?r:{})&&this.initObserverForThirdPartyAdsenseAds(),yield(0,l.Z)(s.Z).load(),null==(o=window.clickdaemonLog)||o.call(window,"adv_debug",{scope:"AdsenseResponsiveProvider",event:"init",step:"2"}),this._loadPromise.resolve(),null==(i=window.clickdaemonLog)||i.call(window,"adv_debug",{scope:"AdsenseResponsiveProvider",event:"init",step:"3"})}catch(e){null==(d=window.clickdaemonLog)||d.call(window,"adv_debug",{scope:"AdsenseResponsiveProvider",event:"init",step:"4"}),this._loadPromise.reject(e)}null==(c=window.clickdaemonLog)||c.call(window,"adv_debug",{scope:"AdsenseResponsiveProvider",event:"init",step:"5"})}))}createSlot(e){return c(this,arguments,(function*({adFormat:e,blockId:t,clientId:a,divId:n,height:s,maxHeight:o,width:i}){const l=document.querySelector(`#${CSS.escape(n)}`);if(!l)throw new Error(`Container #${n} not found`);const d=document.createElement("ins");d.classList.add("adsbygoogle"),d.style.display="block",d.style.margin="auto",s=null!=s?s:l.clientHeight,i=null!=i?i:l.clientWidth,d.style.height=`${s}px`,d.style.width=`${i}px`,o&&(d.style.maxHeight=`${o}px`),(0,r._y)(`Create Adsense slot, height: ${s}px, width: ${i}px, adFormat: ${e}`);const{dataset:c}=d;return c.adClient=a,c.adSlot=t,e&&(c.adFormat=e),c.fullWidthResponsive="true",l.appendChild(d),this.createPreloadPromise(d),d}))}initObserverForThirdPartyAdsenseAds(){new MutationObserver((e=>{for(const t of e)if("childList"===t.type){const{addedNodes:e}=t;e.forEach((e=>{e instanceof HTMLElement&&e.classList.contains("adsbygoogle-noablate")&&e.remove()}))}})).observe(document.documentElement,{childList:!0})}createPreloadPromise(e){this.preloadPromise=new Promise((t=>{const a=new MutationObserver((a=>{for(const r of a){const a=r.target;switch(r.attributeName){case"data-ad-status":{const r=a.dataset.adStatus;return t("filled"===r?{isEmpty:!1,slot:e}:{isEmpty:!0,slot:e})}case"style":a.style.width="",this.fixHeightStyle(a)}}}));a.observe(e,{attributes:!0,attributeFilter:["data-ad-status","style"],attributeOldValue:!0}),e.parentNode&&a.observe(e.parentNode,{attributes:!0,attributeFilter:["style"]})}))}preloadSlot({slot:e}){return adBreak({}),this.preloadPromise}showSlot(e){if(e){const t=new d(this.getClickEventHandler(e));this.clickHandlerRegister.set(e,t),t.listen(e)}return Promise.resolve()}destroySlot(e){return c(this,null,(function*(){var t;return null==(t=this.clickHandlerRegister.get(e))||t.unListen(e),this.clickHandlerRegister.delete(e),this.removeClickEventListener(e),e.remove(),Promise.resolve()}))}fixHeightStyle(e){window.setTimeout((()=>{var t;let a=3,n=e;const s=["minHeight","height","maxHeight"];try{for(;a-- >0&&(n=null!=(t=null==n?void 0:n.parentElement)?t:null);)for(const e of s)n.style.removeProperty(e)}catch(e){(0,r._y)("Failed to fix height styles: ",e.message)}}),0)}}const p=h},47265:(e,t,a)=>{a.d(t,{Z:()=>m,z:()=>h});var r=a(26108),n=a(79098),s=a(26807),o=a(45692),i=a(69110),l=a(35742),d=a(52924),c=a(85623),u=(e,t,a)=>new Promise(((r,n)=>{var s=e=>{try{i(a.next(e))}catch(e){n(e)}},o=e=>{try{i(a.throw(e))}catch(e){n(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(s,o);i((a=a.apply(e,t)).next())})),h=(e=>(e[e.DestroyPrevious=2]="DestroyPrevious",e[e.ThrowError=0]="ThrowError",e[e.UsePrevious=1]="UsePrevious",e))(h||{});class p extends i.Z{constructor(){super(...arguments),this.providerName=l.oO.AnymindBlock,this.providerLoaderName=l.Po.Anymind,this.googleSlotEvents={slotRenderEnded:new WeakMap,impressionViewable:new WeakMap},this.existingSlots=new WeakMap}init(){return u(this,null,(function*(){try{yield Promise.all([(0,d.Z)(o.Z).load(),(0,d.Z)(s.Z).load()]),yield(0,c.bT)((e=>{const t=e.pubads(),a=e=>{t.addEventListener(e,(t=>{const a=this.googleSlotEvents[e].get(t.slot);null==a||a(t)}))};a("slotRenderEnded"),a("impressionViewable")})),this._loadPromise.resolve()}catch(e){this._loadPromise.reject(e)}}))}createSlot(e){return u(this,arguments,(function*({blockId:e,divId:t,existingSlotBehaviour:a=2,size:s}){return yield(0,c.bT)((o=>u(this,null,(function*(){var i;const l=o.pubads();let d=null;if(0!==a&&(d=null!=(i=l.getSlots().find((e=>e.getSlotElementId()===t)))?i:null,d)){const e=this.existingSlots.get(d);if(e)switch(a){case 1:return e;case 2:yield this.destroySlot(e)}}if(d=o.defineSlot(null!=e?e:n.L,s,t),!d)throw new Error("Failed to create googletag.Slot.");d.addService(l);const c={googleSlot:d,showPromise:new r.Z};return this.existingSlots.set(d,c),c}))))}))}preloadSlot({slot:e}){return new Promise((t=>{this.onGoogleEvent(e.googleSlot,"slotRenderEnded",(a=>{t({isEmpty:a.isEmpty,slot:e})})),this.onGoogleEvent(e.googleSlot,"impressionViewable",(t=>{e.showPromise.resolve()})),googletag.pubads().refresh([e.googleSlot])}))}showSlot(e){return e.showPromise.promise}destroySlot(e){return null==googletag||googletag.destroySlots([e.googleSlot]),Promise.resolve()}onGoogleEvent(e,t,a){this.googleSlotEvents[t].set(e,a)}}const m=p},69110:(e,t,a)=>{a.d(t,{Z:()=>i});var r=a(26108),n=a(3436);class s{handleEvent(){var e;null==(e=this.callback)||e.call(this)}}class o extends n.R{constructor(){super(...arguments),this.supportsRetries=!0,this.clickEventListener=new WeakMap}get loaded(){var e;return(null==(e=this.loadPromise)?void 0:e.state)===r.W.Fulfilled}get loadPromise(){return this._loadPromise}load(){return this._loadPromise||(this._loadPromise=new r.Z,this.init()),this._loadPromise.promise}hasPlaceholder(){return!1}getClickEventHandler(e){const t=this.getClickEventKey(e);let a=this.clickEventListener.get(t);return a||(a=new s,this.clickEventListener.set(t,a)),a}setClickEventListener(e,t){this.getClickEventHandler(e).callback=t}removeClickEventListener(e){const t=this.getClickEventKey(e);this.clickEventListener.delete(t)}getClickEventKey(e){return e}}const i=o},52924:(e,t,a)=>{a.d(t,{Z:()=>n});const r=new WeakMap,n=e=>{const t=r.get(e);if(t)return t;const a=new e;return r.set(e,a),a}},83142:(e,t,a)=>{a.d(t,{M:()=>n});const r=a(26667)._y.tag("colorScheme"),n=e=>{try{const t=e.getSlotElementId(),a=document.getElementById(t);if(!a)return;a.style.colorScheme="auto"}catch(e){r.log("Failed to set banner colorScheme.",e)}}},21698:(e,t,a)=>{a.d(t,{o:()=>n});const r=a(26667)._y.tag("testId"),n=(e,t)=>{try{const a=e.getSlotElementId(),n=document.getElementById(a);if(!n)return;if(1!==n.childElementCount)return void r.log(`Element ${a} has ${n.childElementCount} children (not 1).`);const s=n.firstElementChild;if(!(s&&s instanceof HTMLDivElement&&s.id.startsWith("google_ads_iframe_")))return void r.spoiler(s).log("Failed to set banner testId.");s.dataset.testid=t}catch(e){r.spoiler(e).log("Failed to set banner testId.")}}},52193:(e,t,a)=>{a.d(t,{Z:()=>d});var r=a(63904),n=a.n(r),s=a(87363),o=a.n(s),i=a(94671);const l=n().with("age-rating-badge"),d=({ageRating:e,mix:t=""})=>o().createElement("div",{className:(0,i.E)(l(),t)},e)},32922:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a(48225).Z},64264:(e,t,a)=>{a.d(t,{Z:()=>w});var r=a(63904),n=a.n(r),s=a(87363),o=a.n(s),i=a(4463),l=a(53644),d=a(5901),c=a(40184),u=a(98343),h=a(35090),p=a(96952),m=a(53722),v=a(41811),g=a(57681);const y=n().with("category-link");function f(e,t){return t===v.w5?"/":t===v.z8?v.qW:t===v.zW?v.WP:(0,g.QG)(e,{name:t})}const w=function(e){var t;const a=(0,i.TH)(),r=(0,c.b)(),n=(0,d.$)(null!=(t=e.clickDaemonParams)?t:{}),{children:g,categoryName:w,pathname:b,mix:E="",onClick:k,target:S,title:A,testId:I}=e,P=(0,s.useCallback)((e=>{(0,p.D)((()=>{n({action:{name:u.zx.CLICK}}),null==k||k(e)}))}),[k,n]);return o().createElement(l.rU,{className:`${y()} ${E} default-link`,"data-testid":I,state:{isInternalStep:!0},target:S,title:A,to:{pathname:b||f(r,w),search:w===v.zW?(0,h.Q)(a.search):(0,h.Q)((0,m.v6)(a))},onClick:P},g)}},450:(e,t,a)=>{a.d(t,{C:()=>s});var r=a(38096),n=a(40184);function s(){var e;const{tld:t}=(0,n.b)(),{componentsSettings:{copyright:{byTld:a}}}=(0,r.getDomainConfig)();return Boolean(null==(e=null==a?void 0:a[t])?void 0:e.required)}},88372:(e,t,a)=>{a.d(t,{Z:()=>A});var r=a(71487),n=a(85383),s=a(84819),o=a(53726),i=a(4824),l=a(33119),d=a(97808),c=a(98343),u=a(74085),h=a(34967),p=a(4915),m=a(31085),v=a(70602),g=a(40656),y=a(93298),f=a(15771),w=a(89592);const b=(0,y.M$)("DisplayInstallation",y.XG.Popup),{answerTimeoutToInstallationInMs:E}=c.addToHomeScreenSettings,k=["show-api-prompt","show-shortcut-popup","show-standalone-api-prompt"];class S extends i.P{constructor(e,t){super(e,t),this.handleVisibilityChange=()=>{return e=this,t=function*(){!1===document.hidden&&(this.removeVisibilityChangeListener(),this.showInstallationPromptPromise())},new Promise(((a,r)=>{var n=e=>{try{o(t.next(e))}catch(e){r(e)}},s=e=>{try{o(t.throw(e))}catch(e){r(e)}},o=e=>e.done?a(e.value):Promise.resolve(e.value).then(n,s);o((t=t.apply(e,null)).next())}));var e,t},this.appinstalledHandler=()=>{const e={type:this.props.type};this.sourceShortcut&&(e.source=this.sourceShortcut),b("appinstalled with params:",e),(0,h.NF)({},w.Ji.SHORTCUT_API_APPINSTALLED,e),v.Fj.apiAppInstalled((0,v.oU)({context:this.context,popupType:"system",source:this.sourceShortcut?(0,v.N7)(this.sourceShortcut):m.pR.CATALOG}))},this.shortcutManagerEventHandler=e=>{const{type:t,action:a,data:r}=e.data;"shortcut-manager"===t&&(k.includes(a)&&r.source?this.sourceShortcut=r.source:this.sourceShortcut=void 0)},this.disableShortcutButton=()=>{this.props.dispatch((0,l.tm)(!0))},this.waitForUserGestureToInstall=()=>{this.props.dispatch((0,l.I6)(!0))},this.stopWaitingForUserGestureToInstall=()=>{this.props.dispatch((0,l.I6)(!1))},this.showInstallationPromptCommonApi=e=>{const{shortcutEventPrompt:t,shortcutInstallationCb:a}=this.props;b(`showInstallationPromptCommonApi with source = ${e}, shortcutEventPrompt = ${t}`),t&&(v.Fj.show((0,v.oU)({context:this.context,popupType:"system",source:(0,v.aV)(e)})),t.prompt().then((()=>{this.props.dispatch((0,l.FJ)(void 0)),(0,h.NF)({},w.Ji.SHORTCUT_PROMPT_SHOW,{showPromptSource:e}),this.installationChecker.updateInstallationData(e),t.userChoice.then((t=>{v.Fj.click((0,v.oU)({context:this.context,popupType:"system",source:(0,v.aV)(e),result:"accepted"===t.outcome?"accepted":"rejected"})),"accepted"===t.outcome?((0,h.NF)({},w.Ji.SHORTCUT_USER_CHOICE_ACCEPTED),this.disableShortcutButton(),this.props.dispatch((0,l.w0)())):(this.props.dispatch((0,l.yf)(!0)),(0,h.NF)({},w.Ji.SHORTCUT_USER_CHOICE_DISMISSED)),null==a||a(t),this.props.dispatch(l.Nw)}))})).catch((()=>{this.waitForUserGestureToInstall()})))},this.showInstallationPromptPromise=()=>{const e={waitingPeriod:g.s2};b("options",e),this.installationChecker.checkInstallationCapability(e)&&(this.props.dispatch((0,l.M4)(!1)),this.showInstallationPrompt(m.Wp.VisibilityChange),window.setTimeout((()=>{this.stopWaitingForUserGestureToInstall()}),E))},this.showInstallationPrompt=e=>{this.showInstallationPromptCommonApi(e)},this.installationChecker=new p.Z}addVisibilityChangeListener(){"catalog"===this.props.type&&((0,f.wy)(this.context.abt.flags).visibilitychange||(0,s.v_)({on:"disable_pwa_promo"})||(b("addEventListener visibilitychange"),document.addEventListener("visibilitychange",this.handleVisibilityChange)))}removeVisibilityChangeListener(){b("removeEventListener visibilitychange"),document.removeEventListener("visibilitychange",this.handleVisibilityChange)}addAppinstalledListener(){b("add appinstalled"),window.addEventListener("appinstalled",this.appinstalledHandler)}removeAppinstalledListener(){b("remove appinstalled"),window.removeEventListener("appinstalled",this.appinstalledHandler)}initMessaging(){"game"===this.props.type&&d.Z.onAllMessages("shortcut-manager",this.shortcutManagerEventHandler,{withHistory:!0})}removeMessaging(){"game"===this.props.type&&d.Z.offAllMessages("shortcut-manager",this.shortcutManagerEventHandler)}componentDidUpdate(e){this.props.shortcutButtonFlag!==e.shortcutButtonFlag?this.showInstallationPrompt(m.Wp.Button):this.props.shortcutGameFlag!==e.shortcutGameFlag?this.showInstallationPrompt(m.Wp.Game):this.props.shortcutPopupFlag!==e.shortcutPopupFlag?this.showInstallationPrompt(m.Wp.Popup):this.props.shortcutInstallerFlag!==e.shortcutInstallerFlag?this.showInstallationPrompt(m.Wp.ShortcutInstaller):this.props.shortcutInlineBannerFlag!==e.shortcutInlineBannerFlag?this.showInstallationPrompt(m.Wp.InlineBanner):this.props.shortcutRecentGamesFlag!==e.shortcutRecentGamesFlag?this.showInstallationPrompt(m.Wp.RecentGames):this.props.shortcutRecentGamesButtonFlag!==e.shortcutRecentGamesButtonFlag?this.showInstallationPrompt(m.Wp.MyGamesInlineShortcutButton):this.props.shortcutMyGamesInlineFlag!==e.shortcutMyGamesInlineFlag?this.showInstallationPrompt(m.Wp.MyGamesInlineShortcutPopup):this.props.shortcutMyGamesDrawerFlag!==e.shortcutMyGamesDrawerFlag&&this.showInstallationPrompt(m.Wp.MyGamesDrawerShortcutPopup),this.props.shortcutUserGesturePrompt&&!e.shortcutUserGesturePrompt&&this.logUserGesturePrompt()}logUserGesturePrompt(){const{shortcutUserGesturePrompt:e}=this.props;v.Fj.show((0,v.oU)({context:this.context,popupType:"system",source:m.pR.USER_GESTURE})),null==e||e.userChoice.then((e=>{v.Fj.click((0,v.oU)({context:this.context,popupType:"system",source:m.pR.USER_GESTURE,result:"accepted"===e.outcome?"accepted":"rejected"}))})).finally((()=>{this.props.dispatch((0,l.r7)(void 0))}))}componentDidMount(){var e;this.initMessaging(),this.addAppinstalledListener(),(0,u.Z)()&&(v.Fj.installed(),null==(e=this.props.history)||e.listen((0,r.P)((()=>{v.Fj.installed()}),10*g.WT)))}componentWillUnmount(){this.removeAppinstalledListener(),this.removeMessaging()}render(){return null}}const A=(0,n.E)((0,o.$j)((function(e){return{shortcutInlineBannerFlag:e.shortcutInlineBannerFlag,shortcutButtonFlag:e.shortcutButtonFlag,shortcutInstallerFlag:e.shortcutInstallerFlag,shortcutEventPrompt:e.shortcutEventPrompt,shortcutGameFlag:e.shortcutGameFlag,shortcutPopupFlag:e.shortcutPopupFlag,shortcutRecentGamesFlag:e.shortcutRecentGamesFlag,shortcutMyGamesInlineFlag:e.shortcutMyGamesInlineFlag,shortcutMyGamesDrawerFlag:e.shortcutMyGamesDrawerFlag,shortcutRecentGamesButtonFlag:e.shortcutRecentGamesButtonFlag,shortcutInstallationCb:e.shortcutInstallationCb,shortcutUserGesturePrompt:e.shortcutUserGesturePrompt}}))(S))},99704:(e,t,a)=>{a.d(t,{Z:()=>W});var r=a(38096),n=a(8804),s=a(63904),o=a.n(s),i=a(87363),l=a.n(i),d=a(53726),c=a(4824),u=a(450),h=a(21363),p=a(40184),m=a(11510),v=a(92477);const g=o().with("footer-links"),y=()=>{const{tld:e}=(0,p.b)(),t=(0,m.T)(),a=(()=>{const{tld:e}=(0,p.b)(),{hostname:t}=(0,r.getDomainConfig)();return"ru"===e&&"yandex"===t})();return l().createElement("div",{className:g("wrap")},l().createElement("ul",{className:g("list")},l().createElement("li",{className:g("item")},l().createElement("a",{className:g("link"),href:t("license.link",{params:{tld:(0,v.T)(e)}}),rel:"noopener",target:"_blank"},t("license.text"))),l().createElement("li",{className:g("item")},l().createElement("a",{className:g("link"),href:t("confidential.link"),rel:"noopener",target:"_blank"},t("confidential.text"))),a&&l().createElement("li",{className:g("item")},l().createElement("a",{className:g("link"),href:t("recommendations.link"),rel:"noopener",target:"_blank"},t("recommendations.text"))),l().createElement("li",{className:g("item")},l().createElement("a",{className:g("link"),href:t("support.button.link"),rel:"noopener",target:"_blank"},t("support.button.text")))))},f=()=>{const{basePath:e,legalPages:t}=(0,r.getDomainConfig)(),a=(0,m.T)();return t?l().createElement("div",{className:g("wrap")},l().createElement("ul",{className:g("list")},Object.entries(t).sort(((e,t)=>e[1].footerOrder-t[1].footerOrder)).map((([t,r])=>{const n=a(`${r.pagePrefix}.link.text`,{withNoErrors:!0})||a(`${r.pagePrefix}.title`,{withNoErrors:!0});return r.hideLink||!n?null:l().createElement("li",{className:g("item"),key:t},l().createElement("a",{className:g("link"),href:`${e}${t}`,rel:"noopener",target:"_blank"},n))})))):l().createElement(y,null)},w=l().memo((({className:e,contentClassName:t})=>{const a=(0,u.C)();return l().createElement("article",{className:`${g()} ${e}`},l().createElement("div",{className:t},a&&l().createElement(h.ZP,{className:g("copyright"),isShortDescription:!1}),l().createElement(f,null)))}));var b=a(93569);const E=o().with("social"),k=l().memo((e=>{const t=(0,m.T)(),{children:a,socialNetworks:r,showDescription:n=!0}=e;return l().createElement("div",{className:E()},a,n&&l().createElement("span",{className:E("label")},t("social.text")),r.map((e=>{const a=t(`social.${e}`);return"-"===a?null:l().createElement("a",{className:E("icon"),href:a,key:e,target:"_blank"},l().createElement(b.Z,{type:`social-${e}`}))})))}));var S=(e=>(e.INSTAGRAM="instagram",e.PINTEREST="pinterest",e.SNAPCHAT="snapchat",e.TELEGRAM="telegram",e.TIKTOK="tiktok",e.VK="vk",e.ZEN="zen",e))(S||{});const A=k,I=[S.TELEGRAM,S.ZEN,S.TIKTOK],P=({children:e})=>l().createElement(A,{showDescription:!1,socialNetworks:I},e);var T=a(71852);const C=o().with("section"),R=e=>{const{children:t,headLevel:a,hasTitle:r=!0,onRef:n=()=>{},mix:s="",title:o,titleIcon:i}=e;return l().createElement("section",{className:`${C()} ${s}`,ref:n},r&&l().createElement(T.Z,{headLevel:a,icon:i,mix:C("title"),title:o}),l().createElement("div",{className:C("content")},t))};var D=a(33119),L=a(5825),O=a(34967),_=a(31085),x=a(70602),N=a(89592),B=a(94671);const M=o().with("footer"),H=()=>{var e;const t=(0,m.T)(),a=(0,r.getDomainConfig)(),s=(0,i.useCallback)((()=>{(0,O.NF)({},N.Ji.CLICK_PARTNER_BUTTON)}),[]);if(!(null==(e=a.componentsSettings.footer)?void 0:e.usePartnersBlock))return null;const o=t("partners.button.text.new"),d=t("partners.button.link");return l().createElement("article",{className:`${M("partners")}`},l().createElement("div",{className:M("background")}),l().createElement("div",{className:M("image")}),l().createElement(R,{hasTitle:!0,headLevel:3,mix:M("content"),title:t("partners.header")},l().createElement("p",{className:M("text")},t("partners.text")),l().createElement(n.z,{"data-testid":"FooterButton-Partner",href:d,rel:"noopener",size:40,target:"_blank",view:"primary",onClick:s},o)))},F=({disabled:e,hasShortcutFunctions:t,withoutShortcut:a,withPartners:s})=>{const{hasSideBar:o,tld:d,lang:c,baseHost:u,baseUrl:h,abt:v}=(0,p.b)(),g=(0,m.T)(),y=(0,i.useRef)(!1),f=(0,L.T)(),{secondaryShortcutButtonView:w,usePartnersBlock:b,onlyButtonInMobile:E,allowSidebar:k}=(0,r.getDomainConfig)().componentsSettings.footer||{};(0,i.useEffect)((()=>{a||!t||y.current||(y.current=!0,x.Fj.show((0,x.oU)({context:{baseHost:u,baseUrl:h,lang:c,tld:d,abt:v},popupType:"system",source:(0,x.aV)(_.Wp.Button)})))}),[d,c,u,h,a,t,v]);const S=(0,i.useCallback)((()=>{x.Fj.click((0,x.oU)({context:{baseHost:u,baseUrl:h,lang:c,tld:d,abt:v},popupType:"system",source:(0,x.aV)(_.Wp.Button),result:"accepted"})),f((0,D.JB)()),(0,O.NF)({},N.Ji.CLICK_SHORTCUT_BUTTON),(0,O.NF)({},N.Ji.CATALOG_SHORTCUT_CLICK,{shortcutSource:_.Wp.Button})}),[v,u,h,f,c,d]),A=(0,i.useCallback)((()=>{f((0,D.JB)()),(0,O.NF)({},N.Ji.CLICK_SIDEBAR_BUTTON),(0,O.NF)({},N.Ji.CATALOG_SHORTCUT_CLICK,{shortcutSource:_.Wp.Button})}),[f]);if(a||!t)return null;const I=o?"sidebar":"shortcut",P=!1,T=!s||!b,C=w&&!T;let B;return B=g(k?(o?"sidebar":"shortcut")+".description.text":"shortcut.description.text.desktop"),l().createElement("article",{className:M("shortcut",{sidebar:o,shown:t,only_button:P,only_shortcut_block:T})},t&&l().createElement(R,{hasTitle:!0,headLevel:3,mix:M("content"),title:g(`${I}.title.text`)},l().createElement("p",{className:M("text"),hidden:P},B),l().createElement(n.z,{className:M("shortcut-button"),"data-testid":"FooterButton-Shortcut",disabled:e,size:40,view:C?"secondary":"primary",onClick:o?A:S},g(`${I}.desktop.button.text`))))};l().memo((()=>{const e=(0,m.T)();return l().createElement("a",{className:M("link"),href:e("common.support.link"),rel:"noopener",target:"_blank"},e("common.support.help"))}));class $ extends c.P{constructor(){super(...arguments),this.handleShortcutButtonClick=()=>{this.props.dispatch((0,D.JB)()),(0,O.NF)({},N.Ji.CLICK_SHORTCUT_BUTTON),(0,O.NF)({},N.Ji.CATALOG_SHORTCUT_CLICK,{shortcutSource:_.Wp.Button})},this.handleSidebarButtonClick=()=>{this.props.dispatch((0,D.JB)()),(0,O.NF)({},N.Ji.CLICK_SIDEBAR_BUTTON),(0,O.NF)({},N.Ji.CATALOG_SHORTCUT_CLICK,{shortcutSource:_.Wp.Button})}}renderShortcutButton(){const{disableShortcutButton:e,withoutShortcut:t,hasShortcutFunctions:a,shortcutCancelled:r,withPartners:n}=this.props;return l().createElement(F,{disabled:e,hasShortcutFunctions:r||a,withPartners:n,withoutShortcut:t})}socialNetworks(){var e;return(null==(e=(0,r.getDomainConfig)().componentsSettings.footer)?void 0:e.disableSocialNetworks)?null:l().createElement(P,null,!1)}render(){const{feedPaddings:e,hasShortcutFunctions:t,type:a,withoutHorizontalLine:r,withPartners:n,withoutShortcut:s,shortcutCancelled:o,mix:i}=this.props,d=r?null:l().createElement("div",{className:M("horizontal-line")});return l().createElement("footer",{className:(0,B.E)(M({type:a}),e?"centered-content":"",i)},l().createElement("div",null,d,l().createElement("div",{className:M("blocks")},n&&l().createElement(H,null),this.renderShortcutButton()),!1),!1,l().createElement("div",{className:M("wrapper")},l().createElement("div",{className:""},d),l().createElement(w,{className:M("links")}),this.socialNetworks()))}}$.defaultProps={feedPaddings:!0,withPartners:!0};const W=(0,d.$j)((function(e){return{hasShortcutFunctions:Boolean(e.shortcutEventPrompt),disableShortcutButton:e.disableShortcutButton,shortcutCancelled:e.shortcutCancelled,theme:e.theme.value}}))($)},8037:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a(99704).Z},99888:(e,t,a)=>{a.d(t,{Z:()=>E});var r=a(87363),n=a.n(r),s=a(9579),o=a(40006);const i={badge:"badge-critical-module__badge--SfRrJ",hasIcon:"badge-critical-module__hasIcon--TrdEH",icon:"badge-critical-module__icon--Idlwl",text:"badge-critical-module__text--Zbf1f",type_event_game:"badge-critical-module__type_event_game--gdZMZ"},l=({text:e,title:t,colorsCSSProps:a,icon:r,type:l})=>{if(!r&&!e)return null;const d={backgroundColor:`var(${null==a?void 0:a.background})`,color:`var(${null==a?void 0:a.text})`},c=l&&i[`type_${l}`];return n().createElement("div",{className:(0,s.y)(i.badge,r&&i.hasIcon,c),style:d,title:t},!r&&e&&n().createElement(o.Z,{className:i.text,nowrap:!0,overflow:"ellipsis",variant:"badge-text"},e),(()=>{if(r&&"function"==typeof r){const e=r();return n().createElement("div",{className:i.icon},e)}return null})())};var d=a(63904),c=a.n(d),u=a(52193),h=a(5718),p=a(93569),m=a(94671);const v=["badge.direct","badge.new","badge.promo","badge.top"],g={"badge.direct":{background:"--color-blue-medium-400",text:"--color-blue-medium-100"},"badge.new":{background:"--color-blue-medium-400",text:"--color-blue-medium-100"},"badge.promo":{background:"--color-turquoise-500",text:"--color-turquoise-900"},"badge.top":{background:"--color-yellow-450",text:"--color-yellow-1000"}},y=e=>{if((e=>v.includes(e))(e))return g[e]},f=c().with("game-badges"),w={"badge.direct":()=>n().createElement(p.Z,{type:"thunderbolt"}),"badge.new":void 0,"badge.top":void 0,"badge.promo":void 0};class b extends r.Component{constructor(){super(...arguments),this.getStickyBadge=()=>{const{type:e,badgeTitle:t}=this.props;if(!e)return null;const a=y(e),r=(e=>{if(e)return w[e]})(e);return a?n().createElement(l,{colorsCSSProps:a,icon:r,text:t,title:t}):null}}render(){const{ageRating:e,gqRating:t,mix:a,noStickyBadges:r}=this.props,s=[],o=r?null:this.getStickyBadge();return o&&s.unshift(o),e&&s.unshift(n().createElement(u.Z,{ageRating:e,key:"age-rating",mix:(0,m.E)(f("age-rating-badge"),a)})),t&&s.unshift(n().createElement(h.Z,{isBackgroundTransparent:!0,isCornered:!0,key:"quality-score",mix:(0,m.E)(f("game-quality-badge"),a),value:t,withoutText:!0})),s}}b.defaultProps={mix:""};const E=(0,r.memo)(b)},37377:(e,t,a)=>{a.d(t,{Z:()=>Ge});var r=a(87363),n=a.n(r),s=a(45112),o=a(18546),i=a(98343),l=a(33252),d=a(13377);var c=a(53726),u=a(15771),h=a(83950),p=a(90380),m=a(61006),v=a(62010),g=a(38096),y=a(4824);const f=({event:e,normalizationMultiplier:t,once:a,place:r,type:s,uniqId:o,value:i})=>{const{baseUrl:l,deviceType:d}=n().useContext(y.Z),c=n().useMemo((()=>{const n=a?"":Math.random(),{hostname:c}=(0,g.getDomainConfig)(),u=(0,v.Bh)({event:e,domain:c,deviceType:d,place:r,sampling:"sampling"}),h=`event=${encodeURIComponent(u)}&value=${encodeURIComponent(i)}&uniqId=${encodeURIComponent(o)}&rnd=${encodeURIComponent(n)}&${v.ZS}=${encodeURIComponent(t)}`;return`${l}/pixel-counters/${s}.jpg?${h}`}),[l,d,t,o,r,s,e,i,a]);return n().createElement("img",{alt:"pixel-counter","data-counter-event":e,"data-counter-type":s,"data-counter-uniqid":o,"data-counter-value":i,src:c,style:{position:"absolute",width:0,height:0}})},w=({event:e,once:t=!0,place:a,type:r,uniqId:s,value:o})=>{const{abt:i,isPromoCounterEnabled:l}=n().useContext(y.Z),d=(0,u.$9)(i.flags,p.Z.pixelCounterReduction);return l&&a&&d?n().createElement(f,{event:e,normalizationMultiplier:d,once:t,place:a,type:r,uniqId:s,value:o}):null},b=e=>{const{line:t,listType:a,game:g,gameCardRef:y}=e,{pixelNames:f,addPixelName:b}=function(){const[e,t]=(0,r.useState)(new Set);return{pixelNames:e,addPixelName:(0,r.useCallback)((e=>t((t=>{if(t&&!t.has(e)){const a=new Set(t);return a.add(e),a}return t}))),[t])}}(),E=function(e,t){const{visibility_links:a}=e;return(0,r.useCallback)((()=>{(null==a?void 0:a.length)?(t("games_from_bk_hit"),Promise.all(a.map((t=>(0,o.Z)(t,{credentials:"include"}).catch((a=>{throw function({error:e,game:t,link:a}){var r;(0,l.H)({prefix:"GameCard",block:d.W.CATALOG,message:"Failed to hit visibility link",additional:{link:a}},e),null==(r=window.clickdaemonLog)||r.call(window,i.zx.BK_HIT_COUNTER_ERROR,{app_id:t.appID,link:a})}({link:t,error:a,game:e}),a}))))).catch((()=>{t("games_from_bk_hit_failed")}))):t("games_from_bk_no_hit_link")}),[a,t,e])}(g,b),k=function(e,t){const a=(0,m.j)();return(0,r.useMemo)((()=>(0,v.VX)({currentTab:a,listType:t,line:e})),[a,e,t])}(t,a),S=function(){const e=(0,c.v9)((e=>e.flags)),t=(0,u.$9)(e,p.Z.promoIntersactionObserverThreshold)||.9,[a,n]=(0,r.useState)(null);return(0,r.useEffect)((function(){n((0,h.V)("hit_bk_manager",{root:null,rootMargin:"0px",threshold:t}))}),[t]),a}(),A=function(e,t,a){const n=(0,c.v9)((e=>e.flags)),s=(0,u.nD)(n);let o=(0,r.useRef)();return(0,r.useCallback)((r=>{if(r.intersectionRatio<=0)return;const n=()=>{null==a||a.unobserve(t.current),window.clearTimeout(o.current),e()};if(s){if(!r.isIntersecting)return void window.clearTimeout(o.current);o.current=window.setTimeout(n,2e3)}else n()}),[t,e,a,s])}(E,y,S);return(0,s.qR)((()=>{(0,l.Kz)("game_card_promo_render",1,{prefix:"GameCard",message:"bk_promo render",block:d.W.CATALOG,additional:{isMobile:!1,isDesktop:!0,isTV:!1},source:"catalog"})})),(0,r.useEffect)((()=>{var e;const t=y.current;return(null==(e=g.visibility_links)?void 0:e.length)&&t&&S&&(b("games_from_bk_observer_set"),S.observe(t,A)),()=>{null==S||S.unobserve(t)}}),[b,g,y,S,A]),Array.from(f.values()).map((e=>n().createElement(w,{event:e,key:e,once:!1,place:k,type:"histogram",uniqId:"game_card_hit_link_counter",value:1})))};var E=a(85383),k=a(84819),S=a(63904),A=a.n(S),I=a(99815),P=a(82521),T=a(68712),C=a(77203),R=a(37797),D=a(24415);var L=a(93569),O=a(11510);const _=()=>{const e=(0,O.T)();return n().createElement("div",{className:"ContinuePlayingTitle-critical-catalog-module__wrapper--juB5F"},n().createElement("div",{className:"ContinuePlayingTitle-critical-catalog-module__title--ihxKe"},e("game-card.continue.title")),n().createElement(L.Z,{className:"ContinuePlayingTitle-critical-catalog-module__icon--BBck0",type:"arrow-pointer"}))};var x=a(99888),N=a(65473),B=a(55191),M=a(41811),H=Object.defineProperty,F=Object.getOwnPropertySymbols,$=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable,Z=(e,t,a)=>t in e?H(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,G=(e,t)=>{for(var a in t||(t={}))$.call(t,a)&&Z(e,a,t[a]);if(F)for(var a of F(t))W.call(t,a)&&Z(e,a,t[a]);return e};const j={withBadges:!0,withContinuePlaying:!0,withInfo:!0,withLogOnHover:!0,withMiddleLayerInsertSupport:!1,withQualityScore:!0,withTransform:!0},U={[M.co.SUGGESTED]:{withMiddleLayerInsertSupport:!0},[M.co.CATEGORIZED]:{oneLineDescription:!0,withMiddleLayerInsertSupport:!0},[M.co.PLAYED]:{withQualityScore:!1,withContinuePlaying:!1}},q={[M.NK.MULTIMORDA]:{withQualityScore:!1}},V={[M.xY.ACCENT_THUMB_HORIZONTAL]:{specialViewSettings:{horizontalAccentThumb:!0},supportVideo:{onlyLandscape:!1},withTransform:!1,withQualityScore:!1,withLogOnHover:!0},[M.xY.ACCENT_THUMB_VERTICAL]:{specialViewSettings:{verticalAccentThumb:!0},supportVideo:{onlyLandscape:!1},withTransform:!1,withQualityScore:!1,withLogOnHover:!0},[M.xY.ADAPTIVE_RECOMMENDED_NEW]:{supportVideo:{onlyLandscape:!0},withHyphens:!0},[M.xY.ALL_GAMES_DESKTOP]:{withBadges:!1,withHyphens:!0,withInfo:!1,withLogOnHover:!1,withMiddleLayerInsertSupport:!1},[M.xY.ALL_GAMES_MOBILE]:{withBadges:!1,withHyphens:!0,withInfo:!1,withLogOnHover:!1},[M.xY.ALL_GAMES_TABLET]:{withBadges:!1,withHyphens:!0,withInfo:!1,withLogOnHover:!1},[M.xY.CATEGORIZED_NEW_L]:{supportVideo:{onlyLandscape:!0}},[M.xY.HIT]:{withHyphens:!0,withIcon:!0,supportVideo:{onlyLandscape:!1},withLogOnHover:!0},[M.xY.HIT_M_LANDSCAPE]:{supportVideo:{onlyLandscape:!0},withLogOnHover:!0},[M.xY.HIT_M_PORTRAIT]:{specialViewSettings:{verticalAccentThumb:!0},supportVideo:{onlyLandscape:!1},withTransform:!1,withQualityScore:!1,withLogOnHover:!0},[M.xY.HIT_M_SQUARE]:{supportVideo:{onlyLandscape:!1},withLogOnHover:!0},[M.xY.HITGRID_M_SQUARE]:{withIcon:!1,withLogOnHover:!0},[M.xY.L]:{supportVideo:{onlyLandscape:!0}},[M.xY.M]:{},[M.xY.PREMIUM]:{},[M.xY.PREMIUM_BIG]:{supportVideo:{onlyLandscape:!0},withHyphens:!0},[M.xY.S]:{},[M.xY.SIZE_48_OLD]:{withInfo:!1,withTransform:!1},[M.xY.RECENT_GAMES_COMPACT]:{withInfo:!1,withTransform:!1},[M.xY.PROFILE_RECENT_GAMES]:{withHyphens:!0,withQualityScore:!1},[M.xY.RECENT_GAMES_COVER_LARGE]:{supportVideo:{onlyLandscape:!0},withQualityScore:!1},[M.xY.RECENT_GAMES_COVER_MEDIUM]:{supportVideo:{onlyLandscape:!0},withQualityScore:!1},[M.xY.RECENT_GAMES_COVER_MEDIUM_WITH_GAME_ICON]:{supportVideo:{onlyLandscape:!0},withCategory:!0,withHyphens:!0},[M.xY.RECENT_GAMES_COVER_SMALL]:{supportVideo:{onlyLandscape:!0},withQualityScore:!1},[M.xY.RECOMMENDED_NEW]:{supportVideo:{onlyLandscape:!0},withHyphens:!0},[M.xY.TV]:{supportVideo:{onlyLandscape:!0},withHyphens:!0},[M.xY.YOUR_GAMES]:{},[M.xY.YOUR_GAMES_FORCE]:{}};var z=a(74378),K=a(17242),Y=a(86551);function X(e,t,a){let r=t;for(;r;){if(r.classList.contains(a))return!0;if(r.isEqualNode(e))return!1;r=r.parentElement}return!1}var J=a(92213),Q=a(22066),ee=a(82027);function te(e,t){return t?e?`${e} shows-visible-debug-overlay-paint`:"shows-visible-debug-overlay-paint":e}class ae extends y.P{constructor(e){super(e),this.handleClick=e=>{this.containerClickedSession!==this.props.catalogSessionUid&&e.target instanceof HTMLElement&&X(e.currentTarget,e.target,"play")&&(this.containerClickedSession=this.props.catalogSessionUid),this.props.onClick&&this.props.onClick(e)},this.handleScroll=()=>{this.startWaiting(!1)},this.inViewContainerRefCb=e=>{var t,a;return this.inViewContainer=e,null==(a=(t=this.props).onRef)?void 0:a.call(t,e)},this.isContainerBeganToShow=!1}componentDidMount(){this.informer=new J.Z(this.inViewContainer),this.props.callbackOnComponentDidMount(this.inViewContainer),this.addHandlers(),this.startWaiting(!0)}componentDidUpdate(e){e.horizontalContainer!==this.props.horizontalContainer&&(e.horizontalContainer&&e.horizontalContainer.removeEventListener("scroll",this.handleScroll),this.props.horizontalContainer&&this.props.horizontalContainer.addEventListener("scroll",this.handleScroll,{passive:!0})),e.catalogSessionUid!==this.props.catalogSessionUid&&(this.removeHandlers(),this.addHandlers(),this.startWaiting(!0))}componentWillUnmount(){this.removeHandlers(),this.callbackTimeoutID&&this.cancelCallback()}callCallback(e){this.isElemVisible()&&(this.containerShownSession=this.props.catalogSessionUid,this.isContainerBeganToShow=!1,this.callbackTimeoutID=void 0,this.props.showCallback(e),this.removeHandlers(),(0,u.sv)(this.context.abt.flags)&&this.setState({wasShown:!0}))}addHandlers(){this.props.horizontalContainer&&this.props.horizontalContainer.addEventListener("scroll",this.handleScroll,{passive:!0}),window.addEventListener("scroll",this.handleScroll,{passive:!0})}removeHandlers(){this.props.horizontalContainer&&this.props.horizontalContainer.removeEventListener("scroll",this.handleScroll),window.removeEventListener("scroll",this.handleScroll)}startWaiting(e){this.containerShownSession!==this.props.catalogSessionUid&&(this.isElemVisible()?(this.isContainerBeganToShow=!0,this.callbackTimeoutID||(this.callbackTimeoutID=window.setTimeout((()=>{this.callCallback(e)}),this.props.showCallbackTimeout))):this.isContainerBeganToShow&&this.cancelCallback())}isElemVisible(){const{scrollMode:e,showThreshold:t}=this.props;return e===ee.Qd.horizontal?this.informer.isPercentElemVisible(ee.Qd.horizontal,t)&&this.informer.isPercentElemVisible(ee.Qd.vertical,t):this.informer.isPercentElemVisible(ee.Qd.vertical,t)}cancelCallback(){window.clearTimeout(this.callbackTimeoutID),this.callbackTimeoutID=void 0,this.containerShownSession=void 0,this.isContainerBeganToShow=!1}render(){var e;const{mix:t,children:a,onMouseEnter:r,onMouseLeave:s,onTouchStart:o,onTouchStartCapture:i,testId:l,onMouseMove:d}=this.props;return n().createElement("div",{className:te(t,null==(e=this.state)?void 0:e.wasShown),"data-testid":l,ref:this.inViewContainerRefCb,onClick:this.handleClick,onMouseEnter:r,onMouseLeave:s,onMouseMove:d,onTouchStart:o,onTouchStartCapture:i},a)}}ae.defaultProps={showCallback:()=>{},callbackOnComponentDidMount:()=>{},showCallbackTimeout:800,showThreshold:.5,attrs:{}},ae.defaultState={wasShown:!1};const re=(0,c.$j)((function(e){var t;return{catalogSessionUid:Boolean(null==(t=e.middleLayerInGameData)?void 0:t.show)?Q.y:e.catalogSessionUid}}))(ae);var ne=a(482);const se=(0,c.$j)((function(e){return{catalogSessionUid:e.catalogSessionUid}}))((e=>{const{catalogSessionUid:t,horizontalContainer:a,showCallbackTimeout:s=800,showThreshold:o=.5,showCallback:i=()=>{},onClick:l}=e,d=(0,r.useRef)(!0),c=(0,r.useRef)(""),u=(0,r.useRef)(null),h=(0,r.useCallback)((()=>{u.current&&i(d.current)}),[i]);(0,r.useEffect)((()=>{function e(){d.current=!1}return null==a||a.addEventListener("horizontalScroll",e,{passive:!0}),()=>{null==a||a.removeEventListener("horizontalScroll",e)}}),[a]),(0,ne.V)({ref:u,onShow:h,threshold:o,delay:s});const{mix:p,children:m,onMouseEnter:v,onMouseLeave:g,onTouchStart:y,onTouchStartCapture:f,testId:w,onMouseMove:b}=e;return n().createElement("div",{className:p,"data-testid":w,ref:t=>{var a;return u.current=t,null==(a=e.onRef)?void 0:a.call(e,t)},onClick:e=>{c.current!==t&&e.target instanceof HTMLElement&&X(e.currentTarget,e.target,"play")&&(c.current=t,!u.current)||null==l||l(e)},onMouseEnter:v,onMouseLeave:g,onMouseMove:b,onTouchStart:y,onTouchStartCapture:f},m)}));var oe=a(1779),ie=a(40184),le=a(33119),de=a(52157),ce=a(33124),ue=a(22823),he=a(94671),pe=a(52706),me=a(92211),ve=a(96952),ge=a(27609),ye=a(36918),fe=a(58226),we=a(40656),be=a(49659),Ee=a(70091),ke=a(57681),Se=Object.defineProperty,Ae=Object.defineProperties,Ie=Object.getOwnPropertyDescriptors,Pe=Object.getOwnPropertySymbols,Te=Object.prototype.hasOwnProperty,Ce=Object.prototype.propertyIsEnumerable,Re=(e,t,a)=>t in e?Se(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,De=(e,t)=>{for(var a in t||(t={}))Te.call(t,a)&&Re(e,a,t[a]);if(Pe)for(var a of Pe(t))Ce.call(t,a)&&Re(e,a,t[a]);return e},Le=(e,t)=>Ae(e,Ie(t));const Oe=A().with("game-card");class _e extends r.Component{constructor(e,t){super(e,t),this.expandingThumbnailTimeoutId=null,this.isExpandingThumbnailEnabled=!1,this.tapOverCaptureTimeoutId=null,this.getHandleHover=e=>()=>{var t,a,r,n,s;const{game:o,onTapHoverCapture:i}=this.props;(this.isExpandingThumbnailEnabled||i)&&(null==(t=this.props.isUserScrolling)?void 0:t.current)&&!0===e||(this.setState({hover:e}),e?null==(r=(a=this.props).onHover)||r.call(a,o):null==(s=(n=this.props).onUnhover)||s.call(n,o))},this.handleExpandingThumbShow=()=>{this.sendClickDaemonLog("expanding_thumb_show")},this.handleExpandingThumbHide=e=>{this.sendClickDaemonLog("expanding_thumb_hide",{duration:e})},this.handleMouseMove=()=>{this.state.showExpandingThumbnail||this.state.hover||this.handleHoverOn()},this.handleTapOut=e=>{this.state.hoverTs!==e.timeStamp&&(this.setState({hover:!1}),window.removeEventListener("touchstart",this.handleTapOut))},this.handleTapOver=e=>{this.props.onTapHoverCapture||(this.state.hover?e.stopPropagation():(this.setState({hover:!0,hoverTs:e.timeStamp}),window.addEventListener("touchstart",this.handleTapOut,{passive:!0})))},this.handleTapOverCapture=()=>{const{game:e,isUserScrolling:t,onTapHoverCapture:a,onTapUnhoverCapture:r,forceHover:n}=this.props;a&&((null==t?void 0:t.current)||(n?null==a||a(e):this.state.hover||(this.setState({hover:!0}),null==a||a(e)),this.tapOverCaptureTimeoutId&&clearTimeout(this.tapOverCaptureTimeoutId),this.tapOverCaptureTimeoutId=setTimeout((()=>{this.tapOverCaptureTimeoutId=null,this.setState({hover:!1}),null==r||r(e)}),10*we.WT)))},this.handleClick=e=>{var t;const a=e.target;let r;r=(null==a?void 0:a.classList.contains(Oe(N.V.gameInfo)))?oe.a$.INFO:(null==a?void 0:a.classList.contains(Oe("title")))?oe.a$.TITLE:a.closest(".expanding-thumb__info")?oe.a$.EXPANDING_THUMB_INFO:a.closest(".expanding-thumb__button")?oe.a$.EXPANDING_THUMB_BUTTON:a.closest(".expanding-thumb__video")?oe.a$.EXPANDING_THUMB_VIDEO:a.closest(".expanding-thumb__header")?oe.a$.EXPANDING_THUMB_HEADER:a.closest(".expanding-thumb__description")?oe.a$.EXPANDING_THUMB_DESCRIPTION:a.closest(".expanding-thumb")?oe.a$.EXPANDING_THUMB:"number"==typeof this.props.moreGamesCount?oe.a$.SHOW_MORE:oe.a$.CARD;const n=this.context.oneTabPWA,s=(0,me.V)(null==(t=this.context.location)?void 0:t.entryQuery,window.navigator.userAgent),o=n||s,c=this.sendClickDaemonLog(i.zx.CLICK,{clickElement:r,isImmediateSend:o});this.handleHoverOff();const{appID:u,click_link:h}=this.props.game;h&&fetch(h).then((e=>{if(200!==e.status)throw new Error(`Game click_link fetch return ${e.status}`)})).catch((e=>{(0,l.H)({prefix:"GameCard",block:d.W.CATALOG,message:"Failed to fetch click link",additional:{clickLink:h}},e)})),this.props.onClick&&this.props.onClick(e,u,c)},this.hideExpandingThumb=()=>{this.setState({showExpandingThumbnail:!1})},this.sendShowParams=e=>{const{baseUrl:t,recommenderApiUrl:a}=this.context;this.setState({firstScreen:e},(()=>{(0,le.yO)({appID:this.props.game.appID,baseUrl:t,recommenderApiUrl:a}),this.sendClickDaemonLog(i.zx.SHOW)}))},this.gameOpened=()=>{const{game:e,onGameOpen:t}=this.props;(0,ve.D)((()=>{null==t||t(e.appID)}))};const{size:a,forceHover:r,listType:s,redirParams:o}=e,{uatraits:c}=this.context,h=(null==c?void 0:c.isTablet)||(0,pe.X)();this.config=function(e,t,a){const r=V[e];if(!r)return console.error(`Config for size=${e} absence, please, use size that has config`),j;const n=U[t]||{},s=q[a]||{};return G(G(G(G({},j),n),s),r)}(a,s,o.wrapperName),this.expandingMode=(0,u.UZ)(t.abt.flags),this.isExpandingThumbnailEnabled=(s===M.co.SUGGESTED||s===M.co.CATEGORIZED)&&Boolean(this.expandingMode)&&!h,this.hasVideo=this.canShowVideoPreview(),this.showBadgesOnlyOnHover=(0,k.v_)({on:"continue_playing.cover"})||(0,k.v_)({on:"continue_playing.badge"}),this.handleHoverOn=this.getHandleHover(!0),this.handleHoverOff=this.getHandleHover(!1),this.state={firstScreen:!0,hover:Boolean(r),showExpandingThumbnail:!1},this.redirParams=this.generateMetrikaParams(),this.gameCardRef=n().createRef()}get firstScreen(){var e,t;return(null!=(t=null==(e=this.props.redirParams)?void 0:e.firstScreen)?t:this.state.firstScreen)?1:0}componentDidMount(){this.props.forceUnhoverRef&&(this.props.forceUnhoverRef.forceUnhover=()=>{this.setState({hover:!1}),this.tapOverCaptureTimeoutId&&(clearTimeout(this.tapOverCaptureTimeoutId),this.tapOverCaptureTimeoutId=null)})}componentDidUpdate(e,t){const{game:a,forceHover:r,listType:n,page:s}=this.props,{forceHover:o}=e;if(e.page!==s&&this.redirParams&&(this.redirParams.page=s),e.size!==this.props.size&&console.warn("Size should not change in GameCard. Please, create other GameCard"),r!==o&&this.setState({hover:null!==this.tapOverCaptureTimeoutId||Boolean(r)}),this.isExpandingThumbnailEnabled){if(!t.hover&&this.state.hover){const e=300;this.expandingThumbnailTimeoutId=setTimeout((()=>{this.setState({showExpandingThumbnail:!0})}),e)}t.hover&&!this.state.hover&&(this.expandingThumbnailTimeoutId&&clearTimeout(this.expandingThumbnailTimeoutId),this.setState({showExpandingThumbnail:!1}))}const{withLogOnHover:i}=this.config;if(i){if(!t.hover&&this.state.hover){const{block:e,block_index:t,same_block_index:r,col:s,row:o,first_screen:i,carousel_size:l,card:d,wrapper:c,elem:u,page:h}=this.generateMetrikaParams();ce.H.dispatch((0,de.b8)({appId:a.appID,blockIndex:t,block:e,col:s,row:o,card:d,wrapper:c,firstScreen:i,carouselSize:l,elem:u,hasVideo:this.hasVideo,autoplay:Boolean(this.props.forceHover),item:"game",listType:n,page:h,requestId:a.requestId,sameBlockIndex:r}))}t.hover&&!this.state.hover&&ce.H.dispatch((0,de.nn)({appId:a.appID}))}this.props.forceUnhoverRef&&(this.props.forceUnhoverRef.forceUnhover=()=>{this.setState({hover:!1}),this.tapOverCaptureTimeoutId&&(clearTimeout(this.tapOverCaptureTimeoutId),this.tapOverCaptureTimeoutId=null)})}componentWillUnmount(){this.expandingThumbnailTimeoutId&&clearTimeout(this.expandingThumbnailTimeoutId),this.tapOverCaptureTimeoutId&&clearTimeout(this.tapOverCaptureTimeoutId),this.props.forceUnhoverRef&&(this.props.forceUnhoverRef.forceUnhover=void 0)}shouldComponentUpdate(e,t){return(0,fe.V)(this,e,t,["location","redirParams"])}sendClickDaemonLog(e,t){var a,r;const{redirParams:n,navigator:s,rtxReqid:o}=this.props,{game:i,size:l,moreGamesCount:d}=n,c=this.generateMetrikaParams(),u={app_id:i.appID,block:c.block,block_index:c.block_index,card:l,col:c.col,first_screen:this.firstScreen?1:0,has_video:this.hasVideo,item:"game",page:c.page,row:c.row,rtx_reqid:this.context.rtxReqid||o||"",same_block_index:null!=(a=c.same_block_index)?a:0,source:i.source,url:(0,be.e)().href,wrapper:c.wrapper};if(i.recentlyPlayed&&(u.my_games_indication=1),i.requestId&&(u.request_id=i.requestId),i.gamesRequestId&&(u.games_request_id=i.gamesRequestId),i.featureReason&&(u.is_events_promo=1),(null==n?void 0:n.carouselSize)&&(u.carousel_size=n.carouselSize),"click"===e){const{multimorda:e}=this.context;if((null==t?void 0:t.clickElement)===oe.a$.INFO){const t=(0,be.e)();u.click_url=s.createHref(De(De({},t),(0,ee.Rp)(Boolean(e),i.appID,t.search)))}else u.click_url=s.createHref({pathname:(0,ke.TI)(this.context,{appID:i.appID})});u.elem=null==t?void 0:t.clickElement}"expanding_thumb_hide"===e&&(u.duration=null==t?void 0:t.duration);const h=(0,ue.L)();if(h)for(const[e,t]of Object.entries(h.params))u[e]=t;return"number"==typeof d&&(u.item="block",delete u.app_id),null==(r=window.clickdaemonLog)||r.call(window,e,u,null==t?void 0:t.isImmediateSend),u}_renderCaption(){var e,t;const{hideDescription:a,isCaption:r,withIcon:s,withShortDescription:o}=this.props;if(a||!r)return null;const i=Oe("description",{"with-hyphens":this.config.withHyphens?"yes":"no"}),{game:l,isErrorPage:d,listType:c}=this.props,u=`${Oe("title")} ${Oe("no-caption")}`;return n().createElement(Ne,{className:i,config:this.config,game:l,gameCardConfig:this.config,gameOpened:this.gameOpened,isErrorPage:d,listType:c,redirParams:this.redirParams,titleClassName:u,withCategory:null==(e=this.config)?void 0:e.withCategory,withIcon:null!=(t=this.config.withIcon)?t:s,withShortDescription:o})}get rowForMetrikaParams(){const{game:e,row:t,redirParams:a}=this.props;return void 0===t?void 0!==e.row?e.row-((null==a?void 0:a.correctRow)||0):0:t}generateMetrikaParams(){const{hasRecentGamesNumber:e,page:t,redirParams:a,rtxReqid:r}=this.props,{loggingType:n,carouselSize:s,column:o,sameBlockIndex:i,listCategory:l,game:d,line:c,moreGamesCount:u,listType:h,size:p}=a,m="profile"===t?"profile":l&&`cat_${l}`||h||t;let v=c;h!==M.co.PLAYED&&"profile"!==m&&(v+=e);const g={block:null!=n?n:m,block_index:v,card:p,carousel_size:s,col:(null!=o?o:d.column)||0,first_screen:this.firstScreen,page:t,rn:(0,Ee.Bt)(),row:this.rowForMetrikaParams,rtx_reqid:this.context.rtxReqid||r||"",same_block_index:null!=i?i:0,wrapper:null==a?void 0:a.wrapperName,request_id:d.requestId};return d.gamesRequestId&&(g.games_request_id=d.gamesRequestId),"number"==typeof u&&(g.elem="more_games"),g}renderExpandingThumbnail(){const e="undefined"!=typeof window&&(0,be.e)().hash.startsWith("#app=");if(!this.isExpandingThumbnailEnabled||e||!this.state.showExpandingThumbnail||!this.gameCardRef.current)return null;const{carouselWrapperRef:t,containerRef:a,game:r,gameVideoIdSuffix:s}=this.props;return n().createElement(Y.i,{carouselWrapperRef:t,containerRef:a,game:r,gameCardRef:this.gameCardRef.current,gameVideoProps:{videoIdSuffix:s},hideThumb:this.hideExpandingThumb,mode:this.expandingMode,redirParams:this.redirParams,onHide:this.handleExpandingThumbHide,onShow:this.handleExpandingThumbShow})}canShowVideoPreview(){var e,t;const{disableVideos:a,game:r}=this.props,n=null==(t=null==(e=r.media)?void 0:e.videos)?void 0:t[0];if(!this.config.supportVideo||a||!n)return!1;const{width:s,height:o,previewUrl:i}=n;if(!this.config.supportVideo.onlyLandscape)return Boolean(i);const l=s>o||this.isExpandingThumbnailEnabled;return Boolean(i&&l)}getAgeRating(){var e;const{hasAgeRating:t,game:a}=this.props;if(!t)return;const r=null==(e=a.features)?void 0:e.age_rating;return!r||(parseInt(r,10)||0)<16?void 0:r}renderBadges(){const{game:e,hasRating:t,noStickyBadge:a}=this.props,{badgeTitle:r,badgeType:s}=e.badge||{};if(!this.config.withBadges)return null;const o=e.recentlyPlayed&&this.showBadgesOnlyOnHover;return n().createElement(x.Z,{ageRating:this.getAgeRating(),badgeTitle:r,gqRating:this.config.withQualityScore?e.gqRating:void 0,mix:o?Oe("show-on-hover"):"",noStickyBadges:a||o,rating:t?e.rating:void 0,type:s})}renderTVBadges(){if(!this.props.game.isRecentTVGame)return;const{badgeTitle:e,badgeType:t}=this.props.game.badge||{};return n().createElement(x.Z,{ageRating:this.getAgeRating(),badgeTitle:e,type:t})}renderCardCover(){var e,t,a;const{game:r,gameVideoIdSuffix:s,isErrorPage:o,isForcePromoCover:i,listType:l,moreGamesCount:d,noAutoPlay:c,promo:u,size:h}=this.props,p=this.hasVideo&&!this.isExpandingThumbnailEnabled,m="number"!=typeof d,v=null==(e=null==u?void 0:u.images)?void 0:e[0];let g=v&&i?Le(De({},r.media),{cover:v}):r.media;const y=null==(t=this.config.specialViewSettings)?void 0:t.verticalAccentThumb;return p?n().createElement(K.Z,{alt:r.title,config:this.config,game:r,hover:this.state.hover,isErrorPage:o,listType:l,media:g,mix:(0,he.E)(Oe("video-card"),y&&Oe("video-card",{"vertical-shift":m}),(null==(a=this.config.specialViewSettings)?void 0:a.verticalAccentThumb)&&Oe("video-card",{"vertical-shift":m}),Oe(N.V.gameUrl)),noAutoPlay:c,redirParams:this.redirParams,showPortraitOnly:y,size:h,skipPoster:i,useVideoThumbnailForCover:y,videoIdSuffix:s}):(g=v&&(i||h===M.xY.L)?Le(De({},r.media),{cover:v}):r.media,n().createElement(Be,{config:this.config,game:r,gameOpened:this.gameOpened,isErrorPage:o,listType:l,media:g,redirParams:this.redirParams,size:h}))}renderGameInfo(){const{game:e,hasInfo:t,isErrorPage:a,listType:r,size:s}=this.props;return Boolean(!a&&this.config.withInfo&&t&&!this.isExpandingThumbnailEnabled)?n().createElement(Me,{config:this.config,game:e,isErrorPage:a,listType:r,redirParams:this.redirParams,showOnlyOnCardHover:Boolean(e.recentlyPlayed)&&this.showBadgesOnlyOnHover}):null}render(){var e,t,a;const{flags:r,game:s,hasTransform:o,hideLabels:i,horizontalContainer:l,horizontalContainerRef:d,isHighlighted:c,listType:h,mix:p,moreGamesCount:m,scrollMode:v,size:g,useNewLogging:y}=this.props,f=null!=l?l:null==d?void 0:d.current,w=!(this.isExpandingThumbnailEnabled||!this.config.withTransform)&&(null==o||o),b=`${Oe({size:g,transform:w,type:h,highlighted:c,fullHeight:this.isExpandingThumbnailEnabled,"recently-played":s.recentlyPlayed})} ${p}`,E=y?se:re,S="number"==typeof m;return n().createElement(E,{horizontalContainer:f,mix:b,scrollMode:v,showCallback:this.sendShowParams,showCallbackTimeout:(0,u.l6)(r),testId:`GameCard-${s.appID}`,onClick:this.handleClick,onMouseEnter:this.handleHoverOn,onMouseLeave:this.handleHoverOff,onMouseMove:this.handleMouseMove,onRef:(0,ge.l)(this.props.onRef,this.gameCardRef),onTouchStart:this.handleTapOver,onTouchStartCapture:this.handleTapOverCapture},this.props.children,n().createElement("div",{className:Oe("graphic",{size:g}),"data-nosnippet":"true",style:{background:(null==(e=this.config.specialViewSettings)?void 0:e.verticalAccentThumb)?s.media.cover.mainColor:void 0}},this.renderCardCover(),S?n().createElement(B.Z,{gamesCount:m}):n().createElement(n().Fragment,null,this.renderBadges(),(null==(t=this.config.specialViewSettings)?void 0:t.horizontalAccentThumb)&&n().createElement(I.H,{game:s}),(null==(a=this.config.specialViewSettings)?void 0:a.verticalAccentThumb)&&n().createElement(P.P,{game:s})),n().createElement(k.hW,{on:["continue_playing.cover"],onComponent:this.config.withContinuePlaying&&s.recentlyPlayed&&n().createElement(D.L,null)}),n().createElement(k.hW,{on:["continue_playing.badge"],onComponent:this.config.withContinuePlaying&&s.recentlyPlayed&&n().createElement(R.V,null)})),!S&&n().createElement(n().Fragment,null,!0!==i&&this._renderCaption(),this.renderGameInfo()),this.renderExpandingThumbnail())}}_e.defaultProps={mix:"",listCategory:"",hasAgeRating:!0,hasInfo:!0,hasRating:!0,hasTransform:!0,isErrorPage:!1},_e.contextType=y.Z;const xe=n().memo((0,E.E)((0,c.$j)((function(e,t){var a;const{isErrorPage:r,params:n,location:s}=t,o=(0,ye.nU)(e,s,n),{recentGames:i,tagID:l}=e,d=null==(a=e.middleLayerInGameData)?void 0:a.appId,c=(0,ye.mT)({currentTab:o,isErrorPage:r,recentGames:i,tagID:l});return{disableVideos:e.disableVideos,flags:e.flags,hasRecentGames:e.hasRecentGames,hasRecentGamesNumber:Number(Boolean(c)),currentTab:o,rtxReqid:e.rtxReqid,promo:(0,ye.G1)(e.promos,t.game.appID),page:(0,ye.L8)({currentTab:o,tagID:l,isErrorPage:r,middleLayerAppId:d})}}))(_e))),Ne=n().memo((e=>{var t;const a=e.gameCardConfig.withContinuePlaying&&e.game.recentlyPlayed,r=e.config.oneLineDescription||(0,k.v_)({on:"continue_playing.title"})&&a,{categoryDataMappedByID:s}=(0,ie.b)(),o=null==(t=e.game.categoryIDs)?void 0:t[0],i=e.withCategory&&"number"==typeof o?s[o]:null;return n().createElement("div",{className:e.className},n().createElement(N.Z,{config:e.config,game:e.game,ignoresTvNavigation:!0,infoPage:!1,isErrorPage:e.isErrorPage,key:`${e.game.appID}-description`,listType:e.listType,mixElem:Oe(N.V.gameUrl,{"contains-image":!1}),redirParams:e.redirParams,onClick:e.gameOpened},e.withIcon&&n().createElement(z.Z,{media:e.game.media,mix:Oe("icon"),size:M.xY.SIZE_144_OLD}),n().createElement("span",{className:(0,he.E)(e.titleClassName,r?Oe("one-line"):null),title:e.game.title},e.game.title),e.withShortDescription&&n().createElement("p",{className:Oe("short-description")},e.game.shortDescription),i&&n().createElement(T.Z,{mix:Oe("category"),name:i.name,title:i.title,type:C.q.CLEAR,withIcon:!1}),n().createElement(k.hW,{on:["continue_playing.title"],onComponent:a&&n().createElement(_,null)})))})),Be=n().memo((e=>n().createElement(N.Z,{config:e.config,game:e.game,ignoresTvNavigation:!1,infoPage:!1,isErrorPage:e.isErrorPage,key:`${e.game.appID}-cover`,listType:e.listType,mixElem:Oe(N.V.gameUrl,{"contains-image":!0}),redirParams:e.redirParams,onClick:e.gameOpened},n().createElement(z.Z,{alt:e.game.title,media:e.media,mix:Oe("image"),size:e.size})))),Me=n().memo((e=>n().createElement(N.Z,{config:e.config,game:e.game,ignoresTvNavigation:!1,infoPage:!0,isErrorPage:e.isErrorPage,key:`${e.game.appID}-info`,listType:e.listType,mixElem:(0,he.E)(Oe(N.V.gameInfo,{"contains-image":!1}),e.showOnlyOnCardHover?Oe("show-on-hover"):""),redirParams:e.redirParams})));var He=Object.defineProperty,Fe=Object.getOwnPropertySymbols,$e=Object.prototype.hasOwnProperty,We=Object.prototype.propertyIsEnumerable,Ze=(e,t,a)=>t in e?He(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;const Ge=e=>{const t=(0,r.useRef)(null);return n().createElement(xe,((e,t)=>{for(var a in t||(t={}))$e.call(t,a)&&Ze(e,a,t[a]);if(Fe)for(var a of Fe(t))We.call(t,a)&&Ze(e,a,t[a]);return e})({onRef:t},e),e.game.source===M.yH&&n().createElement(b,{game:e.game,gameCardRef:t,line:e.line,listType:e.listType}))}},65473:(e,t,a)=>{a.d(t,{Z:()=>D,V:()=>R});var r=a(63904),n=a.n(r),s=a(87363),o=a.n(s),i=a(4463),l=a(40184),d=a(33119),c=a(5825),u=a(94671),h=a(19079),p=a(34967),m=a(82027),v=a(96952),g=a(49659);var y=a(95765);var f=a(88333),w=a(1779),b=a(53726),E=a(61006),k=a(52706),S=a(41811),A=a(15771);var I=a(63662),P=a(89592);const T=n(),C=(0,w.ZP)([w.nh.onClickGamePage],P.SS.GAME)((e=>{const{actionSource:t,children:a,disableGameOpeningOnClick:r,game:n,mix:f,onClick:w,onClickGamePage:b,onRef:E,pos:{listType:k}={}}=e,S=(0,c.T)(),{categoryDataMappedByID:A}=(0,l.b)(),I=(0,i.TH)(),P=(0,i.s0)(),T=(0,c.C)((e=>e.user.payCurrency)),C=(0,s.useMemo)((()=>(0,h.b)({categoryDataMappedByID:A,game:n,payCurrency:T})),[A,n,T]),R=(0,s.useMemo)((()=>{const e=new URLSearchParams;return e.append("app",n.appID.toString()),e.toString()}),[n.appID]),D=(0,s.useCallback)((()=>{var e,t,a;P({hash:R,search:I.search},{state:{gameSource:n.source,isInternalStep:!0}}),history.replaceState({isInternalStep:!0},document.title,(e=n.appID,t=(0,g.e)().pathname,a=I.search,"/games/"!==t&&(t=(0,y.D)(t)),1===a.length&&"?"===a&&(a=""),`${t}${a}#app=${e}`))}),[n.appID,n.source,R,I.search,P]),L=(0,s.useCallback)((e=>{r&&e.stopPropagation(),(0,p._H)(C),w&&w(e),(0,v.D)((()=>{D()})),(0,v.D)((()=>{S((0,d.L1)({actionSource:t,listType:k}))})),b&&b({action:{name:m.fl.clickGamePage,source:t}})}),[t,r,S,C,D,w,b,k]);return o().createElement("div",{className:(0,u.E)("game-url","GameInfoPageUrl-critical-catalog-module__root--euBRo",f),ref:E,onClick:L},a)}));var R=(e=>(e.gameInfo="game-info",e.gameUrl="game-url",e))(R||{});const D=({config:e,game:t,infoPage:a,ignoresTvNavigation:r,isErrorPage:n,listType:s,mixElem:i="",redirParams:l,onClick:d,onRef:c,children:u=null})=>{const{clickDaemonParams:h}=(0,I.b)(),p=function(){const e=(0,E.j)(),t=(0,b.v9)((e=>e.isSearchCrawler));return function(e,t,a){return Boolean(!a&&e!==S.zt&&(0,A.d0)(t)&&!(0,k.X)())}(e,(0,b.v9)((e=>e.flags)),t)}(),v=Boolean((null==e?void 0:e.withMiddleLayerInsertSupport)&&p);return a?o().createElement(C,{actionSource:m.zD.picture,disableGameOpeningOnClick:v,game:t,isErrorPage:n,mix:T(i),page:null==h?void 0:h.page,pos:{listType:s},requestId:t.requestId,wrapperName:null==h?void 0:h.wrapper,onClick:d,onRef:c},u):o().createElement(f.Z,{disableGameOpeningOnClick:v,disableHeader:!1,game:t,ignoresTvNavigation:r,isErrorPage:n,mix:T(i),pos:{listType:s},redirParams:l,wrapperName:null==h?void 0:h.wrapper,onClick:d,onRef:c},u)}},96763:(e,t,a)=>{a.d(t,{Z:()=>h});var r=a(63904),n=a.n(r),s=a(87363),o=a.n(s),i=a(4824),l=a(68712),d=a(77203);const c=n().with("game-categories");class u extends s.Component{render(){const{categoryDataMappedByID:e}=this.context,{categoryIDs:t,mix:a="",withLink:r=!0,withIcon:n=!0}=this.props;if(t)return o().createElement("ul",{className:`${c()} ${a}`},t.map((t=>{const a=e[t];return a?o().createElement("li",{className:c("category"),key:a.name},o().createElement(l.Z,{name:a.name,title:a.title,type:d.q.CLEAR,withIcon:n,withLink:r})):null})))}}u.contextType=i.Z;const h=u},93961:(e,t,a)=>{a.d(t,{Z:()=>$e});var r=a(95486),n=a(59303),s=a(84819),o=a(63904),i=a.n(o),l=a(87363),d=a.n(l),c=a(45112),u=a(90543),h=Object.defineProperty,p=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,g=(e,t,a)=>t in e?h(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;const y={waterfall:[]},f=(0,l.createContext)(y),w=(0,l.createContext)((e=>e)),b=()=>(0,l.useContext)(f);function E(e){return t=>{const[a,r]=(0,l.useReducer)(u.Z,y);return d().createElement(f.Provider,{value:a},d().createElement(w.Provider,{value:r},d().createElement(e,((e,t)=>{for(var a in t||(t={}))m.call(t,a)&&g(e,a,t[a]);if(p)for(var a of p(t))v.call(t,a)&&g(e,a,t[a]);return e})({},t))))}}var k=a(52888),S=a(57745),A=Object.defineProperty,I=Object.getOwnPropertySymbols,P=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable,C=(e,t,a)=>t in e?A(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;function R(e){return t=>{const a=(0,S.HX)(),r=(0,l.useContext)(w);return(0,l.useEffect)((()=>{var e;const t=null==(e=a.splashAdv)?void 0:e.common.waterfall;t&&r({waterfall:t})}),[a,a.splashAdv,r]),d().createElement(e,((e,t)=>{for(var a in t||(t={}))P.call(t,a)&&C(e,a,t[a]);if(I)for(var a of I(t))T.call(t,a)&&C(e,a,t[a]);return e})({},t))}}var D=a(35742);function L({blockNumber:e,waterfallItem:t}){var a;return(0,D.tq)(t)?null==(a=t.blockIds[e])?void 0:a.blockId:"unknown"}const O=[300,250],_=i().with("splash-adv-block"),x=(0,l.forwardRef)((({blockNumber:e,provider:t,waterfallItem:a,onClick:r,onRequest:n,onResponse:s,onShow:o,onFailed:i,onError:c},u)=>{const h="splash_adv_block_"+e;return(0,l.useEffect)((()=>{var l;l=function*(){if(a&&t)try{let i;if((0,S.oX)(a)){const r=t,s=L({waterfallItem:a,blockNumber:e});i=yield r.createSlot({blockId:s,divId:h,size:O}),null==n||n({slot:i},{payloadAdBlockId:i.googleSlot.getAdUnitPath()})}else if((0,S.yi)(a)){const r=t,s=L({waterfallItem:a,blockNumber:e});i=yield r.createSlot({adFormat:"fluid",blockId:s,clientId:a.clientId,divId:h,height:O[1],maxHeight:O[1],width:O[0]}),null==n||n({slot:i},{payloadAdBlockId:s})}const{isEmpty:l}=yield t.preloadSlot({slot:i});if(null==s||s({slot:i,isEmpty:l}),l)throw new k.l;yield t.showSlot(i),null==o||o({slot:i}),t.setClickEventListener(i,(()=>null==r?void 0:r({slot:i})))}catch(e){null==c||c({error:e,slot:null}),null==i||i(e)}},new Promise(((e,t)=>{var a=e=>{try{n(l.next(e))}catch(e){t(e)}},r=e=>{try{n(l.throw(e))}catch(e){t(e)}},n=t=>t.done?e(t.value):Promise.resolve(t.value).then(a,r);n((l=l.apply(undefined,null)).next())}))}),[r,e,h,i,c,n,s,o,t,a]),d().createElement("div",{className:`${_({gpt:!0})}`,id:h})}));var N=a(62011),B=a(4824),M=a(15771),H=a(90380);const F=i().with("splash-adv-block"),$=(0,l.forwardRef)((({blockNumber:e,provider:t,waterfallItem:a,onClick:r,onRequest:n,onResponse:s,onShow:o,onFailed:i,onError:c,location:u,flags:h},p)=>{const m="splash_adv_block_"+e;return(0,l.useEffect)((()=>{var l;l=function*(){var l;if(!a)return;const d=t,p=L({waterfallItem:a,blockNumber:e});try{const e=yield d.createSlot({blockId:p,divId:m,location:u,darkTheme:null!=(l=(0,M.RM)(h,H.Z.advGameLoaderDarkAdvTheme))&&l});null==n||n({slot:e},{payloadAdBlockId:e.blockId});const{slot:t,isEmpty:a}=yield d.preloadSlot({slot:e,flags:h});if(null==s||s({slot:t,isEmpty:a}),a)throw new k.l;yield d.showSlot(t),null==o||o({slot:t}),d.setClickEventListener(t,(()=>null==r?void 0:r({slot:t})))}catch(e){null==c||c({error:e,slot:null}),null==i||i({error:e})}},new Promise(((e,t)=>{var a=e=>{try{n(l.next(e))}catch(e){t(e)}},r=e=>{try{n(l.throw(e))}catch(e){t(e)}},n=t=>t.done?e(t.value):Promise.resolve(t.value).then(a,r);n((l=l.apply(undefined,null)).next())}))}),[r,e,m,h,n,s,o,c,i,u,t,a]),d().createElement("div",{className:F({rsya:!0}),id:m})})),W=(0,l.memo)((0,N.Z)($,B.Z,{flags:e=>e.abt.flags,location:e=>e.location}));var Z=a(33252),G=Object.defineProperty,j=Object.defineProperties,U=Object.getOwnPropertyDescriptors,q=Object.getOwnPropertySymbols,V=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable,K=(e,t,a)=>t in e?G(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Y=(e,t)=>{for(var a in t||(t={}))V.call(t,a)&&K(e,a,t[a]);if(q)for(var a of q(t))z.call(t,a)&&K(e,a,t[a]);return e},X=(e,t)=>j(e,U(t));const J=(0,l.forwardRef)(((e,t)=>{var a,r;if(!e.provider)return null;switch(null==(a=e.provider)?void 0:a.providerName){case D.oO.YandexBlock:return d().createElement(W,X(Y({},e),{ref:t}));case D.oO.GoogleBlock:case D.oO.AdsenseResponsive:return d().createElement(x,X(Y({},e),{ref:t}));default:return(0,Z.H)({prefix:"SplashBlockRenderer",message:`Unknown provider: ${null==(r=e.provider)?void 0:r.providerName}`}),null}}));var Q=a(13547),ee=a(98816),te=a(51290),ae=a(97553);const re=i().with("splash-adv-adaptive"),ne=E(R((({onAdvLoadingFinished:e,onAdvShowed:t})=>{const a=b(),r=(0,l.useMemo)((()=>new te.U({tag:ee.$H.SPLASH})),[]),n=(0,l.useMemo)((()=>a.waterfall),[a]),[s,o]=(0,l.useState)(!1);(0,l.useMemo)((()=>{var e,t;n.length&&"undefined"!=typeof window&&r.tryOpen({reason:ae.p_.ONSPOT,provider:null!=(t=null==(e=n[0])?void 0:e.provider)?t:"none"})}),[r,n]);const i=(0,l.useCallback)(((e,t)=>{const a=L({waterfallItem:e,blockNumber:0});if(t){const t=n.indexOf(e);r.waterfall({advBlockId:a,provider:e.provider,depth:t,reason:ae.p_.WATERFALL})}else r.demand({advBlockId:a,provider:e.provider})}),[r,n]),c=(0,l.useCallback)((()=>{e(0),t(),o(!0)}),[e,t]),u=(0,l.useCallback)((({error:e})=>{e instanceof k.l||r.error(e.message)}),[r]),h=(0,l.useCallback)(((e,{payloadAdBlockId:t})=>{r.request({advBlockId:t})}),[r]),p=(0,l.useCallback)((({isEmpty:t})=>{t?r.responseEmpty():(r.response(),e(1))}),[r,e]),m=(0,l.useCallback)((()=>{r.show(),t()}),[r,t]),v=(0,l.useCallback)((()=>{r.click()}),[r]);return d().createElement("div",{className:re({failed:s})},d().createElement(Q.Z,{waterfallList:n,onClick:v,onError:u,onRequest:h,onResponse:p,onShow:m,onWaterfallFailed:c,onWaterfallNext:i},d().createElement(J,{blockNumber:0})))}))),se=i().with("splash-adv"),oe=({blockNumber:e,blocksCount:t,onAdvBlockLoadingFinished:a,onAdvShowed:r})=>{const n=b(),s=(0,l.useMemo)((()=>new te.U({tag:ee.$H.SPLASH,blocks_count:t,block_number:e})),[t,e]),o=(0,l.useMemo)((()=>n.waterfall),[n]),[i,c]=(0,l.useState)(!1);(0,l.useMemo)((()=>{var e,t;o.length&&"undefined"!=typeof window&&s.tryOpen({reason:ae.p_.ONSPOT,provider:null!=(t=null==(e=o[0])?void 0:e.provider)?t:"none"})}),[s,o]);const u=(0,l.useCallback)(((t,a)=>{const r=L({waterfallItem:t,blockNumber:e});if(a){const e=o.indexOf(t);s.waterfall({advBlockId:r,provider:t.provider,depth:e,reason:ae.p_.WATERFALL})}else s.demand({advBlockId:r,provider:t.provider})}),[e,s,o]),h=(0,l.useCallback)((()=>{a(!1),r(!1),c(!0)}),[a,r]),p=(0,l.useCallback)((({error:e})=>{e instanceof k.l||s.error(e.message)}),[s]),m=(0,l.useCallback)(((e,{payloadAdBlockId:t})=>{s.request({advBlockId:t})}),[s]),v=(0,l.useCallback)((({isEmpty:e})=>{e?s.responseEmpty():(s.response(),a(!0))}),[s,a]),g=(0,l.useCallback)((()=>{s.show(),r(!0)}),[s,r]),y=(0,l.useCallback)((()=>{s.click()}),[s]);return d().createElement("div",{className:se("block-container",{failed:i})},d().createElement(Q.Z,{waterfallList:o,onClick:y,onError:p,onRequest:m,onResponse:v,onShow:g,onWaterfallFailed:h,onWaterfallNext:u},d().createElement(J,{blockNumber:e})))};var ie=a(67471);const le=i().with("splash-adv"),de=E(R((({onAdvLoadingFinished:e,onAdvShowed:t})=>{const a=(0,l.useRef)([]),r=(0,l.useRef)([]),n=(0,l.useMemo)((()=>new Array((({blockWidth:e,maxBlocksCount:t,gap:a})=>{if("undefined"==typeof window)return t;const r=(0,ie.bY)().innerWidth;let n=Math.floor(r/e);return n<=1?1:(n*e+a*(n-1)>r&&n--,Math.min(n,t))})({maxBlocksCount:3,blockWidth:300,gap:15})).fill(0)),[]),s=(0,l.useCallback)((t=>{a.current.push(t),a.current.length>=n.length&&e(a.current.filter((e=>e)).length)}),[n.length,a,e]),o=(0,l.useCallback)((e=>{r.current.push(e),r.current.length>=n.length&&t()}),[n.length,t]);return d().createElement("div",{className:le()},n.map(((e,t)=>d().createElement(oe,{blockNumber:t,blocksCount:n.length,key:t,onAdvBlockLoadingFinished:s,onAdvShowed:o}))))}))),ce=i().with("fake-splash-adv"),ue=({blocksCount:e})=>{const t=(0,l.useMemo)((()=>new Array(e).fill(1)),[e]);return d().createElement("div",{className:ce()},t.map(((e,t)=>d().createElement("div",{className:ce("block",{adaptive:(0,s.v_)({on:"adv_splash.yandex_adaptive"})}),key:t}))))};var he=a(73694),pe=a(70776),me=a(40184),ve=a(11324),ge=a(68199),ye=Object.defineProperty,fe=Object.getOwnPropertySymbols,we=Object.prototype.hasOwnProperty,be=Object.prototype.propertyIsEnumerable,Ee=(e,t,a)=>t in e?ye(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;const ke=i().with("preloading-content"),Se=({onClick:e,iconSize:t})=>{var a;const r=(0,me.b)(),{playPageData:n,isSlowCountry:s}=r,o=null==(a=n.gameData)?void 0:a.media,i=(0,l.useRef)(null),[c]=(0,pe.h)(i,"splash-screen");if(!o)return d().createElement(he.y,{size:46,spinning:!0,view:"default"});const u=s?ve.KL.default84x84:t||ve.KL.pjpg128x128,h=(0,ve.Jn)(o,((e,t)=>{for(var a in t||(t={}))we.call(t,a)&&Ee(e,a,t[a]);if(fe)for(var a of fe(t))be.call(t,a)&&Ee(e,a,t[a]);return e})({size:u},(0,ge.R)(s)?{cdnUrl:r.cdnUrl}:{})),p="function"==typeof e;return d().createElement("img",{alt:n.gameTitle,className:ke("game-icon",{clickable:p}),crossOrigin:"anonymous",fetchPriority:"high",loading:"eager",ref:i,src:h,style:{backgroundColor:(0,ve.jl)(o,{size:u})},title:n.gameTitle,onClick:e,onLoad:c})},Ae=i().with("play-button"),Ie=({loaderVisible:e,onClick:t,text:a})=>d().createElement("div",{className:Ae({loading:e}),onClick:t},d().createElement("span",{className:Ae("text",{loading:e})},a));var Pe=a(30367),Te=a(15408),Ce=a(97808),Re=a(47484);const De=e=>new Promise((t=>e(t))),Le=()=>De(Re.EE).then((()=>"waitTTI")),Oe=e=>new Promise((t=>{const a=e=>{Pe.UD.includes(e.data.action)&&(Ce.Z.offAllMessages("game-measuring",a),t(e.data.action))};e&&Le().then(t),Ce.Z.onAllMessages("game-measuring",a)}));var _e=a(64295),xe=a(10739),Ne=a(53603),Be=a(11510),Me=a(73285),He=a(14228);a(33777);const Fe=i().with("adv-game-loader"),$e=()=>{const{abt:{flags:e},playPageData:{gameInfo:{title:t}}}=(0,me.b)(),a=(0,Be.T)(),{setIsReady:o}=(0,Ne.s)(),{hideGameLoaderCallback:i}=(0,_e.p)(),u=(0,l.useRef)(null),[h,p]=(0,l.useState)({resultReceived:!1,enabled:!1}),[m,v]=(0,l.useState)(""),[g,y]=(0,l.useState)(!1),[f,w]=(0,l.useState)(0),[b,E]=(0,l.useState)(!1),[k,S]=(0,l.useState)(!1),[A,I]=(0,l.useState)(!1),[P,T]=(0,l.useState)(!0),C=ve.KL.pjpg256x256,R=(0,l.useMemo)((()=>Boolean((0,M.RM)(e,H.Z.advGameLoaderStayOnLoad)||!h.resultReceived||h.enabled)),[e,h.enabled,h.resultReceived]),D=(0,l.useMemo)((()=>Boolean(R&&(g&&m||A))),[g,m,A,R]),L=(0,l.useMemo)((()=>a(D?"splash-screen.play":"splash-screen.loading")),[a,D]),O=(0,l.useCallback)((()=>{Ce.Z.post((0,r.bS)({actionSource:n.EO.PlayButton}))}),[]),_=(0,l.useCallback)((e=>{(0,Te.L)(),Ce.Z.post({type:"document-events",action:"hide-splash-screen"}),i(e),o(!0),T(!1),(0,xe.fX)()}),[i,o]),x=(0,l.useCallback)((()=>{D&&(O(),_("play click"))}),[O,_,D]),N=(0,l.useCallback)((e=>{0!==e?(w(e),window.setTimeout((()=>{E(!0)}),700)):y(!0)}),[]),B=(0,l.useCallback)((()=>{S(!0),window.setTimeout((()=>{y(!0)}),Pe.PJ)}),[]);return(0,c.qR)((()=>{return(t=function*(){const t=Promise.race([De(Re.UQ).then((()=>"waitAllTTI")),Oe(e)]),[a]=yield Promise.all([t,Le()]);return a},new Promise(((e,a)=>{var r=e=>{try{s(t.next(e))}catch(e){a(e)}},n=e=>{try{s(t.throw(e))}catch(e){a(e)}},s=t=>t.done?e(t.value):Promise.resolve(t.value).then(r,n);s((t=t.apply(void 0,null)).next())}))).then((e=>v(e))),(0,He.y)().then((e=>p({resultReceived:!0,enabled:e}))),u.current=window.setTimeout((()=>I(!0)),Pe.v4),()=>{u.current&&clearTimeout(u.current)};var e,t})),(0,l.useEffect)((()=>{if(!P)return;const e=(({advLoaded:e,gameLoadedReason:t,hideTimeoutFinished:a,playButtonExists:r})=>a?"timeout":!r&&t&&e?t:null)({advLoaded:g,gameLoadedReason:m,hideTimeoutFinished:A,playButtonExists:R});!e||"timeout"===e&&R||_(e)}),[g,m,_,A,P,R]),P?d().createElement("div",{className:Fe(),"data-type":"game-loader"},d().createElement("div",{className:Fe("splash-adv-container",{"adv-showed":Boolean(b)})},(0,s.v_)({on:"adv_splash.yandex_adaptive"})?d().createElement(ne,{onAdvLoadingFinished:N,onAdvShowed:B}):d().createElement(de,{onAdvLoadingFinished:N,onAdvShowed:B})),d().createElement("div",{className:Fe("fake-adv-container",{"adv-loaded":Boolean(f),"adv-showed":Boolean(b&&k)})},f>0&&d().createElement(ue,{blocksCount:f})),d().createElement("div",{className:Fe("preloading-content-container",{"adv-loaded":Boolean(f),"adv-failed":(A||g)&&!f,"game-loaded":D,"guard-enabled":h.enabled})},d().createElement(Se,{iconSize:C,onClick:D?x:void 0}),d().createElement("span",{className:Fe("preloading-content-title")},(0,Me.T)(t))),d().createElement("div",{className:Fe("play-button-container",{"adv-loaded":Boolean(f),"adv-failed":(A||g)&&!f})},d().createElement(Ie,{loaderVisible:!D,text:L,onClick:x}),d().createElement("div",{className:Fe("guard-text-container",{hidden:!h.enabled})},d().createElement("div",{className:Fe("guard-text")},a("guard.legal.text.v3"),d().createElement("a",{href:a("guard.license.link.href"),target:"_blank"},a("guard.license.link.text")))))):null}},30367:(e,t,a)=>{a.d(t,{AK:()=>l,NS:()=>s,PJ:()=>c,UD:()=>o,lt:()=>i,v4:()=>d});var r=a(10719),n=a(40656);r.ur.GameReady;const s={"adv-show-fullscreen":{messageType:"adv-manager",hideReason:"advertisement"},[r.ur.GameReady]:{messageType:"game-measuring",hideReason:"gameReady"}},o=[r.ur.GameInit,r.ur.GameReady,r.ur.GameReadyForce],i=()=>["adv-manager","game-measuring"],l=()=>["adv-show-fullscreen",r.ur.GameReady],d=10*n.WT,c=3*n.WT},15408:(e,t,a)=>{a.d(t,{Z:()=>X,L:()=>Y});var r=a(10719),n=a(63904),s=a.n(n),o=a(87363),i=a.n(o),l=a(30367),d=a(84819),c=a(73694),u=a(38096),h=a(45112),p=a(40656);const m=s().with("preload-logo"),v=2*p.WT,g=({onClick:e,onEnded:t})=>((0,h.qR)((()=>{window.setTimeout((()=>{null==t||t()}),v)})),i().createElement("div",{className:m(),onClick:e},i().createElement("div",{className:m("container")},i().createElement("div",{className:m("logo-text")}),i().createElement("div",{className:m("logo")},i().createElement("div",{className:m("hole-circle")}),i().createElement("div",{className:m("gamepad")})),i().createElement("div",{className:m("logo-text-main")}))));var y=a(40184),f=a(97808),w=a(11324),b=a(68199),E=a(67631),k=a(41811),S=a(49659),A=Object.defineProperty,I=Object.getOwnPropertySymbols,P=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable,C=(e,t,a)=>t in e?A(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;const R=s().with("preloading-video-content"),D={0:3,1:1,2:2},L=({iconSize:e,onClick:t,onLoad:a,preloadVideoShown:n})=>{var s,l;const{playPageData:p,isSlowCountry:m,cdnUrl:v}=(0,y.b)(),A=(0,o.useRef)(null),{preloadBrand:L={}}=(0,u.getDomainConfig)(),{preloadVideoUrl:O,preloadVideoDurationSeconds:_}=L,[x,N]=(0,o.useState)(0),B=(0,o.useRef)(!1),M=(0,o.useRef)(!0),H=(0,o.useRef)(null),F=(null==(s=p.gameData)?void 0:s.minLoadTime)||0,$=(0,o.useRef)(null),W=(0,d.v_)({on:"show_preload_video.only_for_slow_loading_games"}),Z=(0,o.useMemo)((()=>{const e=new URLSearchParams((0,S.e)().search).get(k.Bn);return D[e||""]}),[]),G=(0,o.useCallback)((()=>{null==n||n({effectiveBrandingType:2===x?"video":"css"}),B.current||N(3)}),[x,n]),j=(0,o.useCallback)((e=>{M.current=!1,N(e),2===e&&A.current&&A.current.play()}),[]);if((0,h.qR)((()=>{f.Z.onExternalMessage("game-measuring",(e=>{if(e.data.action===r.ur.GameReady||e.data.action===r.ur.GameReadyForce){if(B.current=!0,Z)return void(3===Z&&(null==n||n({effectiveBrandingType:"without"})));W&&M.current&&(H.current&&window.clearTimeout(H.current),null==n||n({effectiveBrandingType:"without"}))}}))})),(0,h.qR)((()=>{Z?j(Z):H.current=window.setTimeout((()=>{_&&F<_?j(1):A.current instanceof HTMLVideoElement&&4===A.current.readyState?j(2):j(1)}),700)})),W&&0===x&&B.current)return null;if(3===x&&B.current)return null;const U=null==(l=p.gameData)?void 0:l.media,q=m?k.xY.SIZE_84_LOW:e||k.xY.M,V=U?(0,w.Jn)(U,((e,t)=>{for(var a in t||(t={}))P.call(t,a)&&C(e,a,t[a]);if(I)for(var a of I(t))T.call(t,a)&&C(e,a,t[a]);return e})({size:q},(0,b.R)(m)?{cdnUrl:v}:{})):void 0;return 3===x?i().createElement("div",{className:R()},i().createElement("div",{className:R("aura-wrapper")},i().createElement("div",{className:R("aura")})),i().createElement("div",{className:R("icon-wrapper")},i().createElement("div",{className:R("img-wrapper",{animation:Boolean(U)})},U?i().createElement("img",{alt:p.gameTitle,className:R("game-icon",{clickable:Boolean(t)}),crossOrigin:"anonymous",fetchPriority:"high",loading:"eager",ref:$,src:V,title:p.gameTitle,onClick:t,onLoad:a}):i().createElement("div",{className:R("img-stub")}),i().createElement(c.y,{className:R("spin"),size:46,spinning:!0,thickness:"bold",view:"default"})),i().createElement("div",{className:R("text")},p.gameInfo.title))):i().createElement("div",{className:R()},1===x?i().createElement(g,{onEnded:G}):i().createElement("video",{className:R("preload-video",{isMobile:!1}),muted:!0,playsInline:!0,preload:"auto",ref:A,src:(0,E.w)(O||"",v),onClick:t,onEnded:G}))};var O=a(70776),_=a(11510),x=Object.defineProperty,N=Object.getOwnPropertySymbols,B=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable,H=(e,t,a)=>t in e?x(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;const F=s().with("preloading-content"),$=({onClick:e,iconSize:t,preloadVideoShown:a,withBlur:r=!0,withBrand:n})=>{var s;const l=(0,y.b)(),d=(0,_.T)()("common.loading"),{playPageData:u,isSlowCountry:h,cdnUrl:p}=l,m=null==(s=u.gameData)?void 0:s.media,v=(0,o.useRef)(null),[g]=(0,O.h)(v,"splash-screen"),f=h?k.xY.SIZE_84_LOW:t||k.xY.M,E=(0,w.Jn)(m||{},((e,t)=>{for(var a in t||(t={}))B.call(t,a)&&H(e,a,t[a]);if(N)for(var a of N(t))M.call(t,a)&&H(e,a,t[a]);return e})({size:f},(0,b.R)(h)?{cdnUrl:p}:{}));if(!m)return i().createElement(c.y,{size:46,spinning:!0,view:"default"});const S={filter:r?`drop-shadow(0px 0px 70px ${m.icon.mainColor})`:void 0,backgroundColor:(0,w.jl)(m,{size:f})};return i().createElement("div",{className:F()},n?i().createElement(L,{preloadVideoShown:a,onClick:e,onLoad:g}):i().createElement(i().Fragment,null,i().createElement("img",{alt:u.gameTitle,className:F("game-icon",{clickable:Boolean(e)}),crossOrigin:"anonymous",fetchPriority:"high",loading:"eager",ref:v,src:E,style:S,title:u.gameTitle,onClick:e,onLoad:g}),i().createElement("div",{className:F("text")},d)))};var W=a(64295),Z=a(53603);const G=(0,a(99226).U)("branding_end",((e,t)=>({app_id:e,branding:t})));var j=a(33124),U=a(14228),q=a(47484),V=a(15771),z=(e,t,a)=>new Promise(((r,n)=>{var s=e=>{try{i(a.next(e))}catch(e){n(e)}},o=e=>{try{i(a.throw(e))}catch(e){n(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(s,o);i((a=a.apply(e,t)).next())}));const K=s().with("game-loader"),Y=()=>{f.Z.post({type:"splash",action:"set-was-closed"})},X=()=>{const e=(0,y.b)(),{abt:{flags:t},playPageData:a}=e,{setIsReady:n}=(0,Z.s)(),{isLoadingDelayPassed:s,shouldDelayLoading:c}=(({onTimeoutEndCallback:e,playPageData:t})=>{var a;const r=null==(a=null==t?void 0:t.gameData)?void 0:a.slowdown,[n,s]=(0,o.useState)(!r),i=(0,o.useRef)(null);return(0,o.useEffect)((()=>{if(r)return i.current=setTimeout((()=>{s(!0),i.current=null,null==e||e()}),r),()=>{i.current&&clearTimeout(i.current)}}),[r,e]),r||!(0,d.v_)({on:"game_load_slowdown.first_visit"})&&!(0,d.v_)({on:"game_load_slowdown.visited"})||null==e||e(),{isLoadingDelayPassed:n,shouldDelayLoading:Boolean(r)}})({onTimeoutEndCallback:Y,playPageData:a}),u=Boolean(a.isBrandingEnabled),[h,p]=(0,o.useState)(!1),[m,v]=(0,o.useState)(!u),[g,w]=(0,o.useState)(null),b=(0,o.useRef)(null),E=(0,o.useCallback)((()=>{w("click")}),[]),k=(0,V.Rg)(t),S=(0,o.useRef)(null),{hideGameLoaderCallback:A}=(0,W.p)(),I=(0,o.useCallback)((e=>{v(!0),Y(),j.H.dispatch(G(Number(a.gameInfo.appId),e.effectiveBrandingType))}),[a.gameInfo.appId]),P=(0,o.useCallback)((()=>z(void 0,null,(function*(){const e=new Promise((e=>z(void 0,null,(function*(){f.Z.onExternalMessage("game-measuring",(t=>{l.UD.includes(t.data.action)&&e(t.data.action)})),(0,q.UQ)((()=>e("waitAllTTI"))),(yield(0,U.y)())&&(0,q.EE)((()=>e("waitTTI")))})))),t=new Promise((e=>{(0,q.EE)((()=>e("waitTTI")))})),[a]=yield Promise.all([e,t]);return a}))),[]);return(0,o.useEffect)((()=>{var e,t,a,n,o;if(c&&s)return void w("timeout from backend");const i=(0,l.AK)(),d=null==(o=null==(n=null==(a=null==(t=null==(e=window.earlyEvents)?void 0:e.messages)?void 0:t.find((e=>{var t,a;return i.includes(null==(a=null==(t=e.data)?void 0:t.originalEvent)?void 0:a.action)})))?void 0:a.data)?void 0:n.originalEvent)?void 0:o.action;d&&m&&s?w(l.NS[d].hideReason):i.includes(r.ur.GameReady)&&m&&s&&P().then((e=>{w(e)}))}),[P,m,s,c]),(0,o.useEffect)((()=>{if(!h&&m&&s){const e=(0,l.lt)(),t=(0,l.AK)(),a=e=>{const{action:a}=e.data;t.includes(a)&&w(l.NS[a].hideReason)};return f.Z.onAllMessages(e,a),()=>{S.current&&f.Z.offAllMessages(e,a)}}}),[h,m,s]),(0,o.useEffect)((()=>{h&&b.current&&clearTimeout(b.current)}),[h]),(0,o.useEffect)((()=>{b.current=setTimeout((()=>{w("timeout"),b.current=null}),l.v4)}),[a.gameInfo.appId]),(0,o.useEffect)((()=>{!S.current&&g&&m&&s&&(S.current=g,f.Z.post({type:"document-events",action:"hide-splash-screen"}),n(!0),setTimeout((()=>{p(!0),A(g)}),250))}),[g,t,n,A,m,s]),h?null:i().createElement("div",{className:K({hidden:Boolean(g),transparent:k}),"data-type":"game-loader",onClick:E},i().createElement($,{preloadVideoShown:I,withBrand:u}))}},64295:(e,t,a)=>{a.d(t,{p:()=>d});var r=a(87363);const n=e=>()=>e?Date.now()-e:null;var s=a(97808),o=a(47484),i=a(93298);const l=(0,i.M$)("SplashScreen",i.XG.Dev),d=()=>{const e=(0,r.useRef)(null);return(0,r.useEffect)((()=>{if(!i.HQ)return;e.current=Date.now();const t=n(e.current),a=e=>{l("onGameMeasuringEvent",e.data.action)};return s.Z.onExternalMessage("game-measuring",a),(0,o.EE)((()=>l("waitTTI",t()))),(0,o.UQ)((()=>l("waitAllTTI",t()))),()=>{s.Z.offInternalMessage("game-measuring",a)}}),[]),{mountedTime:e,hideGameLoaderCallback:t=>{const a=n(e.current)();l(`Splash screen hide by ${t}. elapsed time: ${a}`)}}}},17242:(e,t,a)=>{a.d(t,{Z:()=>q});var r=a(63904),n=a.n(r),s=a(87363),o=a.n(s),i=a(74378),l=a(84819),d=a(53726),c=a(4824),u=a(65473),h=a(33119),p=a(52157),m=a(33124),v=a(25678),g=a(94671),y=a(11324),f=(a(83950),a(33252)),w=a(13377),b=Object.defineProperty,E=Object.defineProperties,k=Object.getOwnPropertyDescriptors,S=Object.getOwnPropertySymbols,A=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable,P=(e,t,a)=>t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,T=(e,t)=>{for(var a in t||(t={}))A.call(t,a)&&P(e,a,t[a]);if(S)for(var a of S(t))I.call(t,a)&&P(e,a,t[a]);return e},C=(e,t)=>E(e,k(t));const R=(e,t,a,r)=>{const n=((e,t={})=>{const a=new AbortController,r=a.signal;return{fetch:fetch(e,C(T({},t),{signal:r})),abortController:a}})(t);let s=!1;return n.fetch.then((e=>e.blob())).then((t=>(e.src=URL.createObjectURL(t),s=!0,a()))).catch((n=>{if("AbortError"!==n.name)return!(null==r?void 0:r.isFallback)&&(null==r?void 0:r.fallbackUrl)?((0,f.H)({additional:{mainUrl:t,fallbackUrl:r.fallbackUrl},block:w.W.VIDEO_LOADER,message:`Error while video loading with main URL, trying fallback URL ${n.message}`},n),R(e,r.fallbackUrl,a,{isFallback:!0})):void(0,f.H)({block:w.W.VIDEO_LOADER,message:`Error while video loading ${n.message}`},n)})),{abort:()=>{s||n.abortController.abort()},element:e}};var D=a(41811),L=a(15771),O=a(29008);const _=n().with("video-preview"),x=(0,l.v_)({on:"autoplay.zero_hover_delay"})?0:300;class N extends o().Component{constructor(){super(...arguments),this.state={isHover:this.props.hover},this.hoverTimer=null,this.videoCtrl=null,this.videoRef=null,this.isVideoElementBeenRendered=!1,this.setVideoRef=e=>{this.videoRef=e},this.handleVideoPlay=()=>{var e;m.H.dispatch((0,v.UE)(this.props.previewUrl)),m.H.dispatch((0,p.zK)({appId:null==(e=this.props.game)?void 0:e.appID}))},this.handleIntersectionUpdate=e=>{const{dispatch:t,id:a}=this.props;!this.getPlaying()&&e&&t((0,h.NA)(a)),e||t((0,h.gh)(a))},this.restorePlayForIOS=()=>{setTimeout((()=>{var e,t;null==(t=null==(e=this.videoRef)?void 0:e.querySelector("video"))||t.play()}),1e3)}}getOriginalVideoPreviewUrl(){return this.props.previewUrl||""}getVideoPreviewUrl(){var e;const t=this.props.previewUrl;if(!t)return"";const{abt:{flags:a}}=this.context;return(0,L.$u)(a)?null==(e=this.props.previewUrl)?void 0:e.replace(/[0-9]+\.mp4$/,"360.mp4"):t}getPlaying(){const{id:e,videosPlaying:t}=this.props;return t.slice(0,3).includes(e)}handleHover(){this.loadVideo()}handleLeave(){this.hoverTimer&&clearTimeout(this.hoverTimer),this.videoCtrl&&!this.getPlaying()&&(this.videoCtrl.abort(),this.videoCtrl=null)}loadVideo(){const{isIOS:e}=(0,O.AK)(this.context.platform);if(e)return;if(this.videoCtrl||!this.videoRef)return;const t=this.videoRef.querySelector("video");if(!t)return;const a=this.getVideoPreviewUrl();if(!a)return;const r=this.getOriginalVideoPreviewUrl(),n=a!==r?{fallbackUrl:r}:void 0;this.videoCtrl=R(t,a,(()=>{var e,a;return null==(a=(e=this.props).onStartVideoPlay)||a.call(e),t.play()}),n)}startVideoPlay(){}componentDidMount(){var e,t;this.updateVideoEventListeners({willUnmount:!1}),this.props.canPlayVideo&&(this.startVideoPlay(),null==(t=(e=this.props).onStartVideoPlay)||t.call(e)),this.state.isHover&&this.loadVideo()}componentDidUpdate(e){this.updateVideoEventListeners({willUnmount:!1}),!e.canPlayVideo&&this.props.canPlayVideo&&this.startVideoPlay(),this.props.hover&&!this.state.isHover&&(x?this.hoverTimer=setTimeout((()=>{this.setState({isHover:!0},this.handleHover)}),x):this.setState({isHover:!0},this.handleHover)),!this.props.hover&&this.state.isHover&&this.setState({isHover:!1}),this.getPlaying()&&this.loadVideo(),this.props.hover||this.handleLeave()}componentWillUnmount(){if(this.updateVideoEventListeners({willUnmount:!0}),this.hoverTimer&&clearTimeout(this.hoverTimer),this.videoCtrl&&this.videoCtrl.abort(),this.intersectionObserver){const{id:e,dispatch:t}=this.props;return this.getPlaying()&&t((0,h.gh)(e)),void this.intersectionObserver.unobserve(this.videoRef)}const{isIOS:e}=(0,O.AK)(this.context.platform);e&&window.removeEventListener("focus",this.restorePlayForIOS)}updateVideoEventListeners({willUnmount:e}){var t;const a=null==(t=this.videoRef)?void 0:t.querySelector("video");a&&!this.isVideoElementBeenRendered&&(m.H.dispatch((0,v.rX)(this.props.previewUrl)),a.addEventListener("play",this.handleVideoPlay)),(!a&&this.isVideoElementBeenRendered||e)&&(m.H.dispatch((0,v.bX)(this.props.previewUrl)),null==a||a.removeEventListener("play",this.handleVideoPlay)),this.isVideoElementBeenRendered=Boolean(a)}getVideoHtml(){const{game:e,mix:t,skipPoster:a,videoFit:r="cover"}=this.props,{isIOS:n}=(0,O.AK)(this.context.platform),s=a?"":(null==e?void 0:e.media.cover["prefix-url"])+y.wC.cover[D.xY.L],o=(0,g.E)(_("video",{fit:r}),t);return n?`<video autoplay class="${o}" loop muted pip="false" playsinline src="${this.getOriginalVideoPreviewUrl()}" poster="${s}"></video>`:`<video preload="false" class="${o}" loop muted pip="false" playsinline poster="${s}"></video>`}renderVideoPreview(){return this.state.isHover||this.getPlaying()?o().createElement("div",{dangerouslySetInnerHTML:{__html:this.getVideoHtml()}}):null}render(){const{config:e,children:t,game:a,listType:r,mix:n,redirParams:s,isErrorPage:i}=this.props;return a&&r?o().createElement(u.Z,{config:e,game:a,isErrorPage:i,listType:r,mixElem:(0,g.E)(_(),n),redirParams:s,onRef:this.setVideoRef},t,this.renderVideoPreview()):o().createElement("div",{className:(0,g.E)(_(),n),ref:this.setVideoRef},t,this.renderVideoPreview())}}N.contextType=c.Z;const B=(0,d.$j)((function(e){return{canPlayVideo:e.canPlayVideo,videosPlaying:e.videosPlaying}}))(N);var M=Object.defineProperty,H=Object.defineProperties,F=Object.getOwnPropertyDescriptors,$=Object.getOwnPropertySymbols,W=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable,G=(e,t,a)=>t in e?M(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;const j=n().with("game-video");class U extends o().PureComponent{constructor(){super(...arguments),this.getVideoPreviewUrl=()=>{var e,t,a,r;const n=(null==(e=this.props.game.media)?void 0:e.videos)||[],s=(null==(t=n[0])?void 0:t.previewUrl)||"";return"number"==typeof this.props.videoIndex?(null==(a=n[this.props.videoIndex])?void 0:a.previewUrl)||s:this.props.showPortraitOnly&&n.length>1&&(null==(r=n.find((e=>e.height>e.width)))?void 0:r.previewUrl)||s},this.createVideoId=e=>{var t;return`game-video-${e}${null!=(t=this.props.videoIdSuffix)?t:""}`}}render(){const e=this.props,{alt:t,media:a,mix:r,size:n=D.xY.M,listType:s,skipPreview:l,skipPoster:d,useVideoThumbnailForCover:c}=e,u=((e,t)=>{var a={};for(var r in e)W.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&$)for(var r of $(e))t.indexOf(r)<0&&Z.call(e,r)&&(a[r]=e[r]);return a})(e,["alt","media","mix","size","listType","skipPreview","skipPoster","useVideoThumbnailForCover"]);return o().createElement(B,(h=((e,t)=>{for(var a in t||(t={}))W.call(t,a)&&G(e,a,t[a]);if($)for(var a of $(t))Z.call(t,a)&&G(e,a,t[a]);return e})({},u),p={id:this.createVideoId(this.props.game.appID),listType:s,mix:(0,g.E)(j(),r),previewUrl:this.getVideoPreviewUrl(),skipPoster:d||c},H(h,F(p))),!l&&o().createElement(i.Z,{alt:t,media:a,mix:`${j("video")} ${r}`,size:n,useVideoThumbnailForCover:c}));var h,p}}const q=U},14943:(e,t,a)=>{a.d(t,{Z:()=>c});var r=a(73694),n=a(63904),s=a.n(n),o=a(87363),i=a.n(o);const l=s().with("image");class d extends o.Component{constructor(e){super(e),this.imgRef=i().createRef(),this.onLoad=()=>{this.setState({status:"loaded"})},this.onError=()=>{this.setState({status:"error"})},this.state={status:e.disableSpinner?"loaded":"loading"}}componentDidMount(){var e;(null==(e=this.imgRef.current)?void 0:e.complete)&&"loaded"!==this.state.status&&this.onLoad()}componentDidUpdate(e){var t;this.props.src!==e.src&&this.setState({status:"loading"}),(null==(t=this.imgRef.current)?void 0:t.complete)&&"loaded"!==this.state.status&&this.onLoad()}render(){const e=`${l("",{state:this.state.status})} ${this.props.className}`.trim();return i().createElement("div",{className:e},i().createElement("img",{alt:this.props.alt||"",className:l("img"),crossOrigin:this.props.crossOrigin,ref:this.imgRef,src:this.props.src,title:this.props.title,onError:this.onError,onLoad:this.onLoad}),i().createElement(r.y,{position:"center",size:this.props.size,spinning:"loading"===this.state.status,view:"default"}))}}const c=d},1338:(e,t,a)=>{a.d(t,{O:()=>r});const r=(0,a(87363).createContext)({clickDaemonParams:{},metrikaParams:{},sendClickDaemon:()=>{},sendMetrika:()=>{}})},65453:(e,t,a)=>{a.d(t,{E6:()=>n,Oe:()=>o,Tp:()=>s,XB:()=>r});var r=(e=>(e.DEBUG="debug",e.ERROR="error",e.INFO="info",e.WARN="warn",e))(r||{});const n=1e4,s=200,o=10},17431:(e,t,a)=>{a.d(t,{Z:()=>p});var r=a(8804),n=a(63904),s=a.n(n),o=a(87363),i=a.n(o),l=a(53726),d=a(90239),c=a(65453);const u=s().with("message-box");class h extends o.PureComponent{constructor(){super(...arguments),this.state={destroyed:!1,visible:!1},this.handleClick=()=>{var e,t;this.toggleVisibility(!1),null==(t=(e=this.props).onClick)||t.call(e)},this.onSnooze=()=>{var e,t;this.toggleVisibility(!1),null==(t=(e=this.props).onSnooze)||t.call(e)}}componentDidMount(){const{autohide:e}=this.props;this.openingTimer=window.setTimeout((()=>this.toggleVisibility(!0)),c.Oe),e&&(this.hidingTimer=window.setTimeout((()=>this.toggleVisibility(!1)),c.E6))}componentWillUnmount(){window.clearTimeout(this.openingTimer),this.hidingTimer&&window.clearTimeout(this.hidingTimer),this.destroyTimer&&window.clearTimeout(this.destroyTimer)}toggleVisibility(e){var t,a;this.setState({visible:e}),e||(null==(a=(t=this.props).onClose)||a.call(t),this.destroyTimer=window.setTimeout((()=>{this.setState({destroyed:!0})}),c.Tp))}renderSnoozeButton(){return this.props.onSnooze?i().createElement(r.z,{className:u("snooze"),rounded:!0,size:24,view:"secondary",onClick:this.onSnooze},"😴 ",i().createElement("span",{className:u("snooze-title")},this.props.getText("common.hide").toLowerCase())):null}renderCloseButton(){return this.props.withCloseButton?i().createElement(d.Z,{type:"popup",onClick:this.handleClick}):null}renderContent(){return i().createElement("div",{className:u("content"),onClick:this.handleClick},this.props.children)}render(){const{level:e=c.XB.INFO}=this.props,{destroyed:t,visible:a}=this.state;return t?null:i().createElement("div",{className:u({level:e,visible:a})},this.renderSnoozeButton(),this.renderCloseButton(),this.renderContent())}}const p=(0,l.$j)((function(e){return{getText:e.getText}}))(h)},23404:(e,t,a)=>{a.d(t,{Cn:()=>g,EC:()=>d,Iy:()=>h,Si:()=>c,Sk:()=>i,UG:()=>o,_u:()=>p,hL:()=>s,j2:()=>y,kn:()=>l,qS:()=>u,wt:()=>v,xd:()=>n,yt:()=>m});var r=a(5e4);const n={fullscreen:"fullscreen",desktop:"desktop"},s=15e3,o=15e3,i=3e4,l={countdown:"play-countdown",headerFix:"with-play-game-header-fix",modal:"play-modal",modalClose:"play-modal-close",modalFullscreen:"play-modal_fullscreen",modalInner:"play-modal__inner",modalVisible:"play-modal_visible",modalWithBlur:"play-modal_with-blur",modalWithHeader:"play-modal_with-header",noClickOverlay:"adv-no-click-overlay",yabroChromeLower79:"play-modal_yabro_chrome_lower_79"},d={start_fullscreen:"R-A-3462885-6",fullscreen:"R-A-3462885-2",rewarded:"R-A-3462885-1"},c="aab-adv_with_disable_adv_button",u="No adv to show now - it can happen sometimes\nTry reload page(Ctrl+F5) or open in different browser",h="No rewarded video to show now - it can happen sometimes\nTry reload page(Ctrl+F5) or open in different browser",p="Trouble with showing adv",m="Adv SDK error",v=[r.e.AdsenseResponsive,r.e.Google,r.e.GoogleInstream,r.e.GoogleManual,r.e.Native,r.e.Prebid,r.e.PrebidTGO,r.e.Yandex],g="adv_show_delay",y=.75},33775:(e,t,a)=>{a.d(t,{Hc:()=>u,Mi:()=>d,ZJ:()=>s,ck:()=>c,k4:()=>i,uK:()=>l,uy:()=>o});var r=a(15771),n=a(90380);function s(e){return!1===(0,r.RM)(e,n.Z.enablePreloadNativeFullscreen)}function o(e){return!1===(0,r.RM)(e,n.Z.enablePreloadNativeFullscreenOnStart)}function i(e){return!1===(0,r.RM)(e,n.Z.enablePreloadNativeRewarded)}function l(e){return!1===(0,r.RM)(e,n.Z.enablePreloadNativeRewardedOnStart)}const d=e=>{var t;return null!=(t=(0,r.$9)(e,n.Z.advGoogleInterstitialRetries))?t:2},c=e=>{var t;return null!=(t=(0,r.$9)(e,n.Z.advGoogleRewardedRetries))?t:0},u=e=>{var t;return null!=(t=(0,r.RM)(e,n.Z.advGoogleInstreamResponsiveContainer))&&t}},10739:(e,t,a)=>{a.d(t,{lu:()=>ne,KW:()=>be,Sn:()=>ke,fl:()=>Ee,$3:()=>Q,ss:()=>ie,qu:()=>V,tq:()=>oe,dh:()=>de,mx:()=>le,el:()=>ve,TE:()=>ce,zw:()=>te,PS:()=>ae,xK:()=>me,uD:()=>ye,Ij:()=>pe,un:()=>Se,g5:()=>ue,ey:()=>z,SW:()=>ee,R4:()=>K,J4:()=>re,U2:()=>X,gp:()=>fe,WL:()=>J,HH:()=>he,fX:()=>ge});var r=a(95486),n=a(1277),s=a(94199),o=(a(84819),a(23404)),i=a(54814),l=a(97808),d=Object.defineProperty,c=Object.defineProperties,u=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,v=(e,t,a)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,g=(e,t)=>{for(var a in t||(t={}))p.call(t,a)&&v(e,a,t[a]);if(h)for(var a of h(t))m.call(t,a)&&v(e,a,t[a]);return e},y=(e,t)=>c(e,u(t));function f(e){if(!(e instanceof Error))try{e=new Error(String(e))}catch(t){e=new Error("Unknown error object")}return y(g({},JSON.parse(JSON.stringify(e,Object.getOwnPropertyNames(e)))),{stack:e.stack,name:e.name})}const w={gamesApp:{worldWide:72e3,default:12e4},web:{worldWide:6e4,default:6e4}};var b=a(42126),E=a(98816),k=a(76488),S=a(17061),A=a(34967),I=a(77901),P=a(33252),T=a(41811),C=a(93298),R=a(13377),D=a(15771),L=a(90380),O=a(49659),_=a(89592),x=a(29008),N=Object.defineProperty,B=Object.defineProperties,M=Object.getOwnPropertyDescriptors,H=Object.getOwnPropertySymbols,F=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable,W=(e,t,a)=>t in e?N(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Z=(e,t)=>{for(var a in t||(t={}))F.call(t,a)&&W(e,a,t[a]);if(H)for(var a of H(t))$.call(t,a)&&W(e,a,t[a]);return e},G=(e,t)=>B(e,M(t)),j=(e,t,a)=>new Promise(((r,n)=>{var s=e=>{try{i(a.next(e))}catch(e){n(e)}},o=e=>{try{i(a.throw(e))}catch(e){n(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(s,o);i((a=a.apply(e,t)).next())}));const U=-90,q=90,V=(0,C.M$)("Adv manager",C.XG.Adv);function z(e){console.warn("There is no partnerID: partnerId provides only on link in console. If you opened link from console then accept agreement in admin panel"),(0,A.U4)({},{borrowParams:{advPartnerErrorData:{appId:e},errorText:"Empty partnerId"}})}function K(){const e=(0,b.Z)({url:(0,O.e)().href,removed:["a_delay"]});window.history.replaceState(null,document.title,e)}function Y(){V("sendAdvClickGoal"),(0,A.NF)({},_.Ji.ADV_CLICK,{advType:"game",sdkVersion:2})}function X(e,t){l.Z.post({type:"adv-debug-info",action:"set-debug-adv-block",data:{type:e,id:t}})}function J(){l.Z.post({type:"adv-debug-info",action:"show-debug-info"})}function Q(e,t,a){var r;const s=null!=(r=(0,D.mn)(a,`adv-blocks:${t}`))?r:(0,D.mn)(a,"adv-blocks");return s&&"object"==typeof s?s.desktop&&"object"==typeof s.desktop||s.mobile&&"object"==typeof s.mobile||s.native&&"object"==typeof s.native?(0,n.T)(e,s):((0,P.H)({block:R.W.ADV},new Error(`Invalid "adv-blocks" experiment format:', ${s}`)),e):function(e,t,a){var r;const n=a[`adv-block:${t}`]||a["adv-block"]||(null==(r=a["adv-exp"])?void 0:r[t]);return n&&"object"==typeof n?((0,P.H)({additional:{flagValue:n},message:'Deprecated "adv-block" flag'}),n.fullscreen||n.fullscreen_landscape||n.rewarded?Object.assign({},e,G(Z({},n),{desktop:n,mobile:n})):((0,P.H)({block:R.W.ADV},new Error(`invalid adv experiment format, expected { fullscreen?: "R-I-12345", fullscreen_landscape?: "R-I-54321", rewarded?: "R-I-54321" } (at least one property), got:', ${n}`)),e)):e}(e,t,a)}function ee(e){if((0,I.qo)()){const t=e.style;t.width=`${window.innerWidth}px`,t.height=`${window.innerHeight}px`}const t=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",`${t}px`);const a=window.pageYOffset;return window.scroll(0,0),a}function te(){function e(){window.orientation===q?document.documentElement.style.removeProperty("--iphone-bangs-adv-padding-left"):document.documentElement.style.setProperty("--iphone-bangs-adv-padding-left","0"),window.orientation===U?document.documentElement.style.setProperty("--iphone-bangs-padding-right","1"):document.documentElement.style.setProperty("--iphone-bangs-padding-right","0")}e(),s.default.addChangeListener(e)}function ae(){l.Z.post({type:"adv-debug-info",action:"hide-debug-info"})}function re(e,t){const a=t.querySelector(`.${e.modalContent}`);if(a){const e=a.firstElementChild;e&&e.addEventListener("click",Y,!0)}}class ne extends Error{constructor(e,t={isEmpty:!1,isFinal:!1,wasShown:!1}){super(e),this.params=t}}function se(e){try{return String(e.message||e).substring(0,100)}catch(e){}return""}function oe(e,t){return(...a)=>{try{if("function"!=typeof e)throw new Error("fn must be a function");return e(...a)}catch(e){(0,P.H)({block:R.W.ADV,additional:{origError:se(e)},message:t},e)}}}function ie(e){const{advElement:t,type:a,flags:r,appId:n,isIOS:s}=e,i=r[`no_click_${a}:${n}`]||r[`no_click_${a}`]||(s?100:0);if(!i)return;if(!t)return void(0,P.H)({block:R.W.ADV},new Error("Cannot place no click overlay - advElement is null"));const l=document.createElement("div");l.className=o.kn.noClickOverlay,t.appendChild(l),setTimeout((()=>{t.removeChild(l)}),i)}function le(e,t,a){const r=(0,D.$9)(t,L.Z.newAdvInterval);return"number"==typeof r?r:!k.XK&&parseInt(e||"0",10)||((n={withWorldWideAdv:Boolean(a),isGamesApp:(0,I.VP)()}).isGamesApp?n.withWorldWideAdv?w.gamesApp.worldWide:w.gamesApp.default:n.withWorldWideAdv?w.web.worldWide:w.web.default);var n}function de(e){if(e){const t=parseInt(e,10)||0;if(t>0)return t}const t=(0,S.V)("utm_source");return t&&["adv","google","yandex"].includes(t)?T.JH:0}function ce(e){return`play-modal_view-type_${e}`}function ue(e,t){!function(e){const{error:t}=e;if(function(e){return e&&"object"==typeof e&&"getMessage"in e&&"function"==typeof e.getMessage&&"getErrorCode"in e&&"function"==typeof e.getErrorCode}(t)){const a=`AdError ${t.getErrorCode()}`;null!=e.additional||(e.additional={}),e.additional.message=t.getMessage(),e.error=new Error(a)}}(t);const{additional:a,name:r,error:n,tag:s}=t;(0,P.H)({block:R.W.ADV,prefix:`${o.yt}: `,additional:{adv:G(Z({},a),{name:r,service:e.serviceName,tag:s})}},n)}function he(){if(pe())return;l.Z.post({type:"play-game-header",action:"show"});const e=document.querySelector(".header-container"),t=document.querySelector(".stack"),a=document.querySelector(".menu__overlay");e&&(e.style.display=""),a&&(a.style.top=""),t&&(t.style.top="")}function pe(){return"no"===(0,S.V)("header")}function me(){l.Z.post({type:"play-game-header",action:"hide"});const e=document.querySelector(".header-container"),t=document.querySelector(".stack"),a=document.querySelector(".menu__overlay");e&&(e.style.display="none"),a&&(a.style.top="0px"),t&&(t.style.top="0px")}function ve(e){return`${o.kn.modal}_${e}`}function ge(){V("show sticky banner"),l.Z.post({type:"sticky-banner",action:"show",data:{reason:"blur"}})}function ye(e,t,a){var r;const n=null!=(r=t.getTimeoutExtraTime(i.QA.ServiceInit,a))?r:0;let s=(0,D.$9)(e,L.Z.adScriptInitTimeout)||3500+n;const o=(0,D.$9)(e,`adv_${t.serviceName}_init_timeout`);return void 0!==o&&(s=o+n,n&&V(`Note: Service ${t.serviceName} added extra init timeout: ${n} (total: ${s})`)),s}function fe(e,t,a,r){var n;const s=null!=(n=a.getTimeoutExtraTime(t===E.$H.INTERSTITIAL?i.QA.ShowFullscreen:i.QA.ShowRewarded,r))?n:0;let l=(t===E.$H.INTERSTITIAL?o.hL:o.UG)+s;const d=(0,D.$9)(e,`adv_${a.serviceName}_show_timeout`);return void 0!==d&&(l=d+s,s&&V(`Note: Service ${a.serviceName} added extra showAdv timeout: ${s} (total: ${l})`)),l}function we(e){l.Z.postToChild(e),l.Z.post(G(Z({},e),{action:`debug-action-${e.action}`}))}function be(e,t){(0,D.bF)(t)&&e.addCallbacks({onOpen:()=>{V("hide sticky banner"),l.Z.post({type:"sticky-banner",action:"hide",data:{reason:"blur"}})},onClose:()=>{ge()}})}function Ee(e,t,a){return j(this,null,(function*(){if(t!==E.$H.REWARDED)return;const n=(0,x.AK)(a);if(!n.isAndroid||n.isStandalone)return;const o=yield l.Z.post(r.Vo.GetState()),{screenOrientationWasLocked:i}=o.data;if(i)return;const d=()=>{s.default.unlock().catch((()=>{}))};e.addCallbacks({onOpen:()=>{s.default.lock().catch((()=>{}))},onClose:d,onError:d})}))}function ke(e,t){switch(t){case E.$H.INTERSTITIAL:e.addCallbacks({onOpen:()=>we(r.fB.AdvCallbackOpen()),onClose:e=>l.Z.postToChild(r.fB.AdvCallbackClose({wasShown:e})),onError:e=>we(r.fB.AdvCallbackError({fromMethod:"showFullScreenAdv",error:f(e)}))});break;case E.$H.REWARDED:e.addCallbacks({onOpen:()=>we(r.fB.RewardedVideoCallbackOpen()),onRewarded:()=>we(r.fB.RewardedVideoCallbackRewarded()),onClose:()=>we(r.fB.RewardedVideoCallbackClose()),onError:e=>we(r.fB.RewardedVideoCallbackError({error:f(e),fromMethod:"onError"}))})}}function Se(){return!1}},31327:(e,t,a)=>{a.d(t,{Z:()=>vs});var r=a(63904),n=a.n(r),s=a(87363),o=a.n(s),i=a(4824),l=a(97808);const d=n().with("adv-debug-info");let c="",u="";class h extends i.P{constructor(e){super(e),this.switchDebugInfo=()=>{var e,t;const{isOverlayVisible:a}=this.state,{appId:r}=this.props;if(this.setState((e=>({isOverlayVisible:!e.isOverlayVisible}))),a)return;const n=[`Версия SDK: ${window.appData.version}`,`Реклама: ${c} - ${u}`,`Эксперименты: ${JSON.stringify(window.appData.abt.flags,null,2)}`,`UserAgent: ${navigator.userAgent}`,`AppID: ${r}`],s=`https://forms.yandex-team.ru/surveys/73978/?${[`answer_short_text_644835=${encodeURIComponent("Проблема с рекламой")}`,`answer_long_text_644836=${encodeURIComponent("\n\n===== отладочная информация:\n"+n.join("\n"))}`].join("&")}`,o=()=>{var e;const t="Логи метрики:\n\n"+(null==(e=window.metrikaLogs)?void 0:e.data.map((e=>`${e.type}${e.goal?` ${e.goal}`:""} - ${JSON.stringify(e.data)}`)).slice().reverse().join("\n\n"))||0;this.setState({metrikaLogsText:t}),navigator.clipboard.writeText(n.join("\n")+"\n\n"+t)};o(),window.metrikaLogs.onUpdate=o,null==(t=null==(e=null==window?void 0:window.Ya)?void 0:e.Rum)||t.logEventString("adv","butterfly manual report",{additional:n}),this.setState({logs:n,linkHref:s})},this.state={isVisible:!1,isOverlayVisible:!1,linkHref:"",logs:[],metrikaLogsText:""}}componentDidMount(){this.initMessaging()}initMessaging(){l.Z.onInternalMessage("adv-debug-info",(e=>{const{action:t}=e.data;switch(t){case"show-debug-info":this.setState({isVisible:!0});break;case"hide-debug-info":this.hide();break;case"set-debug-adv-block":c=e.data.data.type,u=e.data.data.id}}))}hide(){window.metrikaLogs.onUpdate=void 0,this.setState({isVisible:!1})}render(){const{logs:e,metrikaLogsText:t,isVisible:a,isOverlayVisible:r,linkHref:n}=this.state,{isDevFeaturesEnabled:s}=this.props;return s&&a?o().createElement("div",{className:d()},o().createElement("button",{className:d("button"),onClick:this.switchDebugInfo},"🐞"),r&&o().createElement("div",{className:d("overlay"),onClick:this.switchDebugInfo},o().createElement("div",{className:d("clipboard-notice")},"Данные скопированы в буфер обмена"),o().createElement("div",{className:d("data")},e.join("\n")),o().createElement("a",{href:n,target:"_blank"},"Тикет в StarTrek"),o().createElement("div",{className:d("metrika-logs")},t))):null}}const p=h;var m=a(14408),v=a(98816),g=a(95486),y=a(10719),f=a(26108),w=a(88757),b=a(35742),E=a(84819),k=a(8804),S=a(73694),A=a(14375),I=a(10739),P=a(40184),T=a(11510),C=a(94671),R=a(96952),D=a(909),L=a(15771);const O="FullscreenBlock-module__container--suKYF",_="FullscreenBlock-module__hidden--FjMwl";var x=Object.defineProperty,N=Object.defineProperties,B=Object.getOwnPropertyDescriptors,M=Object.getOwnPropertySymbols,H=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable,$=(e,t,a)=>t in e?x(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,W=(e,t)=>{for(var a in t||(t={}))H.call(t,a)&&$(e,a,t[a]);if(M)for(var a of M(t))F.call(t,a)&&$(e,a,t[a]);return e},Z=(e,t)=>N(e,B(t));const G="fullscreenBlock_container",j="fullscreenBlock_block";function U(e){return""===e?G:`${G}_${e}`}function q(e){return""===e?j:`${j}_${e}`}const V={default:"FullscreenBlock-module__blockDefaultPaddings--PcHqu",unset:"FullscreenBlock-module__blockNoPaddings--uTgyK",small:"FullscreenBlock-module__blockSmallPaddings--FtXVj"},z=({advManager:e})=>{var t,a,r,n;const i=(0,T.T)(),{abt:{flags:d}}=(0,P.b)(),c=(0,s.useMemo)((()=>({usePlaceholder:(0,L.Sf)(d),useLoader:(0,L.Z0)(d),controlsDelay:(0,L.sQ)(d)})),[d]),u=(0,s.useRef)([]),h=(0,s.useRef)(null),[p,m]=(0,s.useState)({isVisible:!1,loadedProviderBlock:null,showControls:!1,isHeaderEnabled:!(0,I.Ij)(),callbacks:{},visibleChange:!1}),[v,g]=(0,s.useState)([""]),[y,f]=(0,s.useState)(v[0]),w=(0,s.useCallback)((()=>{m((e=>Z(W({},e),{isVisible:!1,loadedProviderBlock:null,callbacks:{}})))}),[]),b=(0,s.useCallback)((()=>{var e,t;(0,A.D)(),null==(t=(e=p.callbacks).onClose)||t.call(e),w()}),[w,p.callbacks]),x=(0,s.useCallback)((e=>{"Escape"===e.key&&p.isVisible&&(0,R.D)((()=>{b()}))}),[p.isVisible,b]),N=(0,s.useCallback)(((e,t)=>{const{action:a,data:r}=e.data;switch(a){case"show":{const{onOpen:e,onClose:a}=r;m((t=>Z(W({},t),{isVisible:!0,visibleChange:!0,showControls:!1,callbacks:{onOpen:e,onClose:a}}))),t();break}case"show-block":{const{blockName:e}=r;f((()=>(t(),U(e))));break}case"hide":const{blockName:e}=null!=r?r:{};if(e&&y!==U(e))break;w();break;case"add-block":{const{blockName:e}=r;if(v.includes(e))return void t();g((a=>(u.current.push(t),[...a,e])));break}case"show-controls":m((e=>Z(W({},e),{showControls:!0})));break;case"is-visible":t({data:{isVisible:p.isVisible}});break;case"slot-loaded":m((e=>Z(W({},e),{loadedProviderBlock:r.blockName}))),t()}}),[v,y,w,p.isVisible]);(0,s.useEffect)((()=>(window.addEventListener("keydown",x),l.Z.onInternalMessage("adv-fullscreen-block",N),()=>{window.removeEventListener("keydown",x),l.Z.offInternalMessage("adv-fullscreen-block",N),h.current&&clearTimeout(h.current)})),[x,N]),(0,s.useEffect)((()=>{var e,t;p.isVisible&&p.visibleChange&&(null==(t=(e=p.callbacks).onOpen)||t.call(e),c.controlsDelay<1||(m(Z(W({},p),{showControls:!1,visibleChange:!1})),h.current=window.setTimeout((()=>{m((e=>Z(W({},e),{showControls:!0})))}),c.controlsDelay)))}),[c.controlsDelay,p]),(0,s.useEffect)((()=>{u.current.length&&(u.current.forEach((e=>{e()})),u.current.length=0)}),[v]);const B=(0,s.useCallback)((()=>{(0,R.D)((()=>{b()}))}),[b]),M=(0,s.useCallback)((()=>{(0,D.Z)()}),[]),H=e.isDisableAdButtonEnabled,F=0===c.controlsDelay||p.showControls,$=(0,L.Hr)(e.flags),G=(0,L.Rw)(e.flags),z=(0,E.v_)({on:"adv_interstitial.publift.enabled"})&&(null==(a=null==(t=e.allAdvBlocks.publift)?void 0:t.interstitial)?void 0:a.zoneId)?{"data-fuse":null==(n=null==(r=e.allAdvBlocks.publift)?void 0:r.interstitial)?void 0:n.zoneId}:null;return o().createElement("div",{className:(0,C.E)(O,void 0,p.isVisible?"visible":_,$?void 0:"FullscreenBlock-module__adsenseDefaultStyles--V8RS4"),"data-testid":"adv-fullscreen-container"},o().createElement("div",null,o().createElement("div",{className:(0,C.E)("FullscreenBlock-module__desktopClose--vu832",F?void 0:_),"data-testid":"adv-fullscreen-closeButton",onClick:B}),c.useLoader&&o().createElement("div",{className:(0,C.E)("FullscreenBlock-module__spinner--ZgJZq",F?_:void 0)},o().createElement(S.y,{key:"landscape-spinner",position:"center",size:32,spinning:!0,view:"default"})),v.map((e=>{const t=U(e);return o().createElement("div",{className:(0,C.E)("FullscreenBlock-module__block--rJxBU",V[G],c.usePlaceholder?"FullscreenBlock-module__placeholder--hKxU_":void 0,y===t?void 0:_,q(e),e===p.loadedProviderBlock?`${j}_loaded`:void 0),key:t},o().createElement("div",W({id:t},z)))}))),H?o().createElement("div",{className:(0,C.E)("FullscreenBlock-module__touchControls--FJKug",F?void 0:_)},H&&o().createElement(k.z,{"data-testid":"adv-fullscreen-closeButton",size:40,view:"secondary",onClick:M},i("header.popup.disable.ads")),o().createElement(k.z,{"data-testid":"adv-fullscreen-closeButton",size:40,view:"primary",onClick:B},i("adv.close"))):null)};var K=a(93298);const Y=(0,K.M$)("AdvAdsense",K.XG.Adv,{background:"#0c6c09"});class X{constructor(e,t){var a,r,n,s;this.service=e,this.initTime=Date.now(),this.lastShowedTimeByTag={[v.$H.INTERSTITIAL]:-1,[v.$H.REWARDED]:-1},this.skipsCounterByTag={[v.$H.INTERSTITIAL]:0,[v.$H.REWARDED]:0},this.initGuardApplyHandler();const{flags:o}=this.advManager,{checksCountCommon:i,showIntervalByTagMs:l,checksCountByTag:d,initDelayMs:c,guardDelayMs:u,showIntervalCommonMs:h}=null!=t?t:{};this.rules={showIntervalByTagMs:this.getRuleValue(m.LQ,l,0),showIntervalCommonMs:null!=(r=null!=(a=(0,m.OF)(this.service.serviceName,o))?a:h)?r:0,initDelayMs:this.getRuleValue(m.vp,c,0),guardDelayMs:this.getRuleValue(m.ro,u,0),checksCountByTag:this.getRuleValue(m.YS,d,0),checksCountCommon:null!=(s=null!=(n=(0,m.g3)(this.service.serviceName,o))?n:i)?s:0}}get advManager(){return this.service.advManager}get skipsCounter(){return this.skipsCounterByTag[v.$H.INTERSTITIAL]+this.skipsCounterByTag[v.$H.REWARDED]}get lastShowedTime(){return Math.max(this.lastShowedTimeByTag[v.$H.INTERSTITIAL],this.lastShowedTimeByTag[v.$H.REWARDED])}getSkipReason({tag:e}){const t=this.calculateSkipReason({tag:e});return t&&this.skipsCounterByTag[e]++,t}calculateSkipReason({tag:e}){const{showIntervalCommonMs:t,showIntervalByTagMs:a,checksCountCommon:r,checksCountByTag:n,initDelayMs:s,guardDelayMs:o}=this.rules;return s[e]&&this.getTimeDiff(this.initTime)<s[e]?"init_delay":o[e]&&this.guardApplyTime&&this.getTimeDiff(this.guardApplyTime)<o[e]?"guard_delay":a[e]&&this.getTimeDiff(this.lastShowedTimeByTag[e])<a[e]?"show_interval_by_tag":t&&this.getTimeDiff(this.lastShowedTime)<t?"show_interval_common":n[e]&&this.skipsCounterByTag[e]<n[e]?"show_calls_by_tag":r&&this.skipsCounter<r?"show_calls_common":null}getTimeDiff(e,t){return Math.abs((e||0)-(null!=t?t:Date.now()))}getRuleValue(e,t,a){var r,n,s,o;const{flags:i}=this.advManager;return{[v.$H.INTERSTITIAL]:null!=(n=null!=(r=e(v.$H.INTERSTITIAL,this.service.serviceName,i))?r:null==t?void 0:t[v.$H.INTERSTITIAL])?n:a,[v.$H.REWARDED]:null!=(o=null!=(s=e(v.$H.REWARDED,this.service.serviceName,i))?s:null==t?void 0:t[v.$H.REWARDED])?o:a}}initGuardApplyHandler(){return e=this,t=function*(){yield Promise.all([this.advManager.guardClosedPromiseWrapper.promise,this.advManager.splashScreenPromise.promise]).then((()=>this.guardApplyTime=Date.now()))},new Promise(((a,r)=>{var n=e=>{try{o(t.next(e))}catch(e){r(e)}},s=e=>{try{o(t.throw(e))}catch(e){r(e)}},o=e=>e.done?a(e.value):Promise.resolve(e.value).then(n,s);o((t=t.apply(e,null)).next())}));var e,t}resetShowTimer(e){this.lastShowedTimeByTag[e]=Date.now()}}var J=a(54814),Q=a(60295);const ee=(0,K.M$)("AdvService",K.XG.Adv);class te{constructor(e,t,a,r){this.advManager=e,this.options=t,this.serviceName=a,this.initPromise=new f.Z,this.initTime=Date.now(),this.canShowController=new X(this,r)}getAdvBlockId(e,t){return"invalid_block"}getWaterfallItem(e){var t,a;return null!=(a=null==(t=this.advManager.waterfallQueue[e])?void 0:t.find((e=>e.provider===this.serviceName)))?a:null}isTagActive(e){return this.options.tags[e]!==J.pP.Skip}isTagWaterfall(e){return this.options.tags[e]!==J.pP.Onspot}onServiceLoaded(){this.initPromise.resolve(),ee(`Service ${this.serviceName} loaded.`),(0,Q.s4)("play_adv_service_init",Date.now()-this.initTime,!0,{"-additional":encodeURIComponent(JSON.stringify({advtype:this.serviceName,options:this.options}))})}onServiceError(e){let t=null!=e?e:new Error("Service not initialized: Unhandled undefined error (safe)");e instanceof Error&&(e.message=`Service not initialized: ${e.message}`),(0,I.g5)(this,{error:t,additional:{error:e}}),this.initPromise.reject(t)}getTimeoutExtraTime(e,t){}checkCanShow(e,t){const a=this.canShowController.getSkipReason({tag:e});return a?(ee(`[${this.serviceName}] Skip service by reason: ${a}`),J.Kc.Next):J.Kc.Ok}get hasFullscreenAdv(){var e;return null==(e=this.advManager.advUsedBlocks.fullscreen)||e}get hasRewarderdAdv(){var e;return null==(e=this.advManager.advUsedBlocks.rewarded)||e}showRewardedVideo(e){return Promise.reject()}resetShowTimer(e){this.canShowController.resetShowTimer(e)}cancelShow(e){}}var ae=a(5e4);function re({querySelector:e,interval:t=100,rejectTimeout:a=3e3}){return new Promise(((r,n)=>{function s(){try{let t=document.querySelector(e);if(t)return r(t),!0}catch(e){return n(e),!1}}if(s())return;const o=window.setTimeout((()=>{l(),n(new Error("Can not find element"))}),a),i=window.setInterval((()=>{s()&&l()}),t);function l(){clearInterval(i),clearTimeout(o)}}))}var ne=a(40656),se=(e,t,a)=>new Promise(((r,n)=>{var s=e=>{try{i(a.next(e))}catch(e){n(e)}},o=e=>{try{i(a.throw(e))}catch(e){n(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(s,o);i((a=a.apply(e,t)).next())}));class oe extends te{constructor(e,t){var a,r,n;const{serviceName:s}=t;if(![ae.e.Adsense,ae.e.AdsenseResponsive].includes(s))throw new Error(`Invalid service name: ${s}, kind of 'adsense' expected.`);super(e,t,s),this.isResponsive=!1,this.isResponsive=s===ae.e.AdsenseResponsive;const o=null==(a=e.waterfallQueue)?void 0:a[v.$H.INTERSTITIAL].find((e=>e.provider===ae.e.AdsenseResponsive)),{clientId:i,slotId:l}=(0,J.hk)(o)?o:null!=(n=null==(r=e.allAdvBlocks.adsense)?void 0:r.interstitial)?n:{};this.clientId=null!=i?i:"invalid_block",this.slotId=null!=l?l:"invalid_block",this.init()}init(){return se(this,null,(function*(){try{const e=this.isTagActive(v.$H.INTERSTITIAL),t=this.isTagActive(v.$H.REWARDED),[a,r]=yield Promise.all([e?yield(0,w.l)(this.isResponsive?b.oO.AdsenseResponsive:b.oO.AdsenseBlock):null,t?yield(0,w.l)(b.oO.AdsenseRewarded):null]);e&&a&&(this.provider=a,yield re({querySelector:`.${O}`,interval:100,rejectTimeout:1500}),yield l.Z.post({type:"adv-fullscreen-block",action:"add-block",data:{blockName:this.serviceName},timeout:ne.WT})),t&&r&&(this.rewardedProvider=r),this.onServiceLoaded()}catch(e){this.onServiceError(e)}}))}getTimeoutExtraTime(e,t){switch(e){case J.QA.ServiceInit:return 3*ne.WT;case J.QA.ShowFullscreen:return 5*ne.yR}return super.getTimeoutExtraTime(e,t)}getAdvBlockId(e,t){switch(e){case v.$H.INTERSTITIAL:return this.isResponsive?this.slotId:this.clientId;case v.$H.REWARDED:return"adsense_rewarded"}return super.getAdvBlockId(e,t)}showFullscreenAdv({callbacks:e,clickDaemon:t,reason:a}){return new Promise(((r,n)=>se(this,null,(function*(){try{const{serviceName:s,isResponsive:o,clientId:i}=this,d=this.provider;if(!d)return void n(new Error("Adsense provider not loaded."));const c=this.getAdvBlockId(v.$H.INTERSTITIAL,a);let u,h=!1;o&&(yield l.Z.post({type:"adv-fullscreen-block",action:"show-block",data:{blockName:s},timeout:ne.WT}),yield l.Z.post({type:"adv-fullscreen-block",action:"show",data:{onClose:()=>{h&&e.onClose(h),u&&d.destroySlot(u)}}})),e.onOpen(!1),t.request({advBlockId:c}),Y("Create slot",c,i,U(s)),u=yield d.createSlot({adFormat:"auto",blockId:c,clientId:i,divId:U(s),height:window.innerHeight-192,width:window.innerWidth-144});const{isEmpty:p,slot:m}=yield d.preloadSlot({slot:u});if(p)throw t.responseEmpty(),new I.lu("Slot is empty",{isEmpty:!0});t.response(),h=!0,(0,L.Hr)(this.advManager.flags)&&l.Z.post({type:"adv-fullscreen-block",action:"slot-loaded",data:{blockName:s},timeout:ne.WT}),yield d.showSlot(m),t.show(),o||e.onClose(!0),r()}catch(e){n(e)}}))))}showRewardedVideo({callbacks:e,clickDaemon:t,reason:a}){return new Promise(((r,n)=>se(this,null,(function*(){try{const{clientId:s,rewardedProvider:o}=this;if(!o)return void n(new Error("Provider not loaded."));const i=this.getAdvBlockId(v.$H.REWARDED,a);let l,d=!1;t.request({advBlockId:i}),Y("Create rewarded slot",i,s),l=yield o.createSlot({blockId:i});const{isEmpty:c,slot:u}=yield o.preloadSlot({slot:l});if(c)throw t.responseEmpty(),new I.lu("Slot is empty",{isEmpty:!0});t.response(),r();const{waitForView:h}=yield o.showSlot(u);d=!0,e.onOpen(!0);const{isDismissed:p}=yield h;p||e.onRewarded(),e.onClose(d)}catch(e){n(e)}}))))}cancelShow(e){e===v.$H.INTERSTITIAL&&l.Z.post({type:"adv-fullscreen-block",action:"hide",data:{blockName:this.serviceName}})}}var ie=a(33252),le=a(79049),de=a(13377);const ce=(e,t)=>{e.show(),null==t||t()},ue=(e,t,a)=>{if("viewed"===e)return void t.response();const r=["error"].includes(e);t.responseEmpty(),a(new I.lu(`Azerion returned ${e} status`,{isEmpty:!r}))};var he=(e,t,a)=>new Promise(((r,n)=>{var s=e=>{try{i(a.next(e))}catch(e){n(e)}},o=e=>{try{i(a.throw(e))}catch(e){n(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(s,o);i((a=a.apply(e,t)).next())})),pe=(e=>(e.Display="display",e.Interstitial="interstitial",e.Midroll="interstitial",e.Preroll="interstitial",e.Rewarded="rewarded",e))(pe||{}),me=(e=>(e.SDK_ERROR="SDK_ERROR",e.SDK_GAME_PAUSE="SDK_GAME_PAUSE",e.SDK_GAME_START="SDK_GAME_START",e.SDK_GDPR_TARGETING="SDK_GDPR_TARGETING",e.SDK_GDPR_THIRD_PARTY="SDK_GDPR_THIRD_PARTY",e.SDK_GDPR_TRACKING="SDK_GDPR_TRACKING",e.SDK_LB_LOGIN="SDK_LB_LOGIN",e.SDK_READY="SDK_READY",e.SDK_REWARDED_WATCH_COMPLETE="SDK_REWARDED_WATCH_COMPLETE",e.SDK_SHW_LB="SDK_SHW_LB",e))(me||{}),ve=a(17061),ge=(e,t,a)=>new Promise(((r,n)=>{var s=e=>{try{i(a.next(e))}catch(e){n(e)}},o=e=>{try{i(a.throw(e))}catch(e){n(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(s,o);i((a=a.apply(e,t)).next())}));let ye=null;var fe=a(79098),we=a(23404),be=a(33775);const Ee="//imasdk.googleapis.com/js/sdkloader/ima3.js",ke=[{width:1280,height:720},{width:854,height:480},{width:960,height:720},{width:640,height:480}],Se=1e4;var Ae=a(94199);class Ie{constructor(e){this.adsManager=e,this.isComplete=!1,this.readyPromise=new f.Z,this.startedPromise=new f.Z,this.showPromise=new f.Z,this.onAdError=e=>{this.isComplete=!0,this.destroy(e)},this.onAdLoaded=()=>{this.readyPromise.resolve()},this.onAdStarted=()=>{this.startedPromise.resolve()},this.onAdComplete=()=>{this.isComplete||(this.isComplete=!0,this.showPromise.resolve())},this.destroy=e=>{this.readyPromise.reject(e),this.showPromise.reject(e),this.startedPromise.reject(e)},this.start=()=>{try{this.adsManager.start()}catch(e){return e}},this.adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError),this.adsManager.addEventListener(google.ima.AdEvent.Type.LOADED,this.onAdLoaded),this.adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,this.onAdStarted),this.adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,this.onAdComplete),this.adsManager.addEventListener(google.ima.AdEvent.Type.SKIPPED,this.onAdComplete),this.readyPromise.promise.catch((()=>{})),this.startedPromise.promise.catch((()=>{})),this.showPromise.promise.catch((()=>{}))}}var Pe=a(65751),Te=a(38096),Ce=a(29483),Re=a(26667),De=a(37930),Le=a(34711),Oe=a(31136),_e=a(49659),xe=Object.defineProperty,Ne=Object.getOwnPropertySymbols,Be=Object.prototype.hasOwnProperty,Me=Object.prototype.propertyIsEnumerable,He=(e,t,a)=>t in e?xe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;const Fe="https://pubads.g.doubleclick.net/gampad/ads?"+Object.entries({tfcd:0,sz:"640x360|640x480",gdfp_req:1,output:"vast",unviewed_position_start:1,env:"vp",vpos:"midroll",vad_type:"linear",max_ad_duration:5e4,vpa:"auto",vpmute:0,nofb:1,plcmt:1}).map((([e,t])=>`${e}=${encodeURIComponent(t)}`)).join("&"),$e="https://pubads.g.doubleclick.net/gampad/ads?"+Object.entries({tfcd:0,npa:0,sz:"1x1|300x169|400x300|640x480",gdfp_req:1,unviewed_position_start:1,ad_type:"skippablevideo",output:"vast",env:"vp",impl:"s"}).map((([e,t])=>`${e}=${encodeURIComponent(t)}`)).join("&"),We=()=>{const{hostname:e}=(0,Te.getDomainConfig)(),{hostname:t,pathname:a}=(0,_e.e)();return`https://${t.replace(new RegExp(`(.+)(${(0,Ce.h)(e)}.)`),"$2")}${a}`};function Ze(e){return(e=>((0,E.v_)({on:"adv_interstitial.instream_publift.enabled"})?$e:Fe)+"&"+Object.entries({iu:e,description_url:We()}).map((([e,t])=>`${e}=${encodeURIComponent(t)}`)).join("&"))(e.blockId)+function(e){const t=((e,t)=>{for(var a in t||(t={}))Be.call(t,a)&&He(e,a,t[a]);if(Ne)for(var a of Ne(t))Me.call(t,a)&&He(e,a,t[a]);return e})({appID:e},(0,De.F)()),a=(0,Le.X)();return void 0!==a&&(t.clid=a),"&cust_params="+encodeURIComponent(Pe.stringify(t))}(e.appID)}const Ge=()=>{var e,t,a,r;const n=(0,E.v_)({on:"adv_interstitial.instream_publift.enabled"})?"publift":"google",{interstitial:{[n]:s},rewarded:{google:o}}=(0,Te.getDomainConfig)().adv,i="desktop",{showInterval:l}=null!=(t=null==(e=null==s?void 0:s.instream)?void 0:e[i])?t:{},{showInterval:d}=null!=(r=null==(a=null==o?void 0:o.instream)?void 0:a[i])?r:{};return{[v.$H.INTERSTITIAL]:l,[v.$H.REWARDED]:d}};var je=a(51290),Ue=a(97553),qe=(e,t,a)=>new Promise(((r,n)=>{var s=e=>{try{i(a.next(e))}catch(e){n(e)}},o=e=>{try{i(a.throw(e))}catch(e){n(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(s,o);i((a=a.apply(e,t)).next())}));const Ve=(0,K.M$)("GoogleInstreamPrerender",K.XG.Adv,{background:"#d486f2"});class ze{constructor(e,t){this.service=e,this.adContainer=t,this.videoPlayer=document.createElement("video"),this.currentAdvLogger=new je.U({app_id:this.service.advManager.appId,tag:v.$H.INTERSTITIAL}),this.createAdDisplayContainer=()=>{this.adDisplayContainer=new google.ima.AdDisplayContainer(this.adContainer,this.videoPlayer),this.adContainer.addEventListener("click",this.adContainerClick)},this.adContainerClick=()=>{this.adsManager&&this.adsManager.resume()},this.initAdsLoader=()=>{this.adsLoader=new google.ima.AdsLoader(this.adDisplayContainer),this.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoaded,!1),this.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError,!1)},this.onAdError=e=>{var t;const a=e.getError();Ve(a.getMessage()),null==(t=this.currentAdLoading)||t.reject(a),this.currentAdLoading=void 0,this.resetSDK()},this.resetSDK=()=>{var e,t,a;Ve("resetting sdk state"),null==(e=this.adsManager)||e.destroy(),null==(t=this.adsLoader)||t.contentComplete(),null==(a=this.adsLoader)||a.destroy(),this.initAdsLoader(),this.currentShow=void 0},this.onAdsManagerLoaded=e=>{var t;Ve("ad manager loaded");const a=new google.ima.AdsRenderingSettings;a.enablePreloading=!(0,L.Rb)(this.service.advManager.flags),this.adsManager=e.getAdsManager(this.videoPlayer,a),this.currentShow=new Ie(this.adsManager);const{width:r,height:n}=this.getRendererSize();this.adsManager.init(r,n,google.ima.ViewMode.NORMAL),this.currentAdvLogger.response(),null==(t=this.currentAdLoading)||t.resolve(),this.currentAdLoading=void 0},this.setRendererSize=({width:e,height:t})=>{l.Z.post({type:"instream-fullscreen-render",action:"set-size",data:{width:e,height:t}})},this.getRendererSize=()=>{const e=this.isHeaderEnabled?-32:0,t=(Ae.default.isLandscape,e),a={width:window.innerWidth-4+0,height:window.innerHeight+t};return ke.find((({width:e,height:t})=>e<=a.width&&t<=a.height))||a},this.onResizeHandler=()=>qe(this,null,(function*(){var e;let t;this.isResponsiveContainer?t=(yield l.Z.post(g.KT.GetSize({tag:v.$H.INTERSTITIAL}))).data:(t=this.getRendererSize(),this.setRendererSize(t)),null==(e=this.adsManager)||e.resize(t.width,t.height,google.ima.ViewMode.NORMAL)})),this.videoPlayer.setAttribute("playsinline","true"),this.isHeaderEnabled=!(0,I.Ij)(),this.isResponsiveContainer=(0,be.Hc)(e.advManager.flags),this.createAdDisplayContainer(),this.initAdsLoader(),this.setRendererSize(this.getRendererSize()),Ae.default.addChangeListener(this.onResizeHandler),window.addEventListener("resize",this.onResizeHandler),(0,E.v_)({on:"adv_interstitial.instream.preload_delay"})?window.setTimeout((()=>{this.prefetchAd()}),Se*we.j2):this.prefetchAd()}prefetchAd(){var e;(0,L.Rb)(this.service.advManager.flags)||(this.loadAd(Ue.p_.PRELOAD),null==(e=this.currentAdLoading)||e.promise.catch((e=>{var t;Ve("prefetching failed"),this.currentAdvLogger.error((null==(t=null==e?void 0:e.getMessage)?void 0:t.call(e))||e)})))}loadAd(e){if(Ve(`asked to load an ad for ${e}`),this.currentAdLoading||this.currentShow)return;this.currentAdvLogger=new je.U({app_id:this.service.advManager.appId,tag:v.$H.INTERSTITIAL});const t=new google.ima.AdsRequest,{advManager:a}=this.service,r=this.service.getAdvBlockId();t.adTagUrl=Ze({appID:a.appId,blockId:r}),t.pageUrl=We();const n=this.getRendererSize();t.linearAdSlotWidth=n.width,t.linearAdSlotHeight=n.height,t.nonLinearAdSlotWidth=n.width,t.nonLinearAdSlotHeight=n.height,t.forceNonLinearFullSlot=!0,this.currentAdvLogger.request({advBlockId:r,provider:ae.e.GoogleInstream,reason:e}),this.currentAdLoading=new f.Z,this.adsLoader.requestAds(t)}getAdToShow(){return qe(this,null,(function*(){if(Ve("got call to show ads"),this.currentShow||(this.currentAdLoading?Ve("ad is already loading, waiting for it"):(Ve("dont have any ad ready, trying to load it"),this.loadAd(Ue.p_.ONSPOT)),yield this.currentAdLoading.promise),this.adDisplayContainer.initialize(),Ve("ad display container initialized!"),!this.currentShow)throw new Error("there is no current show, that should not happen");Ve("ad data is ready, returning");const e=this.currentShow;return{advLogger:this.currentAdvLogger,showPromise:e.showPromise.promise.finally((()=>{this.resetSDK(),(0,E.v_)({off:"adv_interstitial.instream.preload_delay"})&&this.prefetchAd()})).catch((()=>{})),readyPromise:e.readyPromise.promise,startedPromise:e.startedPromise.promise,destroy:()=>e.destroy(),startAd:()=>{const t=e.start();if(t)throw Ve("error starting an ad"),(0,ie.H)({block:de.W.ADV,additional:{adv:{service:this.service.serviceName}}},t),e.destroy(),t;(e=>{try{if(1!==e.childElementCount)return void Re._y.tag("testId").log(`Element has more than one children (child count: ${e.childElementCount})`);const t=e.firstElementChild;if(!(t&&t instanceof HTMLDivElement))return void Re._y.tag("testId").spoiler(t).log("Failed to set banner testId.");t.dataset.testid="interstitial-slot_google-instream"}catch(e){Re._y.tag("testId").spoiler(e).log("Failed to set banner testId.")}})(this.adContainer)}}}))}}var Ke=a(46210);function Ye({fullUrl:e}){const t=(0,Ke.Qs)(e);return t?(0,Ke.d2)(t):Ee}var Xe=(e,t,a)=>new Promise(((r,n)=>{var s=e=>{try{i(a.next(e))}catch(e){n(e)}},o=e=>{try{i(a.throw(e))}catch(e){n(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(s,o);i((a=a.apply(e,t)).next())}));const Je=(0,K.M$)("GoogleInstream",K.XG.Adv,{background:"#d486f2"});var Qe=(e,t,a)=>new Promise(((r,n)=>{var s=e=>{try{i(a.next(e))}catch(e){n(e)}},o=e=>{try{i(a.throw(e))}catch(e){n(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(s,o);i((a=a.apply(e,t)).next())}));class et{constructor(e,t){this.service=e,this.tag=t,this.imaAdsManager=null,this.waitForPreload=void 0,this.onImaAdsLoaderLoaded=null,this.onImaAdsLoaderError=null,this.debugLog=(0,K.M$)("GoogleInstreamPrerender",[K.XG.Adv,this.tag],{background:"#d486f2"}),this.onResizeHandler=()=>Qe(this,null,(function*(){var e;const{width:t,height:a}=yield this.getRendererSize();null==(e=this.imaAdsManager)||e.resize(t,a,google.ima.ViewMode.NORMAL)})),this.preload=e=>Qe(this,[e],(function*({advLogger:e=new je.U({app_id:this.service.advManager.appId,tag:this.tag}),reason:t=Ue.p_.PRELOAD}){var a;if(this.waitForPreload)return this.waitForPreload.promise;this.debugLog(`preload called (reason: ${t})`),e||(e=new je.U({app_id:this.service.advManager.appId,tag:this.tag}));const r=this.service.getAdvBlockId(this.tag,t);e.request({advBlockId:r,provider:this.service.serviceName,reason:t});const n=new f.Z;this.waitForPreload=n;try{const s=new f.Z;n.promise.catch((()=>{this.debugLog("Resolve show promise due preload's promise rejection"),s.resolve()}));const{height:o,width:i}=yield this.getRendererSize(),l=new google.ima.AdsRequest;l.linearAdSlotWidth=l.nonLinearAdSlotWidth=i,l.linearAdSlotHeight=l.nonLinearAdSlotHeight=o,l.forceNonLinearFullSlot=!0,l.adTagUrl=Ze({appID:this.service.advManager.appId,blockId:r}),l.pageUrl=We(),this.onImaAdsLoaderLoaded=t=>Qe(this,null,(function*(){var a;this.debugLog("preload response received",t);const r=new google.ima.AdsRenderingSettings,o=t.getAdsManager({currentTime:0,duration:0},r);o.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,(e=>{const t=e.getError(),a=new Error(`${t.getMessage()} [${t.getType()}]`);(0,I.g5)(this.service,{error:a}),n.state===f.W.Pending?n.reject(a):s.reject(a)})),o.addEventListener(google.ima.AdEvent.Type.LOADED,(t=>{this.debugLog("preload adv loaded (ready for playing)",t),n.resolve({isEmpty:!1,advLogger:e,show:()=>(this.debugLog("show called"),o.start(),s.promise)})})),o.addEventListener(google.ima.AdEvent.Type.STARTED,(e=>{this.debugLog("adv started (video playing)",e)})),o.addEventListener(google.ima.AdEvent.Type.SKIPPED,(e=>{this.debugLog("adv skipped (clicked close button)",e)})),o.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,(e=>{this.debugLog("adv finished (closed)",e),s.resolve()})),this.imaAdsManager=o,e.response(),this.imaDisplayContainer.initialize();const{height:i,width:l}=yield this.getRendererSize();this.debugLog(`rendererSize height: ${i}, width: ${l}`),null==(a=this.imaAdsManager)||a.init(l,i,google.ima.ViewMode.NORMAL)})),this.onImaAdsLoaderError=a=>{var r;null==(r=this.imaAdsManager)||r.destroy();const s=a.getError(),o=`${s.getMessage()} [${s.getType()}]`;if(this.debugLog("preload load error",o),s.getErrorCode()===google.ima.AdError.ErrorCode.VAST_NO_ADS_AFTER_WRAPPER)return e.responseEmpty(),void n.resolve({isEmpty:!0,advLogger:e});t===Ue.p_.PRELOAD&&(null==e||e.error(o)),n.reject(new Error(o))},null==(a=this.imaAdsLoader)||a.requestAds(l)}catch(e){n.reject(e)}return n.promise})),this.getRendererSize=()=>Qe(this,null,(function*(){const e=yield l.Z.post(g.KT.GetSize({tag:this.tag})),{data:{width:t,height:a}}=e,r=(0,I.Ij)()?0:32,n={width:window.innerWidth,height:window.innerHeight-r};return ke.find((({width:e,height:t})=>e<=n.width&&t<=n.height))||n})),this.debugLog("init"),this.videoElement=document.createElement("video"),this.videoElement.setAttribute("playsinline","true"),this.videoContainer=document.querySelector(`#advBlock_${ae.e.GoogleInstream}_${this.tag}`),this.videoContainer.addEventListener("click",(()=>{var e;try{null==(e=this.imaAdsManager)||e.resume()}catch(e){this.debugLog("videoContainer click resume error",e)}})),this.imaDisplayContainer=new google.ima.AdDisplayContainer(this.videoContainer,this.videoElement),this.imaAdsLoader=new google.ima.AdsLoader(this.imaDisplayContainer),this.imaAdsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,(e=>{var t;return null==(t=this.onImaAdsLoaderLoaded)?void 0:t.call(this,e)}),!1),this.imaAdsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,(e=>{var t;return null==(t=this.onImaAdsLoaderError)?void 0:t.call(this,e)}),!1),Ae.default.addChangeListener(this.onResizeHandler),window.addEventListener("resize",this.onResizeHandler)}clear(){var e,t;null==(e=this.imaAdsManager)||e.destroy(),null==(t=this.waitForPreload)||t.resolve({advLogger:void 0,isEmpty:!0}),delete this.waitForPreload}}var tt=a(59886),at=(e,t,a)=>new Promise(((r,n)=>{var s=e=>{try{i(a.next(e))}catch(e){n(e)}},o=e=>{try{i(a.throw(e))}catch(e){n(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(s,o);i((a=a.apply(e,t)).next())}));const rt=(0,K.M$)("GoogleInstream",K.XG.Adv,{background:"#d486f2"}),nt="undefined"!=typeof document&&(0,m.vV)(window.appData.abt.flags)?class extends te{constructor(e,t){super(e,t,ae.e.GoogleInstream,{initDelayMs:{[v.$H.INTERSTITIAL]:Se,[v.$H.REWARDED]:Se}}),this.showFullscreenAdv=e=>at(this,[e],(function*({callbacks:e,clickDaemon:t,reason:a,tag:r}){return new Promise(((n,s)=>at(this,null,(function*(){try{if(!this.interstitialPreload)throw new Error(`No ${r} preload created.`);const{advLogger:s,isEmpty:o,show:i}=yield this.interstitialPreload.preload({advLogger:t,reason:a});if(t.bindRequest(s),o||!i)throw new I.lu(tt.XO.INSTREAM_EMPTY,{isEmpty:!0});n((()=>at(this,null,(function*(){e.onOpen(!0),l.Z.post(g.KT.Show({tag:v.$H.INTERSTITIAL})),yield i(),e.onClose(!0)}))))}catch(e){s(e)}}))))})),this.showRewardedVideo=e=>at(this,[e],(function*({callbacks:e,clickDaemon:t,reason:a,tag:r}){return new Promise(((n,s)=>at(this,null,(function*(){try{if(!this.rewardedPreload)throw new Error(`No ${r} preload created.`);const{advLogger:s,isEmpty:o,show:i}=yield this.rewardedPreload.preload({advLogger:t,reason:a});if(t.bindRequest(s),o||!i)throw new I.lu(tt.XO.INSTREAM_EMPTY,{isEmpty:!0});n((()=>at(this,null,(function*(){e.onOpen(!0),l.Z.post(g.KT.Show({tag:v.$H.REWARDED})),yield i(),e.onRewarded(),e.onClose(!0)}))))}catch(e){s(e)}}))))})),this.init()}getAdvBlockId(e,t){var a,r,n;return null!=(n=e===v.$H.REWARDED?null==(a=this.advManager.allAdvBlocks.instream)?void 0:a.rewarded:null==(r=this.advManager.allAdvBlocks.instream)?void 0:r.interstitial)?n:fe.L}init(){return at(this,null,(function*(){try{yield(0,le.x)({id:"ima",src:Ee}),google.ima.settings.setLocale(this.advManager.lang),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),this.isTagActive(v.$H.INTERSTITIAL)&&(yield re({querySelector:`#advBlock_${ae.e.GoogleInstream}_${v.$H.INTERSTITIAL}`,interval:100,rejectTimeout:1500}),this.interstitialPreload=new et(this,v.$H.INTERSTITIAL),(0,L.Rb)(this.advManager.flags)||this.interstitialPreload.preload({}).catch((e=>(0,I.g5)(this,{error:e})))),this.isTagActive(v.$H.REWARDED)&&(yield re({querySelector:`#advBlock_${ae.e.GoogleInstream}_${v.$H.REWARDED}`,interval:100,rejectTimeout:1500}),this.rewardedPreload=new et(this,v.$H.REWARDED),this.rewardedPreload.preload({}).catch((e=>(0,I.g5)(this,{error:e})))),this.onServiceLoaded()}catch(e){rt(e),this.onServiceError(e)}}))}onShowAdvFinished({tag:e}){var t,a;switch(this.cancelShow(e),e){case v.$H.INTERSTITIAL:(0,L.Rb)(this.advManager.flags)||null==(t=this.interstitialPreload)||t.preload({}).catch((e=>(0,I.g5)(this,{error:e,tag:v.$H.INTERSTITIAL})));break;case v.$H.REWARDED:null==(a=this.rewardedPreload)||a.preload({}).catch((e=>(0,I.g5)(this,{error:e,tag:v.$H.REWARDED})))}}cancelShow(e){var t,a;switch(l.Z.post(g.KT.Hide({tag:e})),e){case v.$H.INTERSTITIAL:null==(t=this.interstitialPreload)||t.clear();break;case v.$H.REWARDED:null==(a=this.rewardedPreload)||a.clear()}}}:class extends te{constructor(e,t){super(e,t,ae.e.GoogleInstream,{initDelayMs:{[v.$H.INTERSTITIAL]:Se,[v.$H.REWARDED]:Se},showIntervalByTagMs:Ge()}),this.init()}getAdvBlockId(){var e,t;return null!=(t=null==(e=this.advManager.allAdvBlocks.instream)?void 0:e.interstitial)?t:fe.L}init(){return Xe(this,null,(function*(){try{let e;if(yield(0,le.x)({id:"ima",src:Ye({fullUrl:(0,_e.e)().href})}),(0,be.Hc)(this.advManager.flags))e="advBlock_"+ae.e.GoogleInstream+"_"+v.$H.INTERSTITIAL;else{const{data:t}=yield l.Z.post({action:"update-block-id",data:{blockId:"advBlock_"+ae.e.GoogleInstream},type:"instream-fullscreen-render",timeout:1e3});e=t.blockId}const t=yield re({querySelector:`#${e}`,interval:100,rejectTimeout:1500});google.ima.settings.setLocale(this.advManager.lang),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),this.adContainer=t,this.adPrerender=new ze(this,this.adContainer),this.onServiceLoaded()}catch(e){Je(e),(0,ie.H)({block:de.W.ADV,additional:{adv:{service:this.serviceName}}},e),this.onServiceError(e)}}))}showFullscreenAdv({callbacks:e,clickDaemon:t}){return new Promise(((a,r)=>Xe(this,null,(function*(){var n;try{let r=yield this.adPrerender.getAdToShow();const{advLogger:s,startAd:o,destroy:i,showPromise:d,readyPromise:c,startedPromise:u}=r;s&&t.bindRequest(s);const h=((e,t)=>{const a=(0,Oe.D)(e).then((()=>!0));return e=>{return r=function*(){(yield Promise.race([a,e]))&&t()},new Promise(((e,t)=>{var a=e=>{try{s(r.next(e))}catch(e){t(e)}},n=e=>{try{s(r.throw(e))}catch(e){t(e)}},s=t=>t.done?e(t.value):Promise.resolve(t.value).then(a,n);s((r=r.apply(void 0,null)).next())}));var r}})(7e3,(()=>{throw Je("Timer cutoff!"),i(),new Error("Video ad cutoff by timer")}));Je("waiting for ad to be ready"),yield h(c),Je("ad ready, playing");let p=!1;d.catch((()=>{})).finally((()=>{var t;null==(t=e.onClose)||t.call(e,p),(0,be.Hc)(this.advManager.flags)?l.Z.post(g.KT.Hide({tag:v.$H.INTERSTITIAL})):l.Z.post({type:"instream-fullscreen-render",action:"hide"})})),Je("calling manager to start ad"),o(),(0,be.Hc)(this.advManager.flags)?l.Z.post(g.KT.Show({tag:v.$H.INTERSTITIAL})):l.Z.post({type:"instream-fullscreen-render",action:"show"}),null==(n=e.onOpen)||n.call(e),p=!0,Je("waiting for playback to start"),yield h(u),a(),Je("ad playback started"),yield d}catch(e){r(e)}}))))}showRewardedVideo(){return Xe(this,null,(function*(){return Promise.reject(new Error("Not implemented exception!"))}))}onShowAdvFinished({tag:e}){if(e===v.$H.INTERSTITIAL){if(!this.adPrerender)return;if((0,E.v_)({on:"adv_interstitial.instream.preload_delay"})){const t=(this.canShowController.rules.showIntervalByTagMs[e]||this.canShowController.rules.showIntervalCommonMs)-this.advManager.minIntervalBetweenAds*we.j2;if(t<=0)return;window.setTimeout((()=>{this.adPrerender.prefetchAd()}),t)}}}};var st=a(36529);const ot=(0,K.M$)("GoogleManual",K.XG.Adv,{background:"#0c6c09"});var it=(e,t,a)=>new Promise(((r,n)=>{var s=e=>{try{i(a.next(e))}catch(e){n(e)}},o=e=>{try{i(a.throw(e))}catch(e){n(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(s,o);i((a=a.apply(e,t)).next())}));const lt=[2*ne.WT,2*ne.WT,2*ne.WT],dt=15*ne.WT;var ct=a(23617),ut=a(50042),ht=a(41811),pt=a(90380);const mt={[ht.y_.YANDEX]:{fullscreenBlockFlag:pt.Z.nativeFullscreenBlock,rewardedBlockFlag:pt.Z.nativeRewardedBlock},[ht.y_.APPODEAL]:{fullscreenBlockFlag:pt.Z.nativeAppodealFullscreenBlock,rewardedBlockFlag:pt.Z.nativeAppodealRewardedBlock},[ht.y_.APPLOVIN]:{fullscreenBlockFlag:pt.Z.nativeApplovinFullscreenBlock,rewardedBlockFlag:pt.Z.nativeApplovinRewardedBlock},[ht.y_.DEFAULT]:{fullscreenBlockFlag:pt.Z.nativeFullscreenBlock,rewardedBlockFlag:pt.Z.nativeRewardedBlock}};function vt(e){return t=this,a=arguments,r=function*({advBlocks:e,flags:t,residenceInfo:a}){var r,n,s,o;let i=ht.y_.DEFAULT,l=String(e.native_interstitial||""),d=String(e.native_rewarded||"");if(!Boolean(null==a?void 0:a.EU)){if((0,ut.zg)("22.1.2.848")&&(i=(0,L.di)(t,pt.Z.mediation)||i,l=(0,L.di)(t,pt.Z.nativeFullscreenBlock)||l,d=(0,L.di)(t,pt.Z.nativeRewardedBlock)||d,(0,L.sE)(t))){const e=null!=(s=yield null==(n=null==(r=window.yandex)?void 0:r.ads)?void 0:n.getLibraries())?s:[];i=1===e.length?e[0].name:ht.y_.DEFAULT;const a=mt[i];l=(0,L.di)(t,a.fullscreenBlockFlag)||l,d=(0,L.di)(t,a.rewardedBlockFlag)||d}(null==(o=window.clientMetadata)?void 0:o.isOnlyRsyaAd)&&(l=String(e.native_rsya_interstitial||""),d=String(e.native_rsya_rewarded||""),i=ht.y_.DEFAULT)}return{mediation:i,fullscreenBlock:l,rewardedBlock:d}},new Promise(((e,n)=>{var s=e=>{try{i(r.next(e))}catch(e){n(e)}},o=e=>{try{i(r.throw(e))}catch(e){n(e)}},i=t=>t.done?e(t.value):Promise.resolve(t.value).then(s,o);i((r=r.apply(t,a)).next())}));var t,a,r}const gt="R-V-5320861-1",yt="R-V-5356156-1",ft=e=>e.split("-V-")[1].split("-")[0];function wt(e,t){return"string"==typeof e&&/R-V-[0-9]+-[0-9]/.test(e)?ft(e):(console.info(`[Native adv TV] Using fallback block ${t}`),ft(t))}const bt=(0,K.M$)("NativeAdv",K.XG.Adv);let Et;var kt=a(7991),St=Object.defineProperty,At=Object.getOwnPropertySymbols,It=Object.prototype.hasOwnProperty,Pt=Object.prototype.propertyIsEnumerable,Tt=(e,t,a)=>t in e?St(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Ct=(e,t,a)=>new Promise(((r,n)=>{var s=e=>{try{i(a.next(e))}catch(e){n(e)}},o=e=>{try{i(a.throw(e))}catch(e){n(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(s,o);i((a=a.apply(e,t)).next())}));const Rt=[];function Dt(e,t){return new Promise(((a,r)=>{Rt.push({type:e,operation:t,resolve:a,reject:r}),1===Rt.length&&function(){Ct(this,null,(function*(){for(;Rt.length>0;){const{operation:e,resolve:t,reject:a}=Rt[0];try{t(yield e())}catch(e){a(e)}Rt.splice(0,1)}}))}()}))}var Lt=(e,t,a)=>new Promise(((r,n)=>{var s=e=>{try{i(a.next(e))}catch(e){n(e)}},o=e=>{try{i(a.throw(e))}catch(e){n(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(s,o);i((a=a.apply(e,t)).next())})),Ot=(e,t,a)=>new Promise(((r,n)=>{var s=e=>{try{i(a.next(e))}catch(e){n(e)}},o=e=>{try{i(a.throw(e))}catch(e){n(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(s,o);i((a=a.apply(e,t)).next())}));const _t="Ad request completed successfully, but there are no ads available",xt=3*ne.WT,Nt=3*ne.WT;var Bt=(e,t,a)=>new Promise(((r,n)=>{var s=e=>{try{i(a.next(e))}catch(e){n(e)}},o=e=>{try{i(a.throw(e))}catch(e){n(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(s,o);i((a=a.apply(e,t)).next())}));const Mt=(0,K.M$)("AdvPromo",void 0,{background:"#0c6c09"});class Ht extends te{constructor(e,t,a=ae.e.Promo){super(e,t,a),this.lang=e.context.playPageData.request.lang,this.onServiceLoaded()}getAdvBlockId(e,t){return"onboarding_promo"}showFullscreenAdv(e){return Bt(this,arguments,(function*({callbacks:e,clickDaemon:t,reason:a,depth:r}){return new Promise(((n,s)=>Bt(this,null,(function*(){Mt.spoiler(a,r)("showFullscreenAdv",e),t.request(),l.Z.post({type:"adv-promo-block",action:"show",data:{advTag:v.$H.INTERSTITIAL,reason:a,onError:e=>{"Promo chunk wasnt loaded"===e.message?(t.error(e.message),n()):s(new Error(`PromoBlock error ${e.message}`))},onOpen:()=>{t.response(),e.onOpen(),n()},onClose:()=>{e.onClose()}}})}))))}))}showRewardedVideo(e){return Bt(this,arguments,(function*({callbacks:e,clickDaemon:t}){return new Promise(((a,r)=>Bt(this,null,(function*(){Mt("showRewardedVideo",e),t.request(),l.Z.post({type:"adv-promo-block",action:"show",data:{advTag:v.$H.REWARDED,onError:e=>{r(new Error(`PromoBlock error ${e.message}`))},onOpen:()=>{t.response(),e.onOpen(),a()},onRewarded:()=>{e.onRewarded()},onClose:()=>{e.onClose()}}})}))))}))}}var Ft=a(29011);const $t="GameEvents";class Wt{constructor(){this.listeners=[],window.addEventListener("message",(e=>{e.data.source===$t&&this.processEvent(e)}))}addListener(e){return this.listeners.push(e),()=>{this.removeListener(e)}}removeListener(e){this.listeners=this.listeners.filter((t=>t!==e))}processEvent(e){const{responseToId:t}=e.data;for(let a of this.listeners)a.messageId&&a.messageId!==t||a.fn(e.data)&&this.removeListener(a)}}function Zt({action:e,payload:t,responseToId:a,type:r}){const n=`${Date.now()}-${Math.random()}`;return window.parent.postMessage({action:e,id:n,payload:t,responseToId:a,source:$t,type:r,ver:1},"*"),n}var Gt=(e,t,a)=>new Promise(((r,n)=>{var s=e=>{try{i(a.next(e))}catch(e){n(e)}},o=e=>{try{i(a.throw(e))}catch(e){n(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(s,o);i((a=a.apply(e,t)).next())}));const jt=(0,K.M$)("AdvParentWindow",void 0,{background:"#0c6c09"});var Ut=a(71487);function qt(){const e=document.querySelector(`#${G}`);e&&(e.innerText="")}const Vt=(0,K.M$)("AdvPrebidTGO",K.XG.Adv,{background:"#0c6c09"});var zt=a(21698),Kt=a(85623),Yt=a(25562),Xt=(e,t,a)=>new Promise(((r,n)=>{var s=e=>{try{i(a.next(e))}catch(e){n(e)}},o=e=>{try{i(a.throw(e))}catch(e){n(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(s,o);i((a=a.apply(e,t)).next())}));class Jt{constructor(e){this.service=e,this.waitForSlotReady=void 0,this.retries=0,this.waitForSlotViewable=void 0,this.retries=(0,be.Mi)(e.advManager.flags),(0,Kt.bT)((e=>{e.pubads().addEventListener("slotRenderEnded",(e=>{var t;e.slot===this.slot&&(null==(t=this.onSlotRenderEnded)||t.call(this,e))})).addEventListener("impressionViewable",(e=>{var t;e.slot===this.slot&&(null==(t=this.onImpressionViewable)||t.call(this,e))}))}))}defineSlot(e){return(0,Kt.bT)((t=>{const a=(0,Yt.iv)(this.service.advManager.flags);Vt(`defineSlot. filteredSizes=[${a.join(",")}]`);const r=t.defineSlot(this.service.getAdvBlockId(v.$H.INTERSTITIAL,e),a,U(this.service.serviceName));if(!r)throw new Error(tt.XO.NO_SLOT);return r.addService(t.pubads()),r.retry=0,t.enableServices(),r}))}preload(e){return Xt(this,arguments,(function*({reason:e=Ue.p_.PRELOAD,depth:t,clickDaemon:a,beforeRequest:r}){let n=this.retries;if(void 0!==t&&(this.waitForSlotReady&&this.slot&&(Vt.tag("Retry")("Skip retry, due showAdv call"),this.slot.retry=1/0),n=0),this.waitForSlotReady)return this.waitForSlotReady.promise;Vt.spoiler(this)("Preload interstitial slot");const s=new f.Z;this.waitForSlotReady=s;const o=new f.Z;return this.waitForSlotViewable=o,this.slot?this.slot.retry=0:(yield l.Z.post({type:"adv-fullscreen-block",action:"add-block",data:{blockName:this.service.serviceName},timeout:ne.WT}),this.slot=yield this.defineSlot(e)),r&&(yield r()),a||(a=new je.U({app_id:this.service.advManager.appId,tag:v.$H.INTERSTITIAL})),a.request({provider:this.service.serviceName,advBlockId:this.service.getAdvBlockId(v.$H.INTERSTITIAL,e),reason:e}),this.onSlotRenderEnded=t=>{if(s.state===f.W.Pending){if(t.isEmpty)return null==a||a.responseEmpty(),t.slot.retry<n?(Vt.tag("Retry")(`Retrying request, ${t.slot.retry+1} of ${this.retries}`),null==a||a.request({provider:this.service.serviceName,advBlockId:this.service.getAdvBlockId(v.$H.INTERSTITIAL,e),reason:e}),t.slot.retry++,void googletag.pubads().refresh([this.slot])):(s.resolve({isEmpty:!0,clickDaemon:a}),delete this.waitForSlotReady,void delete this.waitForSlotViewable);a.response(),s.resolve({isEmpty:!1,clickDaemon:a}),(0,zt.o)(t.slot,"interstitial-banner_google")}else Vt("Ignore slot response, preload canceled.")},this.onImpressionViewable=()=>{o.resolve()},googletag.pubads().refresh([this.slot]),this.waitForSlotReady.promise}))}show(){return Xt(this,null,(function*(){if(!this.waitForSlotViewable)throw new Error("Call Preload.show() before preload()");Vt.spoiler(this)("Show interstitial slot"),yield l.Z.post({type:"adv-fullscreen-block",action:"show-block",data:{blockName:this.service.serviceName}}),yield this.waitForSlotViewable.promise,delete this.waitForSlotReady,delete this.waitForSlotViewable}))}cancel(){var e,t;Vt("Cancel preload promises"),null==(e=this.waitForSlotReady)||e.resolve({isEmpty:!1,clickDaemon:null}),null==(t=this.waitForSlotViewable)||t.resolve(),delete this.waitForSlotReady,delete this.waitForSlotViewable}}var Qt=a(83142),ea=(e,t,a)=>new Promise(((r,n)=>{var s=e=>{try{i(a.next(e))}catch(e){n(e)}},o=e=>{try{i(a.throw(e))}catch(e){n(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(s,o);i((a=a.apply(e,t)).next())}));const ta={slotRenderEnded:"onSlotRenderEnded",rewardedSlotReady:"onRewardedSlotReady",rewardedSlotGranted:"onRewardedSlotGranted",rewardedSlotClosed:"onRewardedSlotClosed"};class aa{constructor(e){this.service=e,this.slot=void 0,this.waitForSlotReady=void 0,this.retries=(0,be.ck)(this.service.advManager.flags),(0,Kt.bT)((()=>{const e=googletag.pubads();for(const t in ta)e.addEventListener(t,(e=>{var a;const{slot:r}=e;r===this.slot&&(null==(a=this[ta[t]])||a.call(this,e))}))})),Ae.default.addChangeListener((()=>{var e;null==(e=this.onOrientationChange)||e.call(this)}))}defineSlot({retry:e}){return(0,Kt.bT)((()=>{const t=googletag.defineOutOfPageSlot(this.service.getAdvBlockId(v.$H.REWARDED),googletag.enums.OutOfPageFormat.REWARDED);if(!t)throw new Error(tt.XO.NO_SLOT);return t.addService(googletag.pubads()),t.retry=e,t}))}preload(){return ea(this,arguments,(function*({depth:e,clickDaemon:t,reason:a=Ue.p_.PRELOAD}={}){if(this.waitForSlotReady)return this.retries&&this.slot&&void 0!==e&&(Vt.tag(["Retry","Rewarded"])("Skip retry, due showAdv call"),this.slot.retry=0),this.waitForSlotReady.promise;Vt.spoiler(this)("Preload rewarded slot");const r=new f.Z;this.waitForSlotReady=r;const n=new f.Z;let s,o=!1,i=!1;try{t||(t=new je.U({app_id:this.service.advManager.appId,tag:v.$H.REWARDED})),this.slot&&googletag.destroySlots([this.slot]),this.slot=yield this.defineSlot({retry:void 0===e?this.retries:0}),t.request({advBlockId:this.service.getAdvBlockId(v.$H.REWARDED,a),provider:this.service.serviceName,reason:a});const l=(e=0)=>ea(this,null,(function*(){this.slot&&googletag.destroySlots([this.slot]),this.slot=yield this.defineSlot({retry:e}),null==t||t.request({advBlockId:this.service.getAdvBlockId(v.$H.REWARDED,a),reason:a}),googletag.pubads().refresh([this.slot])}));this.onOrientationChange=()=>{if(Vt.spoiler("orientationChange",i),o&&i&&this.slot)return googletag.destroySlots([this.slot]),n.resolve({wasShown:o,wasRewarded:i}),void delete this.waitForSlotReady;delete this.waitForSlotReady,l(0)},this.onSlotRenderEnded=e=>{if(e.isEmpty)return null==t||t.responseEmpty(),this.retries&&e.slot.retry?(Vt.tag(["Retry","Interstitial"])(`Retrying request, ${this.retries-e.slot.retry+1} of ${this.retries}`),void l(e.slot.retry-1)):(r.resolve({clickDaemon:t,isEmpty:!0}),delete this.waitForSlotReady,void(o&&n.resolve({wasShown:o,wasRewarded:i})));null==t||t.response()},this.onRewardedSlotReady=e=>{if(o)return(0,Qt.M)(e.slot),void e.makeRewardedVisible();r.resolve({isEmpty:!1,clickDaemon:t,waitForShow:t=>(s=t,o=!0,(0,Qt.M)(e.slot),e.makeRewardedVisible(),n.promise)})},this.onRewardedSlotGranted=()=>{var e;null==(e=null==s?void 0:s.onRewarded)||e.call(s),i=!0},this.onRewardedSlotClosed=()=>{n.resolve({wasShown:!0,wasRewarded:i}),delete this.waitForSlotReady},googletag.pubads().refresh([this.slot])}catch(e){(0,I.g5)(this.service,{error:e})}return this.waitForSlotReady.promise}))}show(){return ea(this,null,(function*(){}))}cancel(){var e,t;Vt("Cancel rewarded preload"),null==(e=this.waitForSlotReady)||e.resolve({isEmpty:!1}),delete this.waitForSlotReady,this.slot&&(null==(t=googletag.destroySlots)||t.call(googletag,[this.slot]))}}var ra=a(48194),na=a(58098),sa=a(78569),oa=a(89592),ia=Object.defineProperty,la=Object.defineProperties,da=Object.getOwnPropertyDescriptors,ca=Object.getOwnPropertySymbols,ua=Object.prototype.hasOwnProperty,ha=Object.prototype.propertyIsEnumerable,pa=(e,t,a)=>t in e?ia(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,ma=(e,t,a)=>new Promise(((r,n)=>{var s=e=>{try{i(a.next(e))}catch(e){n(e)}},o=e=>{try{i(a.throw(e))}catch(e){n(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(s,o);i((a=a.apply(e,t)).next())}));const va="ca-pub-7899932632484219";var ga=(e,t,a)=>new Promise(((r,n)=>{var s=e=>{try{i(a.next(e))}catch(e){n(e)}},o=e=>{try{i(a.throw(e))}catch(e){n(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(s,o);i((a=a.apply(e,t)).next())})),ya=a(26256);class fa{ready(){return(0,I.qu)("[adv.prerender] ready"),this.promise}}class wa extends fa{constructor(e){super(),this.service=e,this.consecutivePreloadFails=0,this.finalRetryFailureTime=0,this.debugLog=(0,K.M$)(`[RetryablePrerender ${this.service.serviceName}]`,K.XG.Adv)}retryPreloading(e,t){return this.debugLog("Checking ability to retry"),this.finalRetryFailureTime&&Math.abs(Date.now()-this.finalRetryFailureTime)<=this.consecutivePreloadFailsInterval?(this.debugLog(`Skip: Retries timeout of ${this.consecutivePreloadFailsInterval} milliseconds not yet reached`),!1):(this.finalRetryFailureTime&&(this.debugLog("Resetting retry timer"),this.finalRetryFailureTime=0,this.consecutivePreloadFails=0),this.consecutivePreloadFails>=this.maxConsecutiveRetries?(this.debugLog("Skip: Consecutive preload failures exceeded the maximum retries"),this.finalRetryFailureTime=Date.now(),!1):(this.consecutivePreloadFails++,this.debugLog(`Retrying. Attempt: ${this.consecutivePreloadFails}`),this.next(e,new je.U({app_id:this.service.advManager.appId,tag:t})).then((a=>{a.hasContent&&!a.err?this.consecutivePreloadFails=0:this.retryPreloading(e,t)})),!0))}get maxConsecutiveRetries(){var e;return null!=(e=(0,L.$9)(this.service.advManager.flags,pt.Z.advDevPreloadRetries))?e:4}get consecutivePreloadFailsInterval(){var e;return null!=(e=(0,L.$9)(this.service.advManager.flags,pt.Z.advDevPreloadRetriesSeqInterval))?e:5e4}}const ba={modal:"modal",rewardedVideo:"rewarded_video",modalVisible:"modal_visible",modalVisiblePreroll:"modal_visible_preroll",modalMedia:"modal__media",modalClose:"modal__close",modalBottom:"modal__bottom",modalButton:"modal__button",modalButtonClose:"modal__button_close",modalButtonDisableAdv:"modal__button_disable_adv",fullscreenButtonTop:"fullscreen_button_top",modalAdvCountdown:"modal__advCountdown",modalAdvCountdownCircle:"modal__advCountdownCircle",modalContent:"modal_content",modalContentOld:"modal__content_old",mobileCloseButton:"mobile_close_button",modalRewarded:"modal__rewarded",modalDesktopCountdown:"modal__desktop_countdown",modalWrap:"modal__wrap",modalContentSearchApplication:"modal__content_search-application",modalCloseSearchApplication:"modal__close_search-application",yandexAdaptive:"yandex-adaptive",withNativeClose:"with-native-close"},Ea=20;var ka=a(34967),Sa=a(76958),Aa=Object.defineProperty,Ia=Object.getOwnPropertySymbols,Pa=Object.prototype.hasOwnProperty,Ta=Object.prototype.propertyIsEnumerable,Ca=(e,t,a)=>t in e?Aa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Ra=(e,t)=>{for(var a in t||(t={}))Pa.call(t,a)&&Ca(e,a,t[a]);if(Ia)for(var a of Ia(t))Ta.call(t,a)&&Ca(e,a,t[a]);return e};const Da=(0,K.M$)("YandexAdv",[K.XG.Adv],{background:"#d7bc29"});function La(){return Object.keys(ba).reduce(((e,t)=>(e[t]=`play-yandex-${ba[t]}`,e)),{})}function Oa(e,t,a){const r=e[`${t}SearchApplication`];return`${e[t]} ${a?r:""}`}function _a(){var e,t,a;(0,ka.U4)({},{borrowParams:{adv:{yaContextScriptLoad:Boolean(null==(a=null==(t=null==(e=window.Ya)?void 0:e.Context)?void 0:t.AdvManager)?void 0:a.render)}}})}function xa({advBlocks:e,deviceType:t,reason:a}){var r,n,s,o,i,l;if((0,ct.x)())return a===Ue.p_.START_FULLSCREEN?we.EC.start_fullscreen:we.EC.fullscreen;if(t===Sa.n.desktop){const t=Ra(Ra({},e),e.desktop);return a===Ue.p_.START_FULLSCREEN&&null!=(r=t.start_fullscreen)?r:t.fullscreen}const d=Ra(Ra({},e),e.mobile);let c=d.fullscreen;return a===Ue.p_.START_FULLSCREEN?(c=null!=(n=d.start_fullscreen)?n:c,c=Ae.default.isLandscape?null!=(s=d.start_fullscreen_landscape)?s:c:null!=(o=d.start_fullscreen_portrait)?o:c):c=Ae.default.isLandscape?null!=(i=d.fullscreen_landscape)?i:c:null!=(l=d.fullscreen_portrait)?l:c,c}function Na({advBlocks:e,deviceType:t}){return(0,ct.x)()?we.EC.rewarded:t===Sa.n.desktop?Ra(Ra({},e),e.desktop).rewarded:Ra(Ra({},e),e.mobile).rewarded}var Ba=a(40174),Ma=Object.defineProperty,Ha=Object.getOwnPropertySymbols,Fa=Object.prototype.hasOwnProperty,$a=Object.prototype.propertyIsEnumerable,Wa=(e,t,a)=>t in e?Ma(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;class Za extends Error{constructor({type:e,text:t,code:a},r,n={}){super(),this.message=`${r}: err.code=${a}`,this.additional=((e,t)=>{for(var a in t||(t={}))Fa.call(t,a)&&Wa(e,a,t[a]);if(Ha)for(var a of Ha(t))$a.call(t,a)&&Wa(e,a,t[a]);return e})({adv:{text:null==t?void 0:t.substr(0,100),code:a,type:e}},n)}}var Ga=a(38508),ja=a(58432),Ua=Object.defineProperty,qa=Object.defineProperties,Va=Object.getOwnPropertyDescriptors,za=Object.getOwnPropertySymbols,Ka=Object.prototype.hasOwnProperty,Xa=Object.prototype.propertyIsEnumerable,Ja=(e,t,a)=>t in e?Ua(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Qa=(e,t)=>{for(var a in t||(t={}))Ka.call(t,a)&&Ja(e,a,t[a]);if(za)for(var a of za(t))Xa.call(t,a)&&Ja(e,a,t[a]);return e},er=(e,t)=>qa(e,Va(t));class tr extends wa{constructor(e,t,a){super(e),this._previousReason=Ue.p_.PRELOAD,this.previousPageNumber=0,this.yandexAdvService=e;const{advBlocks:r}=e.advManager;Da(`[adv.prerender] yandex init with advBlocks = ${JSON.stringify(r,null,"\t")}`),Da(`[adv.prerender] reason = ${t}`),e.savedPageYOffset=(0,I.SW)(e.advContainer),this.promise=new Promise(((e,r)=>{this.next(t,a).then(e).catch(r)}))}get previousReason(){return this._previousReason}next(e=this._previousReason,t){Da("[adv.prerender] next"),this._previousReason!==e&&(this._previousReason=e);const{yandexAdvService:a}=this,{advBlocks:r,deviceType:n}=a.advManager;return this.promise=new Promise(((a,s)=>{this.previousPageNumber+=1;const o=xa({advBlocks:r,deviceType:n,reason:e});Da(`[adv.prerender] advBlockId = ${o}`),l.Z.post({type:"yandex-fullscreen-render",action:"update-block-id",data:{blockId:o,pageNumber:this.previousPageNumber},timeout:1e3}).then((({data:e})=>{const{blockId:t}=e;return re({querySelector:`#${t}`,interval:100,rejectTimeout:1500})})).then((r=>{this.renderYaAdv(a,s,{advBlockId:o,reason:e,renderTo:r.id,clickDaemon:t})})).catch((e=>{a({hasContent:!1,err:e})}))})).catch((e=>({hasContent:!1,err:e}))),this.promise}renderYaAdv(e,t,{advBlockId:a,clickDaemon:r,reason:n,renderTo:s}){var o,i,d,c,u;Da("[adv.prerender] renderYaAdv");const{flags:h,isAdvDisabled:p}=this.yandexAdvService.advManager;null==(i=(o=this.yandexAdvService).destroyAdv)||i.call(o);try{if(p)return void e({hasContent:!1,noRequest:!0});if(!(null==(u=null==(c=null==(d=window.Ya)?void 0:d.Context)?void 0:c.AdvManager)?void 0:u.render))throw new Error("window.Ya.Context.AdvManager.render is not defined");const{appId:t,deviceId:o}=this.yandexAdvService.advManager,i=this.previousPageNumber%Ea;(0,I.U2)("РСЯ fullscreen",`${i}`),n===Ue.p_.WATERFALL?r.request():r.request({advBlockId:a,provider:this.yandexAdvService.serviceName,reason:n});const m=Qa(er(Qa({},(0,ct.x)()?{type:"fullscreen",platform:"desktop"}:{}),{async:!0,blockId:a,disableRefresh:!0,extParams:er(Qa({},o?{google_aid:o}:{}),{utm_source_service:"games","distr-id":t,"game-distrib-stat-id":(0,ja.Sn)()}),pageNumber:i,renderTo:s,statId:(0,ja.Sn)(),lazyLoad:!1,onError:t=>{Da("[adv.prerender] onError");const n=(0,Ga.M)(t,{blockId:a,pageId:i});(0,ie.H)({additional:{advBlockId:a,pageId:i},block:de.W.ADV,prefix:we.yt},new Za(t,"Callback onError in fullscreen")),e({hasContent:!1,err:new Error(n),clickDaemon:r})},onRender:()=>{(0,ct.x)()&&window.focus(),r.response(),this.yandexAdvService.destroyAdv=()=>{var e,t;this.yandexAdvService.destroyAdv=void 0,null==(t=null==(e=window.Ya)?void 0:e.Context)||t.AdvManager.destroy({blockId:a})},e({hasContent:!0,clickDaemon:r})}}),(0,ct.x)()?{onClose:()=>{(0,R.D)((()=>{l.Z.post({type:"yandex-adv-service",action:"close-adv"})}))}}:{}),v=()=>{null==r||r.responseEmpty(),e({hasContent:!1,clickDaemon:r})};Da("[adv.prerender] Preload fullscreen ad - AdvManager.render"),(0,Ba.Q$)({abtFlags:h,adOptions:m,methodName:Ba.xn.RENDER,onAdLoadFailed:v})}catch(e){t(e)}}}var ar=Object.defineProperty,rr=Object.defineProperties,nr=Object.getOwnPropertyDescriptors,sr=Object.getOwnPropertySymbols,or=Object.prototype.hasOwnProperty,ir=Object.prototype.propertyIsEnumerable,lr=(e,t,a)=>t in e?ar(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,dr=(e,t)=>{for(var a in t||(t={}))or.call(t,a)&&lr(e,a,t[a]);if(sr)for(var a of sr(t))ir.call(t,a)&&lr(e,a,t[a]);return e},cr=(e,t)=>rr(e,nr(t));class ur extends fa{constructor(e,t,a){super(),this.yandexAdvService=e,this._previousReason=Ue.p_.PRELOAD,this.previousPageNumber=0,this.isProcessing=!1;const{advBlocks:r}=e.advManager;Da(`[adv.prerender] yandex init with advBlocks = ${JSON.stringify(r,null,"\t")}`),Da(`[adv.prerender] startReason = ${t}`),e.savedPageYOffset=(0,I.SW)(e.advContainer),this.promise=new Promise(((e,r)=>{this.next(t,a).then(e).catch(r)}))}get previousReason(){return this._previousReason}next(e=this._previousReason,t){var a;Da("[adv.prerender] next"),this._previousReason!==e&&(this._previousReason=e);const{yandexAdvService:r}=this,{advBlocks:n}=r.advManager;return null==(a=r.destroyAdv)||a.call(r),Da("[adv.prerender] isProcessing =",this.isProcessing),this.promise=new Promise(((a,r)=>{this.isProcessing=!0,this.previousPageNumber+=1;const s=xa({advBlocks:n,deviceType:this.getPlatform(),reason:e});Da(`[adv.prerender] advBlockId = ${s}`),l.Z.post({type:"yandex-fullscreen-render",action:"update-block-id",data:{blockId:s,pageNumber:this.previousPageNumber},timeout:1e3}).then((({data:e})=>{const{blockId:t}=e;return re({querySelector:`#${t}`,interval:100,rejectTimeout:1500})})).then((n=>{this.renderYaAdv(a,r,{advBlockId:s,reason:e,renderTo:n.id,clickDaemon:t})})).catch((e=>{a({hasContent:!1,err:e})}))})).catch((e=>(this.isProcessing=!1,{hasContent:!1,err:e}))),this.promise}getRsyaPlatform(){var e,t,a,r;const n=null==(r=null==(a=null==(t=null==(e=window.Ya)?void 0:e.Context)?void 0:t.AdvManager)?void 0:a.getPlatform)?void 0:r.call(a);return null!=n?n:"desktop"}getPlatform(){return"touch"===this.getRsyaPlatform()?"mobile":"desktop"}renderYaAdv(e,t,{advBlockId:a,clickDaemon:r,reason:n,renderTo:s}){var o,i,l,d,c;Da("[adv.prerender] renderYaAdv");const{isAdvDisabled:u,flags:h}=this.yandexAdvService.advManager;let p=e;null==(i=(o=this.yandexAdvService).destroyAdv)||i.call(o);try{if(u)return void p({hasContent:!1,noRequest:!0});if(!(null==(c=null==(d=null==(l=window.Ya)?void 0:l.Context)?void 0:d.AdvManager)?void 0:c.preload)){const e="window.Ya.Context.AdvManager.preload is not defined";throw r.error(e),new Error(e)}(0,I.U2)("РСЯ fullscreen",`${a}/${this.previousPageNumber%Ea}`),n===Ue.p_.WATERFALL?r.request():r.request({advBlockId:a,provider:this.yandexAdvService.serviceName,reason:n});let e,t=!1;const o=new Promise((t=>e=t));let i=!1;const{appId:m,deviceId:v}=this.yandexAdvService.advManager,g=this.previousPageNumber%Ea,y={async:!0,blockId:a,disableRefresh:!0,extParams:cr(dr({},v?{google_aid:v}:{}),{utm_source_service:"games","distr-id":m,"game-distrib-stat-id":(0,ja.Sn)()}),lazyLoad:!1,pageNumber:g,platform:this.getRsyaPlatform(),renderTo:s,statId:(0,ja.Sn)(),type:"fullscreen",onClose:()=>{Da("[adv.prerender] onClose"),this.isProcessing=!1,i=!1,this.yandexAdvService.hideFullscreenAdv(t)},onError:e=>{Da("[adv.prerender] onError"),this.isProcessing=!1,i=!1;const t=String(e.text);(0,ie.H)({block:de.W.ADV,additional:{advBlockId:a,pageId:g},prefix:we.yt},new Za(e,"Callback onError in fullscreen")),p({hasContent:!1,err:new Error(t),clickDaemon:r})},onPreload:t=>{Da("[adv.prerender] onPreload",p),i=!0,r.response(),p({showPrerenderedAd:()=>(Da("[adv.prerender] showPrerenderedAd"),t(),o),clickDaemon:r}),p=e},onRender:()=>{if(Da("[adv.prerender] onRender; isPreloaded =",i),!i)return Da("[adv.prerender] Called `onRender` before `onPreload`. Abort. Call `onAdLoadFailed`."),void f();this.yandexAdvService.destroyAdv=()=>{var e,t;this.yandexAdvService.destroyAdv=void 0,Da("[adv.prerender] yandexAdvService.destroyAdv called"),null==(t=null==(e=window.Ya)?void 0:e.Context)||t.AdvManager.destroy({blockId:a})},t=!0,p({hasContent:!0,clickDaemon:r})}},f=()=>{Da("[adv.prerender] onAdLoadFailed"),r.responseEmpty(),this.isProcessing=!1,i=!1,p({hasContent:!1,clickDaemon:r})};Da("[adv.prerender] Preload fullscreen ad - AdvManager.preload"),(0,Ba.Q$)({abtFlags:h,adOptions:y,methodName:Ba.xn.PRELOAD,onAdLoadFailed:f})}catch(e){t(e)}}}var hr=a(95025),pr=a(77901),mr=Object.defineProperty,vr=Object.defineProperties,gr=Object.getOwnPropertyDescriptors,yr=Object.getOwnPropertySymbols,fr=Object.prototype.hasOwnProperty,wr=Object.prototype.propertyIsEnumerable,br=(e,t,a)=>t in e?mr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Er=(e,t)=>{for(var a in t||(t={}))fr.call(t,a)&&br(e,a,t[a]);if(yr)for(var a of yr(t))wr.call(t,a)&&br(e,a,t[a]);return e},kr=(e,t)=>vr(e,gr(t)),Sr=(e,t,a)=>new Promise(((r,n)=>{var s=e=>{try{i(a.next(e))}catch(e){n(e)}},o=e=>{try{i(a.throw(e))}catch(e){n(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(s,o);i((a=a.apply(e,t)).next())}));const Ar=["direct","media-smart","media-image","media-creative","video-smart","auto-video-irect","video-creative","video-motion","media-creative-survey","video-creative-survey"];class Ir{constructor(e,t){this.yandexAdvService=e,this.pageNumber=0,this.isYandexSearchApp=(0,pr.qo)()}next(e){const{flags:t}=this.yandexAdvService.advManager;t[pt.Z.preloadRewardedVideo]&&(this.preloadedRewardedVideo=this.preloadRewardedVideo())}getOnCloseOptionForTV(){return(0,ct.x)()?{onClose:()=>{this.yandexAdvService.getClickDaemon(v.$H.REWARDED).close(),this.hideVideoAdv(),"function"==typeof this.onClose&&this.onClose()}}:{}}preloadRewardedVideo(){const{appId:e,deviceId:t}=this.yandexAdvService.advManager,a=this.yandexAdvService.getAdvBlockId(v.$H.REWARDED);let r=()=>{},n=()=>{};const s=new Promise(((e,t)=>{r=e,n=t})),o=new Promise((s=>Sr(this,null,(function*(){var o,i,d;try{const n=yield l.Z.post({type:"yandex-rewarded-render",action:"update-block-id",data:{blockId:a},timeout:1e3}),{data:{blockId:c}}=n,u=yield re({querySelector:`#${c}`,interval:100,rejectTimeout:1500});if(!(null==(d=null==(i=null==(o=window.Ya)?void 0:o.Context)?void 0:i.AdvManager)?void 0:d.preload))throw new Error("window.Ya.Context.AdvManager.preload is not defined");Da("[adv.rerender] Preload rewarded video - AdvManager.preload");const h=Er(kr(Er({},(0,ct.x)()?{type:"rewarded",platform:"desktop"}:{}),{async:!0,blockId:a,disableRefresh:!0,extParams:kr(Er({},t?{google_aid:t}:{}),{utm_source_service:"games","distr-id":e,"game-distrib-stat-id":(0,ja.Sn)()}),pageNumber:this.pageNumber,renderTo:u.id,statId:(0,ja.Sn)(),onError:(e={})=>{(0,ie.H)({block:de.W.ADV,prefix:we.yt},new Za(e,"Callback onError in rewarded"))},onRender:e=>{e?e.product||(0,ie.H)({block:de.W.ADV},new Error("Adv Rewarded: there is no data.product")):(0,ie.H)({block:de.W.ADV},new Error("Adv Rewarded: there is no data")),Da("[adv.rerender] Render preloaded rewarded"),r({hasContent:!0,productType:e.productType})},onPreload:e=>s({showRewardedCallback:e})}),this.getOnCloseOptionForTV()),p=()=>{(0,ie.H)({block:de.W.ADV},new Error("Adv Rewarded: no content")),s({}),r({hasContent:!1})};(0,Ba.Q$)({advTag:v.$H.REWARDED,abtFlags:this.yandexAdvService.advManager.flags,adOptions:h,methodName:Ba.xn.PRELOAD,onAdLoadFailed:p})}catch(e){s({}),n(e)}}))));return function(){return o.then((({showRewardedCallback:e})=>(null==e||e(),s)))}}resizeAdv(){this.yandexAdvService&&(this.yandexAdvService.savedPageYOffset=(0,I.SW)(this.yandexAdvService.advContainer))}hideVideoAdv(){var e,t;const{advManager:a}=this.yandexAdvService,{deviceType:r,advBlocks:n}=a,s=(0,ct.x)()?we.EC.rewarded:n.rewarded;(0,I.PS)(),r!==Sa.n.desktop&&(0,I.HH)(),l.Z.post({type:"yandex-rewarded-render",action:"hide-rewarded"}),window.removeEventListener("resize",this.resizeAdv),window.scroll(0,this.yandexAdvService.savedPageYOffset),null==(t=null==(e=window.Ya)?void 0:e.Context)||t.AdvManager.destroy({blockId:s}),this.yandexAdvService.preloadRewardedAdv(Ue.p_.PRELOAD)}renderFakeRewarded({advBlockId:e,clickDaemon:t,onRewardedForTV:a,previousRewardedPageNumber:r,reason:n}){const{advManager:s}=this.yandexAdvService,{appId:o,deviceId:i}=s;return new Promise(((s,d)=>Sr(this,null,(function*(){var c,u,h;try{if(!(null==(h=null==(u=null==(c=window.Ya)?void 0:c.Context)?void 0:u.AdvManager)?void 0:h.render))throw new Error("window.Ya.Context.AdvManager.render is not defined");t.request({advBlockId:e,reason:n,provider:this.yandexAdvService.serviceName});const p=yield l.Z.post({type:"yandex-rewarded-render",action:"update-block-id",data:{blockId:e},timeout:1e3}),{data:{blockId:m}}=p,g=yield re({querySelector:`#${m}`,interval:100,rejectTimeout:1500}),y=r%Ea;(0,I.U2)("РСЯ rewarded",`${e}/${y}`),(0,I.WL)();const f=Er(Er(kr(Er({},(0,ct.x)()?{type:"rewarded"}:{}),{async:!0,blockId:e,disableRefresh:!0,extParams:kr(Er({},i?{google_aid:i}:{}),{utm_source_service:"games","distr-id":o,"game-distrib-stat-id":(0,ja.Sn)()}),lazyLoad:!1,pageNumber:y,renderTo:g.id,statId:(0,ja.Sn)(),onError:(e={})=>{d(new Za(e,"Callback onError in rewarded"))},onRender:e=>{(0,ct.x)()&&window.focus(),e?e.product||(0,ie.H)({block:de.W.ADV},new Error("Adv Rewarded: there is no data.product")):(0,ie.H)({block:de.W.ADV},new Error("Adv Rewarded: there is no data")),t.response(),s({hasContent:!0,productType:e.productType})}}),(0,ct.x)()?{onRewarded:a}:{}),this.getOnCloseOptionForTV()),w=()=>{(0,ie.H)({block:de.W.ADV},new Error("Adv Rewarded: no content")),s({hasContent:!1})};(0,Ba.Q$)({advTag:v.$H.REWARDED,abtFlags:this.yandexAdvService.advManager.flags,adOptions:f,methodName:Ba.xn.RENDER,onAdLoadFailed:w})}catch(e){d(e)}}))))}showRewardedVideo({callbacks:e,clickDaemon:t}){const{onOpen:a,onRewarded:r,onClose:n}=e,s=Boolean(this.isYandexSearchApp),{advManager:o,cssClasses:i}=this.yandexAdvService,{deviceType:d,viewType:c,flags:u}=o,h=this.yandexAdvService.getAdvBlockId(v.$H.REWARDED),p=document.querySelector(`.${i.rewardedVideo}`),m=Number(u[pt.Z.rewardedVideoTimeout]);let g;this.onClose=n,g=!isNaN(m)&&m>0?m:20;let y=g;return window.addEventListener("resize",this.resizeAdv),d!==Sa.n.desktop&&(0,I.xK)(),(c===we.xd.fullscreen||s)&&this.resizeAdv(),new Promise(((e,a)=>{this.pageNumber=((this.pageNumber||0)+1)%Ea;const n=()=>{(u[pt.Z.preloadRewardedVideo]?this.preloadedRewardedVideo.bind(this):this.renderFakeRewarded.bind(this))({advBlockId:h,clickDaemon:t,onRewardedForTV:(0,ct.x)()?e=>{!0===e&&(null==r||r())}:void 0,previousRewardedPageNumber:this.pageNumber,reason:Ue.p_.ONSPOT}).then(e).catch(a)};window.yaContextCb?(window.yaContextCb.push(n),Da("[adv.rerender] new rewarded render on")):n()})).then((({hasContent:e,productType:t})=>{var s;if(Da(`[adv.rerender] hasContent = ${e}, productType = ${t}`),!e)throw(0,hr.Cj)(o.waterfallQueue[v.$H.REWARDED],ae.e.Promo)||null==r||r(),new Error(we.Iy);t&&Ar.includes(t)&&(g=7,y-=13),l.Z.post({type:"yandex-rewarded-render",action:"show-rewarded",data:{seconds:y}}).then((()=>{this.hideVideoAdv(),null==n||n()})),(0,ct.x)()||l.Z.post({type:"yandex-rewarded-render",action:"on-rewarded"}).then((()=>{null==r||r()}));const d=(null==(s=this.yandexAdvService.advManager.context.uatraits)?void 0:s.OSFamily)===ht.k8.IOS;(0,I.ss)({advElement:document.querySelector(`#yandex_rtb_rewarded_${h}`),type:v.$H.REWARDED,flags:o.flags,appId:o.appId,isIOS:d}),(0,I.J4)(i,p),null==a||a()})).catch((e=>{throw this.hideVideoAdv(),e}))}}var Pr=Object.defineProperty,Tr=Object.defineProperties,Cr=Object.getOwnPropertyDescriptors,Rr=Object.getOwnPropertySymbols,Dr=Object.prototype.hasOwnProperty,Lr=Object.prototype.propertyIsEnumerable,Or=(e,t,a)=>t in e?Pr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,_r=(e,t)=>{for(var a in t||(t={}))Dr.call(t,a)&&Or(e,a,t[a]);if(Rr)for(var a of Rr(t))Lr.call(t,a)&&Or(e,a,t[a]);return e},xr=(e,t)=>Tr(e,Cr(t)),Nr=(e,t,a)=>new Promise(((r,n)=>{var s=e=>{try{i(a.next(e))}catch(e){n(e)}},o=e=>{try{i(a.throw(e))}catch(e){n(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(s,o);i((a=a.apply(e,t)).next())}));const Br=["media-creative-reach","media-image","media-creative","video-creative"];class Mr{constructor(e,t){this.yandexAdvService=e,this.advContainer=null,this.currentProductType="",this.pageNumber=0,Ae.default.addChangeListener((()=>{this.rerenderAdv()}))}next(){}getRsyaPlatform(){var e,t,a,r;const n=null==(r=null==(a=null==(t=null==(e=window.Ya)?void 0:e.Context)?void 0:t.AdvManager)?void 0:a.getPlatform)?void 0:r.call(a);return null!=n?n:"desktop"}getPlatform(){return"touch"===this.getRsyaPlatform()?"mobile":"desktop"}rerenderAdv(){var e,t;const a=this.getAdvBlockId();if(!this.yandexAdvService.isRewardedShowing||Br.includes(this.currentProductType))return;null==(t=null==(e=window.Ya)?void 0:e.Context)||t.AdvManager.destroy({blockId:a});const r=this.yandexAdvService.getClickDaemon(v.$H.REWARDED);this.showRewardedVideo({callbacks:this.yandexAdvService.showAdvCallbacks[v.$H.REWARDED],clickDaemon:r,reason:Ue.p_.PRELOAD,tag:v.$H.REWARDED,initialTag:v.$H.REWARDED,depth:0})}getAdvBlockId(){const{advManager:e}=this.yandexAdvService,{advBlocks:t}=e;return Na({advBlocks:t,deviceType:this.getPlatform()})}hideRewarded(){var e,t;const{advManager:a}=this.yandexAdvService,{deviceType:r,flags:n}=a,s=this.getAdvBlockId();(0,I.PS)(),r!==Sa.n.desktop&&(0,I.HH)(),l.Z.post({type:"yandex-rewarded-render",action:"hide-rewarded"}),null==(t=null==(e=window.Ya)?void 0:e.Context)||t.AdvManager.destroy({blockId:s}),!1!==(0,L.RM)(n,pt.Z.rewardedPCodeAdvPreloadFs)&&(0,I.un)()&&this.yandexAdvService.preloadFullscreenAdv(Ue.p_.PRELOAD)}renderRewarded({advBlockId:e,previousRewardedPageNumber:t,callbacks:a,clickDaemon:r}){const{advManager:n}=this.yandexAdvService,{flags:s}=n;return new Promise(((n,o)=>Nr(this,null,(function*(){var i,l,d;try{if(!(null==(d=null==(l=null==(i=window.Ya)?void 0:i.Context)?void 0:l.AdvManager)?void 0:d.render))throw new Error("window.Ya.Context.AdvManager.render is not defined");r.request({advBlockId:e,reason:Ue.p_.ONSPOT,provider:this.yandexAdvService.serviceName});const c=t%Ea;(0,I.U2)("РСЯ rewarded",`${e}/${c}`),(0,I.WL)();const{appId:u,deviceId:h}=this.yandexAdvService.advManager,p={async:!0,blockId:e,disableRefresh:!0,extParams:xr(_r({},h?{google_aid:h}:{}),{utm_source_service:"games","distr-id":u,"game-distrib-stat-id":(0,ja.Sn)()}),lazyLoad:!1,pageNumber:c,platform:this.getRsyaPlatform(),statId:(0,ja.Sn)(),type:"rewarded",onError:(e={})=>{o(new Za(e,"Callback onError in rewarded"))},onClose:()=>{var e;this.currentProductType="",this.yandexAdvService.isRewardedShowing=!1,this.hideRewarded(),null==(e=a.onClose)||e.call(a)},onRewarded:e=>{e&&a.onRewarded&&a.onRewarded()},onRender:e=>{e?e.product||(0,ie.H)({block:de.W.ADV},new Error("Adv Rewarded: there is no data.product")):(0,ie.H)({block:de.W.ADV},new Error("Adv Rewarded: there is no data")),r.response(),n({hasContent:!0,productType:e.productType})}},m=()=>{(0,ie.H)({block:de.W.ADV},new Error("Adv Rewarded: no content")),n({hasContent:!1})};(0,Ba.Q$)({advTag:v.$H.REWARDED,abtFlags:s,adOptions:p,methodName:Ba.xn.RENDER,onAdLoadFailed:m})}catch(e){o(e)}}))))}showRewardedVideo({callbacks:e,clickDaemon:t,depth:a}){const{onRewarded:r,onOpen:n}=e,{advManager:s,cssClasses:o}=this.yandexAdvService,{deviceType:i}=s,d=this.getAdvBlockId();return this.advContainer=document.querySelector(`.${o.rewardedVideo}`),i!==Sa.n.desktop&&(0,I.xK)(),this.yandexAdvService.isRewardedShowing=!0,new Promise(((r,n)=>Nr(this,null,(function*(){this.pageNumber=((this.pageNumber||0)+1)%Ea,window.yaContextCb?(window.yaContextCb.push((()=>{this.renderRewarded({advBlockId:d,previousRewardedPageNumber:this.pageNumber,callbacks:e,depth:a,clickDaemon:t}).then(r).catch(n)})),Da("new rewarded render on")):this.renderRewarded({advBlockId:d,previousRewardedPageNumber:this.pageNumber,callbacks:e,depth:a,clickDaemon:t}).then(r).catch(n)})))).then((({hasContent:e,productType:t})=>{if(Da(`[adv.rerender] hasContent = ${e}, productType = ${t}`),!e)throw(0,hr.Cj)(s.waterfallQueue[v.$H.REWARDED],ae.e.Promo)||null==r||r(),new Error(we.Iy);l.Z.post({type:"yandex-rewarded-render",action:"show-rewarded"}),this.currentProductType=t||"",null==n||n()})).catch((e=>{throw this.hideRewarded(),this.currentProductType="",this.yandexAdvService.isRewardedShowing=!1,e}))}}var Hr=a(93013),Fr=(e,t,a)=>new Promise(((r,n)=>{var s=e=>{try{i(a.next(e))}catch(e){n(e)}},o=e=>{try{i(a.throw(e))}catch(e){n(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(s,o);i((a=a.apply(e,t)).next())}));a(39510);var $r=a(47265),Wr=(e,t,a)=>new Promise(((r,n)=>{var s=e=>{try{i(a.next(e))}catch(e){n(e)}},o=e=>{try{i(a.throw(e))}catch(e){n(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(s,o);i((a=a.apply(e,t)).next())}));class Zr extends te{constructor(e,t){const{serviceName:a}=t;super(e,t,a),this.init()}init(){return Wr(this,null,(function*(){try{const e=this.isTagActive(v.$H.INTERSTITIAL),t=this.isTagActive(v.$H.REWARDED),[a,r]=yield Promise.all([e?yield(0,w.l)(b.oO.AnymindBlock):null,t?yield(0,w.l)(b.oO.AnymindRewarded):null]);this.provider=a,this.rewardedProvider=r,yield l.Z.post({type:"adv-fullscreen-block",action:"add-block",data:{blockName:this.serviceName},timeout:ne.WT}),this.onServiceLoaded()}catch(e){this.onServiceError(e)}}))}getAdvBlockId(e,t){var a;return(null==(a=this.getWaterfallItem(e))?void 0:a.blockId)||super.getAdvBlockId(e,t)}getTimeoutExtraTime(e,t){return e===J.QA.ServiceInit?3*ne.WT:super.getTimeoutExtraTime(e,t)}showFullscreenAdv({callbacks:e,clickDaemon:t,reason:a}){return new Promise(((r,n)=>Wr(this,null,(function*(){try{const{provider:n,serviceName:s}=this;if(!n)throw new Error("Provider not loaded.");const o=this.getAdvBlockId(v.$H.INTERSTITIAL,a);let i,d=!1;yield l.Z.post({type:"adv-fullscreen-block",action:"show-block",data:{blockName:s},timeout:ne.WT}),yield l.Z.post({type:"adv-fullscreen-block",action:"show",data:{onClose:()=>{d&&e.onClose(d),i&&n.destroySlot(i)}}}),e.onOpen(!1),t.request({advBlockId:o});const c=U(s);i=yield n.createSlot({blockId:o,divId:c,existingSlotBehaviour:$r.z.UsePrevious,size:(0,Yt.iv)(this.advManager.flags)});const{isEmpty:u,slot:h}=yield n.preloadSlot({slot:i});if(u)throw t.responseEmpty(),new I.lu(tt.XO.EMPTY_SLOT,{isEmpty:u});t.response(),d=!0,r(),yield n.showSlot(h),t.show(),yield l.Z.post({type:"adv-fullscreen-block",action:"show-controls",data:{blockName:s}})}catch(e){n(e)}}))))}showRewardedVideo(e){return Wr(this,arguments,(function*({callbacks:e,clickDaemon:t,reason:a}){return new Promise(((r,n)=>Wr(this,null,(function*(){try{const{rewardedProvider:n}=this;if(!n)throw new Error("Provider not loaded.");const s=this.getAdvBlockId(v.$H.REWARDED,a);let o;t.request({advBlockId:s}),o=yield n.createSlot({blockId:s});const{isEmpty:i,slot:l}=yield n.preloadSlot({slot:o});if(i)throw t.responseEmpty(),new I.lu(tt.XO.EMPTY_SLOT,{isEmpty:i});r(),e.onOpen(!0);const{wasRewarded:d}=yield n.showSlot(l);d&&e.onRewarded(),e.onClose(!0)}catch(e){n(e)}}))))}))}cancelShow(e){e===v.$H.INTERSTITIAL&&l.Z.post({type:"adv-fullscreen-block",action:"hide"})}}var Gr=(e,t,a)=>new Promise(((r,n)=>{var s=e=>{try{i(a.next(e))}catch(e){n(e)}},o=e=>{try{i(a.throw(e))}catch(e){n(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(s,o);i((a=a.apply(e,t)).next())}));const jr=(0,K.M$)("PubliftAdvService",K.XG.Adv);class Ur extends te{constructor(e,t){const{serviceName:a}=t;if(![ae.e.PubliftZone,ae.e.PubliftRewarded].includes(a))throw new Error(`Invalid service name: ${a}, kind of 'publift' expected.`);super(e,t,a),this.refreshCounter=0,this.init()}get blockName(){return`${this.serviceName}_${this.refreshCounter}`}init(){return Gr(this,null,(function*(){try{const e=this.isTagActive(v.$H.INTERSTITIAL),t=this.isTagActive(v.$H.REWARDED),[a,r]=yield Promise.all([e?yield(0,w.l)(b.oO.PubliftZone):null,t?yield(0,w.l)(b.oO.PubliftRewarded):null]);e&&a&&(this.interstitialProvider=a,yield re({querySelector:`.${O}`,interval:100,rejectTimeout:1500}),yield l.Z.post({type:"adv-fullscreen-block",action:"add-block",data:{blockName:this.blockName},timeout:ne.WT})),t&&r&&(this.rewardedProvider=r),this.onServiceLoaded()}catch(e){this.onServiceError(e)}}))}getTimeoutExtraTime(e,t){switch(e){case J.QA.ServiceInit:return 3*ne.WT;case J.QA.ShowFullscreen:return 10*ne.WT}return super.getTimeoutExtraTime(e,t)}getAdvBlockId(e,t){var a,r,n,s,o,i;switch(e){case v.$H.INTERSTITIAL:return null!=(n=null==(r=null==(a=this.advManager.allAdvBlocks.publift)?void 0:a.interstitial)?void 0:r.blockId)?n:"invalid_block";case v.$H.REWARDED:return null!=(i=null==(o=null==(s=this.advManager.allAdvBlocks.publift)?void 0:s.rewarded)?void 0:o.blockId)?i:"invalid_block"}return super.getAdvBlockId(e,t)}getZoneId(){var e,t,a;return null!=(a=null==(t=null==(e=this.advManager.allAdvBlocks.publift)?void 0:e.interstitial)?void 0:t.zoneId)?a:"invalid_zone"}showFullscreenAdv({callbacks:e,clickDaemon:t,reason:a}){return new Promise(((r,n)=>Gr(this,null,(function*(){try{const s=this.interstitialProvider;if(!s)return void n(new Error("Publift provider not loaded."));const o=this.getAdvBlockId(v.$H.INTERSTITIAL,a);let i,d=!1;yield l.Z.post({type:"adv-fullscreen-block",action:"show-block",data:{blockName:this.blockName},timeout:ne.WT}),yield l.Z.post({type:"adv-fullscreen-block",action:"show",data:{onClose:()=>Gr(this,null,(function*(){r(),d&&e.onClose(d),i&&s.destroySlot(i),this.refreshCounter++,yield l.Z.post({type:"adv-fullscreen-block",action:"add-block",data:{blockName:this.blockName},timeout:ne.WT})}))}}),e.onOpen(!1),t.request({advBlockId:o});const c=this.getZoneId();jr("Create slot",o,c,U(this.blockName)),i=yield s.createSlot({blockId:o,divId:U(this.blockName),zoneId:c});const{isEmpty:u,slot:h}=yield s.preloadSlot({slot:i});if(u)throw t.responseEmpty(),new I.lu("Slot is empty",{isEmpty:!0});t.response(),r(),d=!0,yield s.showSlot(h),t.show()}catch(e){n(e)}}))))}showRewardedVideo({reason:e,clickDaemon:t,callbacks:a}){return new Promise(((r,n)=>Gr(this,null,(function*(){try{const{rewardedProvider:s}=this;if(!s)return void n(new Error("Provider not loaded."));const o=this.getAdvBlockId(v.$H.REWARDED,e);let i,l=!1;t.request({advBlockId:o}),jr("Create rewarded slot",o),i=yield s.createSlot({blockId:o});const{slot:d}=yield s.preloadSlot({slot:i}),{isEmpty:c}=yield d.preloadPromise.promise;if(c)throw t.responseEmpty(),new I.lu("Slot is empty",{isEmpty:!0});t.response(),l=!0,a.onOpen(!0),r();const{rewardedPromise:u,closePromise:h}=yield s.showSlot(d),{isRewarded:p}=yield Promise.race([u,h]);yield h,p&&a.onRewarded(),a.onClose(l)}catch(e){n(e)}}))))}cancelShow(e){e===v.$H.INTERSTITIAL&&l.Z.post({type:"adv-fullscreen-block",action:"hide",data:{blockName:this.blockName}})}}const qr={adsense:oe,adsense_responsive:oe,anymind_manual:Zr,anymind_block:Zr,anymind_rewarded:Zr,crazy_games:class extends te{constructor(e,t){super(e,t,ae.e.CrazyGames),this.closeWithLog=(e,t)=>{e.close(),null==t||t(!0)},this.showFullscreenAdv=e=>he(this,[e],(function*({callbacks:e,clickDaemon:t}){return new Promise(((a,r)=>{var n;t.request({advBlockId:this.getAdvBlockId(v.$H.INTERSTITIAL)});try{null==(n=window.CrazyGames)||n.SDK.ad.requestAd("midgame",{adError:e=>{(0,I.qu)("[CrazyGames] showFullscreenAdv error",e),ue("error",t,r)},adFinished:()=>{this.closeWithLog(t,e.onClose),ue("viewed",t,r)},adStarted:()=>{ce(t,e.onOpen),a()}})}catch(e){ue("error",t,r)}}))})),this.showRewardedVideo=e=>he(this,[e],(function*({callbacks:e,clickDaemon:t}){return new Promise(((a,r)=>{var n;t.request({advBlockId:this.getAdvBlockId(v.$H.REWARDED)});try{null==(n=window.CrazyGames)||n.SDK.ad.requestAd("rewarded",{adError:e=>{(0,I.qu)("[CrazyGames] showRewardedVideo error",e),ue("error",t,r)},adFinished:()=>{this.closeWithLog(t,e.onClose),ue("viewed",t,r)},adStarted:()=>{ce(t,e.onOpen),a()}})}catch(e){ue("error",t,r)}}))})),this.loadCrazyGamesSDKScript()}loadCrazyGamesSDKScript(){return he(this,null,(function*(){var e;try{if(yield(0,le.x)({id:"crazy-games-sdk",src:"https://sdk.crazygames.com/crazygames-sdk-v3.js"}),!(null==(e=window.CrazyGames)?void 0:e.SDK))throw new Error("No window.CrazyGames.SDK");yield window.CrazyGames.SDK.init();const{environment:t}=window.CrazyGames.SDK;if(!t||!["crazygames","local"].includes(t))throw new Error("Unexpected SDK environment: "+t);this.onServiceLoaded()}catch(e){(0,ie.H)({block:de.W.ADV,additional:{adv:{service:this.serviceName}}},e),this.onServiceError()}}))}getAdvBlockId(e,t){return"crazy_games_block_id"}},azerion:class extends te{constructor(e,t){super(e,t,ae.e.Azerion),this.closeWithLog=(e,t,a)=>{e.close(),null==t||t(a)},this.rewardWithLog=(e,t)=>{e.rewarded(),null==t||t()},this.showFullscreenAdv=({callbacks:e,clickDaemon:t})=>new Promise(((a,r)=>{var n,s,o;t.request({advBlockId:this.getAdvBlockId(v.$H.INTERSTITIAL)}),ye={onOpen:()=>{ce(t,e.onOpen),this.onOpenAdvTs=Date.now()},onError:e=>{(0,I.qu)("[Azerion] showFullscreenAdv error",e),ue("error",t,r)},onClose:()=>{const a=void 0!==this.onOpenAdvTs&&Date.now()-this.onOpenAdvTs>=5e3;this.closeWithLog(t,e.onClose,a),ue("viewed",t,r),ye=null}};try{"function"==typeof(null==(n=window.gdsdk)?void 0:n.showAd)?window.gdsdk.showAd().then((()=>{a()})).catch(ye.onError):null==(s=ye.onError)||s.call(ye,new Error("Failed to show fullscreen. GameDistribution SDK is not available"))}catch(e){null==(o=ye.onError)||o.call(ye,e),ue("error",t,r)}})),this.showRewardedVideo=e=>ge(this,[e],(function*({callbacks:e,clickDaemon:t}){return new Promise(((a,r)=>{var n;t.request({advBlockId:this.getAdvBlockId(v.$H.REWARDED)});let s=!1;ye={onOpen:()=>{ce(t,e.onOpen),s=!0},onError:e=>{(0,I.qu)("[Azerion] showRewardedVideo error",e),ue("error",t,r)},onClose:()=>{if(!s)return(0,I.qu)("[Azerion] showRewardedVideo no ads, process empty"),void ue("empty",t,r);this.closeWithLog(t,e.onClose),ue("viewed",t,r),ye=null,this.preloadRewardedVideo()},onRewarded:()=>{this.rewardWithLog(t,e.onRewarded)}};try{if("function"!=typeof(null==(n=window.gdsdk)?void 0:n.showAd))throw new Error("Failed to show rewarded. GameDistribution SDK is not available");window.gdsdk.showAd(pe.Rewarded).then((()=>{a()})).catch(ye.onError)}catch(e){ue("error",t,r)}}))})),this.loadAzerionSDKScript()}loadAzerionSDKScript(){return ge(this,null,(function*(){const e=(0,ve.V)("azerion_game_id");if(!e)throw new Error("No Azerion game id passed");window.GD_OPTIONS={gameId:e,onEvent:e=>{var t,a,r;switch(e.name){case me.SDK_GAME_PAUSE:null==(t=null==ye?void 0:ye.onOpen)||t.call(ye);break;case me.SDK_GAME_START:null==(a=null==ye?void 0:ye.onClose)||a.call(ye);break;case me.SDK_REWARDED_WATCH_COMPLETE:null==(r=null==ye?void 0:ye.onRewarded)||r.call(ye)}}};try{if(yield(0,le.x)({id:"azerion-sdk",src:"https://html5.api.gamedistribution.com/main.min.js"}),!window.gdsdk)throw new Error("No window.gdsdk");this.onServiceLoaded(),this.preloadRewardedVideo()}catch(e){(0,ie.H)({block:de.W.ADV,additional:{adv:{service:this.serviceName}}},e),this.onServiceError()}}))}getAdvBlockId(e,t){return"azerion_block_id"}preloadRewardedVideo(){var e;"function"==typeof(null==(e=window.gdsdk)?void 0:e.preloadAd)&&window.gdsdk.preloadAd(pe.Rewarded).then((()=>{(0,I.qu)("[Azerion] preload rewarded completed")})).catch((e=>{(0,I.qu)("[Azerion] preload rewarded error",e)}))}},google_instream:nt,google_manual:class extends te{constructor(e,t){super(e,t,ae.e.GoogleManual,{showIntervalCommonMs:30*ne.WT}),this.provider=null,this.maxRetries=(0,be.Mi)(this.advManager.flags),this.preloadSlots={},this.showRewardedVideo=()=>it(this,null,(function*(){return Promise.reject("Not implemented")})),this.init()}init(){return it(this,null,(function*(){try{if(!this.isTagActive(v.$H.INTERSTITIAL))throw new Error("Nothing to show.");this.provider=yield(0,w.l)(b.oO.GoogleManual),this.preloadBanner({reason:Ue.p_.PRELOAD,tag:v.$H.INTERSTITIAL}).catch((e=>{(0,I.g5)(this,{error:e})})),this.onServiceLoaded()}catch(e){this.onServiceError(e)}}))}getAdvBlockId(e){if(e===v.$H.INTERSTITIAL)return this.advManager.allAdvBlocks.google.manual;throw new Error(`AdvTag ${e} not supported by this service.`)}preloadBanner(e){return it(this,arguments,(function*({tag:e,reason:t=Ue.p_.PRELOAD,logger:a}){const r=this.preloadSlots[e];if(r)return ot(`Return existing preload banner instance ${e}`),t!==Ue.p_.PRELOAD&&r.cancelRetry(),a&&(a.bindRequest(r.logger),r.logger=a),r.preloadPromise;const n=this.provider;if(!n)throw new Error("Provider not loaded.");let s=t!==Ue.p_.PRELOAD,o=-1;const i=new f.Z,l={cancelRetry:()=>{s=!0,clearTimeout(o)},logger:null!=a?a:new je.U({tag:e,app_id:this.advManager.appId}),preloadPromise:i.promise,cleanup:t=>{l.cancelRetry(),i.reject(t),delete this.preloadSlots[e],ot(`${e} banner cleared.`)}};let d=0;const c=this.getAdvBlockId(e),u=()=>it(this,null,(function*(){var e;try{const e=yield n.createSlot({blockId:c});if(l.logger.request({advBlockId:c,reason:t,retry:d,provider:this.serviceName}),(yield Promise.race([n.preloadSlot({slot:e}),(0,st.D)(dt).then((()=>{throw new I.lu(tt.XO.RESPONSE_TIMEOUT,{isEmpty:!1})}))])).isEmpty)throw l.logger.responseEmpty(),new I.lu(tt.XO.EMPTY_SLOT,{isEmpty:!0});l.logger.response(),i.resolve(e)}catch(t){if(s||d>this.maxRetries)return void l.cleanup(t);o=window.setTimeout(u,null!=(e=lt[d++])?e:lt[lt.length-1])}}));return u(),this.preloadSlots[e]=l,l.preloadPromise}))}showFullscreenAdv(e){return it(this,arguments,(function*({callbacks:e,clickDaemon:t,reason:a}){return new Promise(((r,n)=>it(this,null,(function*(){try{const n=this.provider;if(!n)throw new Error("Provider not loaded.");const s=yield this.preloadBanner({tag:v.$H.INTERSTITIAL,reason:a,logger:t});r(),e.onOpen(!0),yield n.showSlot(s),e.onClose(!0)}catch(e){n(e)}}))))}))}cancelShow(e){var t;e===v.$H.INTERSTITIAL&&(null==(t=this.preloadSlots[e])||t.cleanup())}onShowAdvFinished({tag:e}){var t;e===v.$H.INTERSTITIAL&&(null==(t=this.preloadSlots[e])||t.cleanup(),window.setTimeout((()=>{this.preloadBanner({tag:v.$H.INTERSTITIAL}).catch((e=>{(0,I.g5)(this,{error:e})}))}),this.advManager.minIntervalBetweenAds*we.j2))}},native:class extends te{constructor(e,t){super(e,t,ae.e.Native),this.fullscreenPreloadAdStatus="not_preloaded",this.rewardedPreloadAdStatus="not_preloaded",this.fullscreenShowAdNumber=0,this.rewardedShowAdNumber=0,this.depth=0,this.showFullscreenAdv=e=>Ot(this,[e],(function*({callbacks:e,clickDaemon:t}){return new Promise(((a,r)=>Ot(this,null,(function*(){var n;const{advManager:s}=this;this.fullscreenShowAdNumber+=1;const o=a=>{e.onClose(a),s.callOnAdvClose(a),"preloading"!==this.fullscreenPreloadAdStatus&&(this.preloadFullscreenAdvPromise=void 0),(0,be.ZJ)(s.flags)||this.preloadFullscreenAdv({clickDaemon:t})};try{e.onOpen(!1),a();const r=yield Promise.race([this.preloadFullscreenAdv({clickDaemon:t}),new Promise(((e,t)=>Ot(this,null,(function*(){yield(0,st.D)(xt),t(new Error("Fullscreen preload timeout"))}))))]);t.bindRequest(r),yield this.nativeAdv.showFullscreenAdv({onShowCalled:()=>{t.show()}}),o(!0)}catch(a){String(a.message).includes(_t)||String(null==(n=this.lastFullscreenError)?void 0:n.message).includes(_t)||t.error(a.message),(0,I.g5)(this,{tag:v.$H.INTERSTITIAL,error:a,name:"Native fullscreen adv error",additional:{adNumber:this.fullscreenShowAdNumber}}),"not_preloaded"===this.fullscreenPreloadAdStatus?(0,I.g5)(this,{tag:v.$H.INTERSTITIAL,error:a,name:"ad was not preloaded",additional:{adNumber:this.fullscreenShowAdNumber}}):"preloading"===this.fullscreenPreloadAdStatus&&(0,I.g5)(this,{tag:v.$H.INTERSTITIAL,error:a,name:"ad is still preloading",additional:{adNumber:this.fullscreenShowAdNumber}}),e.onError(a),o(!1),r(a)}}))))})),this.showRewardedVideo=e=>Ot(this,[e],(function*({callbacks:e,clickDaemon:t}){return new Promise(((a,r)=>Ot(this,null,(function*(){var n;this.rewardedShowAdNumber+=1;const s=()=>{e.onClose(),"preloading"!==this.rewardedPreloadAdStatus&&(this.preloadRewardedAdvPromise=void 0),(0,be.k4)(this.advManager.flags)||this.preloadRewardedAdv({clickDaemon:t,reason:Ue.p_.PRELOAD})};try{e.onOpen(!1),a();const r=yield Promise.race([this.preloadRewardedAdv({clickDaemon:t,reason:Ue.p_.ONSPOT}),new Promise(((e,t)=>Ot(this,null,(function*(){yield(0,st.D)(Nt),t(new Error("Rewarded preload timeout"))}))))]);t.bindRequest(r),yield this.nativeAdv.showRewardedVideo({onShowCalled:()=>{t.show()}}),e.onRewarded(),s()}catch(a){String(a.message).includes(_t)||String(null==(n=this.lastRewardedError)?void 0:n.message).includes(_t)||t.error(a.message),String(a.message).includes("User closed ad before it's end.")&&t.close(),(0,I.g5)(this,{tag:v.$H.REWARDED,error:a,name:"Native rewarded video error",additional:{adNumber:this.rewardedShowAdNumber}}),"not_preloaded"===this.rewardedPreloadAdStatus?(0,I.g5)(this,{tag:v.$H.REWARDED,error:a,name:"ad was not preloaded",additional:{adNumber:this.rewardedShowAdNumber}}):"preloading"===this.rewardedPreloadAdStatus&&(0,I.g5)(this,{tag:v.$H.REWARDED,error:a,name:"ad is still preloading",additional:{adNumber:this.rewardedShowAdNumber}}),e.onError(a),s(),r(a)}}))))})),(0,ct.x)()?this.nativeAdv=function(e){const t=window.appData.isGamesLiteApp;let a=null;function r(){return Lt(this,null,(function*(){return null!==a||(a=yield vt({advBlocks:e.advBlocks,flags:e.flags,residenceInfo:e.residenceInfo})),a}))}function n(t,a){return wt((0,L.Qx)(e.flags)?t:void 0,a)}return{getFullscreenBlockId(){return Lt(this,null,(function*(){const{fullscreenBlock:e}=yield r();return e}))},getRewardedBlockId(){return Lt(this,null,(function*(){const{rewardedBlock:e}=yield r();return e}))},preloadFullscreenAdv(){return Lt(this,null,(function*(){const{fullscreenBlock:e}=yield r(),a=n(e,gt);console.info("[Native adv TV] preload","fullscreen instream pageId:",a);const s=()=>{var e,t,r;return null==(r=null==(t=null==(e=window.yandex)?void 0:e.ads)?void 0:t.preloadInstreamAdv)?void 0:r.call(t,a,"0")};return t?s():Dt("preload",s)}))},preloadRewardedVideo(){return Lt(this,null,(function*(){const{rewardedBlock:e}=yield r(),a=n(e,yt);console.info("[Native adv TV] preload","rewarded instream pageId:",a);const s=()=>{var e,t,r;return null==(r=null==(t=null==(e=window.yandex)?void 0:e.ads)?void 0:t.preloadInstreamAdv)?void 0:r.call(t,a,"0")};return t?s():Dt("preload",s)}))},showFullscreenAdv(e){return Lt(this,arguments,(function*({onShowCalled:e}){const{fullscreenBlock:a}=yield r(),s=n(a,gt);if(console.info("[Native adv TV] show","fullscreen instream pageId:",s,a),!a&&!s)return Promise.reject(new Error("No fullscreen block for show"));const o=()=>{var t,a,r,n,o;return(null==(a=null==(t=window.yandex)?void 0:t.ads)?void 0:a.showInstreamAdv)&&e(),null==(o=null==(n=null==(r=window.yandex)?void 0:r.ads)?void 0:n.showInstreamAdv)?void 0:o.call(n,s)};return t?o():Dt("show",o)}))},showRewardedVideo(e){return Lt(this,arguments,(function*({onShowCalled:e}){const{rewardedBlock:a}=yield r(),s=n(a,yt);if(console.info("[Native adv TV] show","rewarded instream pageId:",s),!a)return Promise.reject(new Error("No rewarded block for show"));const o=()=>{var t,a,r,n,o;return(null==(a=null==(t=window.yandex)?void 0:t.ads)?void 0:a.showInstreamAdv)&&e(),null==(o=null==(n=null==(r=window.yandex)?void 0:r.ads)?void 0:n.showInstreamAdv)?void 0:o.call(n,s)};return t?o():Dt("show",o)}))}}}(this.advManager):this.nativeAdv=function(e){let t;function a(){if(!t){const a=(0,kt.W5)();t=JSON.stringify(((e,t)=>{for(var a in t||(t={}))It.call(t,a)&&Tt(e,a,t[a]);if(At)for(var a of At(t))Pt.call(t,a)&&Tt(e,a,t[a]);return e})({app_id:e.appId,clid:(0,Le.X)()},a?{gclid:a}:{}))}return t}const r=window.appData.isGamesLiteApp;let n=null;function s(){return Ct(this,null,(function*(){return null===n&&(n=yield vt({advBlocks:e.advBlocks,flags:e.flags,residenceInfo:e.residenceInfo})),n}))}return{getFullscreenBlockId(){return Ct(this,null,(function*(){const{fullscreenBlock:e}=yield s();return e}))},getRewardedBlockId(){return Ct(this,null,(function*(){const{rewardedBlock:e}=yield s();return e}))},preloadFullscreenAdv(){return Ct(this,null,(function*(){const{mediation:e,fullscreenBlock:t}=yield s();if(console.info("[Native adv] preload",e,"fullscreen ad:",t),!t)return Promise.reject(new Error("No fullscreen block for preload"));const a=()=>{var a,r,n;return null==(n=null==(r=null==(a=window.yandex)?void 0:a.ads)?void 0:r.preloadFullscreenAdv)?void 0:n.call(r,t,e)};return r?a():Dt("preload",a)}))},preloadRewardedVideo(){return Ct(this,null,(function*(){const{mediation:e,rewardedBlock:t}=yield s();if(console.info("[Native adv] preload",e,"rewarded video:",t),!t)return Promise.reject(new Error("No rewarded block for preload"));const a=()=>{var a,r,n;return null==(n=null==(r=null==(a=window.yandex)?void 0:a.ads)?void 0:r.preloadRewardedVideo)?void 0:n.call(r,t,e)};return r?a():Dt("preload",a)}))},showFullscreenAdv(e){return Ct(this,arguments,(function*({onShowCalled:e}){const{mediation:t,fullscreenBlock:n}=yield s(),o=a();if(console.info("[Native adv] show",t,"fullscreen ad:",n,o),!n)return Promise.reject(new Error("No fullscreen block for show"));const i=()=>{var a,r,s,i,l;return(null==(r=null==(a=window.yandex)?void 0:a.ads)?void 0:r.showFullscreenAdv)&&e(),null==(l=null==(i=null==(s=window.yandex)?void 0:s.ads)?void 0:i.showFullscreenAdv)?void 0:l.call(i,n,t,{revenueData:o})};return r?i():Dt("show",i)}))},showRewardedVideo(e){return Ct(this,arguments,(function*({onShowCalled:e}){const{mediation:t,rewardedBlock:n}=yield s(),o=a();if(console.info("[Native adv] show",t,"rewarded video:",n,o),!n)return Promise.reject(new Error("No rewarded block for show"));const i=()=>{var a,r,s,i,l;return(null==(r=null==(a=window.yandex)?void 0:a.ads)?void 0:r.showRewardedVideo)&&e(),null==(l=null==(i=null==(s=window.yandex)?void 0:s.ads)?void 0:i.showRewardedVideo)?void 0:l.call(i,n,t,{revenueData:o})};return r?i():Dt("show",i)}))}}}(this.advManager),(0,ct.x)()&&!(0,L.dx)(e.flags)||this.init()}init(){this.onServiceLoaded();const{flags:e}=this.advManager;!this.hasFullscreenAdv||this.advManager.isInterstitialAdsTurnOff||(0,be.uy)(e)||this.preloadFullscreenAdv({clickDaemon:new je.U({app_id:this.advManager.appId,tag:v.$H.INTERSTITIAL})}),this.hasRewarderdAdv&&this.advManager.advBlocks.rewarded&&!(0,be.uK)(e)&&(this.preloadRewardedAdvTimer=setTimeout((()=>{this.preloadRewardedAdv({clickDaemon:new je.U({app_id:this.advManager.appId,tag:v.$H.REWARDED}),reason:Ue.p_.PRELOAD}),this.preloadRewardedAdvTimer=null}),15*ne.WT))}getAdvBlockId(e){var t,a;return e===v.$H.REWARDED?null!=(t=this.rewardedBlock)?t:super.getAdvBlockId(e):null!=(a=this.fullscreenBlock)?a:super.getAdvBlockId(e)}getTimeoutExtraTime(e,t){return e===J.QA.ShowFullscreen||e===J.QA.ShowRewarded?5e3:super.getTimeoutExtraTime(e,t)}withFullscreenBlockId(e){this.fullscreenBlock?e(this.fullscreenBlock):this.nativeAdv.getFullscreenBlockId().then((t=>{this.fullscreenBlock=t,e(t)}))}withRewardedBlockId(e){this.rewardedBlock?e(this.rewardedBlock):this.nativeAdv.getRewardedBlockId().then((t=>{this.rewardedBlock=t,e(t)}))}preloadFullscreenAdv({clickDaemon:e}){return this.preloadFullscreenAdvPromise||(this.preloadFullscreenAdvPromise=new Promise(((t,a)=>{this.withFullscreenBlockId((r=>{this.rawPreloadFullscreenAdv({fullscreenBlock:r,clickDaemon:e}).then((e=>{t(e)})).catch(a)}))}))),this.preloadFullscreenAdvPromise}rawPreloadFullscreenAdv(e){return Ot(this,arguments,(function*({fullscreenBlock:e,clickDaemon:t}){this.lastFullscreenError=void 0,this.fullscreenPreloadAdStatus="preloading";try{if(Et)return t.bindRequest(Et),this.fullscreenPreloadAdStatus="preloaded",Promise.resolve(t)}catch(e){(0,I.g5)(this,{tag:v.$H.INTERSTITIAL,error:e,name:"Error while restore request from sessionStorage"})}t.request({advBlockId:e,provider:ae.e.Native,reason:Ue.p_.PRELOAD});try{return yield this.nativeAdv.preloadFullscreenAdv(),this.fullscreenPreloadAdStatus="preloaded",t.response(),t}catch(e){throw this.fullscreenPreloadAdStatus="not_preloaded",this.lastFullscreenError=e,t.error(e.message),(0,I.g5)(this,{tag:v.$H.INTERSTITIAL,error:e,name:"preloading failed"}),bt("preloadFullscreenAdv",e.message),e}}))}preloadRewardedAdv({clickDaemon:e,reason:t}){return this.preloadRewardedAdvTimer&&(clearTimeout(this.preloadRewardedAdvTimer),this.preloadRewardedAdvTimer=null),this.preloadRewardedAdvPromise||(this.preloadRewardedAdvPromise=new Promise(((a,r)=>{this.withRewardedBlockId((n=>{this.rawPreloadRewardedAdv({rewardedBlock:n,clickDaemon:e,reason:t}).then((e=>{a(e)})).catch(r)}))}))),this.preloadRewardedAdvPromise}rawPreloadRewardedAdv(e){return Ot(this,arguments,(function*({rewardedBlock:e,clickDaemon:t,reason:a}){this.lastRewardedError=void 0,this.rewardedPreloadAdStatus="preloading",t.request({advBlockId:e,provider:ae.e.Native,reason:a});try{return yield this.nativeAdv.preloadRewardedVideo(),this.rewardedPreloadAdStatus="preloaded",t.response(),t}catch(e){throw this.rewardedPreloadAdStatus="not_preloaded",this.lastRewardedError=e,t.error(e.message),(0,I.g5)(this,{tag:v.$H.REWARDED,error:e,name:"preloading failed"}),bt("preloadRewardedVideo",e.message),e}}))}},onboarding_promo:class extends Ht{constructor(e,t){super(e,t,ae.e.OnboardingPromo),this.isNonWaterfallPromoTimeoutReady=!1,setTimeout((()=>{this.isNonWaterfallPromoTimeoutReady=!0}),Ft.q)}checkCanShow(e,t){return e===v.$H.REWARDED?super.checkCanShow(e,t):this.isOnboardingPromoReady()?(0,Ft.Q)()?super.checkCanShow(e,t):J.Kc.NextRemove:J.Kc.Next}isOnboardingPromoReady(){const{firstShowGuard:e}=this.advManager;return this.isNonWaterfallPromoTimeoutReady&&e.canShowAdv()}},parent_window:class extends te{constructor(e,t){if(super(e,t,ae.e.ParentWindow),window===window.parent)return this.parentWindowApiIsAlive=!1,void this.onServiceError(new Error("No parent window"));this.messageListener=new Wt,this.onServiceLoaded(),this.addStartLivenessListener()}addStartLivenessListener(){const e=Zt({action:"ping",type:"liveness"}),t=this.messageListener.addListener({fn:e=>{const{action:t,payload:r,type:n}=e;switch(n){case"liveness":"pong"===t&&(window.clearTimeout(a),this.parentWindowApiIsAlive=!0);break;case"error":this.parentWindowApiIsAlive=!1,jt("error",e);break;default:this.parentWindowApiIsAlive=!1,jt(`[${Date.now()}] Unknown message "${n}:${t}", payload = ${JSON.stringify(r)}`)}return!0},messageId:e}),a=window.setTimeout((()=>{t(),this.parentWindowApiIsAlive=!1}),2e3)}getAdvBlockId(e,t){return"parent_window"}checkCanShow(e,t){return void 0===this.parentWindowApiIsAlive?J.Kc.Next:this.parentWindowApiIsAlive?super.checkCanShow(e,t):J.Kc.NextRemove}showFullscreenAdv(e){return Gt(this,arguments,(function*({callbacks:e,clickDaemon:t,reason:a,depth:r}){return new Promise(((n,s)=>Gt(this,null,(function*(){jt.spoiler(a,r)("showFullscreenAdv",e),t.request();const o=Zt({action:"showInterstitial",type:"adv"}),i=this.messageListener.addListener({fn:a=>{const{action:r,payload:o,type:i}=a;switch(i){case"adv":if("showInterstitial"===r)switch(window.clearTimeout(l),jt("showInterstitial callback",a),o.status){case"close":return e.onClose(),!0;case"empty":return t.responseEmpty(),s(new I.lu(we.qS,{isEmpty:!0})),!0;case"error":return t.error(o.error||""),s(new Error(`ParentWindow error ${o.error||""}`)),!0;case"open":case"start":break;case"show":t.response(),e.onOpen(),n();break;default:jt(`Unknown payload.status = "${o.status}"`)}break;case"error":return window.clearTimeout(l),jt("error",a),s(new Error(`ParentWindow error ${o.error||""}`)),!0;default:jt(`[${Date.now()}] Unknown message "${i}:${r}", payload = ${JSON.stringify(o)}`)}return!1},messageId:o}),l=window.setTimeout((()=>{i(),this.parentWindowApiIsAlive=!1,s(new Error("showInterstitial is not started"))}),5e3)}))))}))}showRewardedVideo(e){return Gt(this,arguments,(function*({callbacks:e,clickDaemon:t,reason:a,depth:r}){return new Promise(((n,s)=>Gt(this,null,(function*(){jt.spoiler(a,r)("showRewardedVideo",e),t.request();const o=Zt({action:"showRewarded",type:"adv"}),i=this.messageListener.addListener({fn:a=>{const{action:r,payload:o,type:i}=a;switch(i){case"adv":if("showRewarded"===r)switch(window.clearTimeout(l),jt("showRewarded callback",a),o.status){case"close":return e.onClose(),!0;case"empty":return t.responseEmpty(),s(new I.lu(we.qS,{isEmpty:!0})),!0;case"error":return t.error(o.error||""),s(new Error(`ParentWindow error ${o.error||""}`)),!0;case"open":case"start":break;case"rewarded":e.onRewarded();break;case"show":t.response(),e.onOpen(),n();break;default:jt(`Unknown payload.status = "${o.status}"`)}break;case"error":return window.clearTimeout(l),jt("error",a),s(new Error(`ParentWindow error ${o.error||""}`)),!0;default:jt(`[${Date.now()}] Unknown message "${i}:${r}", payload = ${JSON.stringify(o)}`)}return!1},messageId:o}),l=window.setTimeout((()=>{i(),this.parentWindowApiIsAlive=!1,s(new Error("showRewarded is not started"))}),5e3)}))))}))}},prebid_tgo:class extends te{constructor(e,t){var a;super(e,t,ae.e.PrebidTGO),this.fullscreenSlot=null,this.interstitialPreloadTimeout=Re.HF,this.useRewarded=!1,this.usePrebid=!0,this.usePreload=!1,this.waitForAuction=new f.Z,this.startPrebidAuction=(0,Ut.P)((()=>{if(Vt("Start prebid auction"),this.isPrebidAuctionRunning)return;this.isPrebidAuctionRunning=!0;const{pbjs:e}=window;this.prebidAuctionTimeout=window.setTimeout((()=>{Vt("No auction handled, call empty function."),this.prebidAuctionHandler()}),tt.XI),e.que.push((()=>ma(this,null,(function*(){e.requestBids({adUnitCodes:[this.getAdvBlockId(v.$H.INTERSTITIAL)],bidsBackHandler:this.prebidAuctionHandler,timeout:(0,na.cm)(this.advManager.flags)})}))))}),tt.kw),this.prebidAuctionHandler=(e,t)=>{clearTimeout(this.prebidAuctionTimeout),t&&(0,ie.H)({block:de.W.ADV},new Error("[prebid_sticky] Auction finished with bidders timed out.")),(0,sa.H)({advTag:v.$H.INTERSTITIAL,adUnitCodes:[this.getAdvBlockId(v.$H.INTERSTITIAL)],bids:e});const{pbjs:a,googletag:r}=window;r.cmd.push((()=>{a.que.push((()=>{a.setTargetingForGPTAsync([this.getAdvBlockId(v.$H.INTERSTITIAL)]),Vt("End prebid auction"),this.waitForAuction.resolve(),this.isPrebidAuctionRunning=!1}))}))},this.showFullscreenAdv=e=>ma(this,[e],(function*({callbacks:e,clickDaemon:t,reason:a,depth:r,initialTag:n}){return new Promise(((s,o)=>ma(this,null,(function*(){this.clearPreloadInterstitialTimer(),this.usePreload||this.usePrebid&&(yield this.waitForAuction.promise),yield(0,Kt.bT)((()=>ma(this,null,(function*(){try{if(!this.usePreload){if(null===this.fullscreenSlot)return void o(new Error("Called showFullscreenAdv, while gptSlot not ready"));!function({slot:e,method:t,debugLog:a}){t===v.qb.CLEAR_BEFORE_REFRESH?e?(a("Clearing slot before refresh with googletag.pubads().clear"),googletag.pubads().clear([e])):a("No slot to clear"):t===v.qb.INNER_TEXT_BEFORE_REFRESH&&(a("Clearing slot before refresh with el.innerText"),qt())}({method:this.clearSlotMethod,slot:this.fullscreenSlot,debugLog:Vt})}let i=!1;if(Vt("Call fullscreen show"),l.Z.post({type:"adv-fullscreen-block",action:"show",data:{onOpen:()=>{e.onOpen(!1)},onClose:()=>{!function({slot:e,method:t,debugLog:a}){t===v.qb.CLEAR_AFTER_ONCLOSE?e?(a("Clearing slot after onClose with googletag.pubads().clear"),googletag.pubads().clear([e])):(a("Clearing slot after onClose with googletag.pubads().clear"),a("No slot to clear")):t===v.qb.INNER_TEXT_AFTER_ONCLOSE&&(a("Clearing slot after onClose with el.innerText"),qt())}({method:this.clearSlotMethod,slot:this.fullscreenSlot,debugLog:Vt}),(n!==v.$H.REWARDED||i)&&(e.onClose(i),this.preloadInterstitial())}}}),this.usePreload){const{isEmpty:e,clickDaemon:n}=yield this.interstitialPreload.preload({reason:a,depth:r,clickDaemon:t});if(n&&t.bindRequest(n),e)throw new I.lu(tt.XO.EMPTY_SLOT,{isEmpty:!0});i=!0,s(),yield this.interstitialPreload.show(),t.show(),l.Z.post({type:"adv-fullscreen-block",action:"show-controls",data:{blockName:this.serviceName}})}else{const e=Date.now();this.slotRenderEndedCallback=a=>{const r=Date.now()-e;Vt(`Googletag slot render time: ${r}ms`),(0,Q.s4)("play_prebid_interstitial_slot_render_time",r),a.isEmpty?(t.responseEmpty(),o(new I.lu(tt.XO.EMPTY_SLOT,{isEmpty:!0}))):(i=!0,t.response(),s()),this.usePrebid&&googletag.cmd.push((()=>{this.startPrebidAuction()}))},this.slotImpressionViewableCallback=()=>{t.show()},t.request(),googletag.pubads().refresh([this.fullscreenSlot])}}catch(e){this.preloadInterstitial(),o(e)}}))))}))))})),this.showRewardedVideo=e=>ma(this,[e],(function*({callbacks:e,clickDaemon:t,depth:a,reason:r}){return new Promise(((n,s)=>ma(this,null,(function*(){try{const{isEmpty:s,waitForShow:o,clickDaemon:i}=yield this.rewardedPreload.preload({depth:a,clickDaemon:t,reason:r});if(i&&t.bindRequest(i),s||!o)throw new I.lu(tt.XO.EMPTY_SLOT,{isEmpty:!0});n(),e.onOpen(!0);const{wasRewarded:l,wasShown:d}=yield o((0,E.v_)({on:"adv_rewarded.prebid_tgo.delayed_on_rewarded"},(()=>{}),(()=>({onRewarded:()=>{e.onRewarded()}}))));(0,E.v_)({on:"adv_rewarded.prebid_tgo.delayed_on_rewarded"},(()=>{l&&e.onRewarded()})),e.onClose(d)}catch(e){s(e)}}))))}));const{flags:r}=e;this.isTagActive(v.$H.INTERSTITIAL)&&(0,L.Wv)(r)||(this.usePrebid=!1),this.isTagActive(v.$H.REWARDED)&&(this.useRewarded=!0,this.rewardedPreload=new aa(this)),this.usePreload=!(0,L.Ye)(r),this.usePreload&&(this.interstitialPreload=new Jt(this)),this.clearSlotMethod=null!=(a=(0,Te.getDomainConfig)().adv.clearSlotMethod)?a:(0,L.hs)(r),this.api=new ra.Z(window.appData.apiData),this.init()}getTimeoutExtraTime(e,t){if(e===J.QA.ShowFullscreen&&t===Ue.p_.START_FULLSCREEN)return 2e3}getAdvBlockId(e,t=Ue.p_.ONSPOT){switch(e){case v.$H.INTERSTITIAL:return t===Ue.p_.START_FULLSCREEN?this.advManager.allPrebidAdvBlocks.preroll:this.advManager.allPrebidAdvBlocks.interstitial;case v.$H.REWARDED:return this.advManager.allPrebidAdvBlocks.rewarded;default:throw new Error(`AdvTag ${e} not supported by this service.`)}}init(){return ma(this,null,(function*(){var e,t;const a=(0,na.cQ)({cdnUrl:this.advManager.context.cdnUrl,flags:this.advManager.flags,fullUrl:(0,_e.e)().href,options:{isSlowCountry:this.advManager.context.isSlowCountry}});yield(0,Kt.xq)({metrikaCounter:null==(e=(0,Te.getDomainConfig)().analytics.counters)?void 0:e.metrika,parallel:null!=(t=(0,L.RM)(this.advManager.flags,pt.Z.prebidLoadAfterGpt))&&t,prebidScriptUrl:this.usePrebid?a:void 0}).then((e=>{e.prebid||(this.usePrebid=!1,this.waitForAuction.resolve(),e.prebidError&&(0,I.g5)(this,{error:new Error(`Failed to load Prebid.js: ${e.prebidError.message}`)})),e.gpt?window.setTimeout((()=>{this.initGPT().then((()=>this.usePrebid?this.initPrebid():void 0)).then((()=>{this.interstitialPreloadTimeout===Re.HF&&this.preloadInterstitial(),this.useRewarded&&this.hasRewarderdAdv&&this.rewardedPreload.preload().catch((e=>Vt("Preload error",e)))})).catch((e=>{Vt(e),this.onServiceError(e)}))}),0):(Vt(e.gptError),this.onServiceError(e.gptError))}))}))}initGPT(){return ma(this,null,(function*(){return yield(0,Kt.Vg)(),(0,Kt.bT)((e=>{var t,a;const r=e.pubads(),n=this.options.tags[v.$H.INTERSTITIAL]===J.pP.Start?Ue.p_.START_FULLSCREEN:Ue.p_.ONSPOT;if(!this.usePreload){if(this.fullscreenSlot=null!=(a=null==(t=e.defineSlot(this.getAdvBlockId(v.$H.INTERSTITIAL,n),(0,Yt.iv)(this.advManager.flags),G))?void 0:t.addService(r))?a:null,!this.fullscreenSlot)throw new Error(tt.XO.NO_SLOT);r.addEventListener("slotRenderEnded",(e=>{var t;const{slot:a}=e;a===this.fullscreenSlot&&(null==(t=this.slotRenderEndedCallback)||t.call(this,e))})).addEventListener("impressionViewable",(e=>{var t;const{slot:a}=e;a===this.fullscreenSlot&&(null==(t=this.slotImpressionViewableCallback)||t.call(this,e),l.Z.post({type:"adv-fullscreen-block",action:"show-controls"}))}))}e.enableServices(),this.onServiceLoaded()}))}))}initPrebid(){return ma(this,null,(function*(){yield(0,na.BA)((e=>ma(this,null,(function*(){yield(0,na.OH)();const t=(0,L.Ed)(this.advManager.flags)?"dsail":"default",a=((e,t)=>la(e,da(t)))(((e,t)=>{for(var a in t||(t={}))ua.call(t,a)&&pa(e,a,t[a]);if(ca)for(var a of ca(t))ha.call(t,a)&&pa(e,a,t[a]);return e})({},(0,tt.Vc)("desktop",t,this.advManager.flags)),{code:this.getAdvBlockId(v.$H.INTERSTITIAL)}),r=(0,L.QR)(this.advManager.flags,pt.Z.prebidExtraBids);if((0,oa.GI)(r)){const e=r.reduce(((e,t)=>(tt.Hf[t]&&e.push(tt.Hf[t]),e)),[]);a.bids=[...a.bids,...e]}const n=(0,L.QR)(this.advManager.flags,pt.Z.prebidDisabledBids);(0,oa.GI)(n)&&(a.bids=a.bids.filter((({bidder:e})=>!n.includes(e)))),Vt("interstitial ad units react",a),e.addAdUnits(a),e.onEvent("auctionEnd",(e=>{const t=e.auctionEnd-e.timestamp;Vt(`Prebid auction took: ${t}ms`),(0,Q.s4)("play_prebid_interstitial_auction_time",t)})),this.usePreload||window.googletag.cmd.push((()=>{this.startPrebidAuction()}))}))))}))}clearPreloadInterstitialTimer(){clearTimeout(this.interstitialPreloadTimeout)}preloadInterstitial(){this.usePreload&&(this.clearPreloadInterstitialTimer(),this.interstitialPreloadTimeout=window.setTimeout((()=>{this.interstitialPreload.preload({beforeRequest:this.usePrebid?()=>(this.waitForAuction.resolve(),this.waitForAuction=new f.Z,this.startPrebidAuction(),this.waitForAuction.promise):void 0})}),this.advManager.minIntervalBetweenAds*we.j2))}cancelShow(e){switch(e){case v.$H.INTERSTITIAL:l.Z.post({type:"adv-fullscreen-block",action:"hide"});break;case v.$H.REWARDED:this.rewardedPreload.cancel()}}onShowAdvFinished({tag:e}){switch(e){case v.$H.INTERSTITIAL:break;case v.$H.REWARDED:window.setTimeout((()=>{this.rewardedPreload.preload().catch((e=>Vt("Preload error",e)))}),this.advManager.minIntervalBetweenAds*we.j2)}}},promo:Ht,transsion:class extends te{constructor(e,t){super(e,t,ae.e.Transsion),this.onScriptLoaded=e=>{var t,a;const{advManager:r}=this,{playPageData:n}=r.context;null==(a=window.h5sdk)||a.init(parseInt(n.gameInfo.appId,10),"","","","",{float:{env:"pre"},ga:{id:null==(t=(0,Te.getDomainConfig)().analytics.counters)?void 0:t.ga},adsense:{client:e.dataset.adClient,"data-ad-channel":e.dataset.adChannel,"data-ad-frequency-hint":e.dataset.adFrequencyHint,callback:()=>{var e;null==(e=window.h5sdk)||e.adConfig({preloadAdBreaks:"on",sound:"off",onReady:()=>{this.onServiceLoaded()}})}}})},this.processShowResult=({clickDaemon:e,info:t,reject:a,resolve:r})=>{if(["viewed","dismissed"].includes(t.breakStatus))return e.response(),void r();const n=!["noAdPreloaded","other","timeout"].includes(t.breakStatus);n?e.error(`${Ue.Ud.ERROR}_${t.breakStatus}`):e.responseEmpty(),a(new I.lu(`Transsion AdBreak returned ${t.breakStatus} status`,{isEmpty:!n}))},this.openWithLog=e=>()=>{null==e||e(),this.api.sendAdvShow({advService:this.serviceName,googleKeyValues:this.googleKeyValues})},this.showFullscreenAdv=e=>ga(this,[e],(function*({callbacks:e,clickDaemon:t,depth:a}){return new Promise(((r,n)=>{var s,o,i;const{advManager:l}=this,d=null!=(s=(0,L.di)(l.flags,pt.Z.transsionFullscreenPlacementType))?s:"preroll";"preroll"===d?null==(o=window.h5sdk)||o.adBreak({adBreakDone:s=>{"viewed"!==s.breakStatus&&"dismissed"!==s.breakStatus||(this.openWithLog(e.onOpen)(),e.onClose(!0)),this.processShowResult({tag:v.$H.INTERSTITIAL,depth:a,info:s,clickDaemon:t,resolve:r,reject:n})},type:d}):null==(i=window.h5sdk)||i.adBreak({afterAd:e.onClose.bind(this,!0),adBreakDone:e=>{this.processShowResult({tag:v.$H.INTERSTITIAL,depth:a,info:e,clickDaemon:t,resolve:r,reject:n})},beforeAd:()=>{this.openWithLog(e.onOpen)},type:d})}))})),this.showRewardedVideo=e=>ga(this,[e],(function*({callbacks:e,clickDaemon:t,depth:a}){return new Promise(((r,n)=>{var s;null==(s=window.h5sdk)||s.adBreak({adDismissed:e.onClose.bind(this,!1),afterAd:e.onClose.bind(this,!0),adBreakDone:e=>{this.processShowResult({tag:v.$H.REWARDED,depth:a,info:e,clickDaemon:t,resolve:r,reject:n})},adViewed:e.onRewarded,beforeAd:()=>{this.openWithLog(e.onOpen)},beforeReward:e=>{e()},type:"reward"})}))})),this.api=new ra.Z(window.appData.apiData),this.init()}getAdvBlockId(e){return va}getTimeoutExtraTime(e){return e===J.QA.ServiceInit?5e3:1e4}init(){this.loadScript(),(0,Kt.N5)().then((e=>{this.googleKeyValues=e}))}loadScript(){var e,t,a;window.t3wgame=!0;const{advManager:r}=this,{playPageData:n}=r.context;let s=(0,L.di)(r.flags,pt.Z.transsionAdChannel);if(!s){const{gameSettings:r}=n;(null==(a=null==(t=null==(e=null==r?void 0:r.advInfo)?void 0:e.adsense)?void 0:t.channel)?void 0:a.id)&&(s=r.advInfo.adsense.channel.id)}(0,le.x)({id:"transsion-script",dataset:{adChannel:s,adClient:va,adFrequencyHint:"50s"},src:"https://www.hippoobox.com/static/sdk/adsdk_1.4.0.0.js"}).then((e=>{this.validateH5SdkObject(window.h5sdk)&&this.onScriptLoaded(e)})).catch((e=>{this.onServiceError(e)}))}validateH5SdkObject(e){if(!e||"object"!=typeof e)throw new Error("Can not find valid window.h5sdk");if("function"!=typeof e.init)throw new Error("window.h5sdk.init method is not a function");return!0}},yandex:class extends te{constructor(e,t){super(e,t,ae.e.Yandex),this.isFullscreenShowing=!1,this.isRewardedShowing=!1,this.showAdvCallbacks={[v.$H.INTERSTITIAL]:null,[v.$H.REWARDED]:null},this.isPreloadFullscreenAdvEnabled=(0,I.un)(),this.closeAdvOnEscape=null,this.onScriptLoadedSuccessful=()=>{this.onScriptFinish((()=>{this.fullscreenPrerender||!this.isTagActive(v.$H.INTERSTITIAL)||this.isTagWaterfall(v.$H.INTERSTITIAL)||!this.hasFullscreenAdv||this.advManager.isAdvDisabled||(this.fullscreenPrerender=this.initFullscreenPrerender(this.options.tags[v.$H.INTERSTITIAL]===J.pP.Start?Ue.p_.START_FULLSCREEN:Ue.p_.PRELOAD,this.getClickDaemon(v.$H.INTERSTITIAL))),this.isTagActive(v.$H.REWARDED)&&!this.isTagWaterfall(v.$H.REWARDED)&&this.hasRewarderdAdv&&this.initRewardedPrerender()})),this.onServiceLoaded()},this.onScriptLoadedWithError=e=>{_a(),this.onServiceError(e)},this.debounceNewFullscreenAdvLoad=()=>{this.isRewardedShowing||this.isPreloadFullscreenAdvEnabled||this.preloadFullscreenAdv(Ue.p_.PRELOAD)},this.cssClasses=La(),this.cssViewTypeClass=(0,I.TE)(e.viewType),this.debounceNewFullscreenAdvLoad=(0,Hr.D)(this.debounceNewFullscreenAdvLoad,1e3),this.init()}init(){this.closeOnEscape(),this.initMessaging()}initMessaging(){l.Z.onInternalMessage("yandex-adv-service",(e=>{switch(e.data.action){case"close-adv":case"bottom-button-close-adv":this.hideFullscreenAdv(!0);break;case"adv-container-mounted":this.advContainer=document.querySelector(`.${we.kn.modal}.${(0,I.el)("yandex")}.${we.kn.modalFullscreen}`),this.loadScript(),this.initDOMEvents()}}))}initDOMEvents(){const{advManager:{viewType:e}}=this;e===we.xd.fullscreen&&(window.addEventListener("resize",(()=>{this.savedPageYOffset=(0,I.SW)(this.advContainer)})),Ae.default.addChangeListener((()=>{this.isFullscreenShowing&&this.isPreloadFullscreenAdvEnabled?(Da("Screen orientation was changed, set `rerenderForced = true` and hide/show."),this.hideFullscreenAdv(void 0,!0)):this.debounceNewFullscreenAdvLoad()})),(0,I.zw)())}loadScript(){Array.isArray(window.yandexContextAsyncCallbacks)||(window.yandexContextAsyncCallbacks=[]),window.yandexContextAsyncCallbacks.push(this.onScriptLoadedSuccessful),(0,le.x)({id:"yandexads-context",src:this.advManager.context.yaAdsScript}).catch(this.onScriptLoadedWithError)}getTimeoutExtraTime(e,t){if(e===J.QA.ShowFullscreen&&t===Ue.p_.WATERFALL)return 1500}startPrerenderDelayPromise(e){this.prerenderDelayPromise=new Promise((t=>{setTimeout((()=>{null==e||e(),t()}),2e3)}))}initFullscreenPrerender(e,t){return this.fullscreenPrerender?this.fullscreenPrerender:(Da("initFullscreenPrerender, reason =",e),Da(`isPreloadFullscreenAdvExperimentEnabled = ${this.isPreloadFullscreenAdvEnabled}`),this.isPreloadFullscreenAdvEnabled?new ur(this,e,t):new tr(this,e,t))}initRewardedPrerender(e=Ue.p_.PRELOAD){if(this.rewardedPrerender)return;const{advBlocks:t,flags:a}=this.advManager;t.rewarded&&(this.rewardedPrerender=(0,L.lv)(a)?new Mr(this,e):new Ir(this,e),this.preloadRewardedAdv(e))}onScriptFinish(e){_a(),this.startPrerenderDelayPromise(e)}getAdvBlockId(e,t){if((0,ct.x)())return e===v.$H.REWARDED?we.EC.rewarded:we.EC.fullscreen;const{advBlocks:a,deviceType:r}=this.advManager;return e===v.$H.REWARDED?Na({advBlocks:a,deviceType:r}):xa({advBlocks:a,deviceType:r,reason:t})}closeOnEscape(){this.closeAdvOnEscape=e=>{"Escape"===e.key&&this.hideFullscreenAdv(!0)},window.addEventListener("keydown",this.closeAdvOnEscape)}hideFullscreenAdv(e,t){var a,r,n,s,o;this.screenUnlock(),this.isFullscreenShowing=!1,Da("hideFullscreenAdv, rerenderForced =",t);const{advManager:i}=this;null==(a=this.destroyAdv)||a.call(this);const d=this.getClickDaemon(v.$H.INTERSTITIAL);if(t){this.preloadFullscreenAdv();const e=null!=(n=null==(r=this.fullscreenPrerender)?void 0:r.previousReason)?n:Ue.p_.PRELOAD;this.showFullscreenAdv({callbacks:this.showAdvCallbacks[v.$H.INTERSTITIAL],clickDaemon:d,reason:e,depth:0,tag:v.$H.INTERSTITIAL,initialTag:v.$H.INTERSTITIAL})}else(0,I.PS)(),this.closeAdvOnEscape&&(window.removeEventListener("keydown",this.closeAdvOnEscape),this.closeAdvOnEscape=null),i.deviceType!==Sa.n.desktop&&(0,I.HH)(),l.Z.post({type:"yandex-fullscreen-render",action:"hide-fullscreen"}),window.scroll(0,this.savedPageYOffset),null==(s=this.fullscreenPrerender)||s.next(this.options.tags[v.$H.INTERSTITIAL]===J.pP.Start?Ue.p_.PRELOAD:Ue.p_.PRELOAD_WATERFALL,d),e&&(null==(o=this.showAdvCallbacks[v.$H.INTERSTITIAL])||o.onClose(e),i.callOnAdvClose(e),(0,A.D)())}showAdvContainer(){const{advManager:e}=this,{flags:t}=e;this.isFullscreenShowing=!0;const{deviceType:a}=this.advManager;setTimeout((()=>{var r;window.focus(),a!==Sa.n.desktop&&(0,I.xK)(),l.Z.post({type:"yandex-fullscreen-render",action:"show-fullscreen"}),this.savedPageYOffset=(0,I.SW)(this.advContainer);const n=(null==(r=this.advManager.context.uatraits)?void 0:r.OSFamily)===ya.k.IOS;a===Sa.n.desktop?(0,I.ss)({advElement:this.advContainer.querySelector(`.${this.cssClasses.modalWrap}`),type:"fullscreen",flags:e.flags,appId:e.appId,isIOS:n}):(0,I.ss)({advElement:this.advContainer,type:"fullscreen",flags:e.flags,appId:e.appId,isIOS:n}),t.autoclose_adv&&setTimeout((()=>{this.hideFullscreenAdv(!0)}),t.autoclose_adv)}),0)}preloadFullscreenAdv(e){var t;null==(t=this.fullscreenPrerender)||t.next(e,this.getClickDaemon(v.$H.INTERSTITIAL))}preloadRewardedAdv(e){var t;null==(t=this.rewardedPrerender)||t.next(e)}showFullscreenAdv(e){return Fr(this,arguments,(function*({callbacks:e,clickDaemon:t,reason:a}){return new Promise(((r,n)=>Fr(this,null,(function*(){try{this.showAdvCallbacks[v.$H.INTERSTITIAL]=e,Da("showFullscreenAdv"),this.screenLock(),this.fullscreenPrerender||(this.fullscreenPrerender=this.initFullscreenPrerender(a,t));const{fullscreenPrerender:n}=this;yield this.prerenderDelayPromise;const{hasContent:s,err:o,clickDaemon:i}=yield n.ready().then((e=>e.showPrerenderedAd?e.showPrerenderedAd():e));if(i&&t.bindRequest(i),o)throw o;if(!s)throw new I.lu(we.qS,{isEmpty:!0});e.onOpen(),(0,I.WL)(),this.showAdvContainer(),r()}catch(e){this.screenUnlock(),n(e),(0,E.v_)({on:"adv_interstitial.yandex.enable_preload_retries"})&&this.fullscreenPrerender instanceof wa&&this.fullscreenPrerender.retryPreloading(Ue.p_.PRELOAD,v.$H.INTERSTITIAL)}}))))}))}showRewardedVideo(e){return Fr(this,arguments,(function*({callbacks:e,clickDaemon:t,reason:a,depth:r}){return new Promise(((n,s)=>Fr(this,null,(function*(){var o;try{const{advManager:s}=this;if(this.showAdvCallbacks[v.$H.REWARDED]=e,!this.rewardedPrerender&&s.advBlocks.rewarded&&this.initRewardedPrerender(a),yield this.prerenderDelayPromise,!s.advBlocks.rewarded)throw new Error("partnerId is not defined, no rewarded video adv block available");yield null==(o=this.rewardedPrerender)?void 0:o.showRewardedVideo({callbacks:e,clickDaemon:t,reason:a,tag:v.$H.REWARDED,initialTag:v.$H.REWARDED,depth:r}),n()}catch(e){s(e)}}))))}))}screenLock(){const{advManager:{flags:e}}=this;(0,L.F7)(e)&&Ae.default.lock().catch((()=>{}))}screenUnlock(){const{advManager:{flags:e}}=this;(0,L.F7)(e)&&Ae.default.unlock().catch((()=>{}))}getClickDaemon(e){const{advManager:t}=this;return new je.U({app_id:t.appId,tag:e})}},publift_zone:Ur,publift_rewarded:Ur},Vr=qr,zr=["onOpen","onRewarded","onClose","onError"],Kr=class{constructor(e,t){this.tag=e,this.clickDaemon=t,this.callbacks={},this.isOuterCallbacksMuted=!1,this.onOpen=(e=!0)=>{var t;e&&(null==(t=this.clickDaemon)||t.show()),this.safeCall("onOpen")},this.onRewarded=()=>{var e;null==(e=this.clickDaemon)||e.rewarded(),this.safeCall("onRewarded")},this.onClose=e=>{var t;e&&this.currentTag!==this.tag&&this.currentTag===v.$H.INTERSTITIAL&&this.onRewarded(),null==(t=this.clickDaemon)||t.close(),this.safeCall("onClose",void 0,e)},this.onError=e=>{this.safeCall("onError",!1,e)};for(const e of zr)this.callbacks[e]||(this.callbacks[e]=[]);this.currentTag=e}safeCall(e,t=!0,...a){if(this.isOuterCallbacksMuted)return void(0,I.qu)(`AdvCallbacks ${e} call skipped, due mute during waterfall.`);const r=this.callbacks[e];if(r)for(let n=0;n<r.length;n++)(0,I.tq)(r[n],`Error in callback ${e}: `).apply(null,a),t&&r.splice(n--,1)}addCallbacks(e,t=!1){for(const a in e)t&&["onOpen","onRewarded"].includes(a)&&!this.callbacks[a].length?(0,I.tq)(e[a],`Error in callback ${a}`).apply(null):this.callbacks[a].push(e[a])}muteCallbacks(){this.isOuterCallbacksMuted=!0}unmuteCallbacks(){this.isOuterCallbacksMuted=!1}};var Yr=a(35090);const Xr=ne.yR;class Jr{constructor(){this.setupCanShowAdv()}setupCanShowAdv(){this.canShowAdv=()=>!0,(0,Yr.FN)()&&(this.canShowAdv=()=>(console.warn(`Warning: please, try to open advertising after ${Xr}ms`),!1),window.setTimeout((()=>{this.canShowAdv=()=>!0}),Xr))}}var Qr=a(92389),en=a(21466),tn=a(61224),an=a(14228),rn=a(37918),nn=Object.defineProperty,sn=Object.defineProperties,on=Object.getOwnPropertyDescriptors,ln=Object.getOwnPropertySymbols,dn=Object.prototype.hasOwnProperty,cn=Object.prototype.propertyIsEnumerable,un=(e,t,a)=>t in e?nn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,hn=(e,t,a)=>new Promise(((r,n)=>{var s=e=>{try{i(a.next(e))}catch(e){n(e)}},o=e=>{try{i(a.throw(e))}catch(e){n(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(s,o);i((a=a.apply(e,t)).next())}));const pn=(0,K.M$)("AdvManager",K.XG.Adv,{background:"seagreen"}),mn=pn.tag("showAdv");class vn{constructor(e,t){var a,r,n,s,o,i,d,c;this.context=e,this.gameControl=t,this.callbacksToSdk={[v.$H.INTERSTITIAL]:null,[v.$H.REWARDED]:null},this.guardClosedPromiseWrapper=new f.Z,this._showAdvLock={[v.$H.INTERSTITIAL]:!1,[v.$H.REWARDED]:!1},this._lastShowTime={[v.$H.INTERSTITIAL]:0,[v.$H.REWARDED]:0},this.serviceInstances=void 0,this.splashScreenPromise=new f.Z,this.middleLayerInGamePromise=new f.Z,this.servicesBlocks={[v.$H.INTERSTITIAL]:{},[v.$H.REWARDED]:{}},this.handleVisibilityChange=()=>{pn("handleVisibilityChange",document.visibilityState);const e=(0,L.$9)(this.flags,pt.Z.minInactivePlayTabTimeToShowAd);e&&("hidden"===document.visibilityState?this.inactiveTabTime=Date.now():this.inactiveTabTime>0&&Date.now()-this.inactiveTabTime>=e&&(pn("show interstitial after inactive state"),this.showAdv(v.$H.INTERSTITIAL,{reason:Ue.p_.ONSPOT})))},this.onGuardMessage=e=>{const{action:t}=e.data;"set-was-showed"===t&&this.resolveGuardPromise()},this.onSplashMessage=e=>{const{action:t}=e.data;"set-was-closed"===t&&this.resolveSplashScreenPromise()},this.onMiddleLayerMessage=e=>{const{action:t}=e.data;"close"===t&&this.resolveMiddleLayerPromise()},this.onFrameMessage=e=>{const{action:t}=e.data;t===y.ur.IframeLoaded&&(this.initServices(v.$H.INTERSTITIAL),this.initServices(v.$H.REWARDED),l.Z.offInternalMessage("frame",this.onFrameMessage))},this.deviceType=e.deviceType,this.allAdvBlocks=e.allAdvBlocks,this.allPrebidAdvBlocks=e.allAdvBlocks.prebid;const u=e.playPageData.gameSettings,h={advBlocks:u.advBlocks,partnerId:null!=(r=null==(a=u.advBlocks.desktop)?void 0:a.fullscreen)?r:u.advBlocks.fullscreen,rewardedVideoPartnerId:null!=(s=null==(n=u.advBlocks.desktop)?void 0:n.rewarded)?s:u.advBlocks.rewarded},{advBlocks:p={fullscreen:h.partnerId,rewarded:h.rewardedVideoPartnerId}}=h,{flags:m}=e.abt;this.flags=m,this.withWorldWideAdv=Boolean(e.withWorldWideAdv);const g=(0,Yr.pN)(["a_delay","clid",ht.Je,"min-interval-between-ads","utm_medium"]),w=(0,en.k4)(g.utm_medium,g.clid);var b;this.deviceId=g[ht.Je],this.appId=e.playPageData.gameInfo.appId,this.viewType=this.deviceType===Sa.n.desktop?we.xd.desktop:we.xd.fullscreen,this.advBlocks=(0,I.$3)(p,this.appId,m),this.residenceInfo=null==(o=u.advInfo)?void 0:o.residence_info,this.advUsedBlocks=u.advUsedBlocks,this.startTime=Date.now(),this.lang=e.playPageData.request.lang,this.minIntervalBetweenAds=(0,I.mx)(g["min-interval-between-ads"],m,this.withWorldWideAdv),this.advDelay=(0,L.$9)(m,pt.Z.advDelay)||(0,I.dh)(g.a_delay)||rn.JV[(0,ja.KT)()]||(e.isTranssion?we.Sk:0),this.isRewardedAdsDisabled=w,this.isInterstitialAdsDisabled=w,this.isInterstitialAdsTurnOff=(0,L.Ww)(m,v.By.FULLSCREEN),this.isRewardedAdsTurnOff=(0,L.Ww)(m,v.By.REWARDED),this.isDisableAdButtonEnabled=(0,L.RM)(m,pt.Z.disableAdButton)||!1,this.firstShowGuard=new Jr,this.advBlocks.fullscreen||(null==(i=this.advBlocks.desktop)?void 0:i.fullscreen)||(null==(d=this.advBlocks.mobile)?void 0:d.fullscreen)||(0,I.ey)(this.appId),void 0!==g.a_delay&&(0,I.R4)(),w&&(this.reasonForDisablingAd=v.Jm.UTM,this.sendAdvDisabledToChild(this.reasonForDisablingAd)),pn("advUsedBlocks",this.advUsedBlocks),this.waterfallQueue=(0,hr.gK)({flags:this.flags,ingameAdvData:null==(c=window.appData.advDataStore)?void 0:c.ingameAdv,withWorldWideAdv:this.withWorldWideAdv}),pn("waterfallQueue",this.waterfallQueue),this.initMessaging(),this.showStartFullscreenAdv(),(0,an.y)().then((e=>{e||this.resolveGuardPromise()})),e.isGamesApp&&!this.isInterstitialAdsTurnOff&&(0,hr.sf)(this.waterfallQueue.interstitial,ae.e.Native)&&(b={advBlocks:this.advBlocks,appId:this.appId,flags:m,residenceInfo:this.residenceInfo},setTimeout((()=>function(e){return t=this,a=arguments,r=function*({advBlocks:e,appId:t,flags:a,residenceInfo:r}){var n;const{mediation:s,fullscreenBlock:o}=yield vt({advBlocks:e,flags:a,residenceInfo:r}),i=new je.U({app_id:t,tag:v.$H.INTERSTITIAL});Et=i,bt(`Preload. mediation = ${s}, fullscreen = ${o}`),i.request({advBlockId:o,provider:ae.e.Native,reason:Ue.p_.PRELOAD});const l=null==(n=window.yandex)?void 0:n.ads,d=()=>{i.error(Ue.Ud.NOT_IMPL)};let c;if((0,ct.x)()){const e=wt((0,L.Qx)(a)?o:void 0,gt);if(!l||!l.preloadInstreamAdv)return void d();c=l.preloadInstreamAdv(e,"0")}else{if(!l||!l.preloadFullscreenAdv)return void d();c=l.preloadFullscreenAdv(o,s)}c.then((()=>{i.response()})).catch((e=>{i.error(`${Ue.Ud.ERROR}_${e.message}`),console.error(e)}))},new Promise(((e,n)=>{var s=e=>{try{i(r.next(e))}catch(e){n(e)}},o=e=>{try{i(r.throw(e))}catch(e){n(e)}},i=t=>t.done?e(t.value):Promise.resolve(t.value).then(s,o);i((r=r.apply(t,a)).next())}));var t,a,r}(b)),3e3)),this.guardClosedPromiseWrapper.promise.then((()=>{document.addEventListener("visibilitychange",this.handleVisibilityChange)})),this.logAdvDelayFlag=Boolean(window.appData.logAdvDelay)}get adOpenedType(){return this._adOpenedType}set adOpenedType(e){pn(`Set adOpenedType to: ${e}`),this._adOpenedType=e}get showAdvLock(){return this._showAdvLock}get lastShowTime(){return this._lastShowTime}get isAdvDisabledByPartner(){return null===window.appData.advEnabledByPartner?(0,tn.VX)():!window.appData.advEnabledByPartner}updateSubscriptionState(e){this.updateDisableAdvButtonVisibility(e),this.reasonForDisablingAd!==v.Jm.UTM&&this.isInterstitialAdsDisabled!==e&&(this.isInterstitialAdsDisabled=e,this.reasonForDisablingAd=v.Jm.SUBSCRIPTION,this.sendAdvDisabledToChild(this.reasonForDisablingAd))}showStartFullscreenAdv(){var e;if((0,L.Ww)(this.flags,v.By.START_FULLSCREEN))return;const t=(0,hr.C5)({advBlocks:this.advBlocks,flags:this.flags,ingameAdvData:null==(e=window.appData.advDataStore)?void 0:e.ingameAdv,withWorldWideAdv:this.withWorldWideAdv});t&&(pn("Show fullscreen on start (preroll)"),this.callOnAdvClose(),this.showAdv(v.$H.INTERSTITIAL,{reason:Ue.p_.START_FULLSCREEN,sendToSDK:!1},t))}get isAdvDisabled(){return this.isInterstitialAdsDisabled||this.isInterstitialAdsTurnOff||this.isAdvDisabledByPartner}initServices(e,t=this.waterfallQueue[e],a=Ue.p_.ONSPOT){var r;const n=(r,n)=>{if(a===Ue.p_.START_FULLSCREEN&&e===n)return J.pP.Start;switch((0,hr.Jt)(e===n?t:this.waterfallQueue[n],r)){case-1:return J.pP.Skip;case 0:return J.pP.Onspot;default:return J.pP.Waterfall}},s=new Set;if(t.forEach((e=>s.add(e.provider))),this.serviceInstances=[...s].reduce(((e,t)=>{if(e[t])return e;try{const a=Vr[t];e[t]=new a(this,{tags:{[v.$H.INTERSTITIAL]:n(t,v.$H.INTERSTITIAL),[v.$H.REWARDED]:n(t,v.$H.REWARDED)},serviceName:t}),e[t].initPromise.promise.catch((()=>{})),pn(`Service ${t} inited.`)}catch(e){(0,ie.H)({block:de.W.ADV},e)}return e}),null!=(r=this.serviceInstances)?r:{}),!t.every((({provider:t})=>this.servicesBlocks[e][t]))){pn.spoiler(this.serviceInstances)(`Services for tag ${e}:${a} inited`);for(const{provider:a}of t)this.servicesBlocks[e][a]=!0;l.Z.post({type:"play-adv-manager",action:"update-adv-services-list",data:this.servicesBlocks})}}updateDisableAdvButtonVisibility(e){if(!this.isDisableAdButtonEnabled)return;const t=(0,Qr._)("aab-adv");e?t.classList.contains(we.Si)&&t.classList.remove(we.Si):t.classList.contains(we.Si)||t.classList.add(we.Si)}sendAdvDisabledToChild(e){pn("readNoAdsSubscriptionValue, this.isInterstitialAdsDisabled = ",this.isInterstitialAdsDisabled,", reason = ",e),l.Z.hasChild()&&l.Z.postToChild(g.fB.SetDisabledState({reason:e,value:this.isInterstitialAdsDisabled}))}resolveGuardPromise(){this.guardClosedPromiseWrapper.resolve(void 0),l.Z.offInternalMessage("guard",this.onGuardMessage)}resolveSplashScreenPromise(){this.splashScreenPromise.resolve(void 0),l.Z.offInternalMessage("splash",this.onSplashMessage)}resolveMiddleLayerPromise(){this.middleLayerInGamePromise.resolve(void 0),l.Z.offInternalMessage("middle-layer",this.onMiddleLayerMessage)}initMessaging(){var e;l.Z.onInternalMessage("guard",this.onGuardMessage,{withHistory:!0}),l.Z.onInternalMessage("frame",this.onFrameMessage,{withHistory:!0}),this.context.isAdvSplashScreenEnabled||this.context.playPageData.isBrandingEnabled||this.context.playPageData.isSlowdownEnabled&&!this.advDelay?l.Z.onInternalMessage("splash",this.onSplashMessage):this.splashScreenPromise.resolve(void 0),(null==(e=this.context.middleLayerInGameData)?void 0:e.show)?l.Z.onInternalMessage("middle-layer",this.onMiddleLayerMessage):this.middleLayerInGamePromise.resolve(void 0),l.Z.onExternalMessage("adv-manager",((e,t)=>{switch(e.data.action){case"adv-show-fullscreen":this.callbacksToSdk[v.$H.INTERSTITIAL]=t,this.showAdv(v.$H.INTERSTITIAL,{reason:Ue.p_.ONSPOT});break;case"adv-show-rewarded-video":this.callbacksToSdk[v.$H.REWARDED]=t,this.showAdv(v.$H.REWARDED,{reason:Ue.p_.ONSPOT});break;case"get-disabled-state":return void t({data:{value:this.isInterstitialAdsDisabled}})}}))}callOnAdvClose(e=!1){pn("callOnAdvClose",e),l.Z.post({type:"adv-manager",action:"on-adv-close",data:{wasShown:e}})}waitServiceInit(e,t){const{serviceName:a}=e;return e.initPromise.state!==f.W.Pending?e.initPromise.promise:Promise.race([e.initPromise.promise,(0,Oe.D)((0,I.uD)(this.flags,e,t)).then((()=>{throw new Error(`Ad script init timeout, serviceName: ${a}`)}))])}waitShowAdv(e,t,a){const r=(t===v.$H.INTERSTITIAL?e.showFullscreenAdv:e.showRewardedVideo).bind(e);return Promise.race([r(a),(0,Oe.D)((0,I.gp)(this.flags,t,e,a.reason)).then((()=>{throw new Error(`Ad showAdv(${t}) timeout, serviceName: ${e.serviceName}`)}))])}sendCallbackToSdk(e,t){var a,r;null==(r=(a=this.callbacksToSdk)[e])||r.call(a,{data:{error:t}}),this.callbacksToSdk[e]=null}showServiceAdv(e,t,a){return hn(this,arguments,(function*(e,t,a,{clickDaemon:r,depth:n,reason:s,initialTag:o}=a){var i,l;try{mn(`Service ${e.serviceName} start processing ${t}:${s}`),n?r.waterfall({provider:e.serviceName,advBlockId:e.getAdvBlockId(t,s),depth:n,reason:s,tag:o}):r.demand({provider:e.serviceName,advBlockId:e.getAdvBlockId(t,s),depth:0,reason:s}),yield Promise.all([this.guardClosedPromiseWrapper.promise,this.splashScreenPromise.promise,this.middleLayerInGamePromise.promise,this.waitServiceInit(e,s)]);const i=yield this.waitShowAdv(e,t,a);if("function"==typeof i)try{yield i()}catch(e){if(e instanceof Error){const t=new I.lu(e.message,(l=((e,t)=>{for(var a in t||(t={}))dn.call(t,a)&&un(e,a,t[a]);if(ln)for(var a of ln(t))cn.call(t,a)&&un(e,a,t[a]);return e})({},e.params),sn(l,on({wasShown:!0}))));throw t.stack=e.stack,t}throw e}return mn(`Service ${e.serviceName} processed ${t}:${s}`),{status:J.mb.Ok}}catch(n){return mn(`Service ${e.serviceName} ${t}:${s} error:`,n),a.callbacks.muteCallbacks(),n instanceof Error||(n=new Error("Unhandled undefined error (safe)")),null==(i=e.cancelShow)||i.call(e,t),(0,I.g5)(e,{additional:{adv:{advBlockId:e.getAdvBlockId(t,s)}},error:n,name:we._u,tag:t}),n instanceof I.lu&&n.params.isEmpty||r.error(n.message||n.toString()),n instanceof I.lu&&n.params.isEmpty?{status:J.mb.Empty,error:n}:n instanceof I.lu&&n.params.wasShown?{status:J.mb.FailedShow,error:n}:{status:J.mb.Failed,error:n}}}))}mergeShowAdv(e,t,a,r){let n=this.showAdvLock[e];if(n){const[s,o]=n;if(s===Ue.p_.START_FULLSCREEN)return o.addCallbacks(t,!0),r&&(0,I.Sn)(o,e),mn(`showAdv ${e}:${a} was merged with ${e}:${s}`),!0}return!1}showAdv(e,t){return hn(this,arguments,(function*(e,t,a=this.waterfallQueue[e]){mn.spoiler(t)(`showAdv ${e}:${t.reason}`);const r=this.logAdvDelay(e);let n,{reason:s}=t,{callbacks:o={},sendToSDK:i=!0}=t;if(this.mergeShowAdv(e,o,s,i))return;this.initServices(e,a,s);let d=new je.U({tag:e,app_id:this.appId});const c=new Kr(e,d);c.addCallbacks(o),(0,I.fl)(c,e,this.context.platform).catch((()=>{})),(0,I.KW)(c,this.flags),i&&(0,I.Sn)(c,e);const u=()=>this.adOpenedType=null;c.addCallbacks({onClose:u,onError:u});let h=0,p=0,m=J.mb.Failed,v=e,g=[];c.addCallbacks({onClose:()=>{var t;mn("callOnShowAdvFinished"),l.Z.post({type:"play-adv-manager",action:"close-adv",data:{tag:e}});try{for(const r of g){const n=null==(t=this.serviceInstances)?void 0:t[r.provider];n&&n.onShowAdvFinished&&n.onShowAdvFinished({tag:r.tag||e,latestTag:v,initialTag:e,status:m,waterfallItems:a})}}catch(e){pn("Failed to call AdvService.onShowAdvFinished, error:",e.message)}},onOpen:()=>null==r?void 0:r(p,v)});try{const t=()=>{var t,r;const n=a[h];if(!n)throw new I.lu(`No available waterfall item for tag ${e}:${s}`,{isFinal:!0});const o=null==(t=this.serviceInstances)?void 0:t[null==n?void 0:n.provider];if(!o)throw new I.lu(`No available service for tag ${e}:${s}, waterfall provider: ${null!=(r=null==n?void 0:n.provider)?r:ae.e.None}`,{isFinal:!0});return[o,n]};do{c.unmuteCallbacks();const[a,r]=t();if(n)mn(`Service ${n.serviceName} failed to show adv, go to waterfall. Next service: ${null==a?void 0:a.serviceName}`);else{d.tryOpen({reason:s,provider:a.serviceName});const t=this.advDisabledCheck(e,c,d);if(t)return void this.sendCallbackToSdk(e,t);this._showAdvLock[e]=[s,c],this._lastShowTime[e]=Date.now()}this.adOpenedType=e,this.sendCallbackToSdk(e),n=a,v=r.tag?r.tag:e,v!==c.currentTag&&(c.currentTag=v),p>0&&(s=Ue.p_.WATERFALL);const o=n.checkCanShow(e,s);if(o!==J.Kc.Ok){mn(`Skip service ${n.serviceName} due canShowCheck: ${o}`),h++;continue}g.push(r),l.Z.post({type:"play-adv-manager",action:"show-adv",data:{tag:e,serviceName:n.serviceName}}),this.gamePauseResume(e,c);const{status:i,error:u}=yield this.showServiceAdv(n,v,{callbacks:c,clickDaemon:d,depth:p++,tag:v,initialTag:e,reason:s});if(m=i,m===J.mb.Ok)return void n.resetShowTimer(e);if(m===J.mb.FailedRemove)this.waterfallQueue[e].splice(h,1);else{if(m===J.mb.FailedShow)throw u||new I.lu(`Error after ${v} showAdv (service: ${n.serviceName})`,{isFinal:!0,wasShown:!0});h++}}while(n);throw new I.lu("No adv providers left.",{isFinal:!0})}catch(t){this.sendCallbackToSdk(e),this._lastShowTime[e]=0,c.unmuteCallbacks(),c.onError(t),t instanceof I.lu&&(t.params.isFinal||t.params.wasShown)&&(m===J.mb.Empty?d.noContent():d.fail(t.message)),c.onClose(!1),this.callOnAdvClose(!1),(0,ie.H)({prefix:"Please, send this error sdk developers: ",block:de.W.ADV},t)}finally{this._showAdvLock[e]=!1}}))}gamePauseResume(e,t){let a;if(e===v.$H.INTERSTITIAL)a="adv_interstitial";else{if(e!==v.$H.REWARDED)return;a="adv_rewarded"}pn("gamePause:",a),this.gameControl.gamePause(a),t.addCallbacks({onClose:()=>{pn("gameResume:",a),this.gameControl.gameResume(a)}})}logAdvDelay(e){var t;return!this.logAdvDelayFlag||e!==v.$H.INTERSTITIAL&&e!==v.$H.REWARDED?null:(null==(t=null==Ya?void 0:Ya.Rum)||t.time(we.Cn),(t,a)=>{var r;return null==(r=null==Ya?void 0:Ya.Rum)?void 0:r.timeEnd(we.Cn,{"-additional":encodeURIComponent(JSON.stringify({tag:a,app_id:this.appId,depth:t,initialTag:e}))})})}advDisabledCheck(e,t,a){if(this.adOpenedType)return a.skip(v.Jm.ANOTHER_AD_OPENED),new Error("Another ad already opened");if(e===v.$H.INTERSTITIAL){if(this.isAdvDisabled){if(this.isInterstitialAdsDisabled)a.noAdv();else{let e;e=this.isInterstitialAdsTurnOff?v.Jm.INTERSTITIAL_ADS_TURN_OFF:this.isAdvDisabledByPartner?v.Jm.ALL_ADS_DISABLED_BY_PARTNERS_KIT:v.Jm.UNKNOWN,a.skip(e)}return this.callOnAdvClose(!1),new Error("Skip interstitial.")}if(!this.firstShowGuard.canShowAdv()){const e=new Error("Cannot open the advertisement. Try again later.");return a.rateLimited("rate"),this.callOnAdvClose(!1),e}const e=this.canOpenAdv();if(e)return a.rateLimited("rate"),this.callOnAdvClose(!1),e}if(e===v.$H.REWARDED){const e=new Error("Skip rewarded.");if(this.isRewardedAdsTurnOff)return pn("Skip rewarded"),this.skipRewarded({advLogger:a,callbacks:t,reason:v.Jm.REWARDED_ADS_TURN_OFF}),e;if(this.isRewardedAdsDisabled)return pn("Skip rewarded"),this.skipRewarded({advLogger:a,callbacks:t,reason:v.Jm.UTM}),e;if(this.isAdvDisabledByPartner)return pn("Skip rewarded"),this.skipRewarded({advLogger:a,callbacks:t,reason:v.Jm.ALL_ADS_DISABLED_BY_PARTNERS_KIT}),e}return null}skipRewarded({advLogger:e,callbacks:t,reason:a}){["onOpen","onRewarded","onClose"].filter(Boolean).forEach(((e,a)=>{window.setTimeout((()=>{var a;return null==(a=t[e])?void 0:a.call(t)}),100*a)})),e.skip(a)}canOpenAdv(){var e,t;const a=Date.now();if(!this.advBlocks.fullscreen&&!(null==(e=this.advBlocks.desktop)?void 0:e.fullscreen)&&!(null==(t=this.advBlocks.mobile)?void 0:t.fullscreen)){const e=`${we._u}: can not find block id`,t=`https://games.yandex.ru/console/application/${this.appId}`;return(0,ie.H)({block:de.W.ADV},new Error(`\nWhat you can do:\n1. Enable monetization: https://yandex.ru/dev/games/doc/dg/console/enable-monetization-docpage/\n2. Fill all fields in your draft ${t}#application-info-draft\n3. Ensure in Ads section ${t}#application-info-draft (bottom)\nthere is block id (like R-A-123456).\nIf state != work (created, for example), just wait 24 hours: block creation might take time\n`)),new Error(e)}if(this.lastShowTime[v.$H.INTERSTITIAL]&&a-this.lastShowTime[v.$H.INTERSTITIAL]<this.minIntervalBetweenAds){const e="Please, don't try to open advertising often than once per "+((r=this.minIntervalBetweenAds)<ne.WT?`${r} ms`:r%ne.WT!=0?`${Math.floor(r/ne.WT)} ${r%ne.WT} ms`:r/ne.WT+" s");return l.Z.post({action:"debug-action-guard",type:"adv-manager",data:{type:v.$H.INTERSTITIAL,minInterval:this.minIntervalBetweenAds,reason:"Called too often"}}),new Error(e)}var r;if(Math.abs(a-this.startTime)<this.advDelay){const e=`Adv was delayed on ${this.advDelay}ms`;return new Error(e)}return navigator.onLine||!1!==(0,L.RM)(this.context.abt.flags,pt.Z.advShowOnOffline)?null:new Error("Adv can't be shown offline")}}const gn="advBlock_"+ae.e.GoogleInstream,yn=({tag:e})=>{const t=(0,s.useRef)(null),[a,r]=(0,s.useState)(!1),n=(0,s.useCallback)(((a,n)=>{var s,o,i,l;const{action:d,data:{tag:c}}=a.data;if(c===e)switch(d){case"show":r(!0);break;case"hide":r(!1);break;case"get-size":n({data:{width:null!=(o=null==(s=t.current)?void 0:s.clientWidth)?o:null,height:null!=(l=null==(i=t.current)?void 0:i.clientHeight)?l:null}})}}),[e]);(0,s.useEffect)((()=>(l.Z.onInternalMessage("adv-instream-render",n),()=>{l.Z.offInternalMessage("adv-instream-render",n)})),[n]);const i=["GoogleInstreamBlock-module__block--UThhL",a?void 0:"GoogleInstreamBlock-module__hidden--w4W3T"];return o().createElement("div",{className:(0,C.E)(...i),id:gn+"_"+e,ref:t})},fn=a(33196).Z;var wn=a(72538),bn=a(4915),En=a(31085),kn=Object.defineProperty,Sn=Object.defineProperties,An=Object.getOwnPropertyDescriptors,In=Object.getOwnPropertySymbols,Pn=Object.prototype.hasOwnProperty,Tn=Object.prototype.propertyIsEnumerable,Cn=(e,t,a)=>t in e?kn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Rn=(e,t)=>{for(var a in t||(t={}))Pn.call(t,a)&&Cn(e,a,t[a]);if(In)for(var a of In(t))Tn.call(t,a)&&Cn(e,a,t[a]);return e},Dn=(e,t)=>Sn(e,An(t));const Ln=n().with("prowo-container"),On=()=>{const e=(0,s.useRef)(null),{isLegalEmbedPartner:t}=(0,P.b)(),a=(0,s.useRef)(new bn.Z),[r,n]=(0,s.useState)(0),[i,d]=(0,s.useState)({advTag:v.$H.INTERSTITIAL,callbacks:{},reason:Ue.p_.ONSPOT,visible:!1}),c=(0,s.useCallback)(((e,a,r)=>{var n;t?null==(n=r.onClose)||n.call(r):d((()=>({advTag:e,callbacks:r,reason:a,visible:!0})))}),[t]),u=(0,s.useCallback)((()=>{var e,t;(0,ka.NF)({},oa.Ji.GAME_PROMO_OPEN),a.current.updateShowData(En.Wp.GamePromo),null==(t=(e=i.callbacks).onOpen)||t.call(e)}),[i]),h=(0,s.useCallback)((()=>{var e,t,a,r;null==(t=(e=i.callbacks).onRewarded)||t.call(e),null==(r=(a=i.callbacks).onClose)||r.call(a),d(Dn(Rn({},i),{visible:!1}))}),[i]),p=(0,s.useCallback)((e=>{var t,a,r,n;null==(a=(t=i.callbacks).onClose)||a.call(t),null==(n=(r=i.callbacks).onError)||n.call(r,e),d(Dn(Rn({},i),{visible:!1}))}),[i]),m=(0,s.useCallback)(((e,t)=>{const{action:a,data:r}=e.data;if("show"!==a);else{const{advTag:e,reason:t,onOpen:a,onRewarded:n,onClose:s,onError:o}=r;c(e,t,{onError:o,onOpen:a,onRewarded:n,onClose:s})}}),[c]),g=(0,s.useCallback)(((e,t)=>{t.height!==r&&n(t.height)}),[r]);(0,s.useEffect)((()=>(l.Z.onInternalMessage("adv-promo-block",m),wn.Z.addResizeBlockListener("game",g,!0),()=>{l.Z.offInternalMessage("adv-promo-block",m),wn.Z.removeResizeBlockListener("game",g)})),[g,m]);const{advTag:y,reason:f,visible:w}=i;return w?o().createElement("div",{className:Ln({advType:y,"with-blur":!0}),ref:e,style:{height:r?`calc(100% + ${r}px)`:void 0}},o().createElement(fn,{advTag:y,auto:void 0,containerRef:e,errorProps:{onError:p},hide:h,reason:f,onShow:u})):null};var _n=a(61533),xn=Object.defineProperty,Nn=Object.defineProperties,Bn=Object.getOwnPropertyDescriptors,Mn=Object.getOwnPropertySymbols,Hn=Object.prototype.hasOwnProperty,Fn=Object.prototype.propertyIsEnumerable,$n=(e,t,a)=>t in e?xn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Wn=(e,t)=>{for(var a in t||(t={}))Hn.call(t,a)&&$n(e,a,t[a]);if(Mn)for(var a of Mn(t))Fn.call(t,a)&&$n(e,a,t[a]);return e},Zn=(e,t)=>Nn(e,Bn(t));const Gn=n().with("instream-renderer"),jn=({advManager:e})=>{const[t,a]=(0,s.useState)({isVisible:!1,blockId:"",isHeaderEnabled:!(0,I.Ij)(),width:0,height:0}),r=(0,s.useCallback)(((e,t)=>{const{action:r}=e.data;switch(r){case"show":a((e=>Zn(Wn({},e),{isVisible:!0})));break;case"hide":a((e=>Zn(Wn({},e),{isVisible:!1})));break;case"set-size":{const{width:t,height:r}=e.data.data;a((e=>Zn(Wn({},e),{width:t,height:r})));break}case"update-block-id":{const{blockId:r}=e.data.data;(0,_n.flushSync)((()=>a((e=>Zn(Wn({},e),{blockId:r}))))),t({data:{blockId:r}});break}}}),[]);(0,s.useEffect)((()=>(l.Z.onInternalMessage("instream-fullscreen-render",r,{withHistory:!0}),()=>{l.Z.offInternalMessage("instream-fullscreen-render",r)})),[r]);const{viewType:n}=e,i=[we.kn.modal,we.kn.modalFullscreen,we.kn.modalWithBlur,(0,I.TE)(n),t.isVisible?we.kn.modalVisible:void 0,t.isHeaderEnabled?we.kn.modalWithHeader:void 0,t.isHeaderEnabled?we.kn.headerFix:void 0];return o().createElement("div",{className:(0,C.E)(...i)},o().createElement("div",{className:Gn("content"),style:{width:t.width,height:t.height}},o().createElement("div",{id:t.blockId})))};var Un=a(45112),qn=a(62011),Vn=a(28705);const zn=(0,K.M$)("AdvStickyParentWindow",void 0,{background:"#0c6c09"}),Kn=(0,qn.Z)((({appId:e,features:t,flags:a,settings:r})=>{const n=(0,s.useMemo)((()=>new Wt),[]),[o,i]=(0,s.useState)(!0),[d,c]=(0,s.useState)(!1),{adv:u}=(0,Vn.Lf)(r),h=(0,s.useMemo)((()=>!(0,L.Ww)(a,v.By.STICKY)&&(0,Vn.uk)({adv:u,appId:e,isDesktop:!0,flags:a,orientation:null==t?void 0:t.orientation})),[u,e,t,a]);return(0,s.useEffect)((()=>{const e=(e,t)=>{return a=function*(){const{action:a}=e.data;switch(a){case"adv-show-sticky-banner":{if(zn(`onExternalMessage: action: "${a}"`),!h)return void t({data:{reason:v.$R.ADV_IS_NOT_CONNECTED,stickyAdvIsShowing:!1}});const e=Zt({action:"setBannerAdvStatus",type:"adv",payload:{stickyAdvIsShowing:!0}});n.addListener({fn:e=>{var a;const{payload:r}=e,n=null==(a=r.stickyAdvIsShowing)||a;return c(!n),t({data:{reason:r.reason,stickyAdvIsShowing:n}}),!0},messageId:e});break}case"adv-hide-sticky-banner":{zn(`onExternalMessage: action: "${a}"`);const e=Zt({action:"setBannerAdvStatus",type:"adv",payload:{stickyAdvIsShowing:!1}});n.addListener({fn:e=>{var a;const{payload:r}=e,n=null!=(a=r.stickyAdvIsShowing)&&a;return c(!n),t({data:{reason:r.reason,stickyAdvIsShowing:n}}),!0},messageId:e});break}case"adv-status-sticky-banner":if(zn(`onExternalMessage: action: "${a}"`),!h)return void t({data:{reason:v.$R.ADV_IS_NOT_CONNECTED,stickyAdvIsShowing:!1}});zn(`Get stickyAdvIsShowing: ${!d}`),t({data:{stickyAdvIsShowing:!d}})}},new Promise(((e,t)=>{var r=e=>{try{s(a.next(e))}catch(e){t(e)}},n=e=>{try{s(a.throw(e))}catch(e){t(e)}},s=t=>t.done?e(t.value):Promise.resolve(t.value).then(r,n);s((a=a.apply(undefined,null)).next())}));var a};return zn("ParentWindowStickyAdvService init"),l.Z.onAllMessages("adv-manager",e),()=>{l.Z.offAllMessages("adv-manager",e)}}),[h,d,n]),(0,Un.qR)((()=>{const r=(0,Vn.jx)({adv:u,appId:e,flags:a,orientation:null==t?void 0:t.orientation}),s={desktop:{landscape:r.desktop,portrait:r.desktop},mobile:{landscape:r.mobileLandscape,portrait:r.mobilePortrait}};Zt({action:"setBannerAdvSettings",type:"adv",payload:{enabled:h,locations:s}});const o=Zt({action:"ping",type:"liveness"}),l=n.addListener({fn:e=>{const{action:t,type:a}=e;switch(a){case"liveness":"pong"===t&&(window.clearTimeout(d),i(!0));break;case"error":i(!1),zn("error",e)}return!0},messageId:o}),d=window.setTimeout((()=>{l(),i(!1)}),2e3)})),null}),i.Z,{appId:e=>e.playPageData.gameInfo.appId,features:e=>e.playPageData.gameSettings.features,flags:e=>e.abt.flags,settings:e=>e.playPageData.gameSettings.settings});var Yn=a(53726),Xn=a(90239),Jn=a(86880);class Qn extends s.Component{constructor(e){super(e),this.additionalClasses="",this.closeButtonDeferredTime=0,this.onYandexFullscreenRenderMessage=(e,t)=>{const{action:a}=e.data;switch(a){case"update-block-id":this.setState({advBlockId:e.data.data.blockId,pageNumber:e.data.data.pageNumber},(()=>{t({data:{blockId:this.getBlockId()}})}));break;case"show-fullscreen":this.setState({isVisible:!0,seconds:0,withTimer:!1});break;case"hide-fullscreen":this.setState({isVisible:!1})}},this.onYandexFullscreenRenderMessageGames27265=(e,t)=>{const{action:a}=e.data;switch(a){case"update-block-id":this.setState({advBlockId:e.data.data.blockId,pageNumber:e.data.data.pageNumber},(()=>{t({data:{blockId:this.getBlockId()}})}));break;case"show-fullscreen":this.setState({isVisible:!0,seconds:0,withTimer:!1}),this.hideCloseButton(),this.setIsCloseButtonHiddenTimeout();break;case"hide-fullscreen":this.clearIsCloseButtonHiddenTimeout(),this.showCloseButton(),this.setState({isVisible:!1})}},this.handleClose=()=>{(0,R.D)((()=>{l.Z.post({type:"yandex-adv-service",action:"close-adv"})}))},this.handleBottomButtonClose=()=>{this.state.isCloseButtonHidden||(0,R.D)((()=>{l.Z.post({type:"yandex-adv-service",action:"bottom-button-close-adv"})}))},this.handleTouchMove=e=>{e.stopPropagation(),e.preventDefault()},this.handleButtonDisableAdvClick=()=>{(0,D.Z)()},this.setModalRef=()=>{l.Z.post({type:"yandex-adv-service",action:"adv-container-mounted"})},this.isYandexSearchApp=(0,pr.qo)(),this.state={advBlockId:"",pageNumber:1,isCloseButtonHidden:!1,isVisible:!1,inited:!1,seconds:0,withTimer:!1,isHeaderEnabled:!(0,I.Ij)()}}componentDidMount(){this.init(),this.initMessaging()}init(){var e;const{flags:t}=this.context.abt,{viewType:a}=this.props.advManager;this.closeButtonDeferredTime=Math.max(0,Math.min(5e3,null!=(e=(0,L.$9)(t,pt.Z.advCloseButtonDeferredTime))?e:0)),this.cssClasses=La();const r=[];a===we.xd.fullscreen&&t.new_adv_block&&r.push(`new_adv_block-${t.new_adv_block}`),this.additionalClasses=r.join(" "),this.setState({inited:!0,isCloseButtonHidden:Boolean(this.closeButtonDeferredTime)})}initMessaging(){this.closeButtonDeferredTime?l.Z.onInternalMessage("yandex-fullscreen-render",this.onYandexFullscreenRenderMessageGames27265):l.Z.onInternalMessage("yandex-fullscreen-render",this.onYandexFullscreenRenderMessage)}setIsCloseButtonHiddenTimeout(){this.clearIsCloseButtonHiddenTimeout(),this.isCloseButtonHiddenTimeout=window.setTimeout((()=>{this.showCloseButton()}),this.closeButtonDeferredTime)}clearIsCloseButtonHiddenTimeout(){this.isCloseButtonHiddenTimeout&&(window.clearTimeout(this.isCloseButtonHiddenTimeout),this.isCloseButtonHiddenTimeout=void 0)}hideCloseButton(){this.setState({isCloseButtonHidden:!0}),document.documentElement.dataset.pcodeCloseButtonHidden="true"}showCloseButton(){this.setState({isCloseButtonHidden:!1}),document.documentElement.dataset.pcodeCloseButtonHidden="false"}getBlockId(){const{advBlockId:e,pageNumber:t}=this.state;return`yandex_rtb_${e}_${t}`}renderModalContent(){const{cssClasses:e}=this,{advBlockId:t,isCloseButtonHidden:a,isVisible:r,withTimer:n}=this.state;if(!t||!e)return null;const{deviceType:s,isDisableAdButtonEnabled:i}=this.props.advManager,l=Boolean(this.isYandexSearchApp),{abt:{flags:d}}=this.context,{getText:c}=this.props,u=(0,L.qf)(d)||(0,I.un)(),h=o().createElement("span",{"aria-hidden":"true",className:`${Oa(e,"modalBottom",l)}`},o().createElement("span",{className:`${e.modalButton} ${e.modalButtonDisableAdv}`,onClick:this.handleButtonDisableAdvClick},c("header.popup.disable.ads")),o().createElement("span",{className:`${e.modalButton} ${e.modalButtonClose}`,onClick:this.handleBottomButtonClose},c("adv.close")));return s===Sa.n.desktop?u?o().createElement("div",{className:`${we.kn.modalInner}`},o().createElement("div",{className:`${e.modalWrap} with-native-close`},o().createElement("div",{className:`${e.modalContent} ${e.yandexAdaptive} with-native-close`,id:this.getBlockId()}))):o().createElement("div",{className:`${we.kn.modalInner}`},o().createElement("div",{className:`${e.modalWrap}`},r&&n&&o().createElement("div",{className:we.kn.countdown},o().createElement(Jn.Z,{seconds:this.state.seconds,text:c("adv.timed.allow.skip.text"),onClose:this.handleClose})),o().createElement("div",{className:`${e.modalContent} ${e.yandexAdaptive}`,id:this.getBlockId()}),!n&&!a&&o().createElement(Xn.Z,{"data-testid":"YandexFullscreenRender-Button",source:ht.h0.REWARDED_COUNTER,type:"adv-fullscreen",onClick:this.handleClose}),i?h:"")):u?o().createElement("div",{className:`${we.kn.modalInner}`},o().createElement("div",{className:`${Oa(e,"modalContent",l)} ${e.yandexAdaptive} with-native-close`,id:this.getBlockId()})):o().createElement("div",{className:`${we.kn.modalInner}`},o().createElement("div",{className:`${Oa(e,"modalContent",l)} ${e.yandexAdaptive}`,id:this.getBlockId()}),!(0,ct.x)()&&!a&&o().createElement("span",{"aria-hidden":"true",className:`${Oa(e,"modalClose",l)}`},o().createElement(k.z,{className:e.mobileCloseButton,"data-testid":"YandexFullscreenRender-Button",size:40,view:"primary",width:"max",onClick:this.handleClose},c("adv.close"))),i?h:null)}render(){const{additionalClasses:e,cssClasses:t}=this,{isVisible:a,inited:r,isHeaderEnabled:n}=this.state,{viewType:s}=this.props.advManager;if(!r)return null;const i=a?`${t.modalVisible} ${we.kn.modalVisible}`:"",l=[we.kn.modal,(0,I.el)("yandex"),we.kn.modalFullscreen,(0,I.TE)(s),t.modalMedia,i,e,we.kn.modalWithBlur,n?we.kn.modalWithHeader:void 0,n?we.kn.headerFix:void 0].join(" ").trim();return o().createElement("div",{className:l,ref:this.setModalRef,onTouchMove:this.handleTouchMove},this.renderModalContent())}}Qn.contextType=i.Z;const es=(0,Yn.$j)((function(e){return{getText:e.getText}}))(Qn);var ts=a(6893);class as extends i.P{constructor(e){super(e),this.isYaBroChromeLower79=window.appData.isYaBroOrSearchApp&&!(0,ts.LR)(window.navigator.userAgent,ts.t_,{major:79,minor:0}),this.onYandexRewardedRenderMessage=(e,t)=>{var a;const{action:r}=e.data;switch(r){case"update-block-id":this.setState({advBlockId:e.data.data.blockId},(()=>{t({data:{blockId:this.getBlockId()}})}));break;case"show-rewarded":this.setState({isVisible:!0,seconds:(null==(a=e.data.data)?void 0:a.seconds)||0}),this.onAdvCloseMessagingCallback=t;break;case"on-rewarded":this.onRewardedMessagingCallback=t;break;case"hide-rewarded":this.setState({isVisible:!1})}},this.handleAdvClose=()=>{var e;null==(e=this.onAdvCloseMessagingCallback)||e.call(this)},this.handleRewardedDone=()=>{var e;null==(e=this.onRewardedMessagingCallback)||e.call(this)},this.handleTouchMove=e=>{e.stopPropagation(),e.preventDefault()},this.setModalRef=()=>{l.Z.post({type:"yandex-adv-service",action:"adv-container-mounted"})},this.isYandexSearchApp=(0,pr.qo)(),this.state={advBlockId:"",inited:!1,isVisible:!1,seconds:0,isHeaderEnabled:!(0,I.Ij)()}}componentDidMount(){this.init(),this.initMessaging()}init(){this.isPCodeModal=(0,L.lv)(this.context.abt.flags),this.cssClasses=La(),this.setState({inited:!0})}initMessaging(){l.Z.onInternalMessage("yandex-rewarded-render",this.onYandexRewardedRenderMessage)}getBlockId(){const{advBlockId:e}=this.state;return`yandex_rtb_rewarded_${e}`}renderModalContent(){const{cssClasses:e}=this,{isVisible:t,seconds:a}=this.state,{advManager:{deviceType:r}}=this.props;return r===Sa.n.desktop?o().createElement("div",{className:`${e.modalWrap}`},t&&o().createElement("div",{className:we.kn.countdown},o().createElement(Jn.Z,{seconds:a,onClose:this.handleAdvClose,onDone:this.handleRewardedDone})),o().createElement("div",{className:`${e.modalContent}`,id:this.getBlockId()})):o().createElement(o().Fragment,null,o().createElement("div",{className:Oa(e,"modalContent",Boolean(this.isYandexSearchApp)),id:this.getBlockId()}),t&&!(0,ct.x)()&&o().createElement(Jn.Z,{seconds:a,onClose:this.handleAdvClose,onDone:this.handleRewardedDone}))}renderModal(){const{advManager:e}=this.props,{cssClasses:t}=this,{isVisible:a,isHeaderEnabled:r}=this.state,n=a?`${t.modalVisible} ${we.kn.modalVisible}`:"",s=[we.kn.modal,t.rewardedVideo,t.yandexAdaptive,(0,I.TE)(e.viewType),t.modalMedia,n,we.kn.modalWithBlur,r?we.kn.modalWithHeader:void 0,r?we.kn.headerFix:void 0,this.isYaBroChromeLower79?we.kn.yabroChromeLower79:void 0].join(" ").trim();return o().createElement("div",{className:s,ref:this.setModalRef,onTouchMove:this.handleTouchMove},this.renderModalContent())}renderPCodeModal(){const{cssClasses:e}=this,{isVisible:t}=this.state,a=t?`${we.kn.modalVisible}`:"",r=[we.kn.modal,e.rewardedVideo,a,we.kn.modalWithBlur].join(" ").trim();return o().createElement("div",{className:r})}render(){const{inited:e}=this.state;return e?this.isPCodeModal?this.renderPCodeModal():this.renderModal():null}}var rs=a(53603),ns=a(5825),ss=a(46211),os=a(75217),is=a(37341),ls=Object.defineProperty,ds=Object.getOwnPropertySymbols,cs=Object.prototype.hasOwnProperty,us=Object.prototype.propertyIsEnumerable,hs=(e,t,a)=>t in e?ls(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;const ps=n().with("aab-adv"),ms=(0,K.M$)("PlayAdvManager",K.XG.Adv),vs=()=>{const e=(0,P.b)(),{isReady:t}=(0,rs.s)(),a=(0,ns.C)(ss.Ak),[r]=(0,s.useState)(a),{abt:{flags:n},location:i,withWorldWideAdv:d}=e,[c,u]=(0,s.useState)(null),h=(0,s.useRef)(null),g=(0,is.ff)();(0,s.useEffect)((()=>{const t=e=>{"update-adv-services-list"===e.data.action&&u(((e,t)=>{for(var a in t||(t={}))cs.call(t,a)&&hs(e,a,t[a]);if(ds)for(var a of ds(t))us.call(t,a)&&hs(e,a,t[a]);return e})({},e.data.data))};return l.Z.onInternalMessage("play-adv-manager",t),ms("Create AdvManager instance"),h.current=new vn(e,g),h.current.updateSubscriptionState(r),()=>{l.Z.offInternalMessage("play-adv-manager",t),ms("Destroy AdvManager instance")}}),[e,g,r]),(0,s.useEffect)((()=>{var e;null==(e=h.current)||e.updateSubscriptionState(a)}),[a]);const y=(0,s.useMemo)((()=>(0,os.O)(i)),[i]),f=h.current,w=(0,s.useMemo)((()=>{var e;if(!f||!c)return null;const t=(0,hr.gK)({flags:n,ingameAdvData:null==(e=window.appData.advDataStore)?void 0:e.ingameAdv,withWorldWideAdv:d}),a=c[v.$H.INTERSTITIAL],r=c[v.$H.REWARDED],s=a[ae.e.PrebidTGO]||a[ae.e.Adsense]||a[ae.e.PubliftZone]||a[ae.e.AdsenseResponsive]||a[ae.e.AnymindBlock],i=Boolean(r[ae.e.GoogleInstream]&&t.rewarded.find((e=>e.provider===ae.e.GoogleInstream&&e.tag===v.$H.INTERSTITIAL)));return o().createElement(o().Fragment,null,a[ae.e.Yandex]&&o().createElement(es,{advManager:f}),c[v.$H.REWARDED][ae.e.Yandex]&&o().createElement(as,{advManager:f}),s&&o().createElement(z,{advManager:f}),(a[ae.e.GoogleInstream]||i)&&((0,m.vV)(n)||(0,be.Hc)(n)?o().createElement(yn,{advManager:f,tag:v.$H.INTERSTITIAL}):o().createElement(jn,{advManager:f})),c[v.$H.REWARDED][ae.e.GoogleInstream]&&o().createElement(yn,{advManager:f,tag:v.$H.REWARDED}),o().createElement(On,null),y&&o().createElement(Kn,null))}),[f,n,y,c,d]);return(0,L.V)(n)&&!t?null:f?o().createElement("div",{className:ps()},o().createElement(p,{appId:f.appId,isDevFeaturesEnabled:!1}),w):null}},29011:(e,t,a)=>{a.d(t,{q:()=>p,Q:()=>y});var r=a(48810);const n="count_of_user_visits";function s(){return!(0,r.dq)(n).wasError}var o=a(35090),i=a(77901),l=a(82027),d=a(31261),c=a(4915),u=a(31085),h=a(39449);const p=15e3,m=1,v=1,g=5;function y(){return!((0,o.Oo)()||(e=null==(t=window.YandexGamesSDK)?void 0:t.game.info.hasWebAppsCategory,e||(0,i.VP)()||(0,l.PK)()||!s()||function(){let e,t=(0,r.dq)(n);return s()?(t.value&&(e=Number(t.value)),(!e||e<0)&&(e=0),e):0}()>=g||!(0,d.uP)()))&&(new c.Z).checkShowCapability(u.Wp.GamePromo,{waitingPeriod:m*h.E$,maxShowCount:v,considerInstallation:!0});var e,t}},40174:(e,t,a)=>{a.d(t,{uy:()=>k,xn:()=>E,Q$:()=>A});var r=a(98816),n=a(90403),s=a(10739),o=a(33252),i=a(59303),l=a(40656),d=a(13377);class c extends Error{constructor(e,t){super(e),this.name=this.constructor.name,this.code=t,Object.setPrototypeOf(this,c.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,c)}}const u=c;var h=a(15771),p=a(90380),m=Object.defineProperty,v=Object.defineProperties,g=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable,b=(e,t,a)=>t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,E=(e=>(e.PRELOAD="preload",e.RENDER="render",e))(E||{}),k=(e=>(e.NO_CONTENT="NO_CONTENT",e.NO_SUCH_METHOD="NO_SUCH_METHOD",e.TIMEOUT="TIMEOUT",e.UNKNOWN="UNKNOWN",e))(k||{});const S=20*l.WT,A=({advTag:e,abtFlags:t,adOptions:a,methodName:l,onAdLoadFailed:c,timeoutMs:m})=>{var E,k;const A=(0,n.Z)(c),I=(e=>{var t,a,r;const n=null==(a=null==(t=null==window?void 0:window.Ya)?void 0:t.Context)?void 0:a.AdvManager;if(n&&"object"==typeof n)return e in n||(0,s.qu)(`[adv.safeGuard] AdvManager method ${e} is undefined`),null==(r=n[e])?void 0:r.bind(n);(0,s.qu)("[adv.safeGuard] AdvManager is undefined")})(l);if(!I)return void A(new u("No such method","NO_SUCH_METHOD"));void 0===m&&(m=null!=(E=(0,h.$9)(t,p.Z.rsyaDefaultLoadTimeout))?E:S);const P=setTimeout((()=>{const e=`No events were raised after Ya.Context.AdvManager.${l} in ${m} ms.`;(0,s.qu)(`[adv.safeGuard] Error: ${e}`,{blockId:a.blockId}),A(new u(e,"TIMEOUT"))}),m),T=[a.onRender,a.onRewarded,a.onClose];let C=0,R=!1;const D=t=>(...n)=>(clearTimeout(P),(0,s.qu)("[adv.safeGuard] Timer cleared",{blockId:a.blockId}),(t=>{var a;e===r.$H.REWARDED&&!R&&t&&T.includes(t)&&(T[C]!==t&&((0,o.H)({block:d.W.ADV},new Error(`Adv Rewarded: invalid callback call, expected "${null==(a=T[C])?void 0:a.name}" but called "${t.name}"`)),R=!0),C+=1)})(t),null==t?void 0:t(...n)),L=(O=((e,t)=>{for(var a in t||(t={}))f.call(t,a)&&b(e,a,t[a]);if(y)for(var a of y(t))w.call(t,a)&&b(e,a,t[a]);return e})({},a),_={onRewarded:D(a.onRewarded),onError:D(a.onError),onRender:D(a.onRender),onPreload:D(a.onPreload),onClose:D(a.onClose)},v(O,g(_)));var O,_;void 0!==a.darkTheme?L.darkTheme=a.darkTheme:(0,h.ZK)(t)&&(L.darkTheme=((null==(k=null==window?void 0:window.appData)?void 0:k.themeColor)||i.aN.LIGHT)===i.aN.DARK),(0,s.qu)(`[adv.safeGuard] call "${l}" with options = `,function(e){return{blockId:e.blockId,darkTheme:e.darkTheme,extParams:e.extParams}}(L)),I(L,D((()=>A(new u("No content","NO_CONTENT")))))}},54814:(e,t,a)=>{a.d(t,{Kc:()=>o,QA:()=>l,hk:()=>n,mb:()=>i,pP:()=>s});var r=a(5e4);function n(e){return(null==e?void 0:e.provider)===r.e.AdsenseResponsive&&"slotId"in e}var s=(e=>(e.Onspot="onspot",e.Skip="skip",e.Start="start",e.Waterfall="waterfall",e))(s||{}),o=(e=>(e.Next="next",e.NextRemove="next_remove",e.Ok="ok",e))(o||{}),i=(e=>(e.Empty="empty",e.Failed="failed",e.FailedRemove="failed_remove",e.FailedShow="failed_show",e.Ok="ok",e))(i||{}),l=(e=>(e.ServiceInit="serviceInit",e.ShowFullscreen="showFullscreen",e.ShowRewarded="showRewarded",e))(l||{})},95025:(e,t,a)=>{a.d(t,{C5:()=>M,Cj:()=>I,Jt:()=>T,gK:()=>k,sf:()=>P});var r=a(24674),n=a(38096),s=a(14408),o=a(29011),i=a(50042),l=a(98816),d=a(5e4),c=a(75217),u=a(58432),h=a(23617),p=a(17061),m=a(77901),v=a(31261),g=a(15771),y=a(90380),f=a(49659),w=a(15513),b=a(23404);const E=["2753282","2753277",...(0,r.bb)(r.QQ.Azerion)];function k({flags:e,ingameAdvData:t,withWorldWideAdv:a}){if((0,c.O)())return{[l.$H.INTERSTITIAL]:[{provider:d.e.ParentWindow}],[l.$H.REWARDED]:[{provider:d.e.ParentWindow}]};const s={[l.$H.INTERSTITIAL]:N(l.$H.INTERSTITIAL,t,e),[l.$H.REWARDED]:N(l.$H.REWARDED,t,e)},i={[l.$H.INTERSTITIAL]:s[l.$H.INTERSTITIAL]||_(l.$H.INTERSTITIAL,{flags:e,withWorldWideAdv:a}),[l.$H.REWARDED]:s[l.$H.REWARDED]||_(l.$H.REWARDED,{flags:e,withWorldWideAdv:a})};return L(e)?i:(s[l.$H.INTERSTITIAL]||(C(i[l.$H.INTERSTITIAL],l.$H.INTERSTITIAL,{flags:e,withWorldWideAdv:a}),function(e){const{adv:{interstitial:{promo:t}}}=(0,n.getDomainConfig)();(null==t?void 0:t.onboardingEnabled)&&(0,o.Q)()&&e[l.$H.INTERSTITIAL].unshift({provider:d.e.OnboardingPromo})}(i),R(i[l.$H.INTERSTITIAL],{flags:e}),D(i[l.$H.INTERSTITIAL])),s[l.$H.REWARDED]||(C(i[l.$H.REWARDED],l.$H.REWARDED,{flags:e,withWorldWideAdv:a}),function(e,{flags:t}){if(!(0,g.dA)(t))return;const a=T(e,d.e.PrebidTGO);-1!==a&&e.splice(a+1,0,{provider:d.e.PrebidTGO,tag:l.$H.INTERSTITIAL})}(i[l.$H.REWARDED],{flags:e}),function(e,{withWorldWideAdv:t}){O(t)||e.push({provider:d.e.GoogleInstream,tag:l.$H.INTERSTITIAL})}(i[l.$H.REWARDED],{withWorldWideAdv:a}),R(i[l.$H.REWARDED],{flags:e}),D(i[l.$H.REWARDED])),B(i[l.$H.INTERSTITIAL],e),B(i[l.$H.REWARDED],e),S(i[l.$H.INTERSTITIAL],l.$H.INTERSTITIAL,{flags:e}),S(i[l.$H.REWARDED],l.$H.REWARDED,{flags:e}),A(i[l.$H.INTERSTITIAL],l.$H.INTERSTITIAL,{flags:e}),A(i[l.$H.REWARDED],l.$H.REWARDED,{flags:e}),function(e){const t=(0,u.KT)();(0,r.Me)(t,r.QQ.SnailTech)&&(e.length=0,e.push({provider:d.e.AdsenseResponsive,clientId:"ca-pub-8160201538288120",slotId:"3182579723"}))}(i[l.$H.INTERSTITIAL]),{[l.$H.INTERSTITIAL]:i[l.$H.INTERSTITIAL],[l.$H.REWARDED]:i[l.$H.REWARDED]})}function S(e,t,{flags:a}){void 0!==(t===l.$H.INTERSTITIAL?(0,s.vy)(a):(0,s.P2)(a))&&(e.length=0,e.push({provider:d.e.AdsenseResponsive}))}function A(e,t,{flags:a}){const n=(0,u.KT)();(0,r.Me)(n,r.QQ.ShareIt)&&(t===l.$H.REWARDED&&(0,s.xP)(a)||(e.length=0,e.push({provider:d.e.AdsenseResponsive})))}function I(e,t){const a=e[e.length-1];return(null==a?void 0:a.provider)===t}function P(e,t){return e.some((e=>e.provider===t))}function T(e,t){return e.findIndex((e=>e.provider===t))}function C(e,t,{flags:a,withWorldWideAdv:r}){var n,o,i;if(O(r))return;const c=null==(o=null==(n=window.appData.allAdvBlocks)?void 0:n.instream)?void 0:o[t];c&&(t===l.$H.INTERSTITIAL?null==(i=(0,g.oO)(a))||i:(0,s.CE)(a))&&c&&e.unshift({provider:d.e.GoogleInstream})}function R(e,{flags:t}){const a=(0,g.RM)(t,y.Z.disableYandexWaterfall)||!1,r=(0,u.KT)();a||E.includes(r)||I(e,d.e.Yandex)||e.push({provider:d.e.Yandex})}function D(e){const{adv:{interstitial:{promo:t}}}=(0,n.getDomainConfig)();(0,v.uP)()&&(null==t?void 0:t.waterfallEnabled)&&e.push({provider:d.e.Promo})}function L(e){var t;return!(0,g.RM)(e,y.Z.disableNativeAdv)&&!!((null==(t=window.yandex)?void 0:t.ads)&&(0,i.zg)("21.9.0.1638")&&(0,m.VP)())}function O(e){var t;return!e||(null==(t=window.clientMetadata)?void 0:t.isOnlyRsyaAd)}function _(e,{flags:t,withWorldWideAdv:a}){if(L(t))return(0,h.x)()&&(0,g.LI)(t)?[{provider:d.e.Yandex}]:[{provider:d.e.Native}];const r=(0,p.V)("utm_source");return r===d.e.Transsion?[{provider:d.e.Transsion}]:r===d.e.CrazyGames?[{provider:d.e.CrazyGames}]:r===d.e.Azerion?[{provider:d.e.Azerion}]:O(a)?[{provider:d.e.Yandex}]:[{provider:d.e.PrebidTGO}]}function x(e){return e&&"object"==typeof e&&e.provider&&"string"==typeof e.provider}function N(e,t,a){var r;if(l.$H.INTERSTITIAL===e||l.$H.REWARDED===e){const a=null==(r=null==t?void 0:t[e])?void 0:r.waterfall;if(a)return a}const n=(0,g.QR)(a,`adv_${e}_waterfall`);return n&&n.every(x)?n:null}function B(e,t){if("undefined"==typeof window)return e;const{pathname:a}=(0,f.e)(),r=(0,w.eT)(window.appData,a),n=(0,w.Fg)(window.appData,a)&&(0,g.bV)(t);return!r&&!n||(0,g.VG)(t)||[...e].forEach((t=>{if(!b.wt.includes(t.provider)){const a=e.indexOf(t);-1!==a&&e.splice(a,1)}})),e}function M({advBlocks:e,ingameAdvData:t,flags:a,withWorldWideAdv:r}){var n;const s=N(l.$H.START_FULLSCREEN,t,a);if(s)return B(s,a);const o=(y.Z.advPrerollPerClidAdsense,d.e.AdsenseResponsive,null);if(o)return B([...o],a);const i=(y.Z.advPrerollPerClid,d.e.PrebidTGO,null);return i?B([...i],a):e.start_fullscreen?L(a)?[{provider:d.e.Native}]:!r||(null==(n=window.clientMetadata)?void 0:n.isOnlyRsyaAd)?[{provider:d.e.Yandex},{provider:d.e.Promo}]:null:null}},40532:(e,t,a)=>{a.d(t,{Z:()=>g});var r=a(87363),n=a.n(r),s=a(53726),o=a(17431),i=a(65453),l=a(97808),d=a(71522),c=a(33252),u=a(93298);const h="fetch-limits";var p=(e=>(e.LIMIT_EXCEEDING="limit-exceeding",e))(p||{});const m=(0,u.M$)("PlayFetchLimits",u.XG.Popup);class v extends r.Component{constructor(e){super(e),this.actionToMethodMap={"leaderboard/entries":"leaderboard.getLeaderboardEntries()","leaderboard/score":"leaderboard.setLeaderboardScore()","player-info/get-data":"player.getData()","player-info/set-data":"player.setData()","player-info/increment-stats":"player.incrementStats()","player-info/stats":"player.getStats()","player-info/set-stats":"player.setStats()"},this.onFetchInternalMessage=e=>{const{action:t}=e.data;if(t!==p.LIMIT_EXCEEDING)return;const{data:{url:a,method:r}}=e.data;this.onLimitExceeding({method:r,url:a})},this.onMessageBoxClick=()=>{const{warningMessage:e}=this.state;if(e)try{navigator.clipboard.writeText(e)}catch(e){}},this.onMessageBoxClose=()=>{this.setState({warningMessage:void 0})},this.onMessageBoxSnooze=()=>{this.onMessageBoxClose(),this.setState({snooze:!0})},this.state={snooze:!1,warningMessage:void 0}}componentDidMount(){l.Z.onInternalMessage(h,this.onFetchInternalMessage)}componentWillUnmount(){l.Z.offInternalMessage(h,this.onFetchInternalMessage)}onLimitExceeding(e){const t=this.getLimitErrorText(e);(0,c.H)({message:"Fetch limit exceeding",type:"fetch"},new Error(t)),((0,d.m)()||u.HQ)&&this.setState({warningMessage:t})}getLimitErrorText({method:e,url:t}){var a;if(t){let e=t;try{e=new URL(t).pathname}catch(e){}return m(`onLimitExceeding, url = ${t}`),this.props.getText("game-sdk.fetch-limits.warn.text",{params:{url:e}})}return e=null!=(a=this.actionToMethodMap[e])?a:e,m(`onLimitExceeding, method = ${e}`),this.props.getText("game-sdk.fetch-limits.warn.method.text",{params:{method:e}})}render(){const{snooze:e,warningMessage:t}=this.state;return e||!t?null:n().createElement(o.Z,{autohide:!1,level:i.XB.ERROR,withCloseButton:!0,onClick:this.onMessageBoxClick,onClose:this.onMessageBoxClose,onSnooze:this.onMessageBoxSnooze},t)}}const g=(0,s.$j)((function(e){return{getText:e.getText}}))(v)},75612:(e,t,a)=>{a.d(t,{Z:()=>ae});var r=a(95486),n=a(10719),s=a(85383),o=a(8804),i=a(63904),l=a.n(i),d=a(87363),c=a.n(d),u=a(53726),h=a(4824),p=a(92059),m=a(4463),v=a(93569),g=a(40184),y=a(11510),f=a(15771);const w=l().with("exit-button"),b=({iconClass:e,onClick:t,mix:a,onEnable:r})=>{const n=(0,y.T)(),s=(0,m.TH)(),{abt:{flags:o},isPWA:i,isGamesApp:l,deviceType:u}=(0,g.b)();return(0,d.useMemo)((()=>{const e="mobile"===u&&i&&(0,f.Xd)(o),t=new URLSearchParams(s.search);return e||l||"1"===t.get("exit-button")}),[u,o,l,i,s.search])?(r(),c().createElement(c().Fragment,null,c().createElement("div",{className:`${w()} ${a}`,title:n("header.button.exit.text"),onClick:t},c().createElement(v.Z,{alt:n("common.close"),className:`b('icon') ${e}`,type:"exit"})))):null};var E=a(18455);const k=a(11775).Z;var S=a(96349),A=a(65044),I=a(3462),P=a(38096),T=a(17780),C=a(35090),R=a(68108),D=a(41811);function L(e){const{url:t,source:a,lang:r,location:n,context:s}=e,{hidePaymentsAndCurrency:o,isPWA:i,pfid:l,referrer:d,tld:c,baseUrl:u}=s,h=new URLSearchParams(n.search),p=a||{};o&&(p[D.o1]="1"),i&&(p[D.cB]="1"),(0,R.sD)(d)&&(p[D.Vw]=d),l&&(p[D.om]=l);const m=["exit-button"];for(let e of h.keys()){const t=h.get(e);m.includes(e)&&"string"==typeof t&&(p[e]=t)}const v=(0,C.Yk)(n.search,p);return(0,T.E)({baseUrl:u,path:v?`${t}${v}`:t,lang:r,languages:(0,P.getDomainConfig)().languages,tld:c})}var O=a(82027),_=a(69838);const x=l().with("play-game-header-logo"),N=()=>{const e=(0,g.b)(),t=(0,m.TH)(),{abt:a,isPWA:r,oneTabPWA:n,reqUrl:s,pathLang:o}=e,i=(0,y.T)(),l=L({url:"/",source:{utm_source:"game_header_logo"},location:t,lang:o,context:e});let d=c().createElement(I.Z,{type:_.q7.HEADER});return c().createElement(E.Kk,{className:`${x("link",{pwa:!1})} pointer`,currentLocation:s,href:l,tabIndex:-1,target:(0,O.AO)({oneTabPWA:n}),title:i("common.service.name")},d)};var B=a(36172),M=a(97808),H=a(91521),F=a(28705),$=a(42126),W=a(17061),Z=a(73285),G=a(81442),j=a(34967),U=a(48810),q=a(30448),V=a(93298),z=a(68606),K=a(57681);const Y=l().with("play-game-header"),X=(0,V.M$)("PlayGameHeader",V.XG.Dev);let J,Q=0;const ee=({context:e})=>{const t=(0,y.T)(),a=(0,d.useCallback)((()=>{e.handleEvent(new CustomEvent("auth"))}),[e]);return c().createElement(o.z,{className:Y("middle-layer-login-button"),"data-guard-auth":"true",size:24,view:"secondary",onClick:a},c().createElement("span",null,t("authpopup.button.login"))," ",c().createElement("span",{className:Y("middle-layer-login-button_secondary-caption")},t("authpopup.button.caption")))};class te extends h.P{constructor(e){super(e),this.menuAnchorRef=c().createRef(),this.backButtonListenerInGame=!1,this.isExitEnabled=!1,this.onPlayGameHeaderMessage=e=>{if(!this.props.isVisible)return;const{action:t}=e.data;"show"!==t?"hide"===t&&this.setState({visible:!1}):this.setState({visible:!0})},this.onAppInfoClick=e=>{e.preventDefault(),M.Z.post({type:"document-events",action:"show-info"}),this.sendParams("app-page")},this.onExitButtonClick=()=>{this.sendParams("exit"),this.onExit(!0)},this.onFullscreenButtonClick=()=>{this.sendParams("fullscreen"),this.toggleFullscreen()},this.onHeaderLogoClick=()=>{this.sendParams("logo")},this.onMenuIconClick=()=>{const e=(0,z.hY)(z.jF.GUARD);e?(0,z.Vy)(e.children):(this.sendParams("menu"),this.setState({menuDotted:!1,menuVisible:!this.state.menuVisible}))},this.onBackButtonClick=()=>{this.sendParams("hide-menu-back"),this.closeMenu({isMenuItem:!1,isBackLink:!0})},this.handleMenuClose=e=>{this.closeMenu({isMenuItem:Boolean(null==e?void 0:e.isMenuItem),isBackLink:!1})},this.closeMenu=e=>{e.isMenuItem||e.isBackLink||window.history.back(),this.setState({menuVisible:!1})},this.isEnableExitButton=()=>{this.isExitEnabled=!0},this.state={isFullscreen:!1,menuDotted:!1,menuVisible:!1,visible:e.isVisible}}get isAdvStickyBannerEnabled(){return(0,F.xm)(this.context.playPageData)}get isMiddleLayerShown(){var e;return Boolean(this.context.middleLayerInGameData)&&null!=(e=this.props.isMiddleLayerShownInGame)&&e}componentDidMount(){X("componentDidMount"),this.setMenuDotMarker(),this.checkExitEnabled(),this.setExitButtonAvalibility(),this.setBackButtonGameHandler(),this.initMessaging()}componentWillUnmount(){X("componentWillUnmount"),M.Z.offInternalMessage("play-game-header",this.onPlayGameHeaderMessage),this.removeBackButtonListener()}initMessaging(){M.Z.onInternalMessage("play-game-header",this.onPlayGameHeaderMessage)}sendParams(e){(0,j.U4)({},{borrowParams:{header:{action:e}}})}setMenuDotMarker(){var e,t,a;const r=!0===(null==(a=null==(t=null==(e=window.YandexGamesSDK)?void 0:e.game.settings)?void 0:t.extraFeatures)?void 0:a.leaderboards)&&!(0,U.dq)(H.b).value,n=!(0,U.dq)(H.Z).value&&Boolean(this.props.advEnabledByPartner);this.setState({menuDotted:r||n})}setExitButtonAvalibility(){this.isExitEnabled&&(0,q.c)((()=>{window.setTimeout((()=>this.handleHistoryBack()))}),{once:!0})}setBackButtonGameHandler(){}get isEmbeddedWindow(){return Boolean("object"==typeof window&&window.parent!==window)}isFullscreenButtonAvailable(){return!this.context.isIpad&&!(this.isEmbeddedWindow&&!(0,G.r)())&&!this.isExitEnabled&&this.props.isFullscreenEnabled}handleHistoryBack(){window.history.pushState("root",""),window.history.pushState("main-page",""),window.addEventListener("popstate",(e=>{if(this.clearingHistoryAndGoToCatalog)null===e.state?function(e){const t=["utm_medium","utm_source"].reduce(((e,a)=>{const r=(0,W.V)(a);return r&&(t[a]=r),e}),{}),a=(0,$.Z)({url:`${e}/`,params:t});window.location.replace(a)}(this.context.baseUrl):setTimeout((()=>{window.history.back()}),0);else if("root"===e.state){if(window.history.pushState("main-page",""),this.backButtonListenerInGame)return M.Z.postToChild((0,r.TI)(n.q1.HISTORY_BACK)),Q>0&&clearTimeout(J),Q++,void(J=setTimeout((()=>{var e,t;null==(t=null==(e=null==window?void 0:window.Ya)?void 0:e.Rum)||t.logEventString("history_back","",{additional:{backHandleCount:Q}}),Q=0}),2e3));this.onExit()}}),!0)}toggleFullscreen(){M.Z.post({type:"screen-manager",action:"toggle-fullscreen"})}exitToCatalog(){const{reqUrl:e}=this.context,t=L({url:"/",source:{utm_source:"game_header_x_close"},location:this.props.location,lang:this.props.lang,context:this.context}),a=(0,E.ky)(t,{currentLocation:e});window.open(a,"_self")}onExit(e){e&&this.exitToCatalog()}componentDidUpdate(e,t){t.menuVisible!==this.state.menuVisible&&(this.state.menuVisible?this.addBackButtonListener():this.removeBackButtonListener())}addBackButtonListener(){setTimeout((()=>window.history.pushState("menu","","#menu")),0),window.addEventListener("popstate",this.onBackButtonClick,!1)}removeBackButtonListener(){window.removeEventListener("popstate",this.onBackButtonClick)}renderLogo(){return c().createElement("span",{className:Y("logo"),onClick:this.onHeaderLogoClick},c().createElement(N,null))}renderHeaderInfo(){const{baseUrlWithLangPath:e,referrer:t,hidePaymentsAndCurrency:a}=this.context;if(this.isMiddleLayerShown)return null;const{appId:r,title:n}=this.context.playPageData.gameInfo,s=(0,C.Px)({search:"utm_source=game_header_title&info=true",params:{[D.o1]:a?"1":"",[D.om]:(0,W.V)(D.om,this.context.location)||"",[D.Vw]:(0,R.sD)(t)?t:""}}),o=`${e}${(0,K.TI)(this.context,{appID:r})}${s}`;return c().createElement("span",{className:Y("info")},c().createElement("span",{className:Y("middle")},c().createElement("a",{className:`${Y("link")} hover pointer app-page`,href:o,target:"_blank",title:(0,Z.T)(n),onClick:this.onAppInfoClick},c().createElement("span",{className:Y("title")},(0,Z.T)(n)))))}renderFullscreenIcon(){const{isFullscreenActive:e,getText:t}=this.props,a=!e;return c().createElement(v.Z,{alt:t("common.open-fullscreen"),className:Y("fullscreen-icon",{enable:a}),modifiers:{enable:a,env:"desktop"},type:"fullscreen"})}renderBalance(){const{abt:e,hidePortalCurrency:t}=this.context,{getText:a}=this.props;return t||(0,f.Sn)(e.flags)?null:c().createElement("div",{className:`${Y("action",{balance:!0})} ${Y("menu")} menu hover pointer`,ref:this.menuAnchorRef,title:a("header.button.balance.text")},c().createElement(p.Z,{type:"game"}))}renderMiddleLayerLoginButton(){return!this.isMiddleLayerShown||this.props.hasAuth?null:c().createElement(S.Z,null,c().createElement(A.u.Consumer,null,(e=>c().createElement(ee,{context:e}))))}renderActions(){const{getText:e,isFullscreenActive:t,darkTheme:a}=this.props;return c().createElement("div",{className:Y("actions"),"data-nosnippet":"true"},this.renderMiddleLayerLoginButton(),this.renderBalance(),c().createElement("div",{className:`${Y("action")} ${Y("menu")} menu hover pointer`,ref:this.menuAnchorRef,title:e("header.button.menu.text"),onClick:this.onMenuIconClick},c().createElement("div",{className:Y("menu-icon-wrapper",{dotted:this.state.menuDotted})},c().createElement(v.Z,{alt:e("common.menu"),className:Y("menu-icon"),type:this.isMiddleLayerShown&&!a?"game-menu-black":"game-menu-white"})),this.state.menuVisible&&c().createElement(k,{anchorRef:this.menuAnchorRef,onClose:this.handleMenuClose})),this.isFullscreenButtonAvailable()&&c().createElement("div",{className:`${Y("action")} ${Y("fullscreen")} hover pointer`,title:e(`header.button.${t?"exit":"enter"}-fullscreen.text`),onClick:this.onFullscreenButtonClick},this.renderFullscreenIcon()),c().createElement(b,{iconClass:Y("exit"),mix:`${Y("action")} ${Y("exit")} hover pointer`,onClick:this.onExitButtonClick,onEnable:this.isEnableExitButton}))}checkExitEnabled(){const e=new URLSearchParams(this.props.location.search);this.isExitEnabled="1"===e.get("exit-button")}render(){return this.checkExitEnabled(),c().createElement("div",{className:Y({"catalog-enabled":!1,"exit-enabled":this.isExitEnabled,"fullscreen-enabled":this.props.isFullscreenEnabled,"menu-enabled":!0,"with-adv":this.isAdvStickyBannerEnabled,"middle-layer-enabled":this.isMiddleLayerShown,"middle-layer-light":this.isMiddleLayerShown&&!this.props.darkTheme,hide:!this.state.visible})},this.state.visible&&c().createElement(c().Fragment,null,this.renderLogo(),this.renderHeaderInfo(),this.renderActions()))}}const ae=(0,s.E)((0,u.$j)((function(e){var t;return{advEnabledByPartner:e.advEnabledByPartner,darkTheme:(0,B.Up)(e),getText:e.getText,hasAuth:Boolean(e.userData.login),isFullscreenActive:e.ui.isFullscreenActive,isFullscreenEnabled:e.ui.isFullscreenEnabled,lang:e.lang,isMiddleLayerShownInGame:null==(t=e.middleLayerInGameData)?void 0:t.show,userData:e.userData}}))(te))},3462:(e,t,a)=>{a.d(t,{Z:()=>E});var r=a(38096),n=a(87363),s=a.n(n),o=a(40562),i=a(63904),l=a.n(i),d=a(53726),c=a(4824),u=a(11510),h=a(5825),p=a(36172),m=a(68108),v=a(69838),g=a(44865);const y=l().with("play-game-logo"),f=({type:e})=>{const t=(0,h.C)(p.Up),{lang:a,referrer:r,cdnUrl:i,playPageData:{gameInfo:{categoryNames:l}},rtl:f}=(0,n.useContext)(c.Z),w=(0,d.v9)((e=>e.middleLayerInGameData)),b=(0,u.T)(),E=b("common.company.name"),k=b("common.service.short_name"),S=b("common.service.name"),A=(0,v._B)({cdnUrl:i,darkTheme:t,fullLogo:e!==v.q7.GUARD&&e!==v.q7.AVATAR,text:E,type:e,lang:a,rtl:f}),I=(0,o.K)(a),P=(0,n.useMemo)((()=>(0,m.sD)(r)),[r]);if(e===v.q7.GUARD){const{serviceType:r}=(0,g.Vk)(l),n=(r===v.CF.WEBAPPS_CATEGORY_SERVICE_NAME?b("common.service.app_name"):b("common.service.short_name")).replace(/\s/g,"%20"),o=(0,v._B)({cdnUrl:i,darkTheme:t,isWhiteLabelPartner:P,text:n,type:e,lang:a,rtl:f});return s().createElement("span",{className:y()},s().createElement("img",{alt:S,className:y("service",{type:e,lang_ru:I}),crossOrigin:"anonymous",loading:"lazy",src:o,title:S}))}if(e===v.q7.AVATAR)return P?null:s().createElement("div",{className:y()},s().createElement("img",{alt:S,className:y("company",{type:e,lang_ru:I}),crossOrigin:"anonymous",src:A,title:S}));const T=(0,v._B)({cdnUrl:i,darkTheme:t,isMiddleLayer:null==w?void 0:w.show,isWhiteLabelPartner:P,text:k,type:e,lang:a,rtl:f});return s().createElement(s().Fragment,null,s().createElement("img",{alt:S,className:y("service",{type:e,lang_ru:I,whitelabel:P}),crossOrigin:"anonymous",src:T,title:S}))};var w=a(20523);const b=({type:e})=>{switch(e){case v.q7.MENU:return s().createElement(w.Z,{showImage:!1,textSize:"m"});case v.q7.HEADER:return s().createElement(w.Z,{showImage:!1,textColor:"light",textSize:"s",type:e});case v.q7.GUARD:case v.q7.PAYMENTS:return s().createElement(w.Z,{imageSize:"s",textSize:"m"});case v.q7.AVATAR:return s().createElement(w.Z,{imageSize:"m",showText:!1});default:return s().createElement(w.Z,{showImage:!1,textSize:"m"})}},E=({type:e})=>{const{hostname:t}=(0,r.getDomainConfig)();return t!==r.EDomain.Yandex?s().createElement(b,{type:e}):s().createElement(f,{type:e})}},37197:(e,t,a)=>{a.d(t,{Z:()=>ne});var r=a(63904),n=a.n(r),s=a(87363),o=a.n(s),i=a(53726),l=a(4463),d=a(93569),c=a(10719),u=a(85375);var h=a(97808);const p={ctrl:"control"},m={Space:"Space"},v=["altKey","ctrlKey","metaKey","shiftKey"],g=v.reduce(((e,t)=>{var a;const r=t.replace("Key",""),n=(s=null!=(a=p[r])?a:r)[0].toUpperCase()+s.slice(1);var s;return e[t]={name:n,nameLeft:`${n}Left`,nameRight:`${n}Right`},e}),{}),y=({keydown:e})=>{var t;if(!e)return"";const{code:a,key:r}=e,n=[],s=new Set,o=[];return v.forEach((t=>((e,t,a,r,n)=>{const{name:s,nameLeft:o,nameRight:i}=g[a];e&&(r.push(t===o||t===i?t:s),n.add(o),n.add(i))})(e[t],a,t,n,s))),n.length&&o.push(n.join(" + ")),s.has(a)||o.push(null!=(t=m[a])?t:r),o.join(" + ")},f=(0,u.A)()?(0,s.memo)((()=>{const[e,t]=(0,s.useState)(new Map),a=(0,s.useCallback)((({data:{data:e,messageId:a,action:r}})=>{"keydown"===r&&e&&(t((t=>{const r=new Map(t.entries());return 5===r.size&&r.delete(r.keys().next().value),r.set(a,{id:a,key:y(e)}),r})),setTimeout((()=>t((e=>{const t=new Map(e.entries());return t.delete(a),t}))),2e3))}),[]);return(0,s.useEffect)((()=>(h.Z.onExternalMessage(c.cV,a,{withHistory:!1}),()=>h.Z.offExternalMessage(c.cV,a))),[a]),o().createElement("div",{className:"KeydownLogger-module__KeydownLogger--WnZ6X"},[...e.values()].map((({id:e,key:t})=>o().createElement("div",{className:"KeydownLogger-module__Key--wb4SI",key:e},t))))})):()=>o().createElement(o().Fragment,null);var w=a(24674),b=a(95486),E=a(94199),k=a(90366),S=a(19146),A=a(4824),I=a(58432),P=a(93298);const T=n().with("screen-manager-cover"),C=(0,P.M$)("ScreenManagerCover",P.XG.Popup);class R extends s.Component{constructor(){super(...arguments),this.state={visible:!0,playit:!1},this.onVisibilityChange=()=>{document.hidden&&this.setState({visible:!0})},this.onClick=()=>{this.setState({visible:!1}),h.Z.post({type:"screen-manager",action:"request-fullscreen"})}}componentDidMount(){if(C("componentDidMount"),k.w.available)return void this.setState({visible:!1});const e=(0,I.KT)();(0,w.Me)(e,w.QQ.PlayIt)&&"landscape"===this.gameOrientation&&this.setState({playit:!0}),this.addListeners()}get gameOrientation(){var e;return null==(e=this.context.playPageData.gameSettings.features)?void 0:e.orientation}componentDidUpdate(e){!e.isFullscreenActive&&this.props.isFullscreenActive&&this.setState({visible:!0})}componentWillUnmount(){C("componentWillUnmount"),this.removeListeners()}addListeners(){document.addEventListener("visibilitychange",this.onVisibilityChange)}removeListeners(){document.removeEventListener("visibilitychange",this.onVisibilityChange)}render(){return this.state.visible&&!this.props.isFullscreenActive?o().createElement("div",{className:T({playit:this.state.playit}),onClick:this.onClick,onTouchEnd:this.onClick}):null}}R.contextType=A.Z;const D=(0,i.$j)((function(e){return{isFullscreenActive:e.ui.isFullscreenActive}}))(R);var L=a(95968),O=a(90043),_=a(72167),x=a(35090),N=a(34967),B=a(77901),M=a(33252),H=a(40656),F=a(15771);const $=(0,P.M$)("ScreenManager",P.XG.Dev);class W extends s.Component{constructor(e){super(e),this.onMessage=(e,t)=>{switch(e.data.action){case"request-fullscreen":this.requestFullscreen({force:!0}).then((()=>{t()})).catch((e=>{t({error:e})}));break;case"exit-fullscreen":this.exitFullscreen().then((()=>{this.unlockScreenOrientation(),t()})).catch((e=>{t({error:e})}));break;case"toggle-fullscreen":this.toggleFullscreen().then((()=>{this.unlockScreenOrientation(),t()})).catch((e=>{t({error:e})}));break;case"rotate-banner-add":this.addScreenOrientationBanner();break;case"rotate-banner-remove":this.removeScreenOrientationBanner();break;case"get-state":this.isFullscreen().then((e=>{t({data:{isFullscreen:e,screenOrientationWasLocked:this.state.screenOrientationWasLocked}})})).catch((()=>{t({data:{isFullscreen:!1,screenOrientationWasLocked:this.state.screenOrientationWasLocked}})}));break;case"fullscreen-supported":t({data:{isFullscreenSupported:this.isFullscreenSupported}})}},this.updateFullscreenState=()=>{this.isFullscreen().then((e=>this.props.setIsFullscreenActive(e)))},this.state={screenOrientationWasLocked:!1,withCover:!1}}get gameFeatures(){return this.context.playPageData.gameSettings.features||{}}get fullScreenValue(){const{fullscreen:e}=this.gameFeatures;return"boolean"==typeof e?e:"desktop"!==this.context.deviceType}get gameOrientation(){const{orientation:e}=this.gameFeatures;if("landscape"===e||"portrait"===e)return e}componentDidMount(){$("componentDidMount"),this.props.setIsFullscreenEnabled(this.isFullscreenSupported()),this.addFullscreenListener(),this.updateFullscreenState(),this.initMessaging(),this.initCover(),this.initFullscreen(),this.initScreenOrientation()}componentWillUnmount(){$("componentWillUnmount"),this.removeFullscreenListener(),this.destroyMessaging()}addFullscreenListener(){var e;k.w.available?null==(e=(0,k.u)())||e.addEventListener("fullscreenchange",this):document.addEventListener(L.Z.fullscreenchange,this)}removeFullscreenListener(){var e;k.w.available?null==(e=(0,k.u)())||e.removeEventListener("fullscreenchange",this):document.removeEventListener(L.Z.fullscreenchange,this)}initMessaging(){h.Z.onExternalMessage("screen-manager",this.onMessage),h.Z.onInternalMessage("screen-manager",this.onMessage)}destroyMessaging(){h.Z.offExternalMessage("screen-manager",this.onMessage),h.Z.offInternalMessage("screen-manager",this.onMessage)}initCover(){this.isFullscreenEnabled()&&(k.w.available||(this.setState({withCover:!0}),(0,x.g)()||this.requestFullscreen().catch((()=>{}))))}initFullscreen(){this.isFullscreenEnabled()&&((0,x.g)()||this.requestFullscreenForYandexPlatforms(),window.addEventListener("blur",this))}initScreenOrientation(){this.updateScreenOrientationBanner(),E.default.isSupported&&E.default.addChangeListener(this)}handleEvent(e){const{type:t}=e;t===E.default.changeEventName?this.handleScreenOrientationChange():t===L.Z.fullscreenchange?(this.updateFullscreenState(),this.handleFullscreenChange()):"blur"===t?(window.removeEventListener("blur",this),window.setTimeout((()=>{var e,t,a;!(null==(e=document.activeElement)?void 0:e.toString().includes("HTMLIFrameElement"))&&"IFRAME"!==(null==(a=null==(t=document.activeElement)?void 0:t.tagName)?void 0:a.toUpperCase())||(0,x.g)()||this.requestFullscreen().catch((()=>{}))}),0)):(0,M.H)({prefix:"[ScreenManager]",sourceMethod:"handleEvent"},new Error(`Unknown event '${t}'`))}handleScreenOrientationChange(){!1===this.updateScreenOrientationBanner()&&this.requestFullscreen().catch((()=>{}))}handleFullscreenChange(){this.isFullscreen().then((e=>{h.Z.hasChild()&&h.Z.postToChild(b.vP.Fullscreenchange({isFullscreen:e})),h.Z.post({type:"screen-manager",action:"fullscreenchange",data:{isFullscreen:e}}),window.setTimeout((()=>{e&&this.lockScreenOrientation()}),H.WT)})).catch((e=>{(0,M.H)({prefix:"[ScreenManager]",sourceMethod:"handleFullscreenChange"},e)}))}isFullscreenSupported(){return k.w.available||Boolean(document[L.Z.fullscreenEnabled])}needScreenCover(){const e=(0,I.KT)();return(0,w.Me)(e,w.QQ.PlayIt)&&"landscape"===this.gameOrientation}isFullscreenEnabled(){const{abt:{flags:e},playPageData:{gameInfo:t}}=this.context,{appId:a}=t;if((0,F.Nm)(e))return!1;if(function(e){return["100714"].includes(e)}(a))return!1;if(window.parent!==window)return!1;const r=(0,I.KT)();return!(0,w.Me)(r,w.QQ.ByteApp)&&(!(0,w.Me)(r,w.QQ.PlayIt)||"portrait"!==this.gameOrientation)&&!this.props.isMiddleLayerInGameShown&&Boolean(this.fullScreenValue&&this.isFullscreenSupported())}get fullscreenElement(){return document[L.Z.fullscreenElement]}isFullscreen(){return k.w.available?k.w.isFullscreen():Promise.resolve(Boolean(this.fullscreenElement))}requestFullscreen({force:e}={}){return e||this.isFullscreenEnabled()?new Promise(((e,t)=>{this.isFullscreen().then((a=>{a?e():this.fullscreenMethodCallWrapper("requestFullscreen").then(e).catch(t)})).catch(t)})):Promise.resolve()}requestFullscreenForYandexPlatforms(){((0,B.RY)()||(0,B.XQ)()||(0,B.V5)())&&this.requestFullscreen().catch((()=>{}))}exitFullscreen(){return this.fullscreenMethodCallWrapper("exitFullscreen")}toggleFullscreen(){return this.isFullscreen().then((e=>e?this.exitFullscreen().then((()=>{this.needScreenCover()||this.setState({withCover:!1}),this.unlockScreenOrientation()})):this.requestFullscreen({force:!0})))}fullscreenMethodCallWrapper(e){return new Promise(((t,a)=>{if(k.w.available)return void k.w[e]().then(t).catch(a);let r,n;if("exitFullscreen"===e?(r=document,n=document[L.Z.exitFullscreen]):(r=document.documentElement,n=r[L.Z[e]]),n)try{Promise.resolve(n.call(r,{navigationUI:"hide"})).then((()=>t())).catch((e=>a(e)))}catch(e){a(e)}else a(new Error("Fullscreen is not supported"))}))}isScreenOrientationSupported(){const{deviceType:e}=this.context;return"desktop"!==e&&"tv"!==e&&E.default.isSupported}isScreenOrientationEnabled(){return Boolean(this.gameOrientation&&this.isScreenOrientationSupported()&&!(0,F.t7)(this.context.abt.flags))}addScreenOrientationBanner(){(0,N.U4)({},{orientationBanner:{show:!0,correctOrientation:this.gameOrientation,currentOrientation:E.default.isSupported?(0,E.a)(E.default.type):void 0}}),this.props.setIsOrientationBannerVisible(Boolean(this.gameOrientation))}removeScreenOrientationBanner(){(0,N.U4)({},{orientationBanner:{show:!1,isLockedForcefully:this.state.screenOrientationWasLocked,correctOrientation:this.gameOrientation,currentOrientation:E.default.isSupported?(0,E.a)(E.default.type):void 0}}),this.props.setIsOrientationBannerVisible(!1)}updateScreenOrientationBanner(){if(this.isScreenOrientationEnabled())return E.default.type.startsWith(String(this.gameOrientation))?(this.removeScreenOrientationBanner(),!1):(this.addScreenOrientationBanner(),!0)}screenOrientationIsLockable(){return E.default.isLockable&&this.fullscreenElement&&this.isScreenOrientationEnabled()}lockScreenOrientation(){this.screenOrientationIsLockable()&&E.default.lock(this.gameOrientation).then((()=>{this.setState({screenOrientationWasLocked:!0}),this.props.setScreenOrientationLocked(!0)})).catch((e=>{console.debug(e),this.updateScreenOrientationBanner()}))}unlockScreenOrientation(){this.state.screenOrientationWasLocked&&E.default.unlock().then((()=>{this.setState({screenOrientationWasLocked:!1}),this.props.setScreenOrientationLocked(!1)})).catch((e=>{console.debug(e)}))}render(){const{withCover:e}=this.state;return[e&&o().createElement(D,{key:"screen-manager-cover"})]}}W.contextType=A.Z;const Z=(0,i.$j)((function(e){return{isMiddleLayerInGameShown:(0,_.nR)(e)}}),(function(e){return(0,S.DE)({setIsFullscreenActive:O.hu,setIsFullscreenEnabled:O.rV,setScreenOrientationLocked:O.ht,setIsOrientationBannerVisible:O.f_},e)}))(W);var G=a(40184),j=a(11510),U=a(35875),q=a(98343),V=a(26891),z=a(52260),K=a(65562);var Y=Object.defineProperty,X=Object.defineProperties,J=Object.getOwnPropertyDescriptors,Q=Object.getOwnPropertySymbols,ee=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable,ae=(e,t,a)=>t in e?Y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;const re=n().with("game"),ne=({showDragOverlay:e,onDragOverlayCloseByButton:t})=>{var a;const r=(0,G.b)(),n=(0,l.TH)(),c=(0,i.I0)(),u=(0,F.mD)(r.abt.flags),{abt:h,playPageData:p,baseHost:m,baseUrl:v,requestId:g,uatraits:y,isAndroidTV:w,deviceType:b,middleLayerInGameData:E,isTranssion:k}=r,{gameSrcDocument:S}=p,[A,I]=(0,s.useState)(!1),P=(0,s.useCallback)((()=>{var e;null==t||t(),I(!u),c((0,U.T)(!0)),null==(e=window.clickdaemonLog)||e.call(window,q.zx.SWIPE_TO_FULLSCREEN,{item:"swipe2fsClose"})}),[c,u,t]);let T=p.iframeAllow+"accelerometer; gyroscope;";const C=(0,j.T)(),R=(0,s.useMemo)((()=>(0,F.MA)(h.flags)||k||Boolean(E)),[h.flags,E,k]);let D=(0,s.useMemo)((()=>n.search),[]),L=(0,s.useMemo)((()=>{var e;const{frameSrc:t}=function({abt:e,appId:t,baseHost:a,baseUrl:r,deviceType:n,gameSrc:s,hasExternalURL:o,s3PreloaderHelperPath:i,sdkHash:l,search:d,uatraits:c}){var u;const h=new Set(["draft"]),p=new Set([z.fP]),m=new URL(s),v=new URLSearchParams(m.hash.slice(1));Array.from(new URLSearchParams(d.slice(1)).entries()).forEach((([e,t])=>{p.has(e)||(h.has(e)&&null!==t&&v.append(e,t),m.searchParams.has(e)||m.searchParams.append(e,t))})),o?(m.searchParams.set("sdk",`https://games.s3.yandex.net/sdk/_/v2.${l}.js`),m.searchParams.set("sdk_origin","sdk.games.s3.yandex.net")):m.searchParams.set("sdk",`/sdk/_/v2.${l}.js`),v.has("app-id")||v.append("app-id",t),v.append("device-type",n),m.hash=v.toString(),/[?&]csp_test=true/.test(d)&&(m.pathname=m.pathname.replace("index.html","index-csp.html"));const g=m.toString();let y=g;if((0,K.G)(c)||(0,K.g)(c)){const e=(0,V.V)(y);e&&(y=e+(i.startsWith("/")?i.substring(1):i)+"?retpath="+encodeURIComponent(g))}return y=(null==(u=null==e?void 0:e.flags)?void 0:u.clear_iframe_utm)?(e=>{const t=new URL(e);return Array.from(t.searchParams.keys()).forEach((e=>{0===e.indexOf("utm_")&&t.searchParams.delete(e)})),t.href})(y):y,{frameSrc:y,originSrc:g}}({abt:h,appId:p.gameInfo.appId,baseHost:m,baseUrl:v,deviceType:b,gameSrc:p.gameSrc,hasExternalURL:Boolean(null==(e=p.gameData)?void 0:e.hasExternalURL),s3PreloaderHelperPath:p.s3PreloaderHelperPath,sdkHash:p.sdkHash,search:R?D:n.search,uatraits:y});return t}),[h,m,v,b,n.search,null==(a=p.gameData)?void 0:a.hasExternalURL,p.gameInfo.appId,p.gameSrc,p.s3PreloaderHelperPath,p.sdkHash,D,R,y]);const O=(0,s.useCallback)((()=>{var e;"undefined"!=typeof window&&(null==(e=window.onGameFrameLoad)||e.call(window))}),[]),_=(0,s.useCallback)((e=>{var t;"undefined"!=typeof window&&(null==(t=window.onGameFrameError)||t.call(window,e))}),[]);let x=L;if(S){const e=new URL(L),t=new URL(S);t.hash=e.hash,x=t.toString()}return o().createElement("div",{className:re()},o().createElement(Z,null),o().createElement("iframe",(N=((e,t)=>{for(var a in t||(t={}))ee.call(t,a)&&ae(e,a,t[a]);if(Q)for(var a of Q(t))te.call(t,a)&&ae(e,a,t[a]);return e})({},(0,F.B7)((null==h?void 0:h.flags)||{})&&{"referrer-policy":"no-referrer"}),B={allow:T,"data-allowed-origins":JSON.stringify([p.gameOrigin,m]),"data-origin-src":L,id:"game-frame",name:g,sandbox:undefined,src:x,style:{},onError:_,onLoad:O},X(N,J(B)))),e&&!A&&o().createElement("div",{className:re("swipe-to-fs")},o().createElement(d.Z,{className:re("swipe-to-fs-close-icon"),type:"close-circle",onClick:P}),o().createElement("div",{className:re("swipe-to-fs-bg")}),o().createElement("div",{className:re("swipe-to-fs-content")},o().createElement("span",null,C(u?"game.swipe-to-fs-long":"game.swipe-to-fs")),o().createElement("div",{className:re("swipe-to-fs-hint")}))),o().createElement(f,null));var N,B}},65044:(e,t,a)=>{a.d(t,{u:()=>r});const r=(0,a(87363).createContext)({handleEvent:e=>{throw new Error("PlayGuardContext is not initialized")},isHidden:!1,isNeedToShow:!1})},96349:(e,t,a)=>{a.d(t,{Z:()=>b});var r=a(26108),n=a(85383),s=a(87363),o=a.n(s),i=a(53726),l=a(14375),d=a(4824),c=a(65044),u=a(90043),h=a(97808),p=a(32054),m=a(34967),v=a(31136),g=a(93298),y=a(89592);const f=(0,g.M$)("PlayGuard",g.XG.Popup);class w extends d.P{constructor(){super(...arguments),this.state={show:this.isNeedToShow(),hidden:!0},this.wasShowed=!this.state.show,this.permissionsPromiseWrapper=new r.Z,this.onGuardMessage=(e,t)=>{var a;if("play-guard"!==(null==(a=e.data.data)?void 0:a.source))switch(e.data.action){case"is-guard-enabled":t({data:{result:this.isGuardEnabled}});break;case"get-show-state":t({data:{result:!this.wasShowed}});break;case"get-was-showed":t({data:{result:this.wasShowed}});break;case"apply":if(this.wasShowed)this.permissionsPromiseWrapper.reject();else{const{actionSource:t}=e.data.data;this.apply({actionSource:t})}break;case"show":h.Z.post({type:"promo-bar",action:"show"}),h.Z.post({type:"guard",action:"state-changed",data:{state:"up"}});break;case"focus":this.wasShowed?(0,l.D)():window.focus()}},this.handleEvent=e=>{switch(e.type){case"apply":{const{actionSource:t}=e.detail;this.apply({actionSource:t});break}case"auth":this.auth();break;case"cancel":this.cancel();break;case"info":this.info()}}}componentDidMount(){f("componentDidMount",this.state),h.Z.onInternalMessage("guard",this.onGuardMessage,{withHistory:!0}),this.permissionsPromiseWrapper.promise.catch((()=>{}));const e=this.isNeedToShow();this.setIsGuardOpened(e),this.wasShowed=!e;const t=e?"show":"hide";this.setState({hidden:this.context.isAdvSplashScreenEnabled,show:e},(()=>{this.wasShowed&&this.postSetWasShowedAction()})),e&&(h.Z.post({type:"promo-bar",action:"show"}),this.sendParamsWrapper({show:!0})),this.sendParamsWrapper({initialStatus:t}),h.Z.post({type:"guard",action:"init"}),h.Z.post({type:"guard",action:"state-changed",data:{state:"show"===t?"up":"play"}})}componentWillUnmount(){f("componentWillUnmount"),h.Z.offInternalMessage("guard",this.onGuardMessage)}setIsGuardOpened(e){this.props.dispatch((0,u.lt)(e))}get isGuardEnabled(){const{location:e}=this.props,{abt:t,playPageData:a,referrerClid:r}=this.context,{gameData:n}=a,{flags:s}=t,o=(0,p.p)(n);return(0,p.Z)({clid:r,flags:s,isConfirmedGuard:o,location:e})}isNeedToShow(){return this.isGuardEnabled}apply({actionSource:e}){this.applyPromise||(this.applyPromise=Promise.race([(0,v.D)(5e3).then((()=>this.permissionsPromiseWrapper.reject())),new Promise(((t,a)=>{const{appId:r}=this.context.playPageData.gameInfo;this.sendScope({appId:r,isGuardEnabled:!0}).then((()=>{this.permissionsPromiseWrapper.reject(),(0,m.U4)({},{borrowParams:{personal:{showed:!1,value:!1}}}),(0,m.NF)({},y.Ji.GUARD_APPLY),r&&(0,m.SX)("view_item",{send_to:"AW-10952943694",value:0,items:[{id:r,location_id:0,google_business_vertical:"custom"}]}),h.Z.post({type:"guard",action:"apply",data:{source:"play-guard"}}),h.Z.post({type:"guard",action:"state-changed",data:{state:"play"}}),this.sendParamsWrapper({apply:e}),h.Z.post({type:"promo-bar",action:"remove"}),t(void 0)}))}))]).then((()=>this.close())).finally((()=>this.applyPromise=void 0)))}auth(){this.sendParamsWrapper({auth:!0}),h.Z.post({type:"auth",action:"auth-dialog-open",data:{initializer:"guard"}})}cancel(){const{referrer:e}=this.context;this.sendParamsWrapper({cancel:!0}),h.Z.post({type:"guard",action:"cancel",data:e?{referrer:e}:{}})}close(){this.wasShowed=!0,this.setIsGuardOpened(!1),this.setState({show:!1},(()=>this.postSetWasShowedAction())),(0,l.D)(),h.Z.post({type:"guard",action:"closed"})}info(){this.sendParamsWrapper({info:!0}),h.Z.post({type:"guard",action:"info"}),h.Z.post({type:"guard",action:"state-changed",data:{state:"info"}}),h.Z.post({type:"promo-bar",action:"hide"})}sendScope(e){return t=this,a=arguments,r=function*({appId:e,isGuardEnabled:t}){yield h.Z.post({type:"scopes",action:"apply-guard",data:{appId:e,isGuardEnabled:t}})},new Promise(((e,n)=>{var s=e=>{try{i(r.next(e))}catch(e){n(e)}},o=e=>{try{i(r.throw(e))}catch(e){n(e)}},i=t=>t.done?e(t.value):Promise.resolve(t.value).then(s,o);i((r=r.apply(t,a)).next())}));var t,a,r}sendParamsWrapper(e){(0,m.U4)({},{borrowParams:{guard:e}})}postSetWasShowedAction(){h.Z.post({type:"guard",action:"set-was-showed",data:{result:!0}})}render(){return o().createElement(c.u.Provider,{value:{handleEvent:this.handleEvent,isHidden:this.state.hidden,isNeedToShow:this.state.show}},this.props.children)}}const b=(0,n.E)((0,i.$j)(null)(w))},82346:(e,t,a)=>{a.d(t,{G0:()=>S,GP:()=>A,IR:()=>I,QU:()=>T,WM:()=>C,Xp:()=>f,Zn:()=>P,qj:()=>E,wv:()=>w});var r=a(37643),n=a(47496),s=a(75856),o=a(59986),i=a(42126),l=a(34711),d=a(76488),c=a(33252),u=a(40656),h=a(93298),p=a(13377),m=a(89592);const v=60*u.WT;let g={time:0,data:{products:[]}};const y=(0,h.M$)("Payments",h.XG.Dev);function f(e){const{lang:t}=e;return new Promise(((e,a)=>{Math.abs(g.time-Date.now())<v&&g.lang===t?e({products:g.data.products}):(0,o.ix)(`products?lang=${encodeURIComponent(t)}`).then((a=>{g={data:a,lang:t,time:Date.now()},e({products:g.data.products})})).catch((e=>{(0,c.H)({block:p.W.PAYMENT,sourceMethod:"getProducts",message:`${m.EW} getProducts error`,type:"fetch"},e),a(e)}))}))}const w=(0,s.Z)((function({id:e,lang:t}){return new Promise(((a,r)=>{(0,o.ix)(`products?id=${encodeURIComponent(e)}&lang=${encodeURIComponent(t)}`).then((e=>{var t,r;if(!d.XK){const a=null==(t=window.YandexGamesSDK)?void 0:t.request.experiments.new_payments_balance;void 0!==a&&""!==a&&(e.balance=parseInt(a,10)||0);const n=null==(r=window.YandexGamesSDK)?void 0:r.request.experiments.new_payments_mockable;void 0!==n&&(e.mockable=n||!1)}y("getProduct responseData",e),a(e)})).catch((e=>{(0,c.H)({block:p.W.PAYMENT,sourceMethod:"getProduct",message:`${m.EW} getProduct error`,type:"fetch"},e),r(e)}))}))}));function b(e){const t=String((0,l.X)()||"");return t?(0,i.Z)({url:e,params:{clid:t}}):e}const E=(0,s.Z)((function({developer_payload:e,id:t,mock:a,signed:r=!1,offerId:n}){return new Promise(((s,i)=>{(0,o.hB)(b("buy"+(r?"-signed":"")),{id:t,mock:a,developer_payload:e,offer_id:n}).then((e=>{"error"in e?i(new Error(e.error)):s(e)})).catch((e=>{(0,c.H)({block:p.W.PAYMENT,sourceMethod:"buyProduct",message:`${m.EW} buyProduct error`,type:"fetch"},e),i(e)}))}))})),k=Object.create(null),S=(0,s.Z)((function({token:e}){return y("consumePurchase",e),e in k||(k[e]=new Promise(((t,a)=>{(0,o.hB)("consume",{token:e}).then((r=>{delete k[e],y("consumePurchase responseData",r),r.token?t(r.token):a(new n.Z({code:"CANNOT_CONSUME_PURCHASE",message:"Can not consume purchase."}))})).catch((t=>{delete k[e],(0,c.H)({block:p.W.PAYMENT,sourceMethod:"consumePurchase",message:`${m.EW} consumePurchase error`,type:"fetch"},t),a(t)}))}))),k[e]}));function A({paymentsConfig:e,defaultLang:t}){return new Promise(((a,n)=>{(0,o.ix)(`purchased${e.signed?"-signed":""}?lang=${encodeURIComponent(e.lang||t)}`).then((e=>{const{data:t,signature:n}=(0,r.c)(e,c.H);a({data:t,signature:n})})).catch((e=>{(0,c.H)({block:p.W.PAYMENT,sourceMethod:"getPurchases",message:`${m.EW} getPurchases error`,type:"fetch"},e),n(e)}))}))}function I({lang:e}){return new Promise(((t,a)=>{(0,o.w$)(`products?lang=${encodeURIComponent(e)}`).then((({data:e})=>{y("fetchCurrencyData response",e),t(e)})).catch((e=>{(0,c.H)({block:p.W.PAYMENT,sourceMethod:"getCurrencyProducts",message:`${m.EW} getCurrencyProducts error`,type:"fetch"},e),a(e)}))}))}function P({id:e,lang:t,getText:a,cdnUrl:r}){return new Promise(((n,s)=>{(0,o.lB)(`products?lang=${encodeURIComponent(t)}`).then((t=>{var i,l,u,h,v;const g=t.data.find((t=>t.id===e));if(!g)return void s(new Error(`Product with id "${e}" not found.`));const y=g.info.price,f=g.info.pricePlus,w=Boolean(null==(u=null==(l=null==(i=window.YandexGamesSDK)?void 0:i.game)?void 0:l.player)?void 0:u.hasYaPlus)&&"number"==typeof f&&f<y&&f>=0?f:y,b={balance:-1,product:{description:a(`purchase.description.${e}`),id:e,image:{url_prefix:`${r}/games-static/static-data/images/payments/subscriptions/${e}.svg`},price:w,pricePlus:f,priceRegular:y,title:a(`purchase.title.${e}`)}};if(!d.XK){const{experiments:e={}}=null==(h=window.YandexGamesSDK)?void 0:h.request,t=e.new_payments_balance;void 0!==t&&""!==t&&(b.balance=parseInt(t,10)||0);const a=e.new_payments_mockable;void 0!==a&&(b.mockable=a||!1)}(null==(v=window.YandexGamesSDK)?void 0:v.isSearchCrawler)||new Promise(((e,t)=>{(0,o.EG)().then((t=>{e(t.value)})).catch((e=>{(0,c.H)({block:p.W.PAYMENT,sourceMethod:"getBalance",message:`${m.EW} getBalance error`,type:"fetch"},e),t(e)}))})).then((e=>{b.balance=e,n(b)})).catch(s)})).catch((e=>{(0,c.H)({block:p.W.PAYMENT,sourceMethod:"getPlatformProduct",message:`${m.EW} getPlatformProduct error`,type:"fetch"},e),s(e)}))}))}const T=(0,s.Z)((function({developer_payload:e,id:t,mock:a}){return new Promise(((r,n)=>{(0,o.$)(b("buy"),{id:t,mock:a,developer_payload:e}).then((e=>{"failure"===e.status?n(new Error(e.message)):r(e)})).catch((e=>{(0,c.H)({block:p.W.PAYMENT,sourceMethod:"buyPlatformProduct",message:`${m.EW} buyPlatformProduct error`,type:"fetch"},e),n(e)}))}))}));function C(){return new Promise(((e,t)=>{(0,o.KL)().then((t=>{e(t.code)})).catch((e=>{(0,c.H)({block:p.W.PAYMENT,sourceMethod:"getRecoveryCode",message:`${m.EW} getRecoveryCode error`,type:"fetch"},e),t(e)}))}))}},75856:(e,t,a)=>{a.d(t,{Z:()=>v});var r=a(96452),n=a(97808),s=Object.defineProperty,o=Object.defineProperties,i=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,u=(e,t,a)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,h=(e,t)=>{for(var a in t||(t={}))d.call(t,a)&&u(e,a,t[a]);if(l)for(var a of l(t))c.call(t,a)&&u(e,a,t[a]);return e},p=(e,t)=>o(e,i(t));function m(e,t={}){return n.Z.post({type:"auth",action:e,data:p(h({},t),{initializer:"auth-fetch-wrapper"})})}function v(e){return function(...t){return new Promise(((a,n)=>{e(...t).then(((...e)=>{a(...e)})).catch((s=>{(0,r.ZR)(s)?(m("set-auth",{hasAuth:!1}),m("auth-dialog-open").then((({errorInstance:r})=>{if(r)throw r;e(...t).then(a).catch(n)})).catch(n)):n(s)}))}))}}},59986:(e,t,a)=>{a.d(t,{$:()=>L,EG:()=>I,KL:()=>D,U:()=>C,hB:()=>P,ix:()=>A,lB:()=>R,w$:()=>T});var r=a(31320),n=a(75856),s=a(43876),o=a(40656),i=a(93298),l=a(90295),d=Object.defineProperty,c=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,p=(e,t,a)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,m=(e,t)=>{for(var a in t||(t={}))u.call(t,a)&&p(e,a,t[a]);if(c)for(var a of c(t))h.call(t,a)&&p(e,a,t[a]);return e};const v="/purchases/app",g="/purchases/platform",y="/purchases/currency",f=2*o.yR,w=()=>f*(0,r.n)(),b="/currency/balance",E=3*o.WT,k=()=>E*(0,r.n)(),S=(0,i.M$)("Payments fetch",i.XG.Dev);function A(e){return(0,s.rQ)({apiPath:`${v}/${e}`,timeout:w(),options:{credentials:"include",headers:{Accept:"application/json"},method:"GET",referrerPolicy:"no-referrer-when-downgrade"}})}function I(){return(0,s.rQ)({apiPath:b,timeout:k(),options:{credentials:"include",headers:{Accept:"application/json"},method:"GET",referrerPolicy:"no-referrer-when-downgrade"}})}const P=(0,n.Z)((function(e,t){return(0,s.rQ)({apiPath:`${v}/${e}`,timeout:w(),options:{body:JSON.stringify(t),credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",referrerPolicy:"no-referrer-when-downgrade"}})}));function T(e){return(0,s.rQ)({apiPath:`${y}/${e}`,timeout:w(),options:{credentials:"include",headers:{Accept:"application/json"},method:"GET",referrerPolicy:"no-referrer-when-downgrade"}})}const C=(0,n.Z)((function(e,t,a={}){return S("postCurrencyData",JSON.stringify(t,null,"\t")),(0,s.rQ)({apiPath:`${y}/${e}`,timeout:w(),options:{body:JSON.stringify(t),credentials:"include",headers:m({Accept:"application/json","Content-Type":"application/json"},a),method:"POST",referrerPolicy:"no-referrer-when-downgrade"}})}));function R(e){return(0,s.rQ)({apiPath:`${g}/${e}`,timeout:w(),options:{credentials:"include",headers:{Accept:"application/json"},method:"GET",referrerPolicy:"no-referrer-when-downgrade"}})}function D(){return(0,s.rQ)({apiPath:`/${l.tw}`,timeout:w(),options:{credentials:"include",headers:{Accept:"application/json"},method:"GET",referrerPolicy:"no-referrer-when-downgrade"}})}const L=(0,n.Z)((function(e,t){return(0,s.rQ)({apiPath:`${g}/${e}`,timeout:w(),options:{body:JSON.stringify(t),credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",referrerPolicy:"no-referrer-when-downgrade"}})}))},58e3:(e,t,a)=>{a.d(t,{E:()=>n});var r=a(96452);function n(e){return(0,r.f1)(e)?new r.ZP.AuthError({code:"UNAUTHORIZED",message:"Unauthorized"}):new r.ZP.PaymentsError({code:"PAYMENT_FAILURE",message:"Payment failure"})}},71784:(e,t,a)=>{a.d(t,{Z:()=>g});var r=a(47496),n=a(97808),s=a(34967),o=a(33252),i=a(13377),l=a(89592),d=Object.defineProperty,c=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,p=(e,t,a)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,m=(e,t)=>{for(var a in t||(t={}))u.call(t,a)&&p(e,a,t[a]);if(c)for(var a of c(t))h.call(t,a)&&p(e,a,t[a]);return e};const v=[0,5,10,20,40,60,90,120,200,300,400,1/0];class g{constructor(e){this.isDestroyed=!1,this.onInternalAuthMessage=e=>{const{action:t,data:a}=e.data;if(!a||"auth-fetch-wrapper"===a.initializer)switch(t){case"auth-dialog-open":this.authStates.authOpen=Date.now();break;case"auth-dialog-success":this.authStates.authSuccess=Date.now();break;case"auth-dialog-cancel":this.authStates.authCancel=Date.now()}},this.productStatData=e.productStatData,this.startTime=Date.now(),this.appId=e.appId,this.authStates={},this.basicSupportPaymentRequest=e.basicSupportPaymentRequest,this.supportPaymentRequest=e.supportPaymentRequest,this.dialogType=e.dialogType,n.Z.onInternalMessage("auth",this.onInternalAuthMessage)}destroy(){n.Z.offInternalMessage("auth",this.onInternalAuthMessage),delete this.productStatData,this.isDestroyed=!0}log(e,t={}){if(!this.productStatData||this.isDestroyed)return void this.warnAboutDestroyed("log");const a=Object.assign({state:e,appId:this.appId,productId:this.productStatData.id,title:this.productStatData.title,price:this.productStatData.price,basicSupportPaymentRequest:this.basicSupportPaymentRequest,v:2},t);"success"===e&&this.authStates.authSuccess&&(this.authStates.authSuccessPurchase=Date.now()),!t.preventDestroy&&["success","cancel","fail"].includes(e)&&(a.timeInterval=function(e){for(let t=0;t<v.length-1;t+=1)if(e>=v[t]&&e<v[t+1])return v[t+1]===1/0?`${v[t]}+`:`${v[t]}-${v[t+1]}`;return`${v[v.length-1]}+`}(Math.abs(Date.now()-this.startTime)/1e3),this.logAuthStates(),this.destroy()),(0,s.U4)({},{borrowParams:{purchase:a}})}logAuthStates(){Object.keys(this.authStates).forEach((e=>this.log(e)),this),this.authStates={}}error(e,t={}){if(this.isDestroyed)return void this.warnAboutDestroyed("error");const a=e instanceof r.Z&&"PAYMENT_USER_CANCELED"===e.code?"cancel":"fail";this.log(a,m({reason:e.message,basicSupportPaymentRequest:this.basicSupportPaymentRequest,supportPaymentRequest:this.supportPaymentRequest},t))}reachGoals(e={}){this.productStatData?n.Z.post({type:"auth",action:"has-auth"}).then((({data:t})=>{var a,r,n,o;const{hasAuth:i}=t;(0,s.NF)({},l.Ji.SUCCESS_PURCHASE.replace("%app_id%",this.appId),{amount:null==(a=this.productStatData)?void 0:a.price,auth:i,dialog_type:this.dialogType,order_price:null==(r=this.productStatData)?void 0:r.price}),(0,s.NF)({withClickDaemon:!0},l.Ji.SUCCESS_PURCHASE_TRANSACTION,m({appId:this.appId,amount:null==(n=this.productStatData)?void 0:n.price,auth:i,dialog_type:this.dialogType,order_price:null==(o=this.productStatData)?void 0:o.price},e.provider&&{payment_system:e.provider}))})):this.warnAboutDestroyed("reachGoals")}warnAboutDestroyed(e){console.warn(`No data in the MetrikaStatesLogger when call '${e}'. Maybe already destroyed.`)}addProductInCart({gameInfo:e}){var t,a;if(!this.productStatData||!e)return void(0,o.H)({block:i.W.METRIKA,level:"warn",message:"Error in `addProductInCart`",prefix:"[Ecommerce]"});const r=window.appData.payCurrency;(0,s._H)({currencyCode:r,add:{products:[{id:this.productStatData.id,name:this.productStatData.title,price:this.productStatData.price,brand:null==(t=e.publisher)?void 0:t.name,category:null==(a=e.categoryNames)?void 0:a[0],quantity:1}]}})}buyProduct({gameInfo:e}){var t,a;if(!this.productStatData||!e)return void(0,o.H)({block:i.W.METRIKA,level:"warn",message:"Error in `buyProduct`",prefix:"[Ecommerce]"});const r=window.appData.payCurrency;(0,s._H)({currencyCode:r,purchase:{actionField:{id:this.appId},products:[{id:this.productStatData.id,name:this.productStatData.title,price:this.productStatData.price,brand:null==(t=e.publisher)?void 0:t.name,category:null==(a=e.categoryNames)?void 0:a[0],quantity:1}]}})}buyPlatformProduct({id:e,price:t}){(0,s._H)({promoClick:{promotions:[{id:"yanpopup",name:"generalpopup",creative:String(t),position:String(e)}]}})}}},97975:(e,t,a)=>{a.d(t,{Z:()=>k});var r=a(84819),n=a(63904),s=a.n(n),o=a(87363),i=a.n(o),l=a(53726),d=a(4824),c=a(32922),u=a(82346),h=a(58e3);const p=a(69833).Z;var m=a(83388),v=a(83326),g=a(97808),y=a(76488),f=a(11744),w=a(41952);const b=s().with("play-payments");class E extends d.P{constructor(e,t){super(e),this.paymentsRootRef=i().createRef(),this.onExternalPaymentsMessage=(e,t)=>{const{action:a,data:n}=e.data;switch(a){case"get-env":t({data:{paymentMode:(0,f.Z)()?"":void 0}});break;case"get-catalog":const{lang:e}=n;(0,u.Xp)({lang:e||this.state.defaultLang}).then((e=>{t({data:e})})).catch((e=>{t({error:(0,h.E)(e)})}));break;case"purchase-start":{if((0,r.v_)({on:"payments_improvements.inapp"}))return;if(this.state.purchaseDialog||this.state.balanceDialog)return void this.trembleDialog();const{paymentsConfig:e,purchaseConfig:a}=n;this.purchaseStartMessagingCallback=t,this.setState({dialogType:m.Z.PURCHASE,balanceDialog:null,purchaseDialog:{basicSupportPaymentRequest:this.state.basicSupportPaymentRequest,isPlatformPurchase:!1,paymentsConfig:e,purchaseConfig:a}});break}case"get-purchases":{const{paymentsConfig:e}=n;(0,u.GP)({paymentsConfig:e,defaultLang:this.state.defaultLang}).then((({data:e,signature:a})=>{t({data:{data:e,signature:a}})})).catch((e=>{t({error:(0,h.E)(e)})}));break}case"purchase-consume":{const{token:e}=n;(0,u.G0)({token:e}).then((e=>{t({data:{token:e}})})).catch((e=>{t({error:(0,h.E)(e)})}));break}}},this.onInternalPaymentsMessage=(e,t)=>{const{action:a,data:r}=e.data;switch(a){case"balance-refill":{const{paymentsConfig:e}=r;this.openBalanceDialog(e);break}case"purchase-start":this.onExternalPaymentsMessage(e,t);break;case"platform-purchase-start":this.startPlatformPurchase(r,t)}},this.onBalanceSuccess=()=>{this.setState({balanceDialog:null})},this.onBalanceError=e=>{y.XK||console.warn(e),this.setState({balanceDialog:null})},this.onPurchaseSuccess=e=>{var t;null==(t=this.purchaseStartMessagingCallback)||t.call(this,{data:e}),this.setState({purchaseDialog:null})},this.onPurchaseError=e=>{var t;null==(t=this.purchaseStartMessagingCallback)||t.call(this,e),this.setState({purchaseDialog:null})},this.onPlatformPurchaseSuccess=e=>{var t;null==(t=this.startPlatformMessagingCallback)||t.call(this,{data:e}),this.setState({purchaseDialog:null})},this.onPlatformPurchaseError=e=>{var t;null==(t=this.startPlatformMessagingCallback)||t.call(this,e),this.setState({purchaseDialog:null})},this.trembleDialog=()=>{this.setState({isTrembling:!1},(()=>{requestAnimationFrame((()=>{this.setState({isTrembling:!0}),window.setTimeout((()=>{this.setState({isTrembling:!1})}),2e3)}))}))},this.handleCreateBalanceRefilled=e=>{this.setState({balanceRefilled:e})},this.handleBalanceRefilledClose=()=>{var e,t;null==(t=null==(e=this.state.balanceRefilled)?void 0:e.onClose)||t.call(e),this.setState({balanceRefilled:null})},this.handleBalanceRefilledBuyMore=()=>{g.Z.post({type:"payments",action:"balance-refill",data:{paymentsConfig:{lang:this.context.lang}}}),this.handleBalanceRefilledClose()},this.renderContent=()=>i().createElement(i().Fragment,null,this.renderBalanceRefilled(),this.renderDialog()),this.state={balanceDialog:null,balanceRefilled:null,dialogType:m.Z.BALANCE,purchaseDialog:null,basicSupportPaymentRequest:!1,isTrembling:!1,defaultLang:t.lang,hasMounted:!1}}componentDidMount(){this.setState({basicSupportPaymentRequest:(0,f.Z)(),hasMounted:!0}),this.initMessaging()}componentDidUpdate(e,t){var a,r;(null===t.balanceDialog&&null!==this.state.balanceDialog||null!==t.balanceDialog&&null===this.state.balanceDialog)&&(null==(r=(a=this.props).onDialogChange)||r.call(a,Boolean(this.state.balanceDialog)))}initMessaging(){g.Z.onExternalMessage("payments",this.onExternalPaymentsMessage),g.Z.onInternalMessage("payments",this.onInternalPaymentsMessage)}startPlatformPurchase(e,t){if(this.props.disablePlatformPurchase)return;if(this.state.purchaseDialog||this.state.balanceDialog)return void this.trembleDialog();const{paymentsConfig:a,purchaseConfig:r}=e;this.startPlatformMessagingCallback=t,this.setState({dialogType:m.Z.PURCHASE,balanceDialog:null,purchaseDialog:{basicSupportPaymentRequest:this.state.basicSupportPaymentRequest,paymentsConfig:a,purchaseConfig:r,isPlatformPurchase:!0}})}openBalanceDialog(e){this.state.purchaseDialog||this.state.balanceDialog?this.trembleDialog():this.setState({dialogType:m.Z.BALANCE,purchaseDialog:null,balanceDialog:{basicSupportPaymentRequest:this.state.basicSupportPaymentRequest,paymentsConfig:e}})}renderBalanceRefilled(){const{balanceRefilled:e,purchaseDialog:t}=this.state,{balance:a}=this.props;if(e){const r=t?"balance-refilled.ok":"balance-refilled.return-to-game";return i().createElement(c.Z,{appId:this.context.playPageData.gameInfo.appId,balance:"number"==typeof a?a:void 0,diff:Number(e.diff),imgSrc:e.img,isPurchase:Boolean(t),isRetpathUser:!0,orderPrice:e.orderPrice,passportOrigin:w._4.GamesBalanceRefilled,playRecoveryCode:e.recoveryCode,returnButtonText:this.props.getText(r),onBuyMore:this.handleBalanceRefilledBuyMore,onClose:this.handleBalanceRefilledClose})}return null}renderDialog(){const{hideAuthDialog:e}=this.props,{balanceDialog:t,purchaseDialog:a,isTrembling:r,dialogType:n}=this.state;return t?i().createElement(p,{basicSupportPaymentRequest:t.basicSupportPaymentRequest,dialogType:n,hideAuthDialog:e,isTrembling:r,paymentsConfig:t.paymentsConfig,rootRef:this.paymentsRootRef,onBalanceError:this.onBalanceError,onBalanceSuccess:this.onBalanceSuccess,onCreateBalanceRefilled:this.handleCreateBalanceRefilled}):a?i().createElement(p,{basicSupportPaymentRequest:a.basicSupportPaymentRequest,dialogType:n,hideAuthDialog:e,isPlatformPurchase:a.isPlatformPurchase,isTrembling:r,paymentsConfig:a.paymentsConfig,purchaseConfig:a.purchaseConfig,rootRef:this.paymentsRootRef,onCreateBalanceRefilled:this.handleCreateBalanceRefilled,onPlatformPurchaseError:this.onPlatformPurchaseError,onPlatformPurchaseSuccess:this.onPlatformPurchaseSuccess,onPurchaseError:this.onPurchaseError,onPurchaseSuccess:this.onPurchaseSuccess}):null}render(){return this.state.hasMounted?i().createElement("div",{className:b(),ref:this.paymentsRootRef},this.renderContent()):null}}const k=(0,l.$j)((function(e){return{balance:(0,v.n)(e),getText:e.getText,payCurrency:e.user.payCurrency}}))(E)},68153:(e,t,a)=>{a.d(t,{Z:()=>f});var r=a(47496),n=a(87363),s=a.n(n),o=a(4824),i=a(95207),l=a(33252),d=a(13377),c=a(10592),u=Object.defineProperty,h=Object.defineProperties,p=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,v=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,y=(e,t,a)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;class f extends o.P{constructor(){super(...arguments),this.handleEvent=(e,t,a)=>{const{type:n,data:s={}}=e.data,{shouldWaitIframeButtonClick:o=!0,onStarted:c}=this.props,u=(e,n)=>{(0,l.H)({block:d.W.TRUST,message:`[Payment Trust] ${n||e}`}),a.rejectPromise(t,new r.Z({code:"PAYMENT_FAILURE",message:e}))};switch((0,i.qu)(`Handle trust event '${n}'`,JSON.stringify(e.data,null,"\t")),n){case"on_resize":a.setHeight(t,e.data.data.height);break;case"form-submit":null==c||c();break;case"trust-challenge-end":if(o)return;s.success?a.resolvePromise(t):u("Payment fail.","Fail");break;case"before_submit":a.startPurchase();break;case"payment-loaded":a.setReadyState(t,!0,150);break;case"frame-error":u("Frame error.");break;case"payment-status":"success"===s.value&&a.resolvePromise(t);break;case"payment-complete":"success"===s.status&&a.resolvePromise(t);break;case"payment-check-failure":u("Payment check failure.","Check failure");break;case"payment-update-failure":u("Payment update failure.","Update failure");break;case"payment-fail":u("Payment fail.","Fail");break;case"payment-timeout":{const e=new r.Z({code:"PAYMENT_TIMEOUT",message:"Payment timeout."});a.rejectPromise(t,e);break}case"3ds-status":"3ds-success"===s?a.resolvePromise(t):"3ds-failure"===s&&u("Payment 3ds failure.","3ds failure");break;case"redirect-callback":a.resolvePromise(t);break;case"sbp-bank-selected":window.open(s,"_self")}}}isValidEvent(e){return t=e.origin,!!/^https:\/\/(.+\.){0,7}yandex\.(ru|by|kz|uk|uz|com|com\.tr)(:\d+)?$/.test(t)&&!(!e.data||"YandexTrustPaymentForm"!==e.data.source);var t}render(){const{props:e}=this;return s().createElement(i.ZP,(t=((e,t)=>{for(var a in t||(t={}))v.call(t,a)&&y(e,a,t[a]);if(m)for(var a of m(t))g.call(t,a)&&y(e,a,t[a]);return e})({},e),a={handleEvent:this.handleEvent,isValidEvent:this.isValidEvent,provider:c.qY.TRUST},h(t,p(a))));var t,a}}},29067:(e,t,a)=>{a.d(t,{Z:()=>w});var r=a(47496),n=a(87363),s=a.n(n),o=a(4824),i=a(95207),l=a(33252),d=a(48136),c=a(13377),u=a(10592),h=Object.defineProperty,p=Object.defineProperties,m=Object.getOwnPropertyDescriptors,v=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,f=(e,t,a)=>t in e?h(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;class w extends o.P{constructor(){super(...arguments),this.handleEvent=(e,t,a)=>{let n;try{n=JSON.parse(e.data)}catch(t){return void(0,l.H)({block:c.W.XSOLLA,message:"[Payment Xsolla] Error while attempting to parse Xsolla data",additional:{data:e.data}},t)}switch(null==n?void 0:n.action){case"resize":return void a.setHeight(t,n.height);case"finish":const e=new r.Z({code:"PAYMENT_FAILURE",message:"Payment cancelled."});return(0,l.H)({block:c.W.XSOLLA,message:"[Payment Xsolla] Cancelled"}),void a.rejectPromise(t,e)}switch(null==n?void 0:n.command){case"open-paystation":return void a.setReadyState(t,!0,150);case"resize":return void a.setHeight(t,n.data.dimensions.height);case"change-status":switch(n.data.value){case"done":return void(this.resolveTimeoutId=window.setTimeout((()=>{delete this.resolveTimeoutId,a.resolvePromise(t)}),2e3));case"processing":return void a.startPurchase();case"canceled":return(0,l.H)({block:c.W.XSOLLA,message:"[Payment Xsolla] Declined"}),void a.afterPurchase()}}}}isValidEvent(e){return(0,d.W)(e.origin)}render(){const{props:e}=this;return s().createElement(i.ZP,(t=((e,t)=>{for(var a in t||(t={}))g.call(t,a)&&f(e,a,t[a]);if(v)for(var a of v(t))y.call(t,a)&&f(e,a,t[a]);return e})({},e),a={handleEvent:this.handleEvent,isValidEvent:this.isValidEvent,provider:u.qY.XSOLLA},p(t,m(a))));var t,a}}},95207:(e,t,a)=>{a.d(t,{qu:()=>Z,ZP:()=>V});var r=a(47496),n=a(6893),s=a(90366),o=a(73694),i=a(63904),l=a.n(i),d=a(87363),c=a.n(d),u=a(53726),h=a(19146),p=a(38699),m=a(4824),v=a(59986),g=a(46986),y=a(36172),f=a(96452),w=a(97808),b=a(21466),E=a(34711),k=a(7991),S=a(34967),A=a(81941),I=a(41811),P=a(40656),T=a(93298),C=a(49659),R=a(10592),D=a(89592),L=a(29008),O=Object.defineProperty,_=Object.defineProperties,x=Object.getOwnPropertyDescriptors,N=Object.getOwnPropertySymbols,B=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable,H=Math.pow,F=(e,t,a)=>t in e?O(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,$=(e,t)=>{for(var a in t||(t={}))B.call(t,a)&&F(e,a,t[a]);if(N)for(var a of N(t))M.call(t,a)&&F(e,a,t[a]);return e},W=(e,t)=>_(e,x(t));const Z=(0,T.M$)("PurchaseIframeTemplate",T.XG.Dev),G=l().with("play-purchase-iframe"),j=()=>{let e=`${(0,C.e)().origin}${window.YandexGamesSDK.baseUrl}/sdk/payments/trust-redirect.html`;return e=(0,b.EP)(e),e},U=20*P.yR;class q extends m.P{constructor(e){super(e),this.isIOSVersionLessThan14=!(0,n.LR)(window.navigator.userAgent,n.jj,{major:14,minor:0,patch:0}),this.removeIframeID=e=>{const t=this.state.iframeIDs;delete t[e],this.setState({iframeIDs:$({},t)})},this.setIframeError=(e,t)=>{const a=this.state.iframeIDs[e];this.setState((r=>({iframeIDs:W($({},r.iframeIDs),{[e]:W($({},a),{error:t||"UNKNOWN"})})})))},this.setIframeRef=e=>t=>{const a=this.state.iframeIDs[e];a&&!a.iframeElement&&this.setState((r=>({iframeIDs:W($({},r.iframeIDs),{[e]:W($({},a),{iframeElement:t})})})))},this.state={iframeIDs:{},activeFrameID:""}}componentDidMount(){window.addEventListener("message",this),this.create()}componentWillUnmount(){window.removeEventListener("message",this)}componentDidUpdate(e){const{amount:t,packId:a,price:r}=this.props;`${t}_${a}_${r}`!=`${e.amount}_${e.packId}_${e.price}`&&this.create()}handleEvent(e){if(!this.props.isValidEvent(e))return;const t=e.source,a=Object.values(this.state.iframeIDs).filter((e=>{var a;return(null==(a=e.iframeElement)?void 0:a.contentWindow)===t}))[0],r=null==a?void 0:a.id;r?this.props.handleEvent(e,r,this):console.warn("Can not find promiseId for frame",Object.keys(this.state.iframeIDs),$({},this.state.iframeIDs))}setHeight(e,t){const a=this.state.iframeIDs[e];this.setState((r=>({iframeIDs:W($({},r.iframeIDs),{[e]:W($({},a),{height:t})})}))),w.Z.post({type:"purchase-form",action:"on_resize"})}startPurchase(){w.Z.post({type:"purchase-form",action:"before_submit"})}afterPurchase(){w.Z.post({type:"purchase-form",action:"after_submit"})}setReadyState(e,t,a=0){const r=this.state.iframeIDs[e];r.setReadyStateTimeout&&window.clearTimeout(r.setReadyStateTimeout),r.setReadyStateTimeout=window.setTimeout((()=>{const a=this.state.iframeIDs[e];this.setState((r=>({iframeIDs:W($({},r.iframeIDs),{[e]:W($({},a),{isReady:t})})})))}),a)}resolvePromise(e){const t=this.state.iframeIDs[e],{paymentService:a}=this.props;if(!t)return void Promise.reject(new Error("Can not find promise"));const{payCurrency:n,price:o,token:i}=t;if(t.inProgress)return void Z(`resolve promise with ${i} already started`);const l=this.state.iframeIDs[e];if(this.setState((t=>({iframeIDs:W($({},t.iframeIDs),{[e]:W($({},l),{inProgress:!0})})}))),Z("resolve promise with token",i),!i){const a=new r.Z({code:"PAYMENT_FAILURE",message:"No trust token."});return this.setIframeError(t.id,null==a?void 0:a.code),void this.props.onReject(e,a)}w.Z.post({type:"auth",action:"has-auth"}).then((({data:e})=>{const{hasAuth:t}=e;a!==R.ob.XSOLLA&&(0,S.NF)({withClickDaemon:!0},D.Ji.PURCHASES_PURCHASE_SUCCESS,{amount:this.props.value,auth:t,dialog_type:this.props.dialogType,order_price:this.props.price,appId:this.context.playPageData.gameInfo.appId,payment_system:this.props.provider})})),this.setReadyState(e,!1),this.props.setUserBalanceFetchingStatus(),function(e){const t=P.WT;let a=0;return new Promise(((n,s)=>{function o(){Z("checkPurchaseStatus"),(0,v.w$)(`get-status?token=${encodeURIComponent(e)}`).then((e=>{"success"===e.status?n(e):"failure"===e.status?s(new r.Z({code:"PAYMENT_FAILURE",message:"Failure payment status."})):i()})).catch(i)}function i(){a+=1;const e=t*Math.ceil(H(1.4,Math.ceil(a/10)));a<100?setTimeout(o,e):s(new r.Z({code:"PAYMENT_FAILURE",message:"Can not get payment status."}))}o()}))}(i).then((t=>{Z("checkPurchaseStatus resolve with response",JSON.stringify(t,null,"\t")),this.props.onResolve(e,t,{balanceDiff:this.props.balanceDiff,price:this.state.iframeIDs[e].price}),t.status===R.mv.SUCCESS&&(0,A.i)({payCurrency:n,price:o},(0,s.u)()),this.removeIframeID(e)})).catch((t=>{this.setReadyState(e,!0),this.setIframeError(e,t.code),this.props.onReject(e,t),this.removeIframeID(e)}))}rejectPromise(e,t){this.state.iframeIDs[e]?(this.setIframeError(e,null==t?void 0:t.code),this.props.onReject(e,t),this.removeIframeID(e)):Promise.reject(new Error("Can not find promise"))}create(){const{context:e}=this,t=e.playPageData.gameInfo,{tld:a}=e,{amount:n,dialogType:s,email:o,packId:i,payCurrency:l,price:d,reason:c,paymentService:u}=this.props;Z("BaseManager.create; packId, amount: ",i,n);const h=`${n}_${i}_${d}`,m=this.state.iframeIDs[h];if(m)return this.setState({activeFrameID:h}),void(Math.abs(Date.now()-m.timestamp)>=U&&(this.props.onReject(h,new r.Z({code:"PAYMENT_FAILURE",message:"Purchase frame was expired"})),this.removeIframeID(h)));this.setState((e=>({activeFrameID:h,iframeIDs:W($({},e.iframeIDs),{[h]:{payCurrency:l,price:d,inProgress:!1,id:h,src:"about:blank",token:"",dataAuth:"",timestamp:Date.now()}})})));const g={devParams:{developer_payload:JSON.stringify({"css-theme":this.props.darkTheme?"blackAndWhite":"transparentAndWhite",template:"checkout"})},clid:(0,E.X)(),lang:e.lang,payCurrency:l,paymentService:u,platform:"desktop",reason:c,redirect:j()};if(u===R.ob.XSOLLA){const e=this.props.darkTheme?"default_dark":"default";g.paymentFormUiSettings={theme:e}}if(i)g.productId=i;else{if(!n)return void console.error("No pack or amount.");g.amount=n}o&&(g.iGamesUserEmail=o),c===R.YC.PURCHASE&&parseInt(t.appId,10)&&(g.appId=parseInt(t.appId,10));const y=(0,k.W5)(),b=y?{[I.G6]:y}:void 0;(0,v.U)("create",g,b).then((e=>{var t,n;if(e&&e.url&&e.token){const r=new URL(e.url);if(u===R.ob.PSP&&!/^(.+\.){0,7}yandex\.(ru|by|kz|uk|uz|com|com\.tr)$/.test(r.host)){console.error("Bad Trust url",r.href);const t=p.A.includes(a)?a:"ru";r.host=`trust.yandex.${t}`,e.url=r.href}this.setState((t=>({iframeIDs:W($({},t.iframeIDs),{[h]:{payCurrency:l,price:d,inProgress:!1,id:h,src:e.url,token:e.token,dataAuth:e.email?"false":"true",timestamp:Date.now()}})})));const{userData:s}=this.props;!e.email||s.uid&&s.email?w.Z.post({type:"purchase-form",action:"auth"}):(w.Z.post({type:"purchase-form",action:"lock_email",data:{email:e.email}}),null==(n=(t=this.props).onCreateIFrame)||n.call(t,e.email))}else this.setIframeError(h,"REQUEST_FAILURE"),this.props.onReject(h,new r.Z({code:"PAYMENT_FAILURE",message:"Can not get payment URL."})),this.removeIframeID(h)})).catch((e=>{w.Z.post({type:"auth",action:"has-auth"}).then((({data:t})=>{const{hasAuth:a}=t;(0,S.NF)({withClickDaemon:!0},D.Ji.PURCHASES_PURCHASE_PAYMENT_SYSTEM_LOAD_ERROR,{auth:a,dialog_type:s,message:e.message,appId:this.context.playPageData.gameInfo.appId,payment_system:this.props.provider})})),(0,f.f1)(e)?this.setIframeError(h,"UNAUTHORIZED"):this.setIframeError(h,"REQUEST_FAILURE"),this.props.onReject(h,e),this.removeIframeID(h)}))}render(){const{iframeIDs:e,activeFrameID:t}=this.state,{isInvisible:a,fullScreen:r,getText:n,hasSmallSpinWithText:s}=this.props,i=Object.values(e),{isIOS:l}=(0,L.AK)(this.context.platform);return i.map((e=>{const i=e.isReady;return c().createElement("div",{className:G({"state-ready":e.isReady,"full-screen":Boolean(r),hidden:e.id!==t||a,"ios-safari":this.context.isSafari&&l,"ios-less-14":l&&this.isIOSVersionLessThan14}),key:e.id,style:{height:e.height?`${e.height}px`:"auto"}},c().createElement("div",{className:G("holder")},c().createElement("iframe",{className:G("frame"),"data-auth":e.dataAuth,"data-token":e.token,ref:this.setIframeRef(e.id),sandbox:"allow-popups allow-forms allow-scripts allow-same-origin allow-top-navigation-by-user-activation",src:e.src})),!i&&c().createElement("div",{className:G("spin-wrapper")},s?c().createElement(o.y,{size:32,spinning:!0,text:e.setReadyStateTimeout?n("spin.wait"):n("spin.loading"),thickness:"bold",view:"default"}):c().createElement(o.y,{size:76,spinning:!0,thickness:"bold",view:"default"})))}))}}const V=(0,u.$j)((function(e){return{darkTheme:(0,y.Up)(e),userData:e.userData,getText:e.getText}}),(function(e){return(0,h.DE)({setUserBalanceFetchingStatus:g.k1},e)}))(q)},19280:(e,t,a)=>{a.d(t,{Z:()=>m});var r,n=a(78422);const s=Symbol("codePath"),o=Symbol("appId"),i=Symbol("sendMetricaParams"),l=Symbol("currencyPriceStat"),d=Symbol("sendOnceCurrencyCodeStat"),c=Symbol("getCurrencyImageUrlPrefix"),u=Symbol("currencyCodeStat");class h{constructor(e){this._productData=e,this[r]=()=>{this[d]=()=>{},this[i](this[u])}}get id(){return this._productData.id}get title(){return(0,n.Z)(this._productData.title)}get description(){return(0,n.Z)(this._productData.description)}get imageURI(){const{image:e}=this._productData;if(e&&"object"==typeof e&&"url_prefix"in e){const t=String(e.url_prefix);return/\.(png|jpg|svg)$/.test(t)?t:`${t}/default256x256`}return"https://yastatic.net/s3/games-static/static-data/images/payments/default-product-image.png"}get price(){return`${this.priceValue} ${this.priceCurrencyCode}`}get priceValue(){return String(this._productData.price)}get priceCurrencyCode(){this[d]()}get[s](){return""}getPriceCurrencyImage(e="small"){if("svg"===e)return`${this[c]()}/currency-icon-m.svg`;let t="s";switch(e){case"medium":case"small":t=e.charAt(0);break;default:console.warn(`Unknown size value ('${e}')`)}const a=window.devicePixelRatio>=2;return`${this[c]()}/currency-icon-${t}${a?"@2x":""}.png`}toJSON(){return{id:this.id,title:this.title,description:this.description,imageURI:this.imageURI,price:this.price,priceValue:this.priceValue,priceCurrencyCode:this.priceCurrencyCode}}get[u](){return{borrowParams:{payments:{appId:this[o],productCurrencyCodeGet:!0}}}}[(r=d,c)](){return`//yastatic.net/s3/games-static/static-data/images/payments/sdk${this[s]}`}get[l](){return this._productData.currencyPrice}}var p=a(41576);class m extends h{get pricePlusValue(){return String(this._productData.pricePlus||"")}get priceRegularValue(){return String(this._productData.priceRegular)}get[o](){throw(0,p.r)()}[i](e){}isDiscounted(){const{price:e,priceRegular:t}=this._productData;return e<t}toJSON(){return{id:this.id,title:this.title,description:this.description,imageURI:this.imageURI,price:this.price,pricePlusValue:this.pricePlusValue,priceRegularValue:this.priceRegularValue,priceValue:this.priceValue,priceCurrencyCode:this.priceCurrencyCode}}}},83388:(e,t,a)=>{a.d(t,{Z:()=>r});var r=(e=>(e.BALANCE="balance",e.PURCHASE="purchase",e))(r||{})},4230:(e,t,a)=>{a.d(t,{_Z:()=>S,ii:()=>A,kr:()=>E,xG:()=>b});var r=a(67748),n=a.n(r),s=a(34711),o=a(35090),i=a(48810),l=a(78740),d=Object.defineProperty,c=Object.defineProperties,u=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,v=(e,t,a)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,g=(e,t)=>{for(var a in t||(t={}))p.call(t,a)&&v(e,a,t[a]);if(h)for(var a of h(t))m.call(t,a)&&v(e,a,t[a]);return e},y=(e,t)=>c(e,u(t));const f=e=>{let t;try{t=JSON.parse(e)}catch(e){t=[]}return Array.isArray(t)?t:[]},w=(e,t)=>{const a=Array.isArray(e)?e:f(e);t&&a.push(t),(0,i.Ur)(l.VM,JSON.stringify(a))};function b(e){const t=(0,i.dq)(l.VM);t.wasError||!t.value?(0,i.Ur)(l.VM,JSON.stringify([e])):w(t.value,e)}function E(e,t){return 0===t.length?t:t.length>e?t=t.slice(0,e):(t.length<e&&(t=[...Array(Math.ceil(e/t.length))].reduce(((e,a,r)=>e.concat(t.map(((e,a)=>y(g({},e),{appID:e.appID+r,title:e.title+` (${r*t.length+a+1})`}))))),[]).slice(0,e)),t)}const k=["played","user_profile_recent_games"];function S({appId:e,hasMounted:t,inGamePage:a,isDistGame:r,locationHash:d,locationSearch:c,showExceptNavigationFromPlayedGames:u,showOnRedirectFromCatalog:h}){if(r)return!1;const p=new URLSearchParams(c);if("distrib"===p.get("utm_source")||p.has("clid"))return!1;if(a)return!0;if(!t)return!0;if((0,s.X)())return!1;if(u){const e=n().parse(d);if(e.pos&&"string"==typeof e.pos)try{if(k.includes(JSON.parse(e.pos).listType))return!1}catch(e){}}else if(!h&&(0,o.Oo)())return!1;const m=(0,i.dq)(l.VM);return!(!m.wasError&&m.value&&f(m.value).includes(e))}function A(){"undefined"!=typeof document&&document.body.classList.contains("with-similar-games")&&document.body.classList.remove("with-similar-games")}},1481:(e,t,a)=>{a.d(t,{Z:()=>n});var r=a(87363);const n=({onError:e})=>((0,r.useEffect)((()=>{null==e||e(new Error("Promo chunk wasnt loaded"))}),[e]),null)},86880:(e,t,a)=>{a.d(t,{Z:()=>b});var r=a(46210),n=(a(8804),a(63904)),s=a.n(n),o=a(87363),i=a.n(o),l=a(45112),d=a(90239);const c=s().with("progress-ring");class u extends o.Component{render(){const e=100-Math.min(100,((this.props.current||0)-1)/(this.props.total-1)*100),t=42*Math.PI,a=t-e/100*t;return i().createElement("div",{className:c()},i().createElement("svg",{height:48,width:48},i().createElement("circle",{className:c("circle-background"),cx:24,cy:24,fill:"transparent",r:21,strokeDasharray:`${t} ${t}`,strokeWidth:3}),i().createElement("circle",{className:c("circle"),cx:24,cy:24,fill:"transparent",r:21,strokeDasharray:`${t} ${t}`,strokeDashoffset:a,strokeWidth:3})),i().createElement("span",{className:c("countdown")},this.props.current))}}var h=a(40184),p=a(11510),m=a(41811),v=a(40656),g=a(15771),y=a(90380),f=a(49659);const w=s().with("rewarded-counter"),b=({onClose:e,onDone:t,paused:a=!1,seconds:n,text:s})=>{const c=(0,p.T)(),{abt:{flags:b}}=(0,h.b)(),{current:E}=(0,o.useRef)(null!==(0,r.mm)((0,f.e)().href)),[k,S]=(0,o.useState)(E?1:Math.floor(n)),A=k>0;return(0,l.Yz)((()=>{(!0!==(0,g.RM)(b,y.Z.advStopRewardedCounterOnLeave)||!document.hidden&&document.hasFocus())&&S((e=>e-1))}),A&&!a?v.WT:null),(0,o.useEffect)((()=>{A||null==t||t()}),[A,t]),A?i().createElement("div",{className:w()},i().createElement("span",{className:w("text")},s||c("adv.rewarded.countdown.text")),i().createElement(u,{current:Math.max(0,k),total:n})):i().createElement("div",{className:w()},i().createElement(d.Z,{source:m.h0.REWARDED_COUNTER,type:"rewarded",onClick:e}))}},95968:(e,t,a)=>{a.d(t,{Z:()=>n});var r=a(56099);const n={fullscreenEnabled:(0,r.Z)("fullscreenEnabled"),fullscreenElement:(0,r.Z)("fullscreenElement"),requestFullscreen:(0,r.Z)("requestFullscreen"),exitFullscreen:(0,r.Z)("exitFullscreen"),fullscreenchange:(0,r.Z)("fullscreenchange")}},71852:(e,t,a)=>{a.d(t,{Z:()=>S});var r=a(63904),n=a.n(r),s=a(87363),o=a.n(s),i=a(53726),l=a(64264),d=a(93569),c=a(1779),u=a(36172),h=Object.defineProperty,p=Object.defineProperties,m=Object.getOwnPropertyDescriptors,v=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,f=(e,t,a)=>t in e?h(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,w=(e,t)=>{for(var a in t||(t={}))g.call(t,a)&&f(e,a,t[a]);if(v)for(var a of v(t))y.call(t,a)&&f(e,a,t[a]);return e},b=(e,t)=>p(e,m(t));const E=n().with("section-header");class k extends s.Component{renderText(){const{icon:e,iconMix:t,title:a,darkTheme:r}=this.props,n=!r,s=r;return o().createElement("span",{className:E("text")},e&&("string"==typeof e?o().createElement(d.Z,{className:`${E("icon",{light:n,dark:s})} ${t}`,type:e}):e),a)}renderLink(){var e;const{categoryName:t,hideShowAllLink:a,titleLink:r}=this.props;return t?a?this.renderText():o().createElement(l.Z,{categoryName:t,clickDaemonParams:b(w({},null==(e=this.props)?void 0:e.clickDaemonParams),{block:`cat_${t}`,elem:c.a$.BLOCK_TITLE}),mix:E("category-link"),pathname:r},this.renderText()):null}renderCustomLink(){const{customLink:e}=this.props;return e?o().createElement("span",{className:E("all-link"),onClick:e.onClick},e.content):null}renderShowAllLink(){var e;const{categoryName:t,hideShowAllLink:a,getText:r}=this.props;return!t||a?null:o().createElement(l.Z,{categoryName:t,clickDaemonParams:b(w({},null==(e=this.props)?void 0:e.clickDaemonParams),{block:`cat_${t}`,elem:c.a$.BLOCK_ALL_BUTTON}),mix:E("all-link")},r("category-link.all.text"))}render(){const{categoryName:e,customLink:t,headLevel:a,mix:r}=this.props,n=`h${a||2}`;return o().createElement("div",{className:`${E()} centered-content ${r}`},o().createElement(n,{className:`${E("header")}`},e?this.renderLink():this.renderText()),t?this.renderCustomLink():this.renderShowAllLink())}}k.defaultProps={hideShowAllLink:!1,mix:""};const S=(0,i.$j)((function(e){return{darkTheme:(0,u.Up)(e),getText:e.getText}}))(k)},15987:(e,t,a)=>{a.d(t,{w:()=>r});var r=(e=>(e.MENU="menu",e.TIMER="timer",e))(r||{})},29810:(e,t,a)=>{a.d(t,{Z:()=>d});var r=a(87363),n=a(53726),s=a(19146),o=a(46986),i=a(96821),l=a(69136);const d=(0,n.$j)((function(e){return{appState:e}}),(function(e){return(0,s.DE)({fetchUserBalance:o.Zc,setUserBalance:o.v},e)}))((e=>{const{fetchUserBalance:t,setUserBalance:a}=e,n="undefined"!=typeof window,{appState:s}=e,o=s.userData.uid,d=(0,r.useRef)(o),c=(0,r.useMemo)((()=>n&&(0,i.Z)((()=>s)).sse||!1),[s,n]);return(0,r.useEffect)((()=>{c&&d.current!==o&&(d.current=o,c.changeAuth(o))}),[c,o]),(0,r.useEffect)((()=>{if(!c)return;const e=[],r=c.subscribe(l.Xn.BALANCE_CHANGED,(()=>{s.user.balance.ignoreBalanceEvents||t({forceFetch:!0})})),n=c.subscribe(l.Xn.BALANCE_UPDATE,(e=>{s.user.balance.ignoreBalanceEvents||a(e.value)}));return e.push(r),e.push(n),()=>{e.forEach((e=>e()))}}),[t,a,c,s.user.balance.ignoreBalanceEvents]),null}))},68316:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a(89775).Z},53603:(e,t,a)=>{a.d(t,{I:()=>i,s:()=>l});var r=a(87363),n=a.n(r),s=a(78675);const o=(0,r.createContext)(null),i=e=>{const[t,a]=(0,r.useState)(!1);return n().createElement(o.Provider,{value:{isReady:t,setIsReady:a}},e.children)},l=()=>(0,s.C)({context:o,hookName:"useWithReady",contextName:"WithReadyContext"})},63662:(e,t,a)=>{a.d(t,{b:()=>u});var r=a(87363),n=a(1338),s=Object.defineProperty,o=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,d=(e,t,a)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,c=(e,t)=>{for(var a in t||(t={}))i.call(t,a)&&d(e,a,t[a]);if(o)for(var a of o(t))l.call(t,a)&&d(e,a,t[a]);return e};function u(e){const t=(0,r.useContext)(n.O);return{metrikaParams:(0,r.useMemo)((()=>(null==e?void 0:e.metrikaParams)?c(c({},t.metrikaParams),null==e?void 0:e.metrikaParams):t.metrikaParams),[t.metrikaParams,null==e?void 0:e.metrikaParams]),clickDaemonParams:(0,r.useMemo)((()=>(null==e?void 0:e.clickDaemonParams)?c(c({},t.clickDaemonParams),null==e?void 0:e.clickDaemonParams):t.clickDaemonParams),[t.clickDaemonParams,null==e?void 0:e.clickDaemonParams])}}},5901:(e,t,a)=>{a.d(t,{$:()=>f});var r=a(87363),n=a(61006),s=a(35184),o=a(5825),i=a(36918),l=a(40184),d=a(22823),c=a(41811),u=a(49659),h=Object.defineProperty,p=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,g=(e,t,a)=>t in e?h(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,y=(e,t)=>{for(var a in t||(t={}))m.call(t,a)&&g(e,a,t[a]);if(p)for(var a of p(t))v.call(t,a)&&g(e,a,t[a]);return e};function f(e={}){const{rtxReqid:t}=(0,l.b)(),a=(0,o.C)((e=>e.rtxReqid)),h=function(){const e=(0,o.C)((e=>e.tagID)),t=(0,o.C)((e=>{var t;return null==(t=e.middleLayerInGameData)?void 0:t.appId})),a=(0,n.j)(),r=(0,s.M)();return(0,i.L8)({currentTab:a,tagID:e,isErrorPage:r,middleLayerAppId:t})}();return(0,r.useCallback)(((r,n)=>{var s;const o=r.action.name,i={url:(0,u.e)().href,rtx_reqid:t||a||"",page:h,first_screen:r.firstScreen?1:0,block:h,block_index:0,wrapper:c.NK.UNKNOWN,item:"block"};r.clickUrl&&(i.click_url=r.clickUrl);const l=y(y(y({},i),e),n),p=(0,d.L)();if(p)for(const[e,t]of Object.entries(p.params))l[e]=t;null==(s=window.clickdaemonLog)||s.call(window,o,l)}),[h,t,e])}},70776:(e,t,a)=>{a.d(t,{h:()=>s});var r=a(87363),n=a(60295);function s(e,t){const[a,s]=(0,r.useState)(!1),o=()=>{s(!0)};return(0,r.useEffect)((()=>{var r,s;!a&&(null==(r=null==e?void 0:e.current)?void 0:r.complete)&&(t&&(0,n.bS)(t,null==(s=null==e?void 0:e.current)?void 0:s.src),o())})),[o,a]}},482:(e,t,a)=>{a.d(t,{V:()=>w});var r=a(87363),n=a(83950),s=a(82027),o=Object.defineProperty,i=Object.defineProperties,l=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,h=(e,t,a)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,p=(e,t)=>{for(var a in t||(t={}))c.call(t,a)&&h(e,a,t[a]);if(d)for(var a of d(t))u.call(t,a)&&h(e,a,t[a]);return e},m=(e,t)=>i(e,l(t));const v=s.fl.show,g=.5,y=800,f="useOnShow";function w({ref:e,onShow:t,threshold:a=g,actionName:s=v,delay:o=y,observerId:i=f,ready:l=!0,checkIsShowing:d}){var c,u,h,w;const b=(0,r.useRef)(),E=(0,r.useRef)(!0),[k,S]=(0,r.useState)({action:{name:s},blockSize:{height:null!=(u=null==(c=null==e?void 0:e.current)?void 0:c.scrollHeight)?u:0,width:null!=(w=null==(h=null==e?void 0:e.current)?void 0:h.scrollWidth)?w:0},firstScreen:E.current}),A=(0,r.useCallback)((a=>{(null==e?void 0:e.current)&&t(a)}),[t,e]);return(0,r.useEffect)((()=>{const t=null==e?void 0:e.current;if(!t||!l)return;const r=(0,n.V)(i,{threshold:a});return r.observe(t,(e=>{if(!d||e.boundingClientRect.height>=1&&e.boundingClientRect.width>=1)return e.intersectionRatio<a?(E.current=!1,window.clearTimeout(b.current),void(b.current=void 0)):void(b.current||(b.current=window.setTimeout((()=>{const e=m(p({},k),{blockSize:{height:t.scrollHeight,width:t.scrollWidth},firstScreen:E.current});S(e),A(e),r.unobserve(t)}),o)))})),()=>r.unobserve(t)}),[l]),k}},77976:(e,t,a)=>{a.d(t,{Z:()=>o});var r=a(87363),n=a.n(r),s=a(17978);const o=()=>n().createElement(s.Z,{isFullscreen:!0})},90043:(e,t,a)=>{a.d(t,{f_:()=>o,ht:()=>n,hu:()=>s,lt:()=>l,rV:()=>i});var r=a(2203);const n=e=>({type:r.esH,payload:{value:e}}),s=e=>({type:r.iZl,payload:{value:e}}),o=e=>({type:r.OSx,payload:{value:e}}),i=e=>({type:r.E_7,payload:{value:e}}),l=e=>({type:r.Die,payload:{value:e}})},99226:(e,t,a)=>{a.d(t,{U:()=>n});var r=a(34812);function n(e,t){return(0,r.PH)(`redir/${e}`,((...a)=>({payload:{event:e,params:null==t?void 0:t(...a)}})))}},22355:(e,t,a)=>{a.d(t,{b:()=>r,y:()=>n});const r=e=>e.ui.isFullscreenActive,n=e=>e.ui.isFullscreenEnabled},37557:(e,t,a)=>{a.d(t,{C:()=>r});const r=a(53726).v9},92389:(e,t,a)=>{function r(e){var t;let a=document.querySelector(`.stack .${e}`);return a||(a=document.createElement("div"),a.setAttribute("class",e),null==(t=document.querySelector(".stack"))||t.appendChild(a)),a}a.d(t,{_:()=>r})},91521:(e,t,a)=>{a.d(t,{Z:()=>n,b:()=>r});const r="yandexGames_leaderboard_clicked",n="yandexGames_no_ads_clicked"},18546:(e,t,a)=>{a.d(t,{Z:()=>r});const r=(()=>{let e=Promise.resolve();return(t,a)=>e=((t,a)=>{return r=function*(){try{yield e}catch(e){console.error(e)}finally{yield fetch(t,a)}},new Promise(((e,t)=>{var a=e=>{try{s(r.next(e))}catch(e){t(e)}},n=e=>{try{s(r.throw(e))}catch(e){t(e)}},s=t=>t.done?e(t.value):Promise.resolve(t.value).then(a,n);s((r=r.apply(void 0,null)).next())}));var r})(t,a)})()},37930:(e,t,a)=>{a.d(t,{F:()=>i,v:()=>l});var r=a(15771),n=a(90380);const s=8,o=40;function i(){const e={};for(const[t,a]of Object.entries(l()))e[t]=a.join(",");return e}function l(){if(!0!==(0,r.RM)(window.appData.abt.flags,n.Z.advGoogleTestidsTargeting))return{};let e=0,t=0;function a(){t=0,e++}return window.appData.abt.testIds.sort(((e,t)=>(Number(e)||0)-(Number(t)||0))).reduce(((r,n,i)=>{t+=n.length,0!==i&&t>o&&a();const l=`testIds_${e}`;return r[l]||(r[l]=[]),r[l].push(n)>=s&&a(),r}),{})}},80346:(e,t,a)=>{a.d(t,{b:()=>l});var r=a(61224),n=a(40656),s=a(93298),o=a(15771);const i=(0,s.M$)("googlefc",s.XG.Adv,{background:"#123896",text:"white"}),l=()=>{window.googlefc=window.googlefc||{callbackQueue:[]};const{googlefc:e}=window;e.controlledMessagingFunction||(e.controlledMessagingFunction=e=>{return t=function*(){var t,a;return window.appData.isGamesLiteApp?(e.proceed(!1),void i("googlefc.controlledMessagingFunction message.proceed(false).\n(window.appData.isGamesLiteApp === true)")):(null===window.appData.advEnabledByPartner?(0,r.VX)():!window.appData.advEnabledByPartner)?(e.proceed(!1),void i("googlefc.controlledMessagingFunction message.proceed(false).\n(isDisabledByPartnerRestriction)")):((0,o.c6)((null==(a=null==(t=window.appData)?void 0:t.abt)?void 0:a.flags)||{})&&(i("googlefc.controlledMessagingFunction delay"),yield new Promise((e=>{var t;null==(t=window.tti)||t.ready((()=>{e()})),setTimeout((()=>{e()}),15*n.WT)}))),e.proceed(!0),void i("googlefc.controlledMessagingFunction default behaviour."))},new Promise(((e,a)=>{var r=e=>{try{s(t.next(e))}catch(e){a(e)}},n=e=>{try{s(t.throw(e))}catch(e){a(e)}},s=t=>t.done?e(t.value):Promise.resolve(t.value).then(r,n);s((t=t.apply(undefined,null)).next())}));var t})}},85623:(e,t,a)=>{a.d(t,{CX:()=>S,N5:()=>O,S$:()=>P,Vg:()=>D,bT:()=>C,xq:()=>T});var r=a(46210),n=(a(10719),a(84819)),s=a(48194),o=a(80346),i=a(99102),l=a(37930),d=a(33252),c=a(79049),u=a(40656),h=a(93298),p=a(13377),m=a(49659),v=Object.defineProperty,g=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,w=(e,t,a)=>t in e?v(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,b=(e,t)=>{for(var a in t||(t={}))y.call(t,a)&&w(e,a,t[a]);if(g)for(var a of g(t))f.call(t,a)&&w(e,a,t[a]);return e},E=(e,t,a)=>new Promise(((r,n)=>{var s=e=>{try{i(a.next(e))}catch(e){n(e)}},o=e=>{try{i(a.throw(e))}catch(e){n(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(s,o);i((a=a.apply(e,t)).next())}));const k=(0,h.M$)("GoogleTagUtils",h.XG.Adv,{background:"#0c6c09",text:"#ccc"}),S=8*u.WT,A=()=>Boolean(window.appData&&window.playPageData)?(0,n.v_)({on:"adv_interstitial.publift.enabled"})||(0,n.v_)({on:"adv_interstitial.instream_publift.enabled"}):(0,n.v_)({on:"adv_feed.publift.enabled"});let I;const P=()=>{if(A())return Promise.reject("Cannot load gpt script because publift provider is enabled");if(I)return I;(0,o.b)();const e=(0,r.gw)((0,m.e)().href);return I=(0,c.x)({id:"gpt-script",loadTest:()=>{var e;return Boolean(null==(e=window.googletag)?void 0:e.apiReady)},src:e?(0,r.DL)(e):"https://securepubads.g.doubleclick.net/tag/js/gpt.js"}),I},T=({metrikaCounter:e,parallel:t,prebidScriptUrl:a})=>{if(A())return Promise.reject("Cannot load gpt script because publift provider is enabled");const r={gpt:!1,prebid:!1},n=a?(0,c.x)({attributes:{ym:e},crossOrigin:"anonymous",id:"prebid_tgo",src:a}):null;return t?Promise.all([P().then((()=>r.gpt=!0)).catch((e=>r.gptError=e)),null==n?void 0:n.then((()=>r.prebid=!0)).catch((e=>r.prebidError=e))]).then((()=>r)).catch((()=>r)):P().then((()=>{r.gpt=!0})).catch((e=>r.gptError=e)).then((()=>{if(!r.gptError)return null==n?void 0:n.then((()=>r.prebid=!0)).catch((e=>r.prebidError=e))})).then((()=>r)).catch((()=>r))},C=e=>E(void 0,null,(function*(){return new Promise(((t,a)=>{window.googletag=window.googletag||{cmd:[]};const{googletag:r}=window;r.cmd||(r.cmd=[]),r.cmd.push((()=>E(void 0,null,(function*(){try{t(yield e(window.googletag))}catch(e){a(e)}}))))}))}));let R;const D=()=>E(void 0,null,(function*(){return R||(!0===(null==googletag?void 0:googletag.pubadsReady)&&k("googletagSetBaseConfig was called after googletag.enableServices()"),R=C((e=>{const t=e.pubads();(0,i.c)(t),t.enableSingleRequest(),t.disableInitialLoad(),h.HQ&&googletag.pubads().addEventListener("impressionViewable",(()=>{k('pubads event "impressionViewable" called')})).addEventListener("slotOnload",(()=>{k('pubads event "slotOnload" called')})).addEventListener("slotRenderEnded",(()=>{k('pubads event "slotRenderEnded" called')})).addEventListener("slotRequested",(()=>{k('pubads event "slotRequested" called')})).addEventListener("slotResponseReceived",(()=>{k('pubads event "slotResponseReceived" called')})).addEventListener("rewardedSlotReady",(()=>{k('pubads event "rewardedSlotReady" called')})).addEventListener("rewardedSlotGranted",(()=>{k('pubads event "rewardedSlotGranted" called')})).addEventListener("rewardedSlotClosed",(()=>{k('pubads event "rewardedSlotClosed" called')})),function(){return E(this,null,(function*(){const e=yield O(),t=googletag.pubads();k("setGoogleKeysForTargeting",e),Object.entries(e).forEach((([e,a])=>{t.setTargeting(e,a)}))}))}().then((()=>{R=Promise.resolve(),k("googletagSetBaseConfig"),!0===e.pubadsReady&&(0,d.H)({block:p.W.MONETIZATION,level:"error",message:"setGoogleKeysForTargeting finished after googletag.enableServices()"})}))}))),R}));let L;function O(){return L||(L=new s.Z(window.appData.apiData).getGoogleKeyValues({appID:window.clientMetadata.appId,lang:window.clientMetadata.lang,platform:window.clientMetadata.platform}).catch((e=>((0,d.H)({block:p.W.GOOGLE_ADS,message:"Trouble with getting google key values"},e),{}))).then((e=>(k("getGoogleKeysForTargeting",e),b(b({},(0,l.v)()),e))))),L}},99102:(e,t,a)=>{a.d(t,{c:()=>l});var r=a(14408),n=a(38096),s=a(49659);const o={hostname:()=>(0,s.e)().hostname,pathname:()=>(0,s.e)().pathname,protocol:()=>(0,s.e)().protocol,rootHostname:()=>{const{hostname:e}=(0,n.getDomainConfig)()||{},{tld:t}=window.appData||{};return e&&t?`${e}.${t}`:(0,s.e)().hostname}};var i=a(76488);const l=e=>{var t;if(!window.appData)return;const a=(0,r.om)(window.appData.abt.flags);if(void 0!==a&&!a.length)return;if(void 0===a){const e="stand"===window.appData.env.CROWD_TYPE;if(i.XK&&!e&&!(null==(t=window.appData.clientFeatures)?void 0:t.isDistrib))return}const n=(null!=a?a:"{rootHostname}").replace(/{(\w+)}/g,((e,t)=>{var a,r;return null!=(r=null==(a=o[t])?void 0:a.call(o))?r:""}));e.set("page_url",n)}},55231:(e,t,a)=>{a.d(t,{TE:()=>u});var r=a(40656),n=Object.defineProperty,s=Object.defineProperties,o=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,c=(e,t,a)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;r.WT;const u=r.WT;s(((e,t)=>{for(var a in t||(t={}))l.call(t,a)&&c(e,a,t[a]);if(i)for(var a of i(t))d.call(t,a)&&c(e,a,t[a]);return e})({},{default:[[300,250],[300,300]],wide:[[728,90],[750,200],[970,90],[970,250],[980,90],[980,120]]}),o({wide:[[728,90],[970,90],[970,250]]}))},38508:(e,t,a)=>{a.d(t,{M:()=>s});var r=a(24674),n=(a(38096),a(29483));function s(e,t){const{blockId:a,pageId:r}=t;let s="__getTextFromYandexAdvError_EMPTY_ERROR_TEXT__";if(e.text){const t=new RegExp((0,n.h)(a),"g");if(s=e.text.replace(t,"{see additional}"),"number"==typeof r){const e=new RegExp(`{see additional}_${r}`,"g");s=s.replace(e,"{see additional}_{see additional}")}}return s}(0,r.bb)(r.QQ.NewByera)},25562:(e,t,a)=>{a.d(t,{TG:()=>o,iv:()=>n}),a(15771),a(90380);const r=[[300,250],[300,300],[300,500],[300,600],[320,480],[336,280],[480,320]],n=e=>{const t=s(e);return i(r,t,140)},s=e=>120,o=e=>{const{maxAdvHeight:t,maxAdvWidth:a,sizes:r}=e,n=r.filter((e=>!(!Array.isArray(e)||"fluid"!==e[0])||e[0]<=a&&e[1]<=t));return 0===n.length?e.canReturnEmptyArray?[]:e.fallbackSizes?e.fallbackSizes:[r[0]]:n},i=(e,t=0,a=0)=>{if("undefined"==typeof window)return e;const r=window.innerWidth-t,n=window.innerHeight-a;return o({sizes:e,maxAdvWidth:r,maxAdvHeight:n})}},42873:(e,t,a)=>{a.d(t,{U:()=>s});const r=[{bidder:"cpmstar",params:{placementId:86543}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"pubmatic",params:{adSlot:"5337827",publisherId:"161759"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1872330,formatId:125925}},{bidder:"yandex",params:{impId:1,pageId:3907938}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}}],n=[{bidder:"pubmatic",params:{publisherId:"161759",adSlot:"5447199"}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1891309,formatId:125927}},{bidder:"cpmstar",params:{placementId:88076}},{bidder:"yandex",params:{impId:1,pageId:3907938}},{bidder:"smilewanted",params:{zoneId:"d-sail.com_hb_display"}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}}],s={playhop:{default:{catalog:{desktop:[{bidder:"cpmstar",params:{placementId:89042}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"pubmatic",params:{adSlot:"5342202",publisherId:"161759"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1872333,formatId:125929}},{bidder:"yandex",params:{impId:7,pageId:3907938}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}},{bidder:"pubrise",params:{placementId:"6"}}],mobile:[{bidder:"cpmstar",params:{placementId:89042}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"pubmatic",params:{adSlot:"5337846",publisherId:"161759"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1872333,formatId:125925}},{bidder:"yandex",params:{impId:8,pageId:3907938}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}}]},interstitial:{desktop:[{bidder:"cpmstar",params:{placementId:89042}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"pubmatic",params:{adSlot:"5337842",publisherId:"161759"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1872333,formatId:125927}},{bidder:"yandex",params:{impId:1,pageId:3907938}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}}],mobile:[{bidder:"cpmstar",params:{placementId:89042}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"pubmatic",params:{adSlot:"5337847",publisherId:"161759"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1872333,formatId:126085}},{bidder:"yandex",params:{impId:1,pageId:3907938}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}}]},sticky:{desktop:{sidebar_main:[{bidder:"cpmstar",params:{placementId:89042}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"pubmatic",params:{adSlot:"5337842",publisherId:"161759"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1872333,formatId:125936}},{bidder:"yandex",params:{impId:5,pageId:3907938}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}}],sidebar_small:[{bidder:"cpmstar",params:{placementId:89042}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"pubmatic",params:{adSlot:"5338845",publisherId:"161759"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1872333,formatId:126099}},{bidder:"yandex",params:{impId:6,pageId:3907938}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}}]},mobile:{landscape_bottom:[{bidder:"cpmstar",params:{placementId:89042}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"pubmatic",params:{adSlot:"5337848",publisherId:"161759"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1872333,formatId:126096}},{bidder:"yandex",params:{impId:2,pageId:3907938}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}}],portrait:[{bidder:"cpmstar",params:{placementId:89042}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"pubmatic",params:{adSlot:"5337850",publisherId:"161759"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1872333,formatId:126097}},{bidder:"yandex",params:{impId:3,pageId:3907938}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}}],portrait_high:[{bidder:"cpmstar",params:{placementId:89042}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"pubmatic",params:{adSlot:"5337849",publisherId:"161759"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1872333,formatId:126089}},{bidder:"yandex",params:{impId:4,pageId:3907938}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}}]}}},dsail:{catalog:{desktop:[{bidder:"adform",params:{adxDomain:"adx.adform.net",mid:1978547,priceType:"net"}},{bidder:"pubmatic",params:{publisherId:"161759",adSlot:"5342202"}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1872333,formatId:125929}},{bidder:"cpmstar",params:{placementId:89042}},{bidder:"yandex",params:{impId:7,pageId:3907938}},{bidder:"smilewanted",params:{zoneId:"d-sail.com_hb_display"}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}},{bidder:"pubrise",params:{placementId:"6"}}],mobile:[{bidder:"adform",params:{adxDomain:"adx.adform.net",mid:1978552,priceType:"net"}},{bidder:"pubmatic",params:{publisherId:"161759",adSlot:"5337846"}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1872333,formatId:125925}},{bidder:"cpmstar",params:{placementId:89042}},{bidder:"yandex",params:{impId:8,pageId:3907938}},{bidder:"smilewanted",params:{zoneId:"d-sail.com_hb_display"}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}},{bidder:"pubrise",params:{placementId:"14"}}]},interstitial:{desktop:[{bidder:"adform",params:{adxDomain:"adx.adform.net",mid:1978548,priceType:"net"}},{bidder:"pubmatic",params:{publisherId:"161759",adSlot:"5337843"}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1872333,formatId:125927}},{bidder:"cpmstar",params:{placementId:89042}},{bidder:"yandex",params:{impId:1,pageId:3907938}},{bidder:"smilewanted",params:{zoneId:"d-sail.com_hb_display"}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}},{bidder:"pubrise",params:{placementId:"10"}}],mobile:[{bidder:"adform",params:{adxDomain:"adx.adform.net",mid:1978554,priceType:"net"}},{bidder:"pubmatic",params:{publisherId:"161759",adSlot:"5337847"}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1872333,formatId:126085}},{bidder:"cpmstar",params:{placementId:89042}},{bidder:"yandex",params:{impId:1,pageId:3907938}},{bidder:"smilewanted",params:{zoneId:"d-sail.com_hb_display"}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}},{bidder:"pubrise",params:{placementId:"15"}}]},sticky:{desktop:{sidebar_main:[{bidder:"adform",params:{adxDomain:"adx.adform.net",mid:1978549,priceType:"net"}},{bidder:"pubmatic",params:{publisherId:"161759",adSlot:"5337844"}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1872333,formatId:125936}},{bidder:"cpmstar",params:{placementId:89042}},{bidder:"yandex",params:{impId:5,pageId:3907938}},{bidder:"smilewanted",params:{zoneId:"d-sail.com_hb_display"}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}},{bidder:"pubrise",params:{placementId:"11"}}],sidebar_small:[{bidder:"adform",params:{adxDomain:"adx.adform.net",mid:1978551,priceType:"net"}},{bidder:"pubmatic",params:{publisherId:"161759",adSlot:"5338845"}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1872333,formatId:126099}},{bidder:"cpmstar",params:{placementId:89042}},{bidder:"yandex",params:{impId:6,pageId:3907938}},{bidder:"smilewanted",params:{zoneId:"d-sail.com_hb_display"}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}},{bidder:"pubrise",params:{placementId:"13"}}]},mobile:{landscape_bottom:[{bidder:"adform",params:{adxDomain:"adx.adform.net",mid:1978563,priceType:"net"}},{bidder:"pubmatic",params:{publisherId:"161759",adSlot:"5337848"}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1872333,formatId:126096}},{bidder:"cpmstar",params:{placementId:89042}},{bidder:"yandex",params:{impId:2,pageId:3907938}},{bidder:"smilewanted",params:{zoneId:"d-sail.com_hb_display"}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}},{bidder:"pubrise",params:{placementId:"16"}}],portrait:[{bidder:"adform",params:{adxDomain:"adx.adform.net",mid:1978564,priceType:"net"}},{bidder:"pubmatic",params:{publisherId:"161759",adSlot:"5337850"}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1872333,formatId:126097}},{bidder:"cpmstar",params:{placementId:89042}},{bidder:"yandex",params:{impId:3,pageId:3907938}},{bidder:"smilewanted",params:{zoneId:"d-sail.com_hb_display"}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}},{bidder:"pubrise",params:{placementId:"18"}}],portrait_high:[{bidder:"adform",params:{adxDomain:"adx.adform.net",mid:1978565,priceType:"net"}},{bidder:"pubmatic",params:{publisherId:"161759",adSlot:"5337849"}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1872333,formatId:126089}},{bidder:"cpmstar",params:{placementId:89042}},{bidder:"yandex",params:{impId:4,pageId:3907938}},{bidder:"smilewanted",params:{zoneId:"d-sail.com_hb_display"}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}},{bidder:"pubrise",params:{placementId:"17"}}]}}}},yandex:{default:{catalog:{desktop:[{bidder:"cpmstar",params:{placementId:86541}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"pubmatic",params:{adSlot:"5337831",publisherId:"161759"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1872330,formatId:125929}},{bidder:"yandex",params:{impId:7,pageId:3907938}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}}],mobile:[{bidder:"cpmstar",params:{placementId:86543}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"pubmatic",params:{publisherId:"161759",adSlot:"5337837"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1872330,formatId:125924}},{bidder:"yandex",params:{impId:8,pageId:3907938}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}}]},interstitial:{desktop:r,mobile:r},sticky:{desktop:{sidebar_main:[{bidder:"cpmstar",params:{placementId:87338}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"pubmatic",params:{adSlot:"5337833",publisherId:"161759"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1872330,formatId:125927}},{bidder:"yandex",params:{impId:5,pageId:3907938}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}}],sidebar_small:[{bidder:"cpmstar",params:{placementId:87337}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"pubmatic",params:{adSlot:"5337834",publisherId:"161759"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1872330,formatId:126087}},{bidder:"yandex",params:{impId:6,pageId:3907938}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}}]},mobile:{landscape_bottom:[{bidder:"cpmstar",params:{placementId:87339}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"pubmatic",params:{adSlot:"5337836",publisherId:"161759"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1872330,formatId:126096}},{bidder:"yandex",params:{impId:2,pageId:3907938}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}}],portrait:[{bidder:"cpmstar",params:{placementId:87339}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"pubmatic",params:{adSlot:"5337829",publisherId:"161759"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1872330,formatId:126097}},{bidder:"yandex",params:{impId:3,pageId:3907938}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}}],portrait_high:[{bidder:"cpmstar",params:{placementId:87339}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"pubmatic",params:{adSlot:"5337830",publisherId:"161759"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1872330,formatId:126089}},{bidder:"yandex",params:{impId:4,pageId:3907938}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}}]}}},dsail:{catalog:{desktop:[{bidder:"pubmatic",params:{publisherId:"161759",adSlot:"5447203"}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1891309,formatId:125929}},{bidder:"cpmstar",params:{placementId:86544}},{bidder:"yandex",params:{impId:7,pageId:3907938}},{bidder:"smilewanted",params:{zoneId:"d-sail.com_hb_display"}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}}],mobile:[{bidder:"pubmatic",params:{publisherId:"161759",adSlot:"5447198"}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1891309,formatId:125924}},{bidder:"cpmstar",params:{placementId:86543}},{bidder:"yandex",params:{impId:8,pageId:3907938}},{bidder:"smilewanted",params:{zoneId:"d-sail.com_hb_display"}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}}]},interstitial:{desktop:n,mobile:n},sticky:{desktop:{sidebar_main:[{bidder:"pubmatic",params:{publisherId:"161759",adSlot:"5447206"}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1891309,formatId:126086}},{bidder:"cpmstar",params:{placementId:87419}},{bidder:"yandex",params:{impId:5,pageId:3907938}},{bidder:"smilewanted",params:{zoneId:"d-sail.com_hb_display"}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}}],sidebar_small:[{bidder:"pubmatic",params:{publisherId:"161759",adSlot:"5447207"}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1891309,formatId:126087}},{bidder:"cpmstar",params:{placementId:87420}},{bidder:"yandex",params:{impId:6,pageId:3907938}},{bidder:"smilewanted",params:{zoneId:"d-sail.com_hb_display"}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}}]},mobile:{landscape_bottom:[{bidder:"pubmatic",params:{publisherId:"161759",adSlot:"5447200"}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1891309,formatId:126096}},{bidder:"cpmstar",params:{placementId:87339}},{bidder:"yandex",params:{impId:2,pageId:3907938}},{bidder:"smilewanted",params:{zoneId:"d-sail.com_hb_display"}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}}],portrait:[{bidder:"pubmatic",params:{publisherId:"161759",adSlot:"5447201"}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1891309,formatId:126097}},{bidder:"cpmstar",params:{placementId:87339}},{bidder:"yandex",params:{impId:3,pageId:3907938}},{bidder:"smilewanted",params:{zoneId:"d-sail.com_hb_display"}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}}],portrait_high:[{bidder:"pubmatic",params:{publisherId:"161759",adSlot:"5447202"}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1891309,formatId:126089}},{bidder:"cpmstar",params:{placementId:87339}},{bidder:"yandex",params:{impId:4,pageId:3907938}},{bidder:"smilewanted",params:{zoneId:"d-sail.com_hb_display"}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}}]}}}}}},59886:(e,t,a)=>{a.d(t,{F7:()=>l,GG:()=>g,Hf:()=>h,Vc:()=>u,XI:()=>m,XO:()=>c,ZV:()=>p,cy:()=>d,kw:()=>v,wz:()=>o});var r=a(38096),n=a(25562),s=a(42873);const o={adServerCurrency:"EUR",conversionRateFile:`${"undefined"!=typeof window&&(null==(i=window.appData)?void 0:i.cdnUrl)?window.appData.cdnUrl:"https://yastatic.net/s3"}/games-static/static-data/prebid/currency-file@1/latest.json`,defaultRates:{EUR:{EUR:1,USD:1.1},USD:{EUR:.9,USD:1}}};var i;const l={buckets:[{increment:.01,max:3,precision:2},{increment:.1,max:10},{increment:.2,max:50}]},d={gdpr:{actionTimeout:1e4,cmpApi:"iab",defaultGdprScope:!0,rules:[{enforcePurpose:!0,enforceVendor:!0,purpose:"basicAds",vendorExceptions:["between","cpmstar","pubmatic","rtbhouse","smartadserver","yandex","pubrise"]},{purpose:"storage",enforcePurpose:!0,enforceVendor:!0,vendorExceptions:["novatiq"]}],timeout:5e3},usp:{cmpApi:"iab",timeout:100}};var c=(e=>(e.EMPTY_SLOT="Google slot event is empty",e.INSTREAM_EMPTY="Instream response is empty",e.NO_SLOT="googletag couldn't create gptSlot",e.RESPONSE_TIMEOUT="Response timeout",e))(c||{});const u=(e,t,a)=>{let o=(0,r.getDomainConfig)().adv.bidsServiceName;const i=s.U[o][t].interstitial[e];return{mediaTypes:{banner:{sizes:(0,n.iv)(a)}},bids:i}},h={},p=5e3,m=8e3,v=1e3,g={aws:"https://statics.games-storage-aws.yandex.net/statics/prebid/prebid8.10.0.js",yastatic:"https://yastatic.net/s3/games-static/static-data/prebid/prebid9.42.0.js"}},58098:(e,t,a)=>{a.d(t,{BA:()=>f,OH:()=>k,cQ:()=>y,cm:()=>S});var r=a(46210),n=a(38096),s=a(36529),o=a(59886),i=a(34967),l=a(68199),d=a(33252),c=a(93298),u=a(13377),h=a(15771),p=a(90380),m=a(49659),v=(e,t,a)=>new Promise(((r,n)=>{var s=e=>{try{i(a.next(e))}catch(e){n(e)}},o=e=>{try{i(a.throw(e))}catch(e){n(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(s,o);i((a=a.apply(e,t)).next())}));const g=(0,c.M$)("PrebidUtils",c.XG.Adv,{background:"#0c6c09",text:"#ccc"});function y({cdnUrl:e,flags:t,fullUrl:a,options:{isSlowCountry:n}}){const s=(0,r.xA)(a);if(s)return(0,r.Xv)(s);if((0,h.jX)(t))return o.GG.aws;let i=o.GG.yastatic;const d=(0,h.di)(t,p.Z.advPrebidScript);if(d){if(/^https:\/\//.test(d))return d;i=i.replace(/(?:\d+\.){1,2}\d+(\.js)$/,`${d}$1`)}return(0,l.R)(n)&&e&&(i=i.replace("https://yastatic.net/s3",e)),i}const f=e=>v(void 0,null,(function*(){return new Promise((t=>{window.pbjs=window.pbjs||{que:[]};const{pbjs:a}=window;a.que.push((()=>v(void 0,null,(function*(){t(yield e(a))}))))}))}));function w(){const e=new URL((0,m.e)().href);return e.hostname=e.hostname.replace(/^.+\.([a-z0-9]+(\.com)?\.[a-z]+)$/,"$1"),e.search="",e.hash="",e.href}const b=5e3;let E;function k(){return E||(E=new Promise((e=>{(function(){let e=!1;return Promise.race([f((t=>v(this,null,(function*(){g("Set prebid config"),e=!0,t.setConfig({consentManagement:o.cy,currency:o.wz,debug:c.HQ,deviceAccess:!0,enableTIDs:!0,enableSendAllBids:!0,eventHistoryTTL:120,fetchBids:!0,minBidCacheTTL:1e3,pageUrl:w(),priceGranularity:o.F7,targetingControls:{allowTargetingKeys:["BIDDER","AD_ID","PRICE_BUCKET","SIZE","DEAL","SOURCE","FORMAT","UUID","CACHE_ID","CACHE_HOST","ADOMAIN","ACAT","CRID","DSP"],allowSendAllBidsTargetingKeys:["BIDDER","AD_ID","PRICE_BUCKET","SIZE","DEAL","SOURCE","FORMAT","UUID","CACHE_ID","CACHE_HOST","ADOMAIN","ACAT","CRID","DSP"]},schain:{validation:"strict",config:{ver:"1.0",complete:1,nodes:[{asi:"d-sail.com",sid:"ds0683",hp:1}]}},transmitTid:!0,userSync:{filterSettings:{iframe:{bidders:"*",filter:"include"}},iframeEnabled:!0,syncEnabled:!0}});const a=(0,n.getDomainConfig)().adv.shared.google.prebidConfigOverrides||null;a&&t.mergeConfig(a),t.setBidderConfig({bidders:["adform"],config:{schain:{validation:"strict",config:{ver:"1.0",complete:1,nodes:[{asi:"adform.com",sid:"3213",hp:1},{asi:"d-sail.com",sid:"ds0683",hp:1}]}}}},!0),function(e){const t=[],a=(0,i.NR)();a&&e.installedModules.includes("yandexAnalyticsAdapter")&&t.push({provider:"yandex",options:{counters:[a]}}),t.length&&e.enableAnalytics(t)}(t),c.HQ&&function(e){e.onEvent("auctionInit",(()=>{g("Auction init")})),e.onEvent("auctionEnd",(t=>{const a=t.bidsReceived.length?"success":"empty",r="success"===a?e.getHighestCpmBids().map((e=>({ad:e.ad,adunit:e.adUnitCode,adId:e.adId,bidder:e.bidder,cpm:e.cpm,size:e.size,time:e.timeToRespond}))):void 0;g(`Auction end with status = ${a}; result = ${JSON.stringify(r,null,"\t")}`)})),e.onEvent("bidderError",(function(e){var t;const{bidderRequest:a}=e,r=null==(t=a.bids[0])?void 0:t.adUnitCode;g(`Bidder error code = ${a.bidderCode}; adUnitCode = ${r}`)})),e.onEvent("noBid",(function(e){const{adUnitCode:t}=e;g(`No bid for adUnitCode = ${t}`)})),e.onEvent("adRenderFailed",(e=>{g("adRenderFailed, bidder =",e.bid.bidder)})),e.onEvent("adRenderSucceeded",(e=>{g("adRenderSucceeded, bidder =",e.bid.bidder)}))}(t)})))),(0,s.D)(b).then((()=>{e||(g("Config was not set."),(0,d.H)({block:u.W.ADV},new Error("[prebid_tgo] Config was not set (canceled by timeout)")))}))])})().finally((()=>{E=Promise.resolve(),e()}))}))),E}function S(e){return(0,h.$9)(e,p.Z.advPrebidAuctionTimeout)||o.ZV}},78569:(e,t,a)=>{a.d(t,{H:()=>n});var r=a(33252);function n({adUnitCodes:e,advTag:t,bids:a}){for(let n of e){const e=null==a?void 0:a[n];if(e){const a=e.bids[0];(0,r.Kz)("prebid_auction","",{additional:{tag:t,bidder:a.bidder,currency:a.currency,originalCurrency:a.originalCurrency,size:a.size}})}else(0,r.Kz)("prebid_auction","",{additional:{tag:t,bidder:"none"}})}}},3436:(e,t,a)=>{let r;a.d(t,{R:()=>r});try{new EventTarget,r=EventTarget}catch(e){class t{constructor(){this.eventListeners={}}addEventListener(e,t){this.eventListeners[e]=this.eventListeners[e]||[],this.eventListeners[e].push(t)}removeEventListener(e,t){this.eventListeners[e]&&(this.eventListeners[e]=this.eventListeners[e].filter((e=>e!==t)))}dispatchEvent(e){const t=e.type;for(const a of this.eventListeners[t]||[]){const t="handleEvent"in a?a.handleEvent:a;try{t.apply(a,[e])}catch(e){}}return!e.defaultPrevented}}r=t}},73285:(e,t,a)=>{function r(e){if(!e)return"";const t={"&amp;":"&","&#39;":"'","&quot;":'"'};return e.replace(/&amp;|&#39;|&quot;/g,(e=>t[e]))}a.d(t,{T:()=>r})},92477:(e,t,a)=>{a.d(t,{T:()=>n});var r=a(38699);const n=e=>"kz"===e?"kz":r.u5.includes(e)?"com":"ru"},20613:(e,t,a)=>{a.d(t,{S:()=>n});var r=a(41811);const n=()=>{var e;if("undefined"!=typeof window)try{const t=(null==(e=window.appData.location)?void 0:e.entryQuery)||{};if(t[r.Uq])return JSON.parse(decodeURIComponent(t[r.Uq]))}catch(e){}return{}}},61224:(e,t,a)=>{a.d(t,{$g:()=>n,VX:()=>i,kH:()=>o});const r=3e3;function n(e){return Date.now()-e>r}let s;const o=()=>{var e;return void 0===s&&(s=Date.now()),"function"==typeof(null==(e=window.PARTNERS_KIT)?void 0:e.isAdsEnabled)?!1===window.PARTNERS_KIT.isAdsEnabled():!n(s)&&void 0},i=()=>!1!==o()},79409:(e,t,a)=>{function r(e,t){return Boolean(0===(null==t?void 0:t.length)||(null==t?void 0:t.some((t=>t===e))))}a.d(t,{w:()=>r})},81442:(e,t,a)=>{a.d(t,{r:()=>n});var r=a(58432);const n=()=>"object"==typeof window&&"2735850"===(0,r.KT)()},11744:(e,t,a)=>{a.d(t,{Z:()=>o});var r=a(50042),n=a(33252),s=a(13377);const o=function(){const e=(0,r.Au)(),t=(0,r.H$)(),a=(0,r.Um)(),o=(0,r.q7)();try{if(window.yandex&&window.yandex.app&&"function"==typeof PaymentRequest&&t&&(e||o&&a))return!0}catch(e){(0,n.H)({block:s.W.PAYMENT},e)}return!1}},51290:(e,t,a)=>{a.d(t,{U:()=>I});var r=a(98816),n=a(22823),s=a(34711),o=a(7991),i=a(20613);const l=/testing/i;var d=a(97553),c=a(33252),u=a(93298),h=a(13377),p=a(99725),m=Object.defineProperty,v=Object.defineProperties,g=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable,b=(e,t,a)=>t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,E=(e,t)=>{for(var a in t||(t={}))f.call(t,a)&&b(e,a,t[a]);if(y)for(var a of y(t))w.call(t,a)&&b(e,a,t[a]);return e};const k=(0,u.M$)("log-adv",u.XG.Adv),S=Date.now(),A={[r.$H.ANCHOR]:0,[r.$H.CATALOG]:0,[r.$H.FEED_GRID]:0,[r.$H.INTERSTITIAL]:0,[r.$H.REWARDED]:0,[r.$H.STICKY]:0};class I{constructor(e){this.startTime=-1,this.requestStartTime=-1,this.showStartTime=-1,this.previousEventNames=[],this.additional=Object.assign(this.getGeneralEventParams(),e)}get adReqId(){return this.additional.ad_req_id}tag(e){return this.additional.tag=e,this}bindRequest(e){this.additional.ad_req_id=e.additional.ad_req_id}copy(e={}){const t=Object.assign(Object.create(Object.getPrototypeOf(this)),this);return t.previousEventNames=[...this.previousEventNames],t.additional=E(E({},this.additional),e),t}getGeneralEventParams(){const e={},t=(0,s.X)();t&&(e.clid=String(t));const a=(0,o.W5)();a&&(e.gclid=String(a));const r=(0,n.L)();if(r)for(const[t,a]of Object.entries(r.params))e[t]=a;return e}logError(e,t={}){const a=new Error(e);a.additional=t,(0,c.H)({prefix:"Adv ClickDaemon error",block:h.W.ADV,additional:t},a)}checkOrder(e,t){this.previousEventNames.includes(e)||this.logError(`No preceding ${e} event call before ${t}`)}sendLog(e,t={}){var a,r,n,s;n=E(E({},this.additional),t),s={documentHidden:"hidden"===document.visibilityState},(t=v(n,g(s))).exclude_from_alerts=(e=>l.test(e.adv_block_id))(t),-1!==this.startTime&&(t.timeshift=Date.now()-this.startTime||-1),(null==(a=t.provider)?void 0:a.includes("_block"))&&(t.provider=t.provider.replace("_block","")),t.provider&&!t.advtype&&(t.advtype=t.provider),this.previousEventNames.push(e),u.HQ&&k("clickdaemon",`adv2_${e}`,t),null==(r=window.clickdaemonLog)||r.call(window,`adv_${e}`,t)}hadEvent(e){return this.previousEventNames.includes(e)}tryOpen({provider:e,reason:t}){this.additional.ad_seq_id=(0,p.w)(),this.additional.reason=t,e&&(this.additional.provider=e);const a={pageShow:++A[this.additional.tag],pageStartTime:Date.now()-S};this.sendLog(d.zL.TRY_OPEN,a),this.startTime=Date.now()}noAdv(){this.checkOrder(d.zL.TRY_OPEN,d.zL.NO_ADV),this.sendLog(d.zL.NO_ADV)}skip(e){this.checkOrder(d.zL.TRY_OPEN,d.zL.SKIP),this.sendLog(d.zL.SKIP,{reason:e})}rateLimited(e){this.checkOrder(d.zL.TRY_OPEN,d.zL.RATE_LIMITED),this.sendLog(d.zL.RATE_LIMITED,{reason:e})}demand({advBlockId:e,depth:t,provider:a,reason:r}){this.checkOrder(d.zL.TRY_OPEN,d.zL.DEMAND),this.additional.adv_block_id=e,this.additional.depth=null!=t?t:0,a&&(this.additional.provider=a),r&&(this.additional.reason=r),this.sendLog(d.zL.DEMAND)}waterfall({advBlockId:e,depth:t,provider:a,reason:r,tag:n}){this.checkOrder(d.zL.DEMAND,d.zL.WATERFALL),n&&(this.additional.tag=n),this.additional.provider=a,this.additional.adv_block_id=e,this.additional.depth=t,this.additional.reason=r,this.sendLog(d.zL.WATERFALL)}request(e){e||this.checkOrder(d.zL.DEMAND,d.zL.REQUEST),this.requestStartTime=Date.now(),e&&("advBlockId"in e&&(this.additional.adv_block_id=e.advBlockId),"reason"in e&&(this.additional.reason=e.reason),"provider"in e&&(this.additional.provider=e.provider),"retry"in e&&e.retry&&(this.additional.retry=e.retry)),this.additional.ad_req_id=e&&"adReqId"in e?e.adReqId:(0,p.w)();const t={};void 0!==this.highestCpmBidder&&(t.highestCpmBidder=this.highestCpmBidder),this.sendLog(d.zL.REQUEST,t)}response(){this.checkOrder(d.zL.REQUEST,d.zL.RESPONSE);const e={reason:"success",time_to_close:-1===this.requestStartTime?-1:Date.now()-this.requestStartTime};void 0!==this.highestCpmBidder&&(e.highestCpmBidder=this.highestCpmBidder),this.sendLog(d.zL.RESPONSE,e)}responseEmpty(){this.checkOrder(d.zL.REQUEST,d.zL.RESPONSE_EMPTY);const e={time_to_close:-1===this.requestStartTime?-1:Date.now()-this.requestStartTime};void 0!==this.highestCpmBidder&&(e.highestCpmBidder=this.highestCpmBidder),this.sendLog(d.zL.RESPONSE_EMPTY,e)}show(){this.checkOrder(d.zL.DEMAND,d.zL.SHOW),this.showStartTime=Date.now();const e=(0,i.S)(),t={},a=this.additional.rtx_reqid||e.rtx_reqid,r=this.additional.request_id||e.request_id;void 0!==a&&(t.rtx_reqid=a),void 0!==r&&(t.request_id=r),this.sendLog(d.zL.SHOW,t)}click(){this.checkOrder(d.zL.SHOW,d.zL.CLICK),this.sendLog(d.zL.CLICK)}rewarded(){this.checkOrder(d.zL.SHOW,d.zL.REWARDED),this.sendLog(d.zL.REWARDED)}close(){this.checkOrder(d.zL.SHOW,d.zL.CLOSE),this.sendLog(d.zL.CLOSE,{time_to_close:-1===this.showStartTime?-1:Date.now()-this.showStartTime})}noContent(){this.checkOrder(d.zL.RESPONSE_EMPTY,d.zL.NO_CONTENT),this.sendLog(d.zL.NO_CONTENT)}fail(e){this.sendLog(d.zL.FAIL,{reason:String(e)})}error(e){this.sendLog(d.zL.ERROR,{reason:String(e)})}}},97553:(e,t,a)=>{a.d(t,{Ud:()=>n,p_:()=>r,zL:()=>s}),a(98816);var r=(e=>(e.ONSPOT="onspot",e.PRELOAD="preload",e.PRELOAD_WATERFALL="preload_waterfall",e.REFRESH="refresh",e.START_FULLSCREEN="start_fullscreen",e.WATERFALL="waterfall",e))(r||{}),n=(e=>(e.EMPTY="empty",e.ERROR="error",e.NOT_IMPL="not_impl",e.SUCCESS="success",e))(n||{}),s=(e=>(e.CLICK="click",e.CLOSE="close",e.DEMAND="demand",e.ERROR="error",e.FAIL="fail",e.NO_ADV="no_adv",e.NO_CONTENT="no_content",e.RATE_LIMITED="rate_limited",e.REQUEST="request",e.RERENDER="rerender",e.RESPONSE="response",e.RESPONSE_EMPTY="response_empty",e.REWARDED="rewarded",e.SHOW="show",e.SKIP="skip",e.TRY_OPEN="try_open",e.WATERFALL="waterfall",e))(s||{})},33448:(e,t,a)=>{a.d(t,{p:()=>l});var r=a(65751),n=a(25628),s=a(41811),o=a(49659);const i=(0,a(71704).v)((function({isPathsMappingEnabled:e,pathsMapping:t},a,r){var o,i;const l=e?`${r}/:lang?${(0,s.z)(t)}/:pageAppID`:`${r}/:lang?/app/:pageAppID`;return null==(i=null==(o=(0,n.LX)({path:l,end:!0},a))?void 0:o.params)?void 0:i.pageAppID}));function l(e,t){const{pathname:a,search:n}=(0,o.e)();return function(e){return r.parse(e.slice(1)).app}(n)||i(e,a,t)}},72538:(e,t,a)=>{a.d(t,{Z:()=>y});var r=a(93298),n=Object.defineProperty,s=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,l=(e,t,a)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,d=(e,t)=>{for(var a in t||(t={}))o.call(t,a)&&l(e,a,t[a]);if(s)for(var a of s(t))i.call(t,a)&&l(e,a,t[a]);return e};a(91844);const c=["height","width"],u=["top","left","right","bottom"],h=[...c,...u],p="game",m=[".game",".play-guard-dialog",".merge-conflicts",".guard"],v=(0,r.M$)("ResizeBlockManager",r.XG.Dev,{background:"#c7aa00"}),g="ResizeBlockManager",y=new class{constructor(){if(this.rootElements=[],this.blocks={},this.resizeBlocks={},this.resizes={},this.resizeListeners={},this.getObserverCallback=(e,t,a)=>(r,n)=>{const s=e.querySelector(t);s&&(n.disconnect(),a(s))},"undefined"==typeof window)return;let e;try{window.parent[g],e=window.parent}catch(t){e=window}if(e[g]){const t=e[g];t.rootElements.includes(window.document.body)||(t.rootElements.push(window.document.body),t.updateBlocks(),t.applyResizeBlocks("new rootElement"))}else e[g]=this,this.rootElements=[window.document.body];return e[g]}addResizeBlockListener(e,t,a=!0){var r;v("addListener",e),this.resizeListeners[e]||(this.resizeListeners[e]=[]);const n=this.resizeListeners[e];if(-1===n.indexOf(t)){if(n.push(t),a){const t=e===p?".game":e;this.resizeBlocks[t]&&this.callbackBlock(e,null!=(r=this.resizeBlocks[t])?r:{})}}else v("try to add existing listener, ",e)}removeResizeBlockListener(e,t){if(v("removeListener",e),!this.resizeListeners[e])return;const a=this.resizeListeners[e],r=a.indexOf(t);-1!==r&&a.splice(r,1)}addResizeBlock(e,t){v("addResize",e,t),this.resizes[e]=t,this.calcResizeBlocks(),this.updateBlocks(),this.applyResizeBlocks("addResizeBlock")}removeResizeBlock(e){v("removeResize",e),this.resizes[e]&&(delete this.resizes[e],this.calcResizeBlocks(),this.updateBlocks(),this.applyResizeBlocks("removeResizeBlock"))}findHTMLElement(e){let t=null;for(const a of this.rootElements)if(t=a.querySelector(e),t)break;if(t)return void(this.blocks[e]=t);v("create MutationObserver for ",e);const a=this.rootElements.map((t=>{const a=new MutationObserver(this.getObserverCallback(t,e,(t=>{this.blocks[e]=t,this.applyResizeBlocks("block found "+e)})));return a.observe(t,{childList:!0}),a}));this.blocks[e]=a}updateBlocks(){for(const e in this.blocks){if(void 0!==this.resizeBlocks[e])continue;const t=this.blocks[e];t instanceof Array?(t.forEach((e=>{e.disconnect()})),delete this.blocks[e]):(this.clearResizeBlock(e,this.blocks[e]),delete this.blocks[e])}for(const e in this.resizeBlocks)void 0===this.blocks[e]&&this.findHTMLElement(e)}calcResizeBlocks(){const e={};for(const t in this.resizes){const a=this.resizes[t];for(const t in a)if(a[t])if(t===p)for(const r of m)this.calcResizeParam(e,a[t],r);else this.calcResizeParam(e,a[t],t)}this.resizeBlocks=e}calcResizeParam(e,t,a){var r,n;let s=e[a];s||(s={},e[a]=s);for(const e of h)s[e]=(null!=(r=s[e])?r:0)+(null!=(n=t[e])?n:0)}applyResizeBlocks(e="unknown"){v(`applyResize (${e})`,this.resizeBlocks,this.blocks);for(const e in this.resizeBlocks){const t=this.blocks[e];if(!t||Array.isArray(t))continue;const a=this.resizeBlocks[e];for(const e of u)(null==a?void 0:a[e])?t.style[e]=a[e]+"px":t.style.removeProperty(e);for(const e of c)(null==a?void 0:a[e])?t.style[e]=`calc(100% + ${a[e]}px)`:t.style.removeProperty(e);this.callbackBlock(e,null!=a?a:{})}}clearResizeBlock(e,t){for(const e of h)t.style.removeProperty(e);this.callbackBlock(e,{})}callbackBlock(e,t){var a;if(".game"===e&&this.callbackBlock(p,t),null==(a=this.resizeListeners[e])?void 0:a.length)for(const a of this.resizeListeners[e])a(e,d({top:0,left:0,right:0,bottom:0,width:0,height:0},t))}removeDefaultClass(e){const t=window.document.body;Array.from(t.classList).forEach((a=>{e.forEach((e=>{a.startsWith(e)&&t.classList.remove(a)}))}))}}},909:(e,t,a)=>{a.d(t,{Z:()=>i});var r=a(97808),n=a(91521),s=a(48810),o=a(41811);function i(){(0,s.Ur)(n.Z,"true"),r.Z.post({type:"payments",action:"platform-purchase-start",data:{paymentsConfig:{},purchaseConfig:{id:o.U0.NO_ADS_ONE_DAY,developerPayload:""}}})}},67631:(e,t,a)=>{a.d(t,{w:()=>r});const r=(e,t="https://yastatic.net/s3")=>e.replace("%CDN_URL%",t)},65562:(e,t,a)=>{a.d(t,{G:()=>n,g:()=>s});var r=a(26256);const n=e=>Boolean((null==e?void 0:e.BrowserName)&&/Safari/i.test(e.BrowserName)),s=e=>(null==e?void 0:e.OSFamily)===r.k.IOS},56213:(e,t,a)=>{a.r(t),a.d(t,{default:()=>r});const r={label:"checkbox-desktop-critical-module__label--GXRye"}},33777:(e,t,a)=>{a.r(t)},57647:(e,t,a)=>{a.r(t)},39510:(e,t,a)=>{a.r(t)},75801:(e,t,a)=>{a.r(t)},523:(e,t,a)=>{a.r(t)},91844:(e,t,a)=>{a.r(t)}}]);
//# sourceMappingURL=https://s3.mdst.yandex.net/games/source-maps/_/build/client/game/desktop/playhop/GameBody.component.async.8d5fc354de6499eaecd1.js.map